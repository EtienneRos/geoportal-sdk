/*!
 * @brief Geoportal SDK
 *
 * This software is released under the licence CeCILL-B (Free BSD compatible)
 * @see http://www.cecill.info/licences/Licence_CeCILL-B_V1-en.txt
 * @see http://www.cecill.info/licences/Licence_CeCILL-B_V1-fr.txt
 * @see http://www.cecill.info/
 *
 * copyright CeCILL-B
 * copyright IGN
 * @author IGN
 * @version 1.3.0
 * @date 2018-06-25
 *
 */
/*!
 * OpenLayers. See http://openlayers.org/
 * License: https://raw.githubusercontent.com/openlayers/ol3/master/LICENSE.md
 * Version: 4.2.0
 */
/*!
 * Geoportal Extension for OpenLayers. See https://github.com/IGNF/geoportal-extensions
 * License: https://raw.githubusercontent.com/IGNF/geoportal-extensions/master/LICENCE.md
 * Version: 2.0.0
 */
 /*!
 * iTowns. See http://www.itowns-project.org/
 * License: https://github.com/iTowns/itowns/blob/master/LICENSE.md
 * Version: 2.3.0
 */
/*!
 * Geoportal Extension for iTowns. See https://github.com/IGNF/geoportal-extensions
 * License: https://raw.githubusercontent.com/IGNF/geoportal-extensions/master/LICENCE.md
 * Version: 2.0.0
 */
;(function(root, factory) {
  if (typeof define === 'function' && define.amd) {
    define([], factory);
  } else if (typeof exports === 'object') {
    module.exports = factory();
  } else {
    root.Gp = factory();
  }
}(this, function() {
var log4js,loggerCfg,UtilsLoggerByDefault,UtilsLoader,IMap,it2IT,ol3OL3,Map,AHN;log4js=void 0,loggerCfg={loggers:[{root:!0,level:"all",appenders:[{type:"Console",layout:{type:"PatternLayout",pattern:"%d{yyyy-MM-dd HH:mm:ss} [%p] %c - %m%n"}}]}]},UtilsLoggerByDefault=function(t,e){return{getLogger:function(o){return t.load(e,function(t){if(t)throw t}),t.getLogger(o||"default")}}}(log4js,loggerCfg),UtilsLoader=function(){return{loadEngine:function(t,e,o,i){i||(i=this);var n="undefined"!=typeof window?window:"undefined"!=typeof self?self:this;if(document.getElementById("engine-itowns"))return void e.call(i,n.itowns||{});var r=document.createElement("script");r.id="engine-itowns",r.src=t,r.async="async",null!==e&&(r.readyState?r.onreadystatechange=function(){"loaded"!=r.readyState&&"complete"!=r.readyState||(r.onreadystatechange=null,e.call(i,n.itowns||{}))}:(r.onload=function(){e.call(i,n.itowns||{})},null!==o&&(r.onerror=function(t){o.call(i,t)})));var s=document.getElementsByTagName("script")[0];s.parentNode.insertBefore(r,s)},getCurrentPath:function(){var t=document.currentScript?document.currentScript.src:function(){var t=document.getElementsByTagName("script");return t[t.length-1].src}();return t=t.substr(0,t.lastIndexOf("/")+1)},getPath:function(t){for(var e="",o=document.getElementsByTagName("script"),i=0;i<o.length;++i){var n=o[i].getAttribute("src");if(-1!==n.indexOf(t)){var r=document.createElement("a");r.href=n,e=r.origin+r.pathname.substring(0,r.pathname.lastIndexOf("/")+1);break}}return e},getEnginePath:function(t){var e="";if(t){var o="";t.lastIndexOf("/")===t.length-1&&(o="/"),e=t+o+"itowns.js"}else e=this.getCurrentPath()+"itowns.js";return e}}}(),function(t,e){"object"==typeof exports?module.exports=e():"function"==typeof define&&define.amd?define("ol",[],e):t.ol=e()}(this,function(){function t(t,e){var o=dg;t=t.split("."),o=o||fg,t[0]in o||!o.execScript||o.execScript("var "+t[0]);for(var i;t.length&&(i=t.shift());)t.length||void 0===e?o=o[i]&&o[i]!==Object.prototype[i]?o[i]:o[i]={}:o[i]=e}function e(t,e){return t>e?1:t<e?-1:0}function o(t,e){return 0<=t.indexOf(e)}function i(t,e,o){var i=t.length;if(t[0]<=e)return 0;if(!(e<=t[i-1]))if(0<o){for(o=1;o<i;++o)if(t[o]<e)return o-1}else if(0>o){for(o=1;o<i;++o)if(t[o]<=e)return o}else for(o=1;o<i;++o){if(t[o]==e)return o;if(t[o]<e)return t[o-1]-e<e-t[o]?o-1:o}return i-1}function n(t,e){var o=Array.isArray(e)?e:[e],i=o.length;for(e=0;e<i;e++)t[t.length]=o[e]}function r(t,e){-1<(e=t.indexOf(e))&&t.splice(e,1)}function s(t,e){for(var o,i=t.length>>>0,n=0;n<i;n++)if(o=t[n],e(o,n,t))return o;return null}function a(t,e){var o=t.length;if(o!==e.length)return!1;for(var i=0;i<o;i++)if(t[i]!==e[i])return!1;return!0}function l(t){var e,o=Cr,i=t.length,n=Array(t.length);for(e=0;e<i;e++)n[e]={index:e,value:t[e]};for(n.sort(function(t,e){return o(t.value,e.value)||t.index-e.index}),e=0;e<t.length;e++)t[e]=n[e].value}function p(t,e){var o;return t.every(function(i,n){return o=n,!e(i,n,t)})?-1:o}function c(t,o){var i=o||e;return t.every(function(e,o){return!o||!(0<(e=i(t[o-1],e))||0===e)})}function u(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}function h(){}function d(t){return t.Vo||(t.Vo=++yg)}function f(t){this.message="Assertion failed. See https://openlayers.org/en/v4.2.0/doc/errors/#"+t+" for details.",this.code=t,this.name="AssertionError"}function y(t,e){if(!t)throw new f(e)}function g(t,e,o,i){this.ca=t,this.$=e,this.da=o,this.ia=i}function m(t,e,o){return t.ca<=e&&e<=t.$&&t.da<=o&&o<=t.ia}function v(t,e){return t.ca==e.ca&&t.da==e.da&&t.$==e.$&&t.ia==e.ia}function _(t,e){return t.ca<=e.$&&t.$>=e.ca&&t.da<=e.ia&&t.ia>=e.da}function b(t,e,o){return Math.min(Math.max(t,e),o)}function E(t){return y(0<t,29),Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))}function S(t,e,o,i,n,r){var s=n-o,a=r-i;if(s||a){var l=((t-o)*s+(e-i)*a)/(s*s+a*a);1<l?(o=n,i=r):0<l&&(o+=s*l,i+=a*l)}return w(t,e,o,i)}function w(t,e,o,i){return t=o-t,e=i-e,t*t+e*e}function P(t){return t*Math.PI/180}function C(t,e){return t%=e,0>t*e?t+e:t}function A(t,e,o){return t+o*(e-t)}function M(t,e,o){return void 0===o&&(o=[0,0]),o[0]=t[0]+2*e,o[1]=t[1]+2*e,o}function x(t,e,o){return void 0===o&&(o=[0,0]),o[0]=t[0]*e+.5|0,o[1]=t[1]*e+.5|0,o}function R(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:e[0]=e[1]=t,e)}function I(t){for(var e=j(),o=0,i=t.length;o<i;++o)q(e,t[o]);return e}function T(t,e,o){return o?(o[0]=t[0]-e,o[1]=t[1]-e,o[2]=t[2]+e,o[3]=t[3]+e,o):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function L(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function G(t,e,o){return e=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,t=o<t[1]?t[1]-o:t[3]<o?o-t[3]:0,e*e+t*t}function O(t,e){return k(t,e[0],e[1])}function N(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function k(t,e,o){return t[0]<=e&&e<=t[2]&&t[1]<=o&&o<=t[3]}function D(t,e){var o=t[1],i=t[2],n=t[3],r=e[0];e=e[1];var s=0;return r<t[0]?s|=16:r>i&&(s|=4),e<o?s|=8:e>n&&(s|=2),s||(s=1),s}function j(){return[1/0,1/0,-1/0,-1/0]}function F(t,e,o,i,n){return n?(n[0]=t,n[1]=e,n[2]=o,n[3]=i,n):[t,e,o,i]}function U(t){return F(1/0,1/0,-1/0,-1/0,t)}function B(t,e){var o=t[0];return t=t[1],F(o,t,o,t,e)}function V(t,e,o,i,n){return n=U(n),H(n,t,e,o,i)}function W(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function z(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function q(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function H(t,e,o,i,n){for(;o<i;o+=n){var r=t,s=e[o],a=e[o+1];r[0]=Math.min(r[0],s),r[1]=Math.min(r[1],a),r[2]=Math.max(r[2],s),r[3]=Math.max(r[3],a)}return t}function Y(t,e,o){var i;return(i=e.call(o,K(t)))||(i=e.call(o,X(t)))||(i=e.call(o,ot(t)))?i:!!(i=e.call(o,et(t)))&&i}function Z(t){var e=0;return rt(t)||(e=it(t)*$(t)),e}function K(t){return[t[0],t[1]]}function X(t){return[t[2],t[1]]}function J(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Q(t,e,o,i,n){var r=e*i[0]/2;i=e*i[1]/2,e=Math.cos(o);var s=Math.sin(o);o=r*e,r*=s,e*=i;var a=i*s,l=t[0],p=t[1];t=l-o+a,i=l-o-a,s=l+o-a,o=l+o+a;var a=p-r-e,l=p-r+e,c=p+r+e,r=p+r-e;return F(Math.min(t,i,s,o),Math.min(a,l,c,r),Math.max(t,i,s,o),Math.max(a,l,c,r),n)}function $(t){return t[3]-t[1]}function tt(t,e,o){return o=o||j(),nt(t,e)&&(o[0]=t[0]>e[0]?t[0]:e[0],o[1]=t[1]>e[1]?t[1]:e[1],o[2]=t[2]<e[2]?t[2]:e[2],o[3]=t[3]<e[3]?t[3]:e[3]),o}function et(t){return[t[0],t[3]]}function ot(t){return[t[2],t[3]]}function it(t){return t[2]-t[0]}function nt(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function rt(t){return t[2]<t[0]||t[3]<t[1]}function st(t,e){var o=(t[2]-t[0])/2*(e-1);e=(t[3]-t[1])/2*(e-1),t[0]-=o,t[2]+=o,t[1]-=e,t[3]+=e}function at(t,e,o){t=[t[0],t[1],t[0],t[3],t[2],t[1],t[2],t[3]],e(t,t,2);var i=[t[0],t[2],t[4],t[6]],n=[t[1],t[3],t[5],t[7]];return e=Math.min.apply(null,i),t=Math.min.apply(null,n),i=Math.max.apply(null,i),n=Math.max.apply(null,n),F(e,t,i,n,o)}function lt(t){for(var e in t)delete t[e]}function pt(t){var e,o=[];for(e in t)o.push(t[e]);return o}function ct(t){for(var e in t)return!1;return!e}function ut(t){this.radius=t}function ht(t){this.mb=t.code,this.a=t.units,this.f=void 0!==t.extent?t.extent:null,this.g=void 0!==t.worldExtent?t.worldExtent:null,this.b=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.c=void 0!==t.global&&t.global,this.i=!(!this.c||!this.f),this.o=t.getPointResolution,this.j=null,this.l=t.metersPerUnit;var e=t.code,o=bg||window.proj4;"function"==typeof o&&void 0!==(e=o.defs(e))&&(void 0!==e.axis&&void 0===t.axisOrientation&&(this.b=e.axis),void 0===t.metersPerUnit&&(this.l=e.to_meter),void 0===t.units&&(this.a=e.units))}function dt(t){ht.call(this,{code:t,units:"m",extent:Sg,global:!0,worldExtent:wg,getPointResolution:function(t,e){return t/gg(e[1]/6378137)}})}function ft(t,e,o){var i=t.length;o=1<o?o:2,void 0===e&&(e=2<o?t.slice():Array(i));for(var n=0;n<i;n+=o){e[n]=Eg*t[n]/180;var r=6378137*Math.log(Math.tan(Math.PI*(t[n+1]+90)/360));r>Eg?r=Eg:r<-Eg&&(r=-Eg),e[n+1]=r}return e}function yt(t,e,o){var i=t.length;o=1<o?o:2,void 0===e&&(e=2<o?t.slice():Array(i));for(var n=0;n<i;n+=o)e[n]=180*t[n]/Eg,e[n+1]=360*Math.atan(Math.exp(t[n+1]/6378137))/Math.PI-90;return e}function gt(t,e){ht.call(this,{code:t,units:"degrees",extent:Ag,axisOrientation:e,global:!0,metersPerUnit:Mg,worldExtent:Ag})}function mt(t,e,o){t=t.mb,e=e.mb,t in Ig||(Ig[t]={}),Ig[t][e]=o}function vt(t,e){var o;return t in Ig&&e in Ig[t]&&(o=Ig[t][e]),o}function _t(t,e,o){t=At(t);var i=t.o;return i?e=i(e,o):"degrees"!=t.a&&(i=Rt(t,At("EPSG:4326")),e=[o[0]-e/2,o[1],o[0]+e/2,o[1],o[0],o[1]-e/2,o[0],o[1]+e/2],e=i(e,e,2),e=(vg.b(e.slice(0,2),e.slice(2,4))+vg.b(e.slice(4,6),e.slice(6,8)))/2,void 0!==(t=t.sc())&&(e/=t)),e}function bt(t){t.forEach(St),t.forEach(function(e){t.forEach(function(t){e!==t&&mt(e,t,Tt)})})}function Et(){xg.forEach(function(t){Pg.forEach(function(e){mt(t,e,ft),mt(e,t,yt)})})}function St(t){Rg[t.mb]=t,mt(t,t,Tt)}function wt(t){return t?"string"==typeof t?At(t):t:At("EPSG:3857")}function Pt(t,e,o,i){t=At(t),e=At(e),mt(t,e,Ct(o)),mt(e,t,Ct(i))}function Ct(t){return function(e,o,i){var n=e.length;i=void 0!==i?i:2,o=void 0!==o?o:Array(n);var r;for(r=0;r<n;r+=i){var s=t([e[r],e[r+1]]);for(o[r]=s[0],o[r+1]=s[1],s=i-1;2<=s;--s)o[r+s]=e[r+s]}return o}}function At(t){var e=null;if(t instanceof ht)e=t;else if("string"==typeof t){var e=Rg[t]||null,o=bg||window.proj4;e||"function"!=typeof o||void 0===o.defs(t)||(e=new ht({code:t}),St(e))}return e}function Mt(t,e){if(t===e)return!0;var o=t.a===e.a;return t.mb===e.mb?o:Rt(t,e)===Tt&&o}function xt(t,e){return t=At(t),e=At(e),Rt(t,e)}function Rt(t,e){var o=t.mb,i=e.mb,n=vt(o,i);if(!n){var r=bg||window.proj4;if("function"==typeof r){var s=r.defs(o),a=r.defs(i);void 0!==s&&void 0!==a&&(s===a?bt([e,t]):(n=r(i,o),Pt(e,t,n.forward,n.inverse)),n=vt(o,i))}}return n||(n=It),n}function It(t,e){if(void 0!==e&&t!==e){for(var o=0,i=t.length;o<i;++o)e[o]=t[o];t=e}return t}function Tt(t,e){if(void 0!==e){for(var o=0,i=t.length;o<i;++o)e[o]=t[o];t=e}else t=t.slice();return t}function Lt(t,e,o){return xt(e,o)(t,void 0,t.length)}function Gt(t,e,o){return e=xt(e,o),at(t,e)}function Ot(){bt(Pg),bt(xg),Et()}function Nt(t,e,o,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=o,i):[t,e,o]}function kt(t){var e,o=t[0],i=Array(o),n=1<<o-1;for(e=0;e<o;++e){var r=48;t[1]&n&&(r+=1),t[2]&n&&(r+=2),i[e]=String.fromCharCode(r),n>>=1}return i.join("")}function Dt(t){this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.b=t.resolutions,y(c(this.b,function(t,e){return e-t}),17),this.maxZoom=this.b.length-1,this.i=void 0!==t.origin?t.origin:null,this.c=null,void 0!==t.origins&&(this.c=t.origins,y(this.c.length==this.b.length,20));var e=t.extent;void 0===e||this.i||this.c||(this.i=et(e)),y(!this.i&&this.c||this.i&&!this.c,18),this.f=null,void 0!==t.tileSizes&&(this.f=t.tileSizes,y(this.f.length==this.b.length,19)),this.g=void 0!==t.tileSize?t.tileSize:this.f?null:256,y(!this.g&&this.f||this.g&&!this.f,22),this.v=void 0!==e?e:null,this.a=null,this.j=[0,0],void 0!==t.sizes?this.a=t.sizes.map(function(t){return new g(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1))},this):e&&zt(this,e)}function jt(t,e,o,i,n){for(n=t.Aa(e,n),e=e[0]-1;e>=t.minZoom;){if(o.call(null,e,Bt(t,n,e,i)))return!0;--e}return!1}function Ft(t,e,o,i){return e[0]<t.maxZoom?(i=t.Aa(e,i),Bt(t,i,e[0]+1,o)):null}function Ut(t,e,o,i){Wt(t,e[0],e[1],o,!1,Tg);var n=Tg[1],r=Tg[2];return Wt(t,e[2],e[3],o,!0,Tg),t=Tg[1],e=Tg[2],void 0!==i?(i.ca=n,i.$=t,i.da=r,i.ia=e):i=new g(n,t,r,e),i}function Bt(t,e,o,i){return Ut(t,e,t.Da(o),i)}function Vt(t,e){var o=t.Pc(e[0]),i=t.Da(e[0]);return t=R(t.gb(e[0]),t.j),[o[0]+(e[1]+.5)*t[0]*i,o[1]+(e[2]+.5)*t[1]*i]}function Wt(t,e,o,i,n,r){var s=t.tc(i),a=i/t.Da(s),l=t.Pc(s);return t=R(t.gb(s),t.j),e=a*Math.floor((e-l[0])/i+(n?.5:0))/t[0],o=a*Math.floor((o-l[1])/i+(n?0:.5))/t[1],n?(e=Math.ceil(e)-1,o=Math.ceil(o)-1):(e=Math.floor(e),o=Math.floor(o)),Nt(s,e,o,r)}function zt(t,e){for(var o=t.b.length,i=Array(o),n=t.minZoom;n<o;++n)i[n]=Bt(t,e,n);t.a=i}function qt(t){var e=t.j;return e||(e=Zt(t),t.j=e),e}function Ht(t){var e={};return mg(e,t||{}),void 0===e.extent&&(e.extent=At("EPSG:3857").G()),e.resolutions=Yt(e.extent,e.maxZoom,e.tileSize),delete e.maxZoom,new Dt(e)}function Yt(t,e,o){e=void 0!==e?e:42;var i=$(t);for(t=it(t),o=R(void 0!==o?o:256),o=Math.max(t/o[0],i/o[1]),e+=1,i=Array(e),t=0;t<e;++t)i[t]=o/Math.pow(2,t);return i}function Zt(t,e,o){return t=Kt(t),e=Yt(t,e,o),new Dt({extent:t,origin:et(t),resolutions:e,tileSize:o})}function Kt(t){t=At(t);var e=t.G();return e||(t=180*_g.degrees/t.sc(),e=F(-t,-t,t,t)),e}function Xt(t){this.b=t.html,this.a=t.tileRanges?t.tileRanges:null}function Jt(t){return function(e){if(e)return[b(e[0],t[0],t[2]),b(e[1],t[1],t[3])]}}function Qt(t){return t}function $t(t){function e(e){var o=t.listener,i=t.lh||t.target;return t.nh&&ae(t),o.call(i,e)}return t.mh=e}function te(t,e,o,i){for(var n,r=0,s=t.length;r<s;++r)if(n=t[r],n.listener===e&&n.lh===o)return i&&(n.deleteIndex=r),n}function ee(t,e){return(t=t.fb)?t[e]:void 0}function oe(t){var e=t.fb;return e||(e=t.fb={}),e}function ie(t,e){var o=ee(t,e);if(o){for(var i=0,n=o.length;i<n;++i)t.removeEventListener(e,o[i].mh),lt(o[i]);o.length=0,(o=t.fb)&&(delete o[e],Object.keys(o).length||delete t.fb)}}function ne(t,e,o,i,n){var r=oe(t),s=r[e];return s||(s=r[e]=[]),(r=te(s,o,i,!1))?n||(r.nh=!1):(r={lh:i,nh:!!n,listener:o,target:t,type:e},t.addEventListener(e,$t(r)),s.push(r)),r}function re(t,e,o,i){return ne(t,e,o,i,!0)}function se(t,e,o,i){(t=ee(t,e))&&(o=te(t,o,i,!0))&&ae(o)}function ae(t){if(t&&t.target){t.target.removeEventListener(t.type,t.mh);var e=ee(t.target,t.type);if(e){var o="deleteIndex"in t?t.deleteIndex:e.indexOf(t);-1!==o&&e.splice(o,1),e.length||ie(t.target,t.type)}lt(t)}}function le(t){var e,o=oe(t);for(e in o)ie(t,e)}function pe(){}function ce(t){t.Jb||(t.Jb=!0,t.ka())}function ue(t){this.type=t,this.target=null}function he(t){t.stopPropagation()}function de(){this.Ua={},this.ra={},this.oa={}}function fe(t,e){return e?e in t.oa:0<Object.keys(t.oa).length}function ye(){de.call(this),this.i=0}function ge(t){ye.call(this),d(this),this.S={},void 0!==t&&this.H(t)}function me(t){return Lg.hasOwnProperty(t)?Lg[t]:Lg[t]="change:"+t}function ve(t,e,o){var i=me(e);t.b(new _e(i,e,o)),t.b(new _e("propertychange",e,o))}function _e(t,e,o){ue.call(this,t),this.key=e,this.oldValue=o}function be(t,e){if(ge.call(this),this.c=!!(e||{}).unique,this.a=t||[],this.c)for(t=0,e=this.a.length;t<e;++t)Se(this,this.a[t],t);Ee(this)}function Ee(t){t.set(Gg,t.a.length)}function Se(t,e,o){for(var i=0,n=t.a.length;i<n;++i)if(t.a[i]===e&&i!==o)throw new f(58)}function we(t,e){ue.call(this,t),this.element=e}function Pe(t){return Array.isArray(t)?t:kg(t)}function Ce(t){if("string"!=typeof t){var e=t[0];e!=(0|e)&&(e=e+.5|0);var o=t[1];o!=(0|o)&&(o=o+.5|0);var i=t[2];i!=(0|i)&&(i=i+.5|0),t="rgba("+e+","+o+","+i+","+(void 0===t[3]?1:t[3])+")"}return t}function Ae(t){var e=[];return e[0]=b(t[0]+.5|0,0,255),e[1]=b(t[1]+.5|0,0,255),e[2]=b(t[2]+.5|0,0,255),e[3]=b(t[3],0,1),e}function Me(t){return"string"==typeof t||t instanceof CanvasPattern||t instanceof CanvasGradient?t:Ce(t)}function xe(t,e){var o=document.createElement("CANVAS");return t&&(o.width=t),e&&(o.height=e),o.getContext("2d")}function Re(t,e){var o=e.parentNode;o&&o.replaceChild(t,e)}function Ie(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function Te(t){ge.call(this),this.element=t.element?t.element:null,this.a=this.R=null,this.v=[],this.render=t.render?t.render:h,t.target&&this.f(t.target)}function Le(t){t=t||{},this.I=document.createElement("UL"),this.u=document.createElement("LI"),this.I.appendChild(this.u),this.u.style.display="none",this.c=void 0===t.collapsed||t.collapsed,this.o=void 0===t.collapsible||t.collapsible,this.o||(this.c=!1);var e=void 0!==t.className?t.className:"ol-attribution",o=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.collapseLabel?t.collapseLabel:"»";"string"==typeof i?(this.D=document.createElement("span"),this.D.textContent=i):this.D=i,i=void 0!==t.label?t.label:"i","string"==typeof i?(this.C=document.createElement("span"),this.C.textContent=i):this.C=i;var n=this.o&&!this.c?this.D:this.C,i=document.createElement("button");i.setAttribute("type","button"),i.title=o,i.appendChild(n),ne(i,"click",this.Vm,this),o=document.createElement("div"),o.className=e+" ol-unselectable ol-control"+(this.c&&this.o?" ol-collapsed":"")+(this.o?"":" ol-uncollapsible"),o.appendChild(this.I),o.appendChild(i),Te.call(this,{element:o,render:t.render?t.render:Ge,target:t.target}),this.B=!0,this.l={},this.j={},this.T={}}function Ge(t){if(t=t.frameState){var e,o,i,n,r,s=t.layerStatesArray,a=mg({},t.attributions),l={},p={},c=t.viewState.projection,u=0;for(e=s.length;u<e;u++)if(n=s[u].layer.ha()){var h=d(n).toString();if(r=n.j){var f=0;for(o=r.length;f<o;f++){var y=r[f],m=d(y).toString();if(!(m in a)){if(i=t.usedTiles[h]){var v=n.Ta(c);t:{var b,E=void 0,S=y,w=v,P=c;if(S.a){for(E in i)if(E in S.a){var v=i[E],A=0;for(b=S.a[E].length;A<b;++A){var M=S.a[E][A];if(_(M,v)){E=!0;break t}var x=Bt(w,Kt(P),parseInt(E,10)),R=x.$-x.ca+1;if((v.ca<x.ca||v.$>x.$)&&(_(M,new g(C(v.ca,R),C(v.$,R),v.da,v.ia))||v.$-v.ca+1>R&&_(M,x))){E=!0;break t}}}E=!1}else E=!0}}else E=!1;E?(m in l&&delete l[m],(E=y.b)in p||(p[E]=!0,a[m]=y)):l[m]=y}}}}e=[a,l],u=e[0],e=e[1];for(var I in this.l)I in u?(this.j[I]||(this.l[I].style.display="",this.j[I]=!0),delete u[I]):I in e?(this.j[I]&&(this.l[I].style.display="none",delete this.j[I]),delete e[I]):(Ie(this.l[I]),delete this.l[I],delete this.j[I]);for(I in u)f=document.createElement("LI"),f.innerHTML=u[I].b,this.I.appendChild(f),this.l[I]=f,this.j[I]=!0;for(I in e)f=document.createElement("LI"),f.innerHTML=e[I].b,f.style.display="none",this.I.appendChild(f),this.l[I]=f;I=!ct(this.j)||!ct(t.logos),this.B!=I&&(this.element.style.display=I?"":"none",this.B=I),I&&ct(this.j)?this.element.classList.add("ol-logo-only"):this.element.classList.remove("ol-logo-only"),t=t.logos,I=this.T;for(L in I)L in t||(Ie(I[L]),delete I[L]);for(var T in t)if(e=t[T],e instanceof HTMLElement&&(this.u.appendChild(e),I[T]=e),!(T in I)){var L=new Image;L.src=T,""===e?u=L:(u=document.createElement("a"),u.href=e,u.appendChild(L)),this.u.appendChild(u),I[T]=u}this.u.style.display=ct(t)?"none":""}else this.B&&(this.element.style.display="none",this.B=!1)}function Oe(t){t.element.classList.toggle("ol-collapsed"),t.c?Re(t.D,t.C):Re(t.C,t.D),t.c=!t.c}function Ne(t){return Math.pow(t,3)}function ke(t){return 1-Ne(1-t)}function De(t){return 3*t*t-2*t*t*t}function je(t){return t}function Fe(t){t=t||{};var e=void 0!==t.className?t.className:"ol-rotate",o=void 0!==t.label?t.label:"⇧";this.c=null,"string"==typeof o?(this.c=document.createElement("span"),this.c.className="ol-compass",this.c.textContent=o):(this.c=o,this.c.classList.add("ol-compass"));var i=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=i,o.appendChild(this.c),ne(o,"click",Fe.prototype.D,this),i=document.createElement("div"),i.className=e+" ol-unselectable ol-control",i.appendChild(o),e=t.render?t.render:Ue,this.o=t.resetNorth?t.resetNorth:void 0,Te.call(this,{element:i,render:e,target:t.target}),this.l=void 0!==t.duration?t.duration:250,this.j=void 0===t.autoHide||t.autoHide,this.u=void 0,this.j&&this.element.classList.add("ol-hidden")}function Ue(t){if(t=t.frameState){if((t=t.viewState.rotation)!=this.u){var e="rotate("+t+"rad)";if(this.j){var o=this.element.classList.contains("ol-hidden");o||t?o&&t&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.c.style.msTransform=e,this.c.style.webkitTransform=e,this.c.style.transform=e}this.u=t}}function Be(t){t=t||{};var e=void 0!==t.className?t.className:"ol-zoom",o=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInLabel?t.zoomInLabel:"+",n=void 0!==t.zoomOutLabel?t.zoomOutLabel:"−",r=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",s=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",a=document.createElement("button");a.className=e+"-in",a.setAttribute("type","button"),a.title=r,a.appendChild("string"==typeof i?document.createTextNode(i):i),ne(a,"click",Be.prototype.j.bind(this,o)),i=document.createElement("button"),i.className=e+"-out",i.setAttribute("type","button"),i.title=s,i.appendChild("string"==typeof n?document.createTextNode(n):n),ne(i,"click",Be.prototype.j.bind(this,-o)),o=document.createElement("div"),o.className=e+" ol-unselectable ol-control",o.appendChild(a),o.appendChild(i),Te.call(this,{element:o,target:t.target}),this.c=void 0!==t.duration?t.duration:250}function Ve(t){t=t||{};var e=new be;return(void 0!==t.zoom?t.zoom:1)&&e.push(new Be(t.zoomOptions)),(void 0!==t.rotate?t.rotate:1)&&e.push(new Fe(t.rotateOptions)),(void 0!==t.attribution?t.attribution:1)&&e.push(new Le(t.attributionOptions)),e}function We(t){t=t||{},this.c=void 0!==t.className?t.className:"ol-full-screen";var e=void 0!==t.label?t.label:"⤢";this.o="string"==typeof e?document.createTextNode(e):e,e=void 0!==t.labelActive?t.labelActive:"×",this.l="string"==typeof e?document.createTextNode(e):e;var o=t.tipLabel?t.tipLabel:"Toggle full-screen",e=document.createElement("button");e.className=this.c+"-"+qe(),e.setAttribute("type","button"),e.title=o,e.appendChild(this.o),ne(e,"click",this.C,this),o=document.createElement("div"),o.className=this.c+" ol-unselectable ol-control "+(ze()?"":"ol-unsupported"),o.appendChild(e),Te.call(this,{element:o,target:t.target}),this.D=void 0!==t.keys&&t.keys,this.j=t.source}function ze(){var t=document.body;return!!(t.webkitRequestFullscreen||t.mozRequestFullScreen&&document.mozFullScreenEnabled||t.msRequestFullscreen&&document.msFullscreenEnabled||t.requestFullscreen&&document.fullscreenEnabled)}function qe(){return!!(document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)}function He(t){t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}function Ye(t){t=t||{};var e=document.createElement("DIV");e.className=void 0!==t.className?t.className:"ol-mouse-position",Te.call(this,{element:e,render:t.render?t.render:Ze,target:t.target}),ne(this,me(jg),this.Ym,this),t.coordinateFormat&&this.kj(t.coordinateFormat),t.projection&&this.$h(t.projection),this.u=void 0!==t.undefinedHTML?t.undefinedHTML:"",this.l=e.innerHTML,this.o=this.j=this.c=null}function Ze(t){t=t.frameState,t?this.c!=t.viewState.projection&&(this.c=t.viewState.projection,this.j=null):this.c=null,Ke(this,this.o)}function Ke(t,e){var o=t.u;if(e&&t.c){if(!t.j){var i=t.Zh();t.j=i?Rt(t.c,i):It}(e=t.a.Wa(e))&&(t.j(e,e),o=(o=t.xh())?o(e):e.toString())}t.l&&o==t.l||(t.element.innerHTML=o,t.l=o)}function Xe(t,e,o){ue.call(this,t),this.map=e,this.frameState=void 0!==o?o:null}function Je(t,e,o,i,n){Xe.call(this,t,e,n),this.originalEvent=o,this.pixel=e.xe(o),this.coordinate=e.Wa(this.pixel),this.dragging=void 0!==i&&i}function Qe(t,e){var o,i,n=Vg.length;for(i=0;i<n;++i)try{if(o=t.getContext(Vg[i],e))return o}catch(t){}return null}function $e(t,e,o,i,n){Je.call(this,t,e,o.b,i,n),this.b=o}function to(t,e){this.b=t,this.f=e}function eo(t){to.call(this,t,{mousedown:this.fm,mousemove:this.gm,mouseup:this.jm,mouseover:this.im,mouseout:this.hm}),this.a=t.i,this.i=[]}function oo(t,e){t=t.i;var o=e.clientX;e=e.clientY;for(var i,n=0,r=t.length;n<r&&(i=t[n]);n++){var s=Math.abs(e-i[1]);if(25>=Math.abs(o-i[0])&&25>=s)return!0}return!1}function io(t){var e=_o(t,t),o=e.preventDefault;return e.preventDefault=function(){t.preventDefault(),o()},e.pointerId=1,e.isPrimary=!0,e.pointerType="mouse",e}function no(t){to.call(this,t,{MSPointerDown:this.om,MSPointerMove:this.pm,MSPointerUp:this.sm,MSPointerOut:this.qm,MSPointerOver:this.rm,MSPointerCancel:this.nm,MSGotPointerCapture:this.lm,MSLostPointerCapture:this.mm}),this.a=t.i,this.i=["","unavailable","touch","pen","mouse"]}function ro(t,e){var o=e;return"number"==typeof e.pointerType&&(o=_o(e,e),o.pointerType=t.i[e.pointerType]),o}function so(t){to.call(this,t,{pointerdown:this.ip,pointermove:this.jp,pointerup:this.mp,pointerout:this.kp,pointerover:this.lp,pointercancel:this.hp,gotpointercapture:this.ul,lostpointercapture:this.em})}function ao(t,e,o){ue.call(this,t),this.b=e,t=o||{},this.buttons=lo(t),this.pressure=po(t,this.buttons),this.bubbles="bubbles"in t&&t.bubbles,this.cancelable="cancelable"in t&&t.cancelable,this.view="view"in t?t.view:null,this.detail="detail"in t?t.detail:null,this.screenX="screenX"in t?t.screenX:0,this.screenY="screenY"in t?t.screenY:0,this.clientX="clientX"in t?t.clientX:0,this.clientY="clientY"in t?t.clientY:0,this.ctrlKey="ctrlKey"in t&&t.ctrlKey,this.altKey="altKey"in t&&t.altKey,this.shiftKey="shiftKey"in t&&t.shiftKey,this.metaKey="metaKey"in t&&t.metaKey,this.button="button"in t?t.button:0,this.relatedTarget="relatedTarget"in t?t.relatedTarget:null,this.pointerId="pointerId"in t?t.pointerId:0,this.width="width"in t?t.width:0,this.height="height"in t?t.height:0,this.tiltX="tiltX"in t?t.tiltX:0,this.tiltY="tiltY"in t?t.tiltY:0,this.pointerType="pointerType"in t?t.pointerType:"",this.isPrimary="isPrimary"in t&&t.isPrimary,e.preventDefault&&(this.preventDefault=function(){e.preventDefault()})}function lo(t){if(t.buttons||sm)t=t.buttons;else switch(t.which){case 1:t=1;break;case 2:t=4;break;case 3:t=2;break;default:t=0}return t}function po(t,e){return t.pressure?t.pressure:e?.5:0}function co(t,e){to.call(this,t,{touchstart:this.rq,touchmove:this.qq,touchend:this.pq,touchcancel:this.oq}),this.a=t.i,this.j=e,this.i=void 0,this.g=0,this.c=void 0}function uo(t,e,o){return e=_o(e,o),e.pointerId=o.identifier+2,e.bubbles=!0,e.cancelable=!0,e.detail=t.g,e.button=0,e.buttons=1,e.width=o.webkitRadiusX||o.radiusX||0,e.height=o.webkitRadiusY||o.radiusY||0,e.pressure=o.webkitForce||o.force||.5,e.isPrimary=t.i===o.identifier,e.pointerType="touch",e.clientX=o.clientX,e.clientY=o.clientY,e.screenX=o.screenX,e.screenY=o.screenY,e}function ho(t,e,o){function i(){e.preventDefault()}var n,r=Array.prototype.slice.call(e.changedTouches),s=r.length;for(n=0;n<s;++n){var a=uo(t,e,r[n]);a.preventDefault=i,o.call(t,e,a)}}function fo(t,e){var o=t.j.i;if(e=e.changedTouches[0],t.i===e.identifier){var i=[e.clientX,e.clientY];o.push(i),setTimeout(function(){r(o,i)},2500)}}function yo(t){de.call(this),this.g=t,this.i={},this.f={},this.a=[],tm?go(this,new so(this)):em?go(this,new no(this)):(t=new eo(this),go(this,t),$g&&go(this,new co(this,t))),t=this.a.length;for(var e,o=0;o<t;o++)e=this.a[o],mo(this,Object.keys(e.f))}function go(t,e){var o=Object.keys(e.f);o&&(o.forEach(function(t){var o=e.f[t];o&&(this.f[t]=o.bind(e))},t),t.a.push(e))}function mo(t,e){e.forEach(function(t){ne(this.g,t,this.c,this)},t)}function vo(t,e){e.forEach(function(t){se(this.g,t,this.c,this)},t)}function _o(t,e){for(var o,i={},n=0,r=am.length;n<r;n++)o=am[n][0],i[o]=t[o]||e[o]||am[n][1];return i}function bo(t,e,o){e.bubbles=!1,wo(t,"pointerleave",e,o)}function Eo(t,e,o){t.out(e,o);var i=e.target,n=e.relatedTarget;i&&n&&i.contains(n)||bo(t,e,o)}function So(t,e,o){e.bubbles=!0,wo(t,"pointerover",e,o);var i=e.target,n=e.relatedTarget;i&&n&&i.contains(n)||(e.bubbles=!1,wo(t,"pointerenter",e,o))}function wo(t,e,o,i){t.b(new ao(e,i,o))}function Po(t,e){t.b(new ao(e.type,e,e))}function Co(t,e){de.call(this),this.i=t,this.j=0,this.o=!1,this.f=[],this.D=e?e*Zg:Zg,this.c=null,t=this.i.a,this.S=0,this.u={},this.g=new yo(t),this.a=null,this.l=ne(this.g,"pointerdown",this.Ol,this),this.v=ne(this.g,"pointermove",this.Lp,this)}function Ao(t,e){var o=new $e("click",t.i,e);t.b(o),t.j?(clearTimeout(t.j),t.j=0,o=new $e("dblclick",t.i,e),t.b(o)):t.j=setTimeout(function(){this.j=0;var t=new $e("singleclick",this.i,e);this.b(t)}.bind(t),250)}function Mo(t,e){"pointerup"==e.type||"pointercancel"==e.type?delete t.u[e.pointerId]:"pointerdown"==e.type&&(t.u[e.pointerId]=!0),t.S=Object.keys(t.u).length}function xo(t,e){return Math.abs(e.clientX-t.c.clientX)>t.D||Math.abs(e.clientY-t.c.clientY)>t.D}function Ro(t,e){this.l=t,this.c=e,this.b=[],this.i=[],this.a={}}function Io(t){var e=t.b,o=t.i,i=e[0];return 1==e.length?(e.length=0,o.length=0):(e[0]=e.pop(),o[0]=o.pop(),To(t,0)),e=t.c(i),delete t.a[e],i}function To(t,e){for(var o=t.b,i=t.i,n=o.length,r=o[e],s=i[e],a=e;e<n>>1;){var l=2*e+1,p=2*e+2,l=p<n&&i[p]<i[l]?p:l;o[e]=o[l],i[e]=i[l],e=l}o[e]=r,i[e]=s,Lo(t,a,e)}function Lo(t,e,o){var i=t.b;t=t.i;for(var n=i[o],r=t[o];o>e;){var s=o-1>>1;if(!(t[s]>r))break;i[o]=i[s],t[o]=t[s],o=s}i[o]=n,t[o]=r}function Go(t){var e,o=t.l,i=t.b,n=t.i,r=0,s=i.length;for(e=0;e<s;++e){var a=i[e],l=o(a);1/0==l?delete t.a[t.c(a)]:(n[r]=l,i[r++]=a)}for(i.length=r,n.length=r,o=(t.b.length>>1)-1;0<=o;o--)To(t,o)}function Oo(t,e){Ro.call(this,function(e){return t.apply(null,e)},function(t){return t[0].bb()}),this.v=e,this.j=0,this.g={}}function No(t,e,o){for(var i,n,r=0;t.j<e&&r<o&&0<t.b.length;)i=Io(t)[0],n=i.bb(),0!==i.getState()||n in t.g||(t.g[n]=!0,++t.j,++r,i.load())}function ko(t){return function(e,o,n){if(void 0!==e)return e=i(t,e,n),e=b(e+o,0,t.length-1),o=Math.floor(e),e!=o&&o<t.length-1?t[o]/Math.pow(t[o]/t[o+1],e-o):t[o]}}function Do(t,e,o){return function(i,n,r){if(void 0!==i)return i=Math.max(Math.floor(Math.log(e/i)/Math.log(t)+(-r/2+.5))+n,0),void 0!==o&&(i=Math.min(i,o)),e/Math.pow(t,i)}}function jo(t){if(void 0!==t)return 0}function Fo(t,e){if(void 0!==t)return t+e}function Uo(t){var e=2*Math.PI/t;return function(t,o){if(void 0!==t)return t=Math.floor((t+o)/e+.5)*e}}function Bo(){var t=P(5);return function(e,o){if(void 0!==e)return Math.abs(e+o)<=t?0:e+o}}function Vo(t,e){return t=void 0!==e?t.toFixed(e):""+t,e=t.indexOf("."),e=-1===e?t.length:e,2<e?t:Array(3-e).join("0")+t}function Wo(t){t=(""+t).split(".");for(var e=["1","3"],o=0;o<Math.max(t.length,e.length);o++){var i=parseInt(t[o]||"0",10),n=parseInt(e[o]||"0",10);if(i>n)return 1;if(n>i)return-1}return 0}function zo(t,e){return t[0]+=e[0],t[1]+=e[1],t}function qo(t,e){var o=e.pd(),i=e.wa();e=i[0];var i=i[1],n=t[0]-e;t=t[1]-i,n||t||(n=1);var r=Math.sqrt(n*n+t*t);return[e+o*n/r,i+o*t/r]}function Ho(t,e){var o=t[0];t=t[1];var i=e[0],n=e[1];e=i[0];var i=i[1],r=n[0],n=n[1],s=r-e,a=n-i,o=s||a?(s*(o-e)+a*(t-i))/(s*s+a*a||0):0;return 0>=o?(t=e,o=i):1<=o?(t=r,o=n):(t=e+o*s,o=i+o*a),[t,o]}function Yo(t,e,o){e=C(e+180,360)-180;var i=Math.abs(3600*e);o=o||0;var n=Math.pow(10,o),r=Math.floor(i/3600),s=Math.floor((i-3600*r)/60),i=Math.ceil((i-3600*r-60*s)*n)/n;return 60<=i&&(i=0,s+=1),60<=s&&(s=0,r+=1),r+"° "+Vo(s)+"′ "+Vo(i,o)+"″"+(e?" "+t.charAt(0>e?1:0):"")}function Zo(t,e,o){return t?e.replace("{x}",t[0].toFixed(o)).replace("{y}",t[1].toFixed(o)):""}function Ko(t,e){for(var o=!0,i=t.length-1;0<=i;--i)if(t[i]!=e[i]){o=!1;break}return o}function Xo(t,e){var o=Math.cos(e);e=Math.sin(e);var i=t[1]*o+t[0]*e;return t[0]=t[0]*o-t[1]*e,t[1]=i,t}function Jo(t,e){t[0]*=e,t[1]*=e}function Qo(t,e){var o=t[0]-e[0];return t=t[1]-e[1],o*o+t*t}function $o(t,e){return Math.sqrt(Qo(t,e))}function ti(t,e){return Qo(t,Ho(t,e))}function ei(t,e){return Zo(t,"{x}, {y}",e)}function oi(){return!0}function ii(){return!1}function ni(){ge.call(this),this.l=j(),this.v=-1,this.f={},this.o=this.g=0}function ri(t,e,o,i,n,r){for(var s=r||[],a=0;e<o;e+=i){var l=t[e],p=t[e+1];s[a++]=n[0]*l+n[2]*p+n[4],s[a++]=n[1]*l+n[3]*p+n[5]}return r&&s.length!=a&&(s.length=a),s}function si(t,e,o,i,n,r,s){for(var a,l=s||[],p=0;e<o;e+=i)for(l[p++]=t[e]+n,l[p++]=t[e+1]+r,a=e+2;a<e+i;++a)l[p++]=t[a];return s&&l.length!=p&&(l.length=p),l}function ai(){ni.call(this),this.ja="XY",this.a=2,this.A=null}function li(t){var e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function pi(t,e,o){t.a=li(e),t.ja=e,t.A=o}function ci(t,e,o,i){if(e)o=li(e);else{for(e=0;e<i;++e){if(!o.length)return t.ja="XY",void(t.a=2);o=o[0]}
o=o.length;var n;2==o?n="XY":3==o?n="XYZ":4==o&&(n="XYZM"),e=n}t.ja=e,t.a=o}function ui(t,e,o,i){for(var n=0,r=t[o-i],s=t[o-i+1];e<o;e+=i)var a=t[e],l=t[e+1],n=n+(s*a-r*l),r=a,s=l;return n/2}function hi(t,e,o,i){var n,r=0,s=0;for(n=o.length;s<n;++s){var a=o[s],r=r+ui(t,e,a,i);e=a}return r}function di(t,e,o,i,n,r,s){var a=t[e],l=t[e+1],p=t[o]-a,c=t[o+1]-l;if(p||c)if(1<(r=((n-a)*p+(r-l)*c)/(p*p+c*c)))e=o;else if(0<r){for(n=0;n<i;++n)s[n]=A(t[e+n],t[o+n],r);return void(s.length=i)}for(n=0;n<i;++n)s[n]=t[e+n];s.length=i}function fi(t,e,o,i,n){var r=t[e],s=t[e+1];for(e+=i;e<o;e+=i){var a=t[e],l=t[e+1],r=w(r,s,a,l);r>n&&(n=r),r=a,s=l}return n}function yi(t,e,o,i,n){var r,s=0;for(r=o.length;s<r;++s){var a=o[s];n=fi(t,e,a,i,n),e=a}return n}function gi(t,e,o,i,n,r,s,a,l,p,c){if(e==o)return p;if(!n){var u=w(s,a,t[e],t[e+1]);if(u<p){for(c=0;c<i;++c)l[c]=t[e+c];return l.length=i,u}return p}for(var h=c||[NaN,NaN],d=e+i;d<o;)if(di(t,d-i,d,i,s,a,h),(u=w(s,a,h[0],h[1]))<p){for(p=u,c=0;c<i;++c)l[c]=h[c];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(u)-Math.sqrt(p))/n|0,1);if(r&&(di(t,o-i,e,i,s,a,h),(u=w(s,a,h[0],h[1]))<p)){for(p=u,c=0;c<i;++c)l[c]=h[c];l.length=i}return p}function mi(t,e,o,i,n,r,s,a,l,p,c){c=c||[NaN,NaN];var u,h=0;for(u=o.length;h<u;++h){var d=o[h];p=gi(t,e,d,i,n,r,s,a,l,p,c),e=d}return p}function vi(t,e){var o,i=0,n=0;for(o=e.length;n<o;++n)t[i++]=e[n];return i}function _i(t,e,o,i){var n,r=0;for(n=o.length;r<n;++r){var s,a=o[r];for(s=0;s<i;++s)t[e++]=a[s]}return e}function bi(t,e,o,i,n){n=n||[];var r,s=0,a=0;for(r=o.length;a<r;++a)e=_i(t,e,o[a],i),n[s++]=e;return n.length=s,n}function Ei(t,e,o,i,n){n=void 0!==n?n:[];for(var r=0;e<o;e+=i)n[r++]=t.slice(e,e+i);return n.length=r,n}function Si(t,e,o,i,n){n=void 0!==n?n:[];var r,s=0,a=0;for(r=o.length;a<r;++a){var l=o[a];n[s++]=Ei(t,e,l,i,n[s]),e=l}return n.length=s,n}function wi(t,e,o,i,n,r,s){var a=(o-e)/i;if(3>a){for(;e<o;e+=i)r[s++]=t[e],r[s++]=t[e+1];return s}var l=Array(a);l[0]=1,l[a-1]=1,o=[e,o-i];for(var p,c=0;0<o.length;){var u=o.pop(),h=o.pop(),d=0,f=t[h],y=t[h+1],g=t[u],m=t[u+1];for(p=h+i;p<u;p+=i){var v=S(t[p],t[p+1],f,y,g,m);v>d&&(c=p,d=v)}d>n&&(l[(c-e)/i]=1,h+i<c&&o.push(h,c),c+i<u&&o.push(c,u))}for(p=0;p<a;++p)l[p]&&(r[s++]=t[e+p*i],r[s++]=t[e+p*i+1]);return s}function Pi(t,e,o,i,n,r,s,a){var l,p=0;for(l=o.length;p<l;++p){var c=o[p];t:{var u=t,h=c,d=i,f=n,y=r,g=s;if(e!=h){var m=f*Math.round(u[e]/f),v=f*Math.round(u[e+1]/f);e+=d,y[g++]=m,y[g++]=v;do{var _=f*Math.round(u[e]/f);if(s=f*Math.round(u[e+1]/f),(e+=d)==h){y[g++]=_,y[g++]=s,s=g;break t}}while(_==m&&s==v);for(;e<h;){var b=f*Math.round(u[e]/f),E=f*Math.round(u[e+1]/f);if(e+=d,b!=_||E!=s){var S=_-m,w=s-v,P=b-m,C=E-v;S*C==w*P&&(0>S&&P<S||S==P||0<S&&P>S)&&(0>w&&C<w||w==C||0<w&&C>w)||(y[g++]=_,y[g++]=s,m=_,v=s),_=b,s=E}}y[g++]=_,y[g++]=s}s=g}a.push(s),e=c}return s}function Ci(t,e){ai.call(this),this.c=this.j=-1,this.ma(t,e)}function Ai(t,e,o){pi(t,e,o),t.s()}function Mi(t,e){ai.call(this),this.ma(t,e)}function xi(t,e,o,i,n){return!Y(n,function(n){return!Ri(t,e,o,i,n[0],n[1])})}function Ri(t,e,o,i,n,r){for(var s=0,a=t[o-i],l=t[o-i+1];e<o;e+=i){var p=t[e],c=t[e+1];l<=r?c>r&&0<(p-a)*(r-l)-(n-a)*(c-l)&&s++:c<=r&&0>(p-a)*(r-l)-(n-a)*(c-l)&&s--,a=p,l=c}return!!s}function Ii(t,e,o,i,n,r){if(!o.length||!Ri(t,e,o[0],i,n,r))return!1;var s;for(e=1,s=o.length;e<s;++e)if(Ri(t,o[e-1],o[e],i,n,r))return!1;return!0}function Ti(t,o,i,n,r,s,a){var l,p=r[s+1],c=[],u=i[0],h=t[u-n],d=t[u-n+1];for(l=o;l<u;l+=n){var f=t[l],y=t[l+1];(p<=d&&y<=p||d<=p&&p<=y)&&(h=(p-d)/(y-d)*(f-h)+h,c.push(h)),h=f,d=y}for(u=NaN,d=-1/0,c.sort(e),h=c[0],l=1,y=c.length;l<y;++l){f=c[l];var g=Math.abs(f-h);g>d&&(h=(h+f)/2,Ii(t,o,i,n,h,p)&&(u=h,d=g)),h=f}return isNaN(u)&&(u=r[s]),a?(a.push(u,p),a):[u,p]}function Li(t,e,o,i,n,r){for(var s,a=[t[e],t[e+1]],l=[];e+i<o;e+=i){if(l[0]=t[e+i],l[1]=t[e+i+1],s=n.call(r,a,l))return s;a[0]=l[0],a[1]=l[1]}return!1}function Gi(t,e,o,i,n){var r=H(j(),t,e,o,i);return!!nt(n,r)&&(!!(N(n,r)||r[0]>=n[0]&&r[2]<=n[2]||r[1]>=n[1]&&r[3]<=n[3])||Li(t,e,o,i,function(t,e){var o=!1,i=D(n,t),r=D(n,e);if(1===i||1===r)o=!0;else{var s=n[0],a=n[1],l=n[2],p=n[3],c=e[0];e=e[1],t=(e-t[1])/(c-t[0]),2&r&&!(2&i)&&(o=c-(e-p)/t,o=o>=s&&o<=l),o||!(4&r)||4&i||(o=e-(c-l)*t,o=o>=a&&o<=p),o||!(8&r)||8&i||(o=c-(e-a)/t,o=o>=s&&o<=l),o||!(16&r)||16&i||(o=e-(c-s)*t,o=o>=a&&o<=p)}return o}))}function Oi(t,e,o,i,n){var r=o[0];if(!(Gi(t,e,r,i,n)||Ri(t,e,r,i,n[0],n[1])||Ri(t,e,r,i,n[0],n[3])||Ri(t,e,r,i,n[2],n[1])||Ri(t,e,r,i,n[2],n[3])))return!1;if(1===o.length)return!0;for(e=1,r=o.length;e<r;++e)if(xi(t,o[e-1],o[e],i,n))return!1;return!0}function Ni(t,e,o,i){for(var n=0,r=t[o-i],s=t[o-i+1];e<o;e+=i)var a=t[e],l=t[e+1],n=n+(a-r)*(l+s),r=a,s=l;return 0<n}function ki(t,e,o,i){var n=0;i=void 0!==i&&i;var r,s=0;for(r=e.length;s<r;++s){var a=e[s],n=Ni(t,n,a,o);if(s){if(i&&!n||!i&&n)return!1}else if(i&&n||!i&&!n)return!1;n=a}return!0}function Di(t,e,o,i,n){n=void 0!==n&&n;var r,s=0;for(r=o.length;s<r;++s){var a=o[s],l=Ni(t,e,a,i);if(s?n&&!l||!n&&l:n&&l||!n&&!l)for(var l=t,p=a,c=i;e<p-c;){var u;for(u=0;u<c;++u){var h=l[e+u];l[e+u]=l[p-c+u],l[p-c+u]=h}e+=c,p-=c}e=a}return e}function ji(t,e,o,i){var n,r=0,s=0;for(n=e.length;s<n;++s)r=Di(t,r,e[s],o,i);return r}function Fi(t,e){ai.call(this),this.c=[],this.u=-1,this.D=null,this.I=this.C=this.B=-1,this.j=null,this.ma(t,e)}function Ui(t){if(t.u!=t.i){var e=J(t.G());t.D=Ti(t.ec(),0,t.c,t.a,e,0),t.u=t.i}return t.D}function Bi(t,e,o,i){var r=i||32;i=[];var s;for(s=0;s<r;++s)n(i,t.offset(e,o,2*Math.PI*s/r));return i.push(i[0],i[1]),t=new Fi(null),t.ba("XY",i,[i.length]),t}function Vi(t){var e=t[0],o=t[1],i=t[2];return t=t[3],e=[e,o,e,t,i,t,i,o,e,o],o=new Fi(null),o.ba("XY",e,[e.length]),o}function Wi(t,e,o){var i=e||32,n=t.qa();e=t.ja;for(var r=new Fi(null,e),i=n*(i+1),n=Array(i),s=0;s<i;s++)n[s]=0;return r.ba(e,n,[n.length]),zi(r,t.wa(),t.pd(),o),r}function zi(t,e,o,i){var n=t.ga(),r=t.ja,s=t.qa(),a=t.Bb(),l=n.length/s-1;i=i||0;for(var p,c,u=0;u<=l;++u)c=u*s,p=i+2*C(u,l)*Math.PI/l,n[c]=e[0]+o*Math.cos(p),n[c+1]=e[1]+o*Math.sin(p);t.ba(r,n,a)}function qi(t){ge.call(this),t=mg({},t),this.o=[0,0],this.c=[],this.wf=this.wf.bind(this),this.v=wt(t.projection),Hi(this,t)}function Hi(t,e){var o={};o.center=void 0!==e.center?e.center:null;var i=void 0!==e.minZoom?e.minZoom:0,n=void 0!==e.maxZoom?e.maxZoom:28,r=void 0!==e.zoomFactor?e.zoomFactor:2;if(void 0!==e.resolutions){n=e.resolutions;var s=n[0],a=n[n.length-1];n=ko(n)}else{s=wt(e.projection),a=s.G();var l=(a?Math.max(it(a),$(a)):360*_g.degrees/s.sc())/256/Math.pow(2,0),p=l/Math.pow(2,28);s=e.maxResolution,void 0!==s?i=0:s=l/Math.pow(r,i),a=e.minResolution,void 0===a&&(a=void 0!==e.maxZoom?void 0!==e.maxResolution?s/Math.pow(r,n):l/Math.pow(r,n):p),n=i+Math.floor(Math.log(s/a)/Math.log(r)),a=s/Math.pow(r,n-i),n=Do(r,s,n-i)}t.a=s,t.f=a,t.C=r,t.j=e.resolutions,t.l=i,(void 0!==e.enableRotation?e.enableRotation:1)?(i=e.constrainRotation,i=void 0===i||!0===i?Bo():!1===i?Fo:"number"==typeof i?Uo(i):Fo):i=jo,t.g={center:void 0!==e.extent?Jt(e.extent):Qt,resolution:n,rotation:i},void 0!==e.resolution?o.resolution=e.resolution:void 0!==e.zoom&&(o.resolution=t.constrainResolution(t.a,e.zoom-t.l)),o.rotation=void 0!==e.rotation?e.rotation:0,t.H(o),t.D=e}function Yi(t,e){var o=mg({},t.D);return void 0!==o.resolution?o.resolution=t.Pa():o.zoom=t.Hh(),o.center=t.wa(),o.rotation=t.Qa(),mg({},o,e)}function Zi(t,e,o){var i=t.wa();if(void 0!==i){var n=[i[0]-o[0],i[1]-o[1]];Xo(n,e-t.Qa()),zo(n,o)}return n}function Ki(t,e,o){var i,n=t.wa();return t=t.Pa(),void 0!==n&&void 0!==t&&(i=[o[0]-e*(o[0]-n[0])/t,o[1]-e*(o[1]-n[1])/t]),i}function Xi(t){var e=[100,100];return t='.ol-viewport[data-view="'+d(t)+'"]',(t=document.querySelector(t))&&(t=getComputedStyle(t),e[0]=parseInt(t.width,10),e[1]=parseInt(t.height,10)),e}function Ji(t,e){return void 0!==e?(e[0]=t.o[0],e[1]=t.o[1],e):t.o.slice()}function Qi(t){var e=t.a,o=Math.log(e/t.f)/Math.log(2);return function(t){return e/Math.pow(2,t*o)}}function $i(t){var e=t.a,o=Math.log(e/t.f)/Math.log(2);return function(t){return Math.log(e/t)/Math.log(2)/o}}function tn(t){return!!t.wa()&&void 0!==t.Pa()}function en(t,e,o){t.o[e]+=o,t.s()}function on(t,e,o){this.f=t,this.c=e,this.g=o,this.b=[],this.a=this.i=0}function nn(t){t.b.length=0,t.i=0,t.a=0}function rn(t){if(6>t.b.length)return!1;var e=Date.now()-t.g,o=t.b.length-3;if(t.b[o+2]<e)return!1;for(var i=o-3;0<i&&t.b[i+2]>e;)i-=3;if((e=t.b[o+2]-t.b[i+2])<1e3/60)return!1;var n=t.b[o]-t.b[i],o=t.b[o+1]-t.b[i+1];return t.i=Math.atan2(o,n),t.a=Math.sqrt(n*n+o*o)/e,t.a>t.c}function sn(t){ge.call(this),this.v=null,this.Ha(!0),this.handleEvent=t.handleEvent}function an(t,e,o,i){if(void 0!==e){var n=t.Qa(),r=t.wa();void 0!==n&&r&&0<i?t.animate({rotation:e,anchor:o,duration:i,easing:ke}):t.rotate(e,o)}}function ln(t,e,o,i){var n=t.Pa();if(e=t.constrainResolution(n,e,0),o&&void 0!==e&&e!==n){var r=t.wa();o=Ki(t,e,o),o=t.Ec(o),o=[(e*r[0]-n*o[0])/(e-n),(e*r[1]-n*o[1])/(e-n)]}pn(t,e,o,i)}function pn(t,e,o,i){if(e){var n=t.Pa(),r=t.wa();void 0!==n&&r&&e!==n&&i?t.animate({resolution:e,anchor:o,duration:i,easing:ke}):(o&&(o=Ki(t,e,o),t.ob(o)),t.Vc(e))}}function cn(t){t=t||{},this.a=t.delta?t.delta:1,sn.call(this,{handleEvent:un}),this.g=void 0!==t.duration?t.duration:250}function un(t){var e=!1,o=t.originalEvent;if("dblclick"==t.type){var e=t.coordinate,o=o.shiftKey?-this.a:this.a;ln(t.map.Z(),o,e,this.g),t.preventDefault(),e=!0}return!e}function hn(t){return t=t.originalEvent,t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey}function dn(t){return t=t.originalEvent,!(t.button||Hg&&Yg&&t.ctrlKey)}function fn(t){return"pointermove"==t.type}function yn(t){return"singleclick"==t.type}function gn(t){return t=t.originalEvent,!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey}function mn(t){return t=t.originalEvent,!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey}function vn(t){return"INPUT"!==(t=t.originalEvent.target.tagName)&&"SELECT"!==t&&"TEXTAREA"!==t}function _n(t){return y(t.b,56),"mouse"==t.b.pointerType}function bn(t){return t=t.b,t.isPrimary&&0===t.button}function En(t){t=t||{},sn.call(this,{handleEvent:t.handleEvent?t.handleEvent:wn}),this.yf=t.handleDownEvent?t.handleDownEvent:ii,this.If=t.handleDragEvent?t.handleDragEvent:h,this.Jf=t.handleMoveEvent?t.handleMoveEvent:h,this.sk=t.handleUpEvent?t.handleUpEvent:ii,this.D=!1,this.na={},this.o=[]}function Sn(t){for(var e=t.length,o=0,i=0,n=0;n<e;n++)o+=t[n].clientX,i+=t[n].clientY;return[o/e,i/e]}function wn(t){if(!(t instanceof $e))return!0;var e=!1,o=t.type;return"pointerdown"!==o&&"pointerdrag"!==o&&"pointerup"!==o||(o=t.b,"pointerup"==t.type?delete this.na[o.pointerId]:"pointerdown"==t.type?this.na[o.pointerId]=o:o.pointerId in this.na&&(this.na[o.pointerId]=o),this.o=pt(this.na)),this.D?"pointerdrag"==t.type?this.If(t):"pointerup"==t.type&&(this.D=this.sk(t)&&0<this.o.length):"pointerdown"==t.type?(this.D=t=this.yf(t),e=this.Xc(t)):"pointermove"==t.type&&this.Jf(t),!e}function Pn(t){En.call(this,{handleDownEvent:Mn,handleDragEvent:Cn,handleUpEvent:An}),t=t||{},this.a=t.kinetic,this.g=null,this.u=t.condition?t.condition:gn,this.j=!1}function Cn(t){var e=this.o,o=Sn(e);if(e.length==this.l){if(this.a&&this.a.b.push(o[0],o[1],Date.now()),this.g){var i=this.g[0]-o[0],n=o[1]-this.g[1];t=t.map.Z();var r=t.getState(),i=[i,n];Jo(i,r.resolution),Xo(i,r.rotation),zo(i,r.center),i=t.Ec(i),t.ob(i)}}else this.a&&nn(this.a);this.g=o,this.l=e.length}function An(t){var e=t.map;if(t=e.Z(),this.o.length)return this.a&&nn(this.a),this.g=null,!0;if(!this.j&&this.a&&rn(this.a)){var o=this.a;o=(o.c-o.a)/o.f;var i=this.a.i,n=t.wa(),n=e.Ja(n),e=e.Wa([n[0]-o*Math.cos(i),n[1]-o*Math.sin(i)]);t.animate({center:t.Ec(e),duration:500,easing:ke})}return en(t,1,-1),!1}function Mn(t){if(0<this.o.length&&this.u(t)){var e=t.map.Z();return this.g=null,this.D||en(e,1,1),Ji(e)[0]&&e.ob(t.frameState.viewState.center),this.a&&nn(this.a),this.j=1<this.o.length,!0}return!1}function xn(t){t=t||{},En.call(this,{handleDownEvent:Tn,handleDragEvent:Rn,handleUpEvent:In}),this.g=t.condition?t.condition:hn,this.a=void 0,this.j=void 0!==t.duration?t.duration:250}function Rn(t){if(_n(t)){var e=t.map,o=e.Z();if(o.g.rotation!==jo){if(e=e.Ob(),t=t.pixel,t=Math.atan2(e[1]/2-t[1],t[0]-e[0]/2),void 0!==this.a){var e=t-this.a;an(o,o.Qa()-e)}this.a=t}}}function In(t){if(!_n(t))return!0;t=t.map.Z(),en(t,1,-1);var e=t.Qa(),o=this.j,e=t.constrainRotation(e,0);return an(t,e,void 0,o),!1}function Tn(t){return!!(_n(t)&&dn(t)&&this.g(t))&&(en(t.map.Z(),1,1),this.a=void 0,!0)}function Ln(t){this.Gc=null,this.a=document.createElement("div"),this.a.style.position="absolute",this.a.className="ol-box "+t,this.i=this.c=this.b=null}function Gn(t){var e=t.c,o=t.i;t=t.a.style,t.left=Math.min(e[0],o[0])+"px",t.top=Math.min(e[1],o[1])+"px",t.width=Math.abs(o[0]-e[0])+"px",t.height=Math.abs(o[1]-e[1])+"px"}function On(t){var e=t.c,o=t.i,e=[e,[e[0],o[1]],o,[o[0],e[1]]].map(t.b.Wa,t.b);e[4]=e[0].slice(),t.Gc?t.Gc.ma([e]):t.Gc=new Fi([e])}function Nn(t){En.call(this,{handleDownEvent:Fn,handleDragEvent:Dn,handleUpEvent:jn}),t=t||{},this.a=new Ln(t.className||"ol-dragbox"),this.u=void 0!==t.minArea?t.minArea:64,this.g=null,this.C=t.condition?t.condition:oi,this.l=t.boxEndCondition?t.boxEndCondition:kn}function kn(t,e,o){return t=o[0]-e[0],e=o[1]-e[1],t*t+e*e>=this.u}function Dn(t){if(_n(t)){var e=this.a,o=t.pixel;e.c=this.g,e.i=o,On(e),Gn(e),this.b(new Un(pm,t.coordinate,t))}}function jn(t){return!_n(t)||(this.a.setMap(null),this.l(t,this.g,t.pixel)&&(this.j(t),this.b(new Un(cm,t.coordinate,t))),!1)}function Fn(t){if(_n(t)&&dn(t)&&this.C(t)){this.g=t.pixel,this.a.setMap(t.map);var e=this.a,o=this.g;return e.c=this.g,e.i=o,On(e),Gn(e),this.b(new Un(lm,t.coordinate,t)),!0}return!1}function Un(t,e,o){ue.call(this,t),this.coordinate=e,this.mapBrowserEvent=o}function Bn(t){t=t||{};var e=t.condition?t.condition:mn;this.B=void 0!==t.duration?t.duration:200,this.I=void 0!==t.out&&t.out,Nn.call(this,{condition:e,className:t.className||"ol-dragzoom"})}function Vn(t){sn.call(this,{handleEvent:Wn}),t=t||{},this.a=function(t){return gn(t)&&vn(t)},this.g=t.condition?t.condition:this.a,this.j=void 0!==t.duration?t.duration:100,this.o=void 0!==t.pixelDelta?t.pixelDelta:128}function Wn(t){var e=!1;if("keydown"==t.type){var o=t.originalEvent.keyCode;if(this.g(t)&&(40==o||37==o||39==o||38==o)){var e=t.map.Z(),i=e.Pa()*this.o,n=0,r=0;40==o?r=-i:37==o?n=-i:39==o?n=i:r=i,i=[n,r],Xo(i,e.Qa()),o=this.j,(n=e.wa())&&(i=e.Ec([n[0]+i[0],n[1]+i[1]]),o?e.animate({duration:o,easing:je,center:i}):e.ob(i)),t.preventDefault(),e=!0}}return!e}function zn(t){sn.call(this,{handleEvent:qn}),t=t||{},this.g=t.condition?t.condition:vn,this.a=t.delta?t.delta:1,this.j=void 0!==t.duration?t.duration:100}function qn(t){var e=!1;if("keydown"==t.type||"keypress"==t.type){var o=t.originalEvent.charCode;!this.g(t)||43!=o&&45!=o||(e=43==o?this.a:-this.a,o=t.map.Z(),ln(o,e,void 0,this.j),t.preventDefault(),e=!0)}return!e}function Hn(t){sn.call(this,{handleEvent:Yn}),t=t||{},this.j=0,this.D=void 0!==t.duration?t.duration:250,this.na=void 0!==t.timeout?t.timeout:80,this.C=void 0===t.useAnchor||t.useAnchor,this.R=t.constrainResolution||!1,this.a=null,this.l=this.o=this.u=this.g=void 0}function Yn(t){var e=t.type;if("wheel"!==e&&"mousewheel"!==e)return!0;t.preventDefault();var e=t.map,o=t.originalEvent;if(this.C&&(this.a=t.coordinate),"wheel"==t.type){var i=o.deltaY;zg&&o.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(i/=Zg),o.deltaMode===WheelEvent.DOM_DELTA_LINE&&(i*=40)}else"mousewheel"==t.type&&(i=-o.wheelDeltaY,qg&&(i/=3));if(0===i)return!1;if(t=Date.now(),void 0===this.g&&(this.g=t),(!this.o||400<t-this.g)&&(this.o=4>Math.abs(i)?um:hm),this.o===um){e=e.Z(),this.l?clearTimeout(this.l):en(e,1,1),this.l=setTimeout(this.B.bind(this),400);var o=e.Pa()*Math.pow(2,i/300),n=e.f,r=e.a,s=0;if(o<n?(o=Math.max(o,n/1.5),s=1):o>r&&(o=Math.min(o,1.5*r),s=-1),this.a){var a=Ki(e,o,this.a);e.ob(e.Ec(a))}return e.Vc(o),!s&&this.R&&e.animate({resolution:e.constrainResolution(o,0<i?-1:1),easing:ke,anchor:this.a,duration:this.D}),0<s?e.animate({resolution:n,easing:ke,anchor:this.a,duration:500}):0>s&&e.animate({resolution:r,easing:ke,anchor:this.a,duration:500}),this.g=t,!1}return this.j+=i,i=Math.max(this.na-(t-this.g),0),clearTimeout(this.u),this.u=setTimeout(this.I.bind(this,e),i),!1}function Zn(t){En.call(this,{handleDownEvent:Jn,handleDragEvent:Kn,handleUpEvent:Xn}),t=t||{},this.g=null,this.j=void 0,this.a=!1,this.l=0,this.C=void 0!==t.threshold?t.threshold:.3,this.u=void 0!==t.duration?t.duration:250}function Kn(t){var e=0,o=this.o[0],i=this.o[1],o=Math.atan2(i.clientY-o.clientY,i.clientX-o.clientX);if(void 0!==this.j&&(e=o-this.j,this.l+=e,!this.a&&Math.abs(this.l)>this.C&&(this.a=!0)),this.j=o,t=t.map,o=t.Z(),o.g.rotation!==jo){var i=t.a.getBoundingClientRect(),n=Sn(this.o);n[0]-=i.left,n[1]-=i.top,this.g=t.Wa(n),this.a&&(i=o.Qa(),t.render(),an(o,i+e,this.g))}}function Xn(t){if(2>this.o.length){if(t=t.map.Z(),en(t,1,-1),this.a){var e=t.Qa(),o=this.g,i=this.u,e=t.constrainRotation(e,0);an(t,e,o,i)}return!1}return!0}function Jn(t){return 2<=this.o.length&&(t=t.map,this.g=null,this.j=void 0,this.a=!1,this.l=0,this.D||en(t.Z(),1,1),!0)}function Qn(t){En.call(this,{handleDownEvent:er,handleDragEvent:$n,handleUpEvent:tr}),t=t||{},this.l=t.constrainResolution||!1,this.g=null,this.u=void 0!==t.duration?t.duration:400,this.a=void 0,this.j=1}function $n(t){var e=1,o=this.o[0],i=this.o[1],n=o.clientX-i.clientX,o=o.clientY-i.clientY,n=Math.sqrt(n*n+o*o);void 0!==this.a&&(e=this.a/n),this.a=n,t=t.map;var n=t.Z(),i=n.Pa(),r=n.a,s=n.f,o=i*e;o>r?(e=r/i,o=r):o<s&&(e=s/i,o=s),1!=e&&(this.j=e),e=t.a.getBoundingClientRect(),i=Sn(this.o),i[0]-=e.left,i[1]-=e.top,this.g=t.Wa(i),t.render(),pn(n,o,this.g)}function tr(t){if(2>this.o.length){t=t.map.Z(),en(t,1,-1);var e=t.Pa();if(this.l||e<t.f||e>t.a){var o=this.g,i=this.u,e=t.constrainResolution(e,0,this.j-1);pn(t,e,o,i)}return!1}return!0}function er(t){return 2<=this.o.length&&(t=t.map,this.g=null,this.a=void 0,this.j=1,this.D||en(t.Z(),1,1),!0)}function or(t){t=t||{};var e=new be,o=new on(-.005,.05,100);return(void 0!==t.altShiftDragRotate?t.altShiftDragRotate:1)&&e.push(new xn),(void 0!==t.doubleClickZoom?t.doubleClickZoom:1)&&e.push(new cn({delta:t.zoomDelta,duration:t.zoomDuration})),(void 0!==t.dragPan?t.dragPan:1)&&e.push(new Pn({kinetic:o})),(void 0!==t.pinchRotate?t.pinchRotate:1)&&e.push(new Zn),(void 0!==t.pinchZoom?t.pinchZoom:1)&&e.push(new Qn({constrainResolution:t.constrainResolution,duration:t.zoomDuration})),(void 0!==t.keyboard?t.keyboard:1)&&(e.push(new Vn),e.push(new zn({delta:t.zoomDelta,duration:t.zoomDuration}))),(void 0!==t.mouseWheelZoom?t.mouseWheelZoom:1)&&e.push(new Hn({constrainResolution:t.constrainResolution,duration:t.zoomDuration})),(void 0!==t.shiftDragZoom?t.shiftDragZoom:1)&&e.push(new Bn({duration:t.zoomDuration})),e}function ir(t){ge.call(this);var e=mg({},t);e.opacity=void 0!==t.opacity?t.opacity:1,e.visible=void 0===t.visible||t.visible,e.zIndex=void 0!==t.zIndex?t.zIndex:0,e.maxResolution=void 0!==t.maxResolution?t.maxResolution:1/0,e.minResolution=void 0!==t.minResolution?t.minResolution:0,this.H(e),this.a={layer:this,Je:!0}}function nr(t){return t.a.opacity=b(t.hc(),0,1),t.a.yj=t.$f(),t.a.visible=t.Mb(),t.a.extent=t.G(),t.a.zIndex=t.Ba(),t.a.maxResolution=t.fc(),t.a.minResolution=Math.max(t.gc(),0),t.a}function rr(t){var e=t||{};t=mg({},e),delete t.layers,e=e.layers,ir.call(this,t),this.f=[],this.c={},ne(this,me(dm),this.Hl,this),e?Array.isArray(e)?e=new be(e.slice(),{unique:!0}):y(e instanceof be,43):e=new be(void 0,{unique:!0}),this.xi(e)}function sr(t){var e=mg({},t);delete e.source,ir.call(this,e),this.v=this.l=this.o=null,t.map&&this.setMap(t.map),ne(this,me("source"),this.Ul,this),this.Wc(t.source?t.source:null)}function ar(t,e){return t.visible&&e>=t.minResolution&&e<t.maxResolution}function lr(){this.b={},this.a=0}function pr(){return[1,0,0,1,0,0]}function cr(t){return hr(t,1,0,0,1,0,0)}function ur(t,e){var o=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5],l=e[0],p=e[1],c=e[2],u=e[3],h=e[4];return e=e[5],t[0]=o*l+n*p,t[1]=i*l+r*p,t[2]=o*c+n*u,t[3]=i*c+r*u,t[4]=o*h+n*e+s,t[5]=i*h+r*e+a,t}function hr(t,e,o,i,n,r,s){return t[0]=e,t[1]=o,t[2]=i,t[3]=n,t[4]=r,t[5]=s,t}function dr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function fr(t,e){var o=e[0],i=e[1];return e[0]=t[0]*o+t[2]*i+t[4],e[1]=t[1]*o+t[3]*i+t[5],e}function yr(t,e){var o=Math.cos(e);e=Math.sin(e),ur(t,hr(ym,o,e,-e,o,0,0))}function gr(t,e,o){return ur(t,hr(ym,e,0,0,o,0,0))}function mr(t,e,o){ur(t,hr(ym,1,0,0,1,e,o))}function vr(t,e,o,i,n,r,s,a){var l=Math.sin(r);return r=Math.cos(r),t[0]=i*r,t[1]=n*l,t[2]=-i*l,t[3]=n*r,t[4]=s*i*r-a*i*l+e,t[5]=s*n*l+a*n*r+o,t}function _r(t){var e=t[0]*t[3]-t[1]*t[2];y(!!e,32);var o=t[0],i=t[1],n=t[2],r=t[3],s=t[4],a=t[5];return t[0]=r/e,t[1]=-i/e,t[2]=-n/e,t[3]=o/e,t[4]=(n*a-r*s)/e,t[5]=-(o*a-i*s)/e,t}function br(t,e){this.o=e,this.c={},this.v={}}function Er(t){var e=t.viewState,o=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;vr(o,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),_r(dr(i,o))}function Sr(){if(32<fm.a){var t,e=0;for(t in fm.b){var o=fm.b[t];3&e++||fe(o)||(delete fm.b[t],--fm.a)}}}function wr(t,e){var o=d(e).toString();return o in t.c?t.c[o]:(e=e.Fd(t),t.c[o]=e,t.v[o]=ne(e,"change",t.Fl,t),e)}function Pr(t,e){for(var o in t.c)if(!(o in e.layerStates)){e.postRenderFunctions.push(t.Rp.bind(t));break}}function Cr(t,e){return t.zIndex-e.zIndex}function Ar(t,e,o,i,n){ue.call(this,t),this.vectorContext=e,this.frameState=o,this.context=i,this.glContext=n}function Mr(t,e,o,i){e&&(t.translate(o,i),t.rotate(e),t.translate(-o,-i))}function xr(){}function Rr(t,e,o,i,n){this.i=t,this.u=e,this.c=o,this.S=i,this.Yb=n,this.M=this.b=this.a=this.Ua=this.R=this.I=null,this.na=this.T=this.l=this.B=this.C=this.D=0,this.fa=!1,this.f=this.fb=0,this.pa=!1,this.oa=0,this.Ia="",this.va=this.Jb=0,this.Sa=!1,this.j=this.$a=0,this.ra=this.o=this.g=null,this.v=[],this.xb=pr()}function Ir(t,e,o){if(t.M){e=ri(e,0,o,2,t.S,t.v),o=t.i;var i=t.xb,n=o.globalAlpha;1!=t.l&&(o.globalAlpha=n*t.l);var r=t.fb;t.fa&&(r+=t.Yb);var s,a=0;for(s=e.length;a<s;a+=2){var l=e[a]-t.D,p=e[a+1]-t.C;if(t.pa&&(l=Math.round(l),p=Math.round(p)),r||1!=t.f){var c=l+t.D,u=p+t.C;vr(i,c,u,t.f,t.f,r,-c,-u),o.setTransform.apply(o,i)}o.drawImage(t.M,t.T,t.na,t.oa,t.B,l,p,t.oa,t.B)}(r||1!=t.f)&&o.setTransform(1,0,0,1,0,0),1!=t.l&&(o.globalAlpha=n)}}function Tr(t,e,o,i){var n=0;if(t.ra&&""!==t.Ia){t.g&&Or(t,t.g),t.o&&Nr(t,t.o);var r=t.ra,s=t.i,a=t.Ua;for(a?(a.font!=r.font&&(a.font=s.font=r.font),a.textAlign!=r.textAlign&&(a.textAlign=s.textAlign=r.textAlign),a.textBaseline!=r.textBaseline&&(a.textBaseline=s.textBaseline=r.textBaseline)):(s.font=r.font,s.textAlign=r.textAlign,s.textBaseline=r.textBaseline,t.Ua={font:r.font,textAlign:r.textAlign,textBaseline:r.textBaseline}),e=ri(e,n,o,i,t.S,t.v),r=t.i,s=t.$a,t.Sa&&(s+=t.Yb);n<o;n+=i){var a=e[n]+t.Jb,l=e[n+1]+t.va;if(s||1!=t.j){var p=vr(t.xb,a,l,t.j,t.j,s,-a,-l);r.setTransform.apply(r,p)}t.o&&r.strokeText(t.Ia,a,l),t.g&&r.fillText(t.Ia,a,l)}(s||1!=t.j)&&r.setTransform(1,0,0,1,0,0)}}function Lr(t,e,o,i,n,r){var s=t.i;for(t=ri(e,o,i,n,t.S,t.v),s.moveTo(t[0],t[1]),e=t.length,r&&(e-=2),o=2;o<e;o+=2)s.lineTo(t[o],t[o+1]);return r&&s.closePath(),i}function Gr(t,e,o,i,n){var r,s=0;for(r=i.length;s<r;++s)o=Lr(t,e,o,i[s],n,!0);return o}function Or(t,e){var o=t.i,i=t.I;i?i.fillStyle!=e.fillStyle&&(i.fillStyle=o.fillStyle=e.fillStyle):(o.fillStyle=e.fillStyle,t.I={fillStyle:e.fillStyle})}function Nr(t,e){var o=t.i,i=t.R;i?(i.lineCap!=e.lineCap&&(i.lineCap=o.lineCap=e.lineCap),Kg&&!a(i.lineDash,e.lineDash)&&o.setLineDash(i.lineDash=e.lineDash),i.lineJoin!=e.lineJoin&&(i.lineJoin=o.lineJoin=e.lineJoin),i.lineWidth!=e.lineWidth&&(i.lineWidth=o.lineWidth=e.lineWidth),i.miterLimit!=e.miterLimit&&(i.miterLimit=o.miterLimit=e.miterLimit),i.strokeStyle!=e.strokeStyle&&(i.strokeStyle=o.strokeStyle=e.strokeStyle)):(o.lineCap=e.lineCap,Kg&&o.setLineDash(e.lineDash),o.lineJoin=e.lineJoin,o.lineWidth=e.lineWidth,o.miterLimit=e.miterLimit,o.strokeStyle=e.strokeStyle,t.R={lineCap:e.lineCap,lineDash:e.lineDash,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}function kr(t,e){br.call(this,0,e),this.i=xe(),this.b=this.i.canvas,this.b.style.width="100%",this.b.style.height="100%",this.b.style.display="block",this.b.className="ol-unselectable",t.insertBefore(this.b,t.childNodes[0]||null),this.a=!0,this.f=pr()}function Dr(t,e,o){var i=t.o,n=t.i;if(fe(i,e)){var r=o.extent,s=o.pixelRatio,a=o.viewState.rotation,l=o.viewState,p=o.pixelRatio/l.resolution;t=vr(t.f,t.b.width/2,t.b.height/2,p,-p,-l.rotation,-l.center[0],-l.center[1]),i.b(new Ar(e,new Rr(n,s,r,t,a),o,n,null))}}function jr(){}function Fr(t){this.b=t}function Ur(t){this.b=t}function Br(t){this.b=t}function Vr(){this.b="precision mediump float;varying vec2 a;varying vec2 b;varying float c;varying float d;uniform float m;uniform vec4 n;uniform vec4 o;uniform vec2 p;void main(void){vec2 windowCenter=vec2((a.x+1.0)/2.0*p.x*d,(a.y+1.0)/2.0*p.y*d);vec2 windowOffset=vec2((b.x+1.0)/2.0*p.x*d,(b.y+1.0)/2.0*p.y*d);float radius=length(windowCenter-windowOffset);float dist=length(windowCenter-gl_FragCoord.xy);if(dist>radius+c){if(o.a==0.0){gl_FragColor=n;}else{gl_FragColor=o;}gl_FragColor.a=gl_FragColor.a-(dist-(radius+c));}else if(n.a==0.0){gl_FragColor=o;if(dist<radius-c){gl_FragColor.a=gl_FragColor.a-(radius-c-dist);}} else{gl_FragColor=n;float strokeDist=radius-c;float antialias=2.0*d;if(dist>strokeDist){gl_FragColor=o;}else if(dist>=strokeDist-antialias){float step=smoothstep(strokeDist-antialias,strokeDist,dist);gl_FragColor=mix(n,o,step);}} gl_FragColor.a=gl_FragColor.a*m;if(gl_FragColor.a<=0.0){discard;}}"}function Wr(){this.b="varying vec2 a;varying vec2 b;varying float c;varying float d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;void main(void){mat4 offsetMatrix=i*j;a=vec4(h*vec4(e,0.0,1.0)).xy;d=l;float lineWidth=k*l;c=lineWidth/2.0;if(lineWidth==0.0){lineWidth=2.0*l;}vec2 offset;float radius=g+3.0*l;if(f==0.0){offset=vec2(-1.0,1.0);}else if(f==1.0){offset=vec2(-1.0,-1.0);}else if(f==2.0){offset=vec2(1.0,-1.0);}else{offset=vec2(1.0,1.0);}gl_Position=h*vec4(e+offset*radius,0.0,1.0)+offsetMatrix*vec4(offset*lineWidth,0.0,0.0);b=vec4(h*vec4(e.x+g,e.y,0.0,1.0)).xy;if(distance(a,b)>20000.0){gl_Position=vec4(a,0.0,1.0);}}"}function zr(t,e){this.B=t.getUniformLocation(e,"n"),this.oa=t.getUniformLocation(e,"k"),this.c=t.getUniformLocation(e,"j"),this.f=t.getUniformLocation(e,"i"),this.a=t.getUniformLocation(e,"m"),this.ra=t.getUniformLocation(e,"l"),this.i=t.getUniformLocation(e,"h"),this.I=t.getUniformLocation(e,"p"),this.R=t.getUniformLocation(e,"o"),this.j=t.getAttribLocation(e,"f"),this.b=t.getAttribLocation(e,"e"),this.S=t.getAttribLocation(e,"g")}function qr(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Hr(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}function Yr(t,e){this.origin=J(e),this.xb=pr(),this.Sa=pr(),this.$a=pr(),this.Jb=qr(),this.b=[],this.o=null,this.i=[],this.f=[],this.a=[],this.l=null,this.g=void 0}function Zr(t,e,o,i){t.drawElements(4,i-o,e.g?5125:5123,o*(e.g?4:2))}function Kr(t,e,o,i,n,r){return t=(o-t)*(r-e)-(n-t)*(i-e),t<=Cm&&t>=-Cm?void 0:0<t}function Xr(t){this.b=void 0!==t?t:[],this.a=Am}function Jr(t,e){Yr.call(this,0,e),this.v=null,this.j=[],this.u=[],this.S=0,this.c={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,s:!1}}function Qr(t,e,o,i){e.uniform4fv(t.v.R,o),e.uniform1f(t.v.oa,i)}function $r(){this.b="precision mediump float;varying vec2 a;varying float b;uniform float k;uniform sampler2D l;void main(void){vec4 texColor=texture2D(l,a);gl_FragColor.rgb=texColor.rgb;float alpha=texColor.a*b*k;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"}function ts(){this.b="varying vec2 a;varying float b;attribute vec2 c;attribute vec2 d;attribute vec2 e;attribute float f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;void main(void){mat4 offsetMatrix=i;if(g==1.0){offsetMatrix=i*j;}vec4 offsets=offsetMatrix*vec4(e,0.0,0.0);gl_Position=h*vec4(c,0.0,1.0)+offsets;a=d;b=f;}"}function es(t,e){this.c=t.getUniformLocation(e,"j"),this.f=t.getUniformLocation(e,"i"),this.a=t.getUniformLocation(e,"k"),this.i=t.getUniformLocation(e,"h"),this.v=t.getAttribLocation(e,"e"),this.u=t.getAttribLocation(e,"f"),this.b=t.getAttribLocation(e,"c"),this.D=t.getAttribLocation(e,"g"),this.C=t.getAttribLocation(e,"d")}function os(t,e){this.j=t,this.b=e,this.a={},this.c={},this.i={},this.l=this.v=this.f=this.o=null,(this.g=o(hg,"OES_element_index_uint"))&&e.getExtension("OES_element_index_uint"),ne(this.j,"webglcontextlost",this.Xo,this),ne(this.j,"webglcontextrestored",this.Yo,this)}function is(t,e,o){var i=t.b,n=o.b,r=String(d(o));if(r in t.a)i.bindBuffer(e,t.a[r].buffer);else{var s=i.createBuffer();i.bindBuffer(e,s);var a;34962==e?a=new Float32Array(n):34963==e&&(a=t.g?new Uint32Array(n):new Uint16Array(n)),i.bufferData(e,a,o.a),t.a[r]={lc:o,buffer:s}}}function ns(t,e){var o=t.b;e=String(d(e));var i=t.a[e];o.isContextLost()||o.deleteBuffer(i.buffer),delete t.a[e]}function rs(t){if(!t.f){var e=t.b,o=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,o);var i=ps(e,1,1),n=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,n),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,1,1),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,n),e.bindTexture(e.TEXTURE_2D,null),e.bindRenderbuffer(e.RENDERBUFFER,null),e.bindFramebuffer(e.FRAMEBUFFER,null),t.f=o,t.v=i,t.l=n}return t.f}function ss(t,e){var o=String(d(e));if(o in t.c)return t.c[o];var i=t.b,n=i.createShader(e.U());return i.shaderSource(n,e.b),i.compileShader(n),t.c[o]=n}function as(t,e,o){var i=d(e)+"/"+d(o);if(i in t.i)return t.i[i];var n=t.b,r=n.createProgram();return n.attachShader(r,ss(t,e)),n.attachShader(r,ss(t,o)),n.linkProgram(r),t.i[i]=r}function ls(t,e,o){var i=t.createTexture();return t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),void 0!==e&&t.texParameteri(3553,10242,e),void 0!==o&&t.texParameteri(3553,10243,o),i}function ps(t,e,o){var i=ls(t,void 0,void 0);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,o,0,t.RGBA,t.UNSIGNED_BYTE,null),i}function cs(t,e){var o=ls(t,33071,33071);return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),o}function us(t,e){Yr.call(this,0,e),this.C=this.D=void 0,this.S=[],this.v=[],this.oa=void 0,this.j=[],this.c=[],this.I=this.ra=void 0,this.B=null,this.fb=this.fa=this.na=this.T=this.Ua=this.R=void 0,this.va=[],this.u=[],this.pa=void 0}function hs(t,e,o,i){var n,r=t.D,s=t.C,a=t.oa,l=t.ra,p=t.I,c=t.R,u=t.Ua,h=t.T,d=t.na?1:0,f=-t.fa,y=t.fb,g=t.pa,m=Math.cos(f),f=Math.sin(f),v=t.b.length,_=t.a.length;for(n=0;n<o;n+=i){var b=e[n]-t.origin[0],E=e[n+1]-t.origin[1],S=_/8,w=-y*r,P=-y*(a-s);t.a[_++]=b,t.a[_++]=E,t.a[_++]=w*m-P*f,t.a[_++]=w*f+P*m,t.a[_++]=u/p,t.a[_++]=(h+a)/l,t.a[_++]=c,t.a[_++]=d,w=y*(g-r),P=-y*(a-s),t.a[_++]=b,t.a[_++]=E,t.a[_++]=w*m-P*f,t.a[_++]=w*f+P*m,t.a[_++]=(u+g)/p,t.a[_++]=(h+a)/l,t.a[_++]=c,t.a[_++]=d,w=y*(g-r),P=y*s,t.a[_++]=b,t.a[_++]=E,t.a[_++]=w*m-P*f,t.a[_++]=w*f+P*m,t.a[_++]=(u+g)/p,t.a[_++]=h/l,t.a[_++]=c,t.a[_++]=d,w=-y*r,P=y*s,t.a[_++]=b,t.a[_++]=E,t.a[_++]=w*m-P*f,t.a[_++]=w*f+P*m,t.a[_++]=u/p,t.a[_++]=h/l,t.a[_++]=c,t.a[_++]=d,t.b[v++]=S,t.b[v++]=S+1,t.b[v++]=S+2,t.b[v++]=S,t.b[v++]=S+2,t.b[v++]=S+3}}function ds(t,e,o,i){var n,r=e.length;for(n=0;n<r;++n){var s=e[n],a=d(s).toString();a in o?s=o[a]:(s=cs(i,s),o[a]=s),t[n]=s}}function fs(t,e,o){var i=e-o;return t[0]===t[i]&&t[1]===t[i+1]&&3<(e-0)/o&&!!ui(t,0,e,o)}function ys(){
this.b="precision mediump float;varying float a;varying vec2 b;varying float c;uniform float m;uniform vec4 n;uniform vec2 o;uniform float p;void main(void){if(a>0.0){vec2 windowCoords=vec2((b.x+1.0)/2.0*o.x*p,(b.y+1.0)/2.0*o.y*p);if(length(windowCoords-gl_FragCoord.xy)>c*p){discard;}} gl_FragColor=n;float alpha=n.a*m;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"}function gs(){this.b="varying float a;varying vec2 b;varying float c;attribute vec2 d;attribute vec2 e;attribute vec2 f;attribute float g;uniform mat4 h;uniform mat4 i;uniform mat4 j;uniform float k;uniform float l;bool nearlyEquals(in float value,in float ref){float epsilon=0.000000000001;return value>=ref-epsilon&&value<=ref+epsilon;}void alongNormal(out vec2 offset,in vec2 nextP,in float turnDir,in float direction){vec2 dirVect=nextP-e;vec2 normal=normalize(vec2(-turnDir*dirVect.y,turnDir*dirVect.x));offset=k/2.0*normal*direction;}void miterUp(out vec2 offset,out float round,in bool isRound,in float direction){float halfWidth=k/2.0;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=f-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;round=0.0;if(isRound){round=1.0;}else if(miterLength>l+k){offset=halfWidth*tmpNormal*direction;}} bool miterDown(out vec2 offset,in vec4 projPos,in mat4 offsetMatrix,in float direction){bool degenerate=false;vec2 tangent=normalize(normalize(f-e)+normalize(e-d));vec2 normal=vec2(-tangent.y,tangent.x);vec2 dirVect=d-e;vec2 tmpNormal=normalize(vec2(-dirVect.y,dirVect.x));vec2 longOffset,shortOffset,longVertex;vec4 shortProjVertex;float halfWidth=k/2.0;if(length(f-e)>length(d-e)){longOffset=tmpNormal*direction*halfWidth;shortOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=f;shortProjVertex=h*vec4(d,0.0,1.0);}else{shortOffset=tmpNormal*direction*halfWidth;longOffset=normalize(vec2(dirVect.y,-dirVect.x))*direction*halfWidth;longVertex=d;shortProjVertex=h*vec4(f,0.0,1.0);}vec4 p1=h*vec4(longVertex,0.0,1.0)+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p2=projPos+offsetMatrix*vec4(longOffset,0.0,0.0);vec4 p3=shortProjVertex+offsetMatrix*vec4(-shortOffset,0.0,0.0);vec4 p4=shortProjVertex+offsetMatrix*vec4(shortOffset,0.0,0.0);float denom=(p4.y-p3.y)*(p2.x-p1.x)-(p4.x-p3.x)*(p2.y-p1.y);float firstU=((p4.x-p3.x)*(p1.y-p3.y)-(p4.y-p3.y)*(p1.x-p3.x))/denom;float secondU=((p2.x-p1.x)*(p1.y-p3.y)-(p2.y-p1.y)*(p1.x-p3.x))/denom;float epsilon=0.000000000001;if(firstU>epsilon&&firstU<1.0-epsilon&&secondU>epsilon&&secondU<1.0-epsilon){shortProjVertex.x=p1.x+firstU*(p2.x-p1.x);shortProjVertex.y=p1.y+firstU*(p2.y-p1.y);offset=shortProjVertex.xy;degenerate=true;}else{float miterLength=abs(halfWidth/dot(normal,tmpNormal));offset=normal*direction*miterLength;}return degenerate;}void squareCap(out vec2 offset,out float round,in bool isRound,in vec2 nextP,in float turnDir,in float direction){round=0.0;vec2 dirVect=e-nextP;vec2 firstNormal=normalize(dirVect);vec2 secondNormal=vec2(turnDir*firstNormal.y*direction,-turnDir*firstNormal.x*direction);vec2 hypotenuse=normalize(firstNormal-secondNormal);vec2 normal=vec2(turnDir*hypotenuse.y*direction,-turnDir*hypotenuse.x*direction);float length=sqrt(c*c*2.0);offset=normal*length;if(isRound){round=1.0;}} void main(void){bool degenerate=false;float direction=float(sign(g));mat4 offsetMatrix=i*j;vec2 offset;vec4 projPos=h*vec4(e,0.0,1.0);bool round=nearlyEquals(mod(g,2.0),0.0);a=0.0;c=k/2.0;b=projPos.xy;if(nearlyEquals(mod(g,3.0),0.0)||nearlyEquals(mod(g,17.0),0.0)){alongNormal(offset,f,1.0,direction);}else if(nearlyEquals(mod(g,5.0),0.0)||nearlyEquals(mod(g,13.0),0.0)){alongNormal(offset,d,-1.0,direction);}else if(nearlyEquals(mod(g,23.0),0.0)){miterUp(offset,a,round,direction);}else if(nearlyEquals(mod(g,19.0),0.0)){degenerate=miterDown(offset,projPos,offsetMatrix,direction);}else if(nearlyEquals(mod(g,7.0),0.0)){squareCap(offset,a,round,f,1.0,direction);}else if(nearlyEquals(mod(g,11.0),0.0)){squareCap(offset,a,round,d,-1.0,direction);}if(!degenerate){vec4 offsets=offsetMatrix*vec4(offset,0.0,0.0);gl_Position=projPos+offsets;}else{gl_Position=vec4(offset,0.0,1.0);}}"}function ms(t,e){this.B=t.getUniformLocation(e,"n"),this.oa=t.getUniformLocation(e,"k"),this.R=t.getUniformLocation(e,"l"),this.c=t.getUniformLocation(e,"j"),this.f=t.getUniformLocation(e,"i"),this.a=t.getUniformLocation(e,"m"),this.ra=t.getUniformLocation(e,"p"),this.i=t.getUniformLocation(e,"h"),this.I=t.getUniformLocation(e,"o"),this.g=t.getAttribLocation(e,"g"),this.o=t.getAttribLocation(e,"d"),this.l=t.getAttribLocation(e,"f"),this.b=t.getAttribLocation(e,"e")}function vs(t,e){Yr.call(this,0,e),this.v=null,this.u=[],this.j=[],this.c={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,s:!1}}function _s(t,e,o,i){var n,r=t.a.length,s=t.b.length,l="bevel"===t.c.lineJoin?0:"miter"===t.c.lineJoin?1:2,p="butt"===t.c.lineCap?0:"square"===t.c.lineCap?1:2,c=fs(e,o,i),u=s,h=1;for(n=0;n<o;n+=i){var d=r/7,f=y,y=g||[e[n],e[n+1]];if(n){if(n===o-i){if(c)var g=m;else f=f||[0,0],r=bs(t,f,y,[0,0],h*Lm*(p||1),r),r=bs(t,f,y,[0,0],-h*Lm*(p||1),r),t.b[s++]=d,t.b[s++]=u-1,t.b[s++]=u,t.b[s++]=u,t.b[s++]=d+1,t.b[s++]=d,p&&(r=bs(t,f,y,[0,0],h*Om*p,r),r=bs(t,f,y,[0,0],-h*Om*p,r),t.b[s++]=d+2,t.b[s++]=d,t.b[s++]=d+1,t.b[s++]=d+1,t.b[s++]=d+3,t.b[s++]=d+2);break}g=[e[n+i],e[n+i+1]]}else{if(g=[e[n+i],e[n+i+1]],o-0==2*i&&a(y,g))break;if(!c){p&&(r=bs(t,[0,0],y,g,h*Gm*p,r),r=bs(t,[0,0],y,g,-h*Gm*p,r),t.b[s++]=d+2,t.b[s++]=d,t.b[s++]=d+1,t.b[s++]=d+1,t.b[s++]=d+3,t.b[s++]=d+2),r=bs(t,[0,0],y,g,h*Tm*(p||1),r),r=bs(t,[0,0],y,g,-h*Tm*(p||1),r),u=r/7-1;continue}f=[e[o-2*i],e[o-2*i+1]];var m=g}var v=Kr(f[0],f[1],y[0],y[1],g[0],g[1])?-1:1;r=bs(t,f,y,g,v*Nm*(l||1),r),r=bs(t,f,y,g,v*km*(l||1),r),r=bs(t,f,y,g,-v*Dm*(l||1),r),0<n&&(t.b[s++]=d,t.b[s++]=u-1,t.b[s++]=u,t.b[s++]=d+2,t.b[s++]=d,t.b[s++]=0<h*v?u:u-1),t.b[s++]=d,t.b[s++]=d+2,t.b[s++]=d+1,u=d+2,h=v,l&&(r=bs(t,f,y,g,v*jm*l,r),t.b[s++]=d+1,t.b[s++]=d+3,t.b[s++]=d)}c&&(d=d||r/7,v=Ni([f[0],f[1],y[0],y[1],g[0],g[1]],0,6,2)?1:-1,r=bs(t,f,y,g,v*Nm*(l||1),r),bs(t,f,y,g,-v*Dm*(l||1),r),t.b[s++]=d,t.b[s++]=u-1,t.b[s++]=u,t.b[s++]=d+1,t.b[s++]=d,t.b[s++]=0<h*v?u:u-1)}function bs(t,e,o,i,n,r){return t.a[r++]=e[0],t.a[r++]=e[1],t.a[r++]=o[0],t.a[r++]=o[1],t.a[r++]=i[0],t.a[r++]=i[1],t.a[r++]=n,r}function Es(t,e,o,i){return!((o-=e)<2*i)&&(o!==2*i||!a([t[e],t[e+1]],[t[e+i],t[e+i+1]]))}function Ss(t,e,o,i){if(fs(e,e.length,i)||(e.push(e[0]),e.push(e[1])),_s(t,e,e.length,i),o.length){var n;for(e=0,n=o.length;e<n;++e)fs(o[e],o[e].length,i)||(o[e].push(o[e][0]),o[e].push(o[e][1])),_s(t,o[e],o[e].length,i)}}function ws(t,e,o){o=void 0===o?t.b.length:o,t.i.push(o),t.f.push(e),t.c.s&&(t.j.push(o),t.c.s=!1)}function Ps(t,e,o,i,n){e.uniform4fv(t.v.B,o),e.uniform1f(t.v.oa,i),e.uniform1f(t.v.R,n)}function Cs(){this.b="precision mediump float;uniform vec4 e;uniform float f;void main(void){gl_FragColor=e;float alpha=e.a*f;if(alpha==0.0){discard;}gl_FragColor.a=alpha;}"}function As(){this.b="attribute vec2 a;uniform mat4 b;uniform mat4 c;uniform mat4 d;void main(void){gl_Position=b*vec4(a,0.0,1.0);}"}function Ms(t,e){this.B=t.getUniformLocation(e,"e"),this.c=t.getUniformLocation(e,"d"),this.f=t.getUniformLocation(e,"c"),this.a=t.getUniformLocation(e,"f"),this.i=t.getUniformLocation(e,"b"),this.b=t.getAttribLocation(e,"a")}function xs(t){t=t||{},this.a=void 0!==t.color?t.color:null,this.f=t.lineCap,this.i=void 0!==t.lineDash?t.lineDash:null,this.g=t.lineDashOffset,this.j=t.lineJoin,this.o=t.miterLimit,this.c=t.width,this.b=void 0}function Rs(t){this.b=this.a=this.i=void 0,this.f=void 0===t||t,this.c=0}function Is(t){var e=t.b;if(e){var o=e.next,i=e.ub;o&&(o.ub=i),i&&(i.next=o),t.b=o||i,t.i===t.a?(t.b=void 0,t.i=void 0,t.a=void 0):t.i===e?t.i=t.b:t.a===e&&(t.a=i?t.b.ub:t.b),t.c--}}function Ts(t){if(t.b=t.i,t.b)return t.b.data}function Ls(t){if(t.b&&t.b.next)return t.b=t.b.next,t.b.data}function Gs(t){if(t.b&&t.b.next)return t.b.next.data}function Os(t){if(t.b&&t.b.ub)return t.b=t.b.ub,t.b.data}function Ns(t){if(t.b&&t.b.ub)return t.b.ub.data}function ks(t){if(t.b)return t.b.data}function Ds(t){this.a=Bm.$d(t),this.b={}}function js(t,e,o){var i=t.b[d(o)];W([i.ca,i.da,i.$,i.ia],e)||(t.remove(o),t.Ca(e,o))}function Fs(t){return t.a.all().map(function(t){return t.value})}function Us(t,e){return t.a.search({ca:e[0],da:e[1],$:e[2],ia:e[3]}).map(function(t){return t.value})}function Bs(t,e,o,i){return Vs(Us(t,e),o,i)}function Vs(t,e,o){for(var i,n=0,r=t.length;n<r&&!(i=e.call(o,t[n]));n++);return i}function Ws(t,e){Yr.call(this,0,e),this.g=new vs(0,e),this.v=null,this.u=[],this.c=[],this.j={fillColor:null,s:!1}}function zs(t,e,o,i){var n=new Rs,r=new Ds;if(e=qs(t,e,i,n,r,!0),o.length){var s,a=[],l=0;for(s=o.length;l<s;++l){var p={list:new Rs,$:void 0,Mg:new Ds};a.push(p),p.$=qs(t,o[l],i,p.list,p.Mg,!1)}for(a.sort(function(t,e){return e.$[0]===t.$[0]?t.$[1]-e.$[1]:e.$[0]-t.$[0]}),l=0;l<a.length;++l){o=a[l].list,s=i=Ts(o);do{if(oa(s,r).length){var c=!0;break}s=Ls(o)}while(i!==s);c||(Hs(o,a[l].Mg,!0),Ys(o,a[l].$[0],n,e[0],r)&&(r.concat(a[l].Mg),Hs(n,r,!1)))}}else Hs(n,r,!1);Zs(t,n,r)}function qs(t,e,o,i,n,r){var s,a,l=t.a.length/2,p=[],c=[];if(r===Ni(e,0,e.length,o)){var u=a=Qs(t,e[0],e[1],l++);r=e[0];var h=e[1],d=o;for(s=e.length;d<s;d+=o){var f=Qs(t,e[d],e[d+1],l++);c.push($s(u,f,i)),p.push([Math.min(u.x,f.x),Math.min(u.y,f.y),Math.max(u.x,f.x),Math.max(u.y,f.y)]),e[d]>r&&(r=e[d],h=e[d+1]),u=f}}else for(d=e.length-o,u=a=Qs(t,e[d],e[d+1],l++),r=e[d],h=e[d+1],d-=o,s=0;d>=s;d-=o)f=Qs(t,e[d],e[d+1],l++),c.push($s(u,f,i)),p.push([Math.min(u.x,f.x),Math.min(u.y,f.y),Math.max(u.x,f.x),Math.max(u.y,f.y)]),e[d]>r&&(r=e[d],h=e[d+1]),u=f;return c.push($s(f,a,i)),p.push([Math.min(u.x,f.x),Math.min(u.y,f.y),Math.max(u.x,f.x),Math.max(u.y,f.y)]),n.load(p,c),[r,h]}function Hs(t,e,o){var i=Ts(t),n=i,r=Ls(t),s=!1;do{var a=o?Kr(r.W.x,r.W.y,n.W.x,n.W.y,n.aa.x,n.aa.y):Kr(n.aa.x,n.aa.y,n.W.x,n.W.y,r.W.x,r.W.y);void 0===a?(ta(n,r,t,e),s=!0,r===i&&(i=Gs(t)),r=n,Os(t)):n.W.Fb!==a&&(n.W.Fb=a,s=!0),n=r,r=Ls(t)}while(n!==i);return s}function Ys(t,e,o,i,n){for(var r=Ts(t);r.W.x!==e;)r=Ls(t);e=r.W,i={x:i,y:e.y,hb:-1};var s,a=1/0,l=oa({aa:e,W:i},n,!0),p=0;for(s=l.length;p<s;++p){var c=l[p],u=ia(e,i,c.aa,c.W,!0),h=Math.abs(e.x-u[0]);if(h<a&&void 0!==Kr(e.x,e.y,c.aa.x,c.aa.y,c.W.x,c.W.y)){a=h;var d={x:u[0],y:u[1],hb:-1};r=c}}if(1/0===a)return!1;if(l=r.W,0<a&&(r=ea(e,d,r.W,n),r.length))for(d=1/0,p=0,s=r.length;p<s;++p)a=r[p],((c=Math.atan2(e.y-a.y,i.x-a.x))<d||c===d&&a.x<l.x)&&(d=c,l=a);for(r=Ts(o);r.W.x!==l.x||r.W.y!==l.y;)r=Ls(o);return i={x:e.x,y:e.y,hb:e.hb,Fb:void 0},p={x:r.W.x,y:r.W.y,hb:r.W.hb,Fb:void 0},Gs(t).aa=i,$s(e,r.W,t,n),$s(p,i,t,n),r.W=p,t.f&&t.b&&(t.i=t.b,t.a=t.b.ub),o.concat(t),!0}function Zs(t,e,o){for(var i=!1,n=Js(e,o);3<e.c;)if(n){if(!Ks(t,e,o,n,i)&&!Hs(e,o,i)&&!Xs(t,e,o,!0))break}else if(!Ks(t,e,o,n,i)&&!Hs(e,o,i)&&!Xs(t,e,o)){if(!(n=Js(e,o))){n=t,i=e,r=s=Ts(i);do{if(a=oa(r,o),a.length){for(s=a[0],a=ia(r.aa,r.W,s.aa,s.W),a=Qs(n,a[0],a[1],n.a.length/2),l=new Rs,p=new Ds,$s(a,r.W,l,p),r.W=a,js(o,[Math.min(r.aa.x,a.x),Math.min(r.aa.y,a.y),Math.max(r.aa.x,a.x),Math.max(r.aa.y,a.y)],r),r=Ls(i);r!==s;)$s(r.aa,r.W,l,p),o.remove(r),Is(i),r=ks(i);$s(s.aa,a,l,p),s.aa=a,js(o,[Math.min(s.W.x,a.x),Math.min(s.W.y,a.y),Math.max(s.W.x,a.x),Math.max(s.W.y,a.y)],s),Hs(i,o,!1),Zs(n,i,o),Hs(l,p,!1),Zs(n,l,p);break}r=Ls(i)}while(r!==s);break}var i=e,r=2*i.c,s=Array(r),a=Ts(i),l=a,p=0;do{s[p++]=l.aa.x,s[p++]=l.aa.y,l=Ls(i)}while(l!==a);i=!Ni(s,0,r,2),Hs(e,o,i)}3===e.c&&(n=t.b.length,t.b[n++]=Ns(e).aa.hb,t.b[n++]=ks(e).aa.hb,t.b[n++]=Gs(e).aa.hb)}function Ks(t,e,o,i,n){var r=t.b.length,s=Ts(e),a=Ns(e),l=s,p=Ls(e),c=Gs(e),u=!1;do{var h=l.aa,d=l.W,f=p.W;if(!1===d.Fb){var y=n?na(c.W,f,d,h,a.aa):na(a.aa,h,d,f,c.W);!i&&oa({aa:h,W:f},o).length||!y||ea(h,d,f,o,!0).length||!i&&!1!==h.Fb&&!1!==f.Fb&&Ni([a.aa.x,a.aa.y,h.x,h.y,d.x,d.y,f.x,f.y,c.W.x,c.W.y],0,10,2)!==!n||(t.b[r++]=h.hb,t.b[r++]=d.hb,t.b[r++]=f.hb,ta(l,p,e,o),p===s&&(s=c),u=!0)}a=Ns(e),l=ks(e),p=Ls(e),c=Gs(e)}while(l!==s&&3<e.c);return u}function Xs(t,e,o,i){var n=Ts(e);Ls(e);var r=n,s=Ls(e),a=!1;do{var l=ia(r.aa,r.W,s.aa,s.W,i);if(l){var a=t.b.length,p=t.a.length/2,c=Os(e);Is(e),o.remove(c);var u=c===n;if(i?(l[0]===r.aa.x&&l[1]===r.aa.y?(Os(e),l=r.aa,s.aa=l,o.remove(r),u=u||r===n):(l=s.W,r.W=l,o.remove(s),u=u||s===n),Is(e)):(l=Qs(t,l[0],l[1],p),r.W=l,s.aa=l,js(o,[Math.min(r.aa.x,r.W.x),Math.min(r.aa.y,r.W.y),Math.max(r.aa.x,r.W.x),Math.max(r.aa.y,r.W.y)],r),js(o,[Math.min(s.aa.x,s.W.x),Math.min(s.aa.y,s.W.y),Math.max(s.aa.x,s.W.x),Math.max(s.aa.y,s.W.y)],s)),t.b[a++]=c.aa.hb,t.b[a++]=c.W.hb,t.b[a++]=l.hb,a=!0,u)break}r=Ns(e),s=Ls(e)}while(r!==n);return a}function Js(t,e){var o=Ts(t),i=o;do{if(oa(i,e).length)return!1;i=Ls(t)}while(i!==o);return!0}function Qs(t,e,o,i){var n=t.a.length;return t.a[n++]=e,t.a[n++]=o,{x:e,y:o,hb:i,Fb:void 0}}function $s(t,e,o,i){var n={aa:t,W:e},r={ub:void 0,next:void 0,data:n},s=o.b;if(s){var a=s.next;r.ub=s,r.next=a,s.next=r,a&&(a.ub=r),s===o.a&&(o.a=r)}else o.i=r,o.a=r,o.f&&(r.next=r,r.ub=r);return o.b=r,o.c++,i&&i.Ca([Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.x,e.x),Math.max(t.y,e.y)],n),n}function ta(t,e,o,i){ks(o)===e&&(Is(o),t.W=e.W,i.remove(e),js(i,[Math.min(t.aa.x,t.W.x),Math.min(t.aa.y,t.W.y),Math.max(t.aa.x,t.W.x),Math.max(t.aa.y,t.W.y)],t))}function ea(t,e,o,i,n){var r,s,a=[],l=Us(i,[Math.min(t.x,e.x,o.x),Math.min(t.y,e.y,o.y),Math.max(t.x,e.x,o.x),Math.max(t.y,e.y,o.y)]);for(i=0,r=l.length;i<r;++i)for(s in l[i]){var p=l[i][s];"object"!=typeof p||n&&!p.Fb||p.x===t.x&&p.y===t.y||p.x===e.x&&p.y===e.y||p.x===o.x&&p.y===o.y||-1!==a.indexOf(p)||!Ri([t.x,t.y,e.x,e.y,o.x,o.y],0,6,2,p.x,p.y)||a.push(p)}return a}function oa(t,e,o){var i=t.aa,n=t.W;e=Us(e,[Math.min(i.x,n.x),Math.min(i.y,n.y),Math.max(i.x,n.x),Math.max(i.y,n.y)]);var r,s=[],a=0;for(r=e.length;a<r;++a){var l=e[a];t!==l&&(o||l.aa!==n||l.W!==i)&&ia(i,n,l.aa,l.W,o)&&s.push(l)}return s}function ia(t,e,o,i,n){var r=(i.y-o.y)*(e.x-t.x)-(i.x-o.x)*(e.y-t.y);if(r&&(i=((i.x-o.x)*(t.y-o.y)-(i.y-o.y)*(t.x-o.x))/r,o=((e.x-t.x)*(t.y-o.y)-(e.y-t.y)*(t.x-o.x))/r,!n&&i>Cm&&i<1-Cm&&o>Cm&&o<1-Cm||n&&0<=i&&1>=i&&0<=o&&1>=o))return[t.x+i*(e.x-t.x),t.y+i*(e.y-t.y)]}function na(t,e,o,i,n){if(void 0===e.Fb||void 0===i.Fb)return!1;var r=(o.x-i.x)*(e.y-i.y)>(o.y-i.y)*(e.x-i.x);return n=(n.x-i.x)*(e.y-i.y)<(n.y-i.y)*(e.x-i.x),t=(t.x-e.x)*(i.y-e.y)>(t.y-e.y)*(i.x-e.x),o=(o.x-e.x)*(i.y-e.y)<(o.y-e.y)*(i.x-e.x),e=e.Fb?o||t:o&&t,(i.Fb?n||r:n&&r)&&e}function ra(){}function sa(t,e,o){this.f=e,this.g=t,this.c=o,this.a={}}function aa(t,e){var o,i=[];for(o in t.a){var n,r=t.a[o];for(n in r)i.push(r[n].Eb(e))}return function(){for(var t,e=i.length,o=0;o<e;o++)t=i[o].apply(this,arguments);return t}}function la(t,e){for(var o in t.a){var i,n=t.a[o];for(i in n)n[i].Db(e)}}function pa(t,e,o,i,n,r,s,a,l,p,c){var u=Vm,h=Object.keys(t.a).map(Number);h.sort(function(t,e){return e-t});var d,f,y=0;for(d=h.length;y<d;++y){var g=t.a[h[y].toString()];for(f=_m.length-1;0<=f;--f){var m=g[_m[f]];if(void 0!==m&&(m=m.La(e,o,i,n,u,r,s,a,l,p,c)))return m}}}function ca(t,e,o,i,n,r,s,a){var l=o.b;return l.bindFramebuffer(l.FRAMEBUFFER,rs(o)),void 0!==pa(t,o,e,i,n,r,s,a,function(){var t=new Uint8Array(4);return l.readPixels(0,0,1,1,l.RGBA,l.UNSIGNED_BYTE,t),0<t[3]},!1)}function ua(t,e,o,i,n,r,s){this.b=t,this.i=e,this.a=r,this.c=s,this.j=n,this.g=i,this.f=o,this.o=this.l=this.v=null}function ha(){this.c=0,this.b={},this.i=this.a=null}function da(t,e){br.call(this,0,e),this.b=document.createElement("CANVAS"),this.b.style.width="100%",this.b.style.height="100%",this.b.style.display="block",this.b.className="ol-unselectable",t.insertBefore(this.b,t.childNodes[0]||null),this.S=this.D=0,this.C=xe(),this.l=!0,this.i=Qe(this.b,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0}),this.f=new os(this.b,this.i),ne(this.b,"webglcontextlost",this.Yn,this),ne(this.b,"webglcontextrestored",this.Zn,this),this.a=new ha,this.u=null,this.j=new Ro(function(t){var e=t[1];t=t[2];var o=e[0]-this.u[0],e=e[1]-this.u[1];return 65536*Math.log(t)+Math.sqrt(o*o+e*e)/t}.bind(this),function(t){return t[0].bb()}),this.B=function(){if(this.j.b.length){Go(this.j);var t=Io(this.j);fa(this,t[0],t[3],t[4])}return!1}.bind(this),this.g=0,ga(this)}function fa(t,e,o,i){var n=t.i,r=e.bb();if(t.a.b.hasOwnProperty(r))t=t.a.get(r),n.bindTexture(3553,t.Ib),9729!=t.Ph&&(n.texParameteri(3553,10240,9729),t.Ph=9729),9729!=t.Rh&&(n.texParameteri(3553,10241,9729),t.Rh=9729);else{var s=n.createTexture();if(n.bindTexture(3553,s),0<i){var a=t.C.canvas,l=t.C;t.D!==o[0]||t.S!==o[1]?(a.width=o[0],a.height=o[1],t.D=o[0],t.S=o[1]):l.clearRect(0,0,o[0],o[1]),l.drawImage(e.Y(),i,i,o[0],o[1],0,0,o[0],o[1]),n.texImage2D(3553,0,6408,6408,5121,a)}else n.texImage2D(3553,0,6408,6408,5121,e.Y());n.texParameteri(3553,10240,9729),n.texParameteri(3553,10241,9729),n.texParameteri(3553,10242,33071),n.texParameteri(3553,10243,33071),t.a.set(r,{Ib:s,Ph:9729,Rh:9729})}}function ya(t,e,o){var i=t.o;if(fe(i,e)){t=t.f;var n=o.viewState;i.b(new Ar(e,new ua(t,n.center,n.resolution,n.rotation,o.size,o.extent,o.pixelRatio),o,null,t))}}function ga(t){t=t.i,t.activeTexture(33984),t.blendFuncSeparate(770,771,1,771),t.disable(2884),t.disable(2929),t.disable(3089),t.disable(2960)}function ma(t){ge.call(this);var e=va(t);this.Cf=void 0!==t.loadTilesWhileAnimating&&t.loadTilesWhileAnimating,this.Df=void 0!==t.loadTilesWhileInteracting&&t.loadTilesWhileInteracting,this.If=void 0!==t.pixelRatio?t.pixelRatio:Zg,this.yf=e.logos,this.pa=function(){this.j=void 0,this.Sp.call(this,Date.now())}.bind(this),this.Yb=pr(),this.Jf=pr(),this.ad=0,this.I=this.R=this.T=this.g=this.c=null,this.a=document.createElement("DIV"),this.a.className="ol-viewport"+($g?" ol-touch":""),this.a.style.position="relative",this.a.style.overflow="hidden",this.a.style.width="100%",this.a.style.height="100%",this.a.style.msTouchAction="none",this.a.style.touchAction="none",this.C=document.createElement("DIV"),this.C.className="ol-overlaycontainer",this.a.appendChild(this.C),this.D=document.createElement("DIV"),this.D.className="ol-overlaycontainer-stopevent";for(var o="click dblclick mousedown touchstart MSPointerDown pointerdown mousewheel wheel".split(" "),i=0,n=o.length;i<n;++i)ne(this.D,o[i],he);this.a.appendChild(this.D),this.Sa=new Co(this,t.moveTolerance);for(var r in rm)ne(this.Sa,rm[r],this.Ih,this);this.va=e.keyboardEventTarget,this.u=null,ne(this.a,"wheel",this.ld,this),ne(this.a,"mousewheel",this.ld,this),this.l=e.controls,this.o=e.interactions,this.v=e.overlays,this.rg={},this.B=new e.Up(this.a,this),this.na=null,this.xb=[],this.$a=new Oo(this.ql.bind(this),this.Wl.bind(this)),this.fa={},ne(this,me("layergroup"),this.El,this),ne(this,me("view"),this.Xl,this),ne(this,me("size"),this.Tl,this),ne(this,me("target"),this.Vl,this),this.H(e.values),this.l.forEach(function(t){t.setMap(this)},this),ne(this.l,"add",function(t){t.element.setMap(this)},this),ne(this.l,"remove",function(t){t.element.setMap(null)},this),this.o.forEach(function(t){t.setMap(this)},this),ne(this.o,"add",function(t){t.element.setMap(this)},this),ne(this.o,"remove",function(t){t.element.setMap(null)},this),this.v.forEach(this.kh,this),ne(this.v,"add",function(t){this.kh(t.element)},this),ne(this.v,"remove",function(t){var e=t.element.g;void 0!==e&&delete this.rg[e.toString()],t.element.setMap(null)},this)}function va(t){var e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);var o={},i={};if(void 0===t.logo||"boolean"==typeof t.logo&&t.logo)i["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]="https://openlayers.org/";else{var n=t.logo;"string"==typeof n?i[n]="":n instanceof HTMLElement?i[d(n).toString()]=n:n&&(y("string"==typeof n.href,44),y("string"==typeof n.src,45),i[n.src]=n.href)}n=t.layers instanceof rr?t.layers:new rr({layers:t.layers}),o.layergroup=n,o.target=t.target,o.view=void 0!==t.view?t.view:new qi;var r,n=br;void 0!==t.renderer?(Array.isArray(t.renderer)?r=t.renderer:"string"==typeof t.renderer?r=[t.renderer]:y(!1,46),0<=r.indexOf("dom")&&(r=r.concat(zm))):r=zm;var s,a=0;for(s=r.length;a<s;++a){var l=r[a];if("canvas"==l){if(Xg){n=kr;break}}else if("webgl"==l&&Ug){n=da;break}}return void 0!==t.controls?Array.isArray(t.controls)?r=new be(t.controls.slice()):(y(t.controls instanceof be,47),r=t.controls):r=Ve(),void 0!==t.interactions?Array.isArray(t.interactions)?a=new be(t.interactions.slice()):(y(t.interactions instanceof be,48),a=t.interactions):a=or(),void 0!==t.overlays?Array.isArray(t.overlays)?t=new be(t.overlays.slice()):(y(t.overlays instanceof be,49),t=t.overlays):t=new be,{controls:r,interactions:a,keyboardEventTarget:e,logos:i,overlays:t,Up:n,values:o}}function _a(t){ge.call(this),this.g=t.id,this.l=void 0===t.insertFirst||t.insertFirst,this.v=void 0===t.stopEvent||t.stopEvent,this.c=document.createElement("DIV"),this.c.className="ol-overlay-container ol-selectable",this.c.style.position="absolute",this.autoPan=void 0!==t.autoPan&&t.autoPan,this.j=t.autoPanAnimation||{},this.o=void 0!==t.autoPanMargin?t.autoPanMargin:20,this.a={re:"",Ie:"",nf:"",vf:"",visible:!0},this.f=null,ne(this,me(qm),this.zl,this),ne(this,me(Hm),this.Jl,this),ne(this,me(Ym),this.Nl,this),ne(this,me(Zm),this.Pl,this),ne(this,me(Km),this.Ql,this),void 0!==t.element&&this.lj(t.element),this.rj(void 0!==t.offset?t.offset:[0,0]),this.uj(void 0!==t.positioning?t.positioning:"top-left"),void 0!==t.position&&this.Ne(t.position)}function ba(t,e){var o=t.getBoundingClientRect();return t=o.left+window.pageXOffset,o=o.top+window.pageYOffset,[t,o,t+e[0],o+e[1]]}function Ea(t,e){t.a.visible!==e&&(t.c.style.display=e?"":"none",t.a.visible=e)}function Sa(t){var e=t.Me(),o=t.Yh();if(e&&e.c&&o){var o=e.Ja(o),i=e.Ob(),e=t.c.style,n=t.Dh(),r=t.Eh();Ea(t,!0);var s=n[0],n=n[1];"bottom-right"==r||"center-right"==r||"top-right"==r?(""!==t.a.Ie&&(t.a.Ie=e.left=""),s=Math.round(i[0]-o[0]-s)+"px",t.a.nf!=s&&(t.a.nf=e.right=s)):(""!==t.a.nf&&(t.a.nf=e.right=""),"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(s-=t.c.offsetWidth/2),s=Math.round(o[0]+s)+"px",t.a.Ie!=s&&(t.a.Ie=e.left=s)),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?(""!==t.a.vf&&(t.a.vf=e.top=""),o=Math.round(i[1]-o[1]-n)+"px",t.a.re!=o&&(t.a.re=e.bottom=o)):(""!==t.a.re&&(t.a.re=e.bottom=""),"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(n-=t.c.offsetHeight/2),o=Math.round(o[1]+n)+"px",t.a.vf!=o&&(t.a.vf=e.top=o))}else Ea(t,!1)}function wa(t){function e(t){t=a.Tf(t),l.a.Z().ob(t),window.removeEventListener("mousemove",o),window.removeEventListener("mouseup",e)}function o(t){t=a.Tf({clientX:t.clientX-c.offsetWidth/2,clientY:t.clientY+c.offsetHeight/2}),p.Ne(t)}t=t||{},this.j=void 0===t.collapsed||t.collapsed,this.o=void 0===t.collapsible||t.collapsible,this.o||(this.j=!1);var i=void 0!==t.className?t.className:"ol-overviewmap",n=void 0!==t.tipLabel?t.tipLabel:"Overview map",r=void 0!==t.collapseLabel?t.collapseLabel:"«";"string"==typeof r?(this.u=document.createElement("span"),this.u.textContent=r):this.u=r,r=void 0!==t.label?t.label:"»","string"==typeof r?(this.D=document.createElement("span"),this.D.textContent=r):this.D=r;var s=this.o&&!this.j?this.u:this.D,r=document.createElement("button");r.setAttribute("type","button"),r.title=n,r.appendChild(s),ne(r,"click",this.an,this),this.C=document.createElement("DIV"),this.C.className="ol-overviewmap-map";var a=this.c=new ma({controls:new be,interactions:new be,view:t.view});t.layers&&t.layers.forEach(function(t){a.ih(t)},this),n=document.createElement("DIV"),n.className="ol-overviewmap-box",n.style.boxSizing="border-box",this.l=new _a({position:[0,0],positioning:"bottom-left",element:n}),this.c.jh(this.l),n=document.createElement("div"),n.className=i+" ol-unselectable ol-control"+(this.j&&this.o?" ol-collapsed":"")+(this.o?"":" ol-uncollapsible"),n.appendChild(this.C),n.appendChild(r),Te.call(this,{element:n,render:t.render?t.render:Pa,target:t.target});var l=this,p=this.l,c=this.l.Rd();c.addEventListener("mousedown",function(){window.addEventListener("mousemove",o),window.addEventListener("mouseup",e)})}function Pa(){var t=this.a,e=this.c;if(t.c&&e.c){var o=t.Ob(),t=t.Z().dd(o),i=e.Ob(),o=e.Z().dd(i),n=e.Ja(et(t)),r=e.Ja(X(t)),e=Math.abs(n[0]-r[0]),n=Math.abs(n[1]-r[1]),r=i[0],i=i[1];e<.1*r||n<.1*i||e>.75*r||n>.75*i?Ca(this):N(o,t)||(t=this.c,o=this.a.Z(),t.Z().ob(o.wa()))}Aa(this)}function Ca(t){var e=t.a;t=t.c;var o=e.Ob(),e=e.Z().dd(o);t=t.Z(),st(e,1/(.1*Math.pow(2,Math.log(7.5)/Math.LN2/2))),t.Qf(e)}function Aa(t){var e=t.a,o=t.c;if(e.c&&o.c){var i=e.Ob(),n=e.Z(),r=o.Z(),o=n.Qa(),e=t.l,s=t.l.Rd(),a=n.dd(i),i=r.Pa(),n=K(a),r=ot(a);if(t=t.a.Z().wa()){var l=[n[0]-t[0],n[1]-t[1]];Xo(l,o),zo(l,t)}e.Ne(l),s&&(s.style.width=Math.abs((n[0]-r[0])/i)+"px",s.style.height=Math.abs((r[1]-n[1])/i)+"px")}}function Ma(t){t.element.classList.toggle("ol-collapsed"),t.j?Re(t.u,t.D):Re(t.D,t.u),t.j=!t.j;var e=t.c;t.j||e.c||(e.Ad(),Ca(t),re(e,"postrender",function(){Aa(this)},t))}function xa(t){t=t||{};var e=void 0!==t.className?t.className:"ol-scale-line";this.o=document.createElement("DIV"),this.o.className=e+"-inner",this.c=document.createElement("DIV"),this.c.className=e+" ol-unselectable",this.c.appendChild(this.o),this.u=null,this.l=void 0!==t.minWidth?t.minWidth:64,this.j=!1,this.B=void 0,this.D="",Te.call(this,{element:this.c,render:t.render?t.render:Ra,target:t.target}),ne(this,me(Jm),this.T,this),this.I(t.units||"metric")}function Ra(t){(t=t.frameState)?this.u=t.viewState:this.u=null,Ia(this)}function Ia(t){var e=t.u;if(e){var o=e.projection,i=o.sc(),e=_t(o,e.resolution,e.center)*i,i=t.l*e,o="",n=t.C();"degrees"==n?(o=_g.degrees,e/=o,i<o/60?(o="″",e*=3600):i<o?(o="′",e*=60):o="°"):"imperial"==n?.9144>i?(o="in",e/=.0254):1609.344>i?(o="ft",e/=.3048):(o="mi",e/=1609.344):"nautical"==n?(e/=1852,o="nm"):"metric"==n?.001>i?(o="μm",e*=1e6):1>i?(o="mm",e*=1e3):1e3>i?o="m":(o="km",e/=1e3):"us"==n?.9144>i?(o="in",e*=39.37):1609.344>i?(o="ft",e/=.30480061):(o="mi",e/=1609.3472):y(!1,33);for(var r,n=3*Math.floor(Math.log(t.l*e)/Math.log(10));;){if(r=Xm[(n%3+3)%3]*Math.pow(10,Math.floor(n/3)),i=Math.round(r/e),isNaN(i))return t.c.style.display="none",void(t.j=!1);if(i>=t.l)break;++n}e=r+" "+o,t.D!=e&&(t.o.innerHTML=e,t.D=e),t.B!=i&&(t.o.style.width=i+"px",t.B=i),t.j||(t.c.style.display="",t.j=!0)}else t.j&&(t.c.style.display="none",t.j=!1)}function Ta(t){t=t||{},this.c=void 0,this.j=Qm,this.D=this.l=0,this.I=null,this.na=!1,this.T=void 0!==t.duration?t.duration:200;var e=void 0!==t.className?t.className:"ol-zoomslider",o=document.createElement("button");o.setAttribute("type","button"),o.className=e+"-thumb ol-unselectable";var i=document.createElement("div");i.className=e+" ol-unselectable ol-control",i.appendChild(o),this.o=new yo(i),ne(this.o,"pointerdown",this.yl,this),ne(this.o,"pointermove",this.wl,this),ne(this.o,"pointerup",this.xl,this),ne(i,"click",this.vl,this),ne(o,"click",he),Te.call(this,{element:i,render:t.render?t.render:La})}function La(t){if(t.frameState){if(!this.na){var e=this.element,o=e.offsetWidth,i=e.offsetHeight,n=e.firstElementChild,r=getComputedStyle(n),e=n.offsetWidth+parseFloat(r.marginRight)+parseFloat(r.marginLeft),n=n.offsetHeight+parseFloat(r.marginTop)+parseFloat(r.marginBottom);this.I=[e,n],o>i?(this.j=1,this.D=o-e):(this.j=Qm,this.l=i-n),this.na=!0}t=t.frameState.viewState.resolution,t!==this.c&&(this.c=t,Ga(this,t))}}function Ga(t,e){e=1-$i(t.a.Z())(e);var o=t.element.firstElementChild;1==t.j?o.style.left=t.D*e+"px":o.style.top=t.l*e+"px"}function Oa(t,e){return Qi(t.a.Z())(1-e)}function Na(t){t=t||{},this.c=t.extent?t.extent:null;var e=void 0!==t.className?t.className:"ol-zoom-extent",o=void 0!==t.label?t.label:"E",i=void 0!==t.tipLabel?t.tipLabel:"Fit to extent",n=document.createElement("button");n.setAttribute("type","button"),n.title=i,n.appendChild("string"==typeof o?document.createTextNode(o):o),ne(n,"click",this.j,this),o=document.createElement("div"),o.className=e+" ol-unselectable ol-control",o.appendChild(n),Te.call(this,{element:o,target:t.target})}function ka(t){ge.call(this),t=t||{},this.a=null,ne(this,me(iv),this.vm,this),this.gg(void 0!==t.tracking&&t.tracking)}function Da(t){this.f=t.opacity,this.l=t.rotateWithView,this.g=t.rotation,this.a=t.scale,this.v=t.snapToPixel}function ja(t){this.D=this.u=this.c=null,this.Va=void 0!==t.fill?t.fill:null,this.oa=[0,0],this.o=t.points,this.b=void 0!==t.radius?t.radius:t.radius1,this.i=t.radius2,this.j=void 0!==t.angle?t.angle:0,this.Ya=void 0!==t.stroke?t.stroke:null,this.B=this.ra=this.C=null,this.S=t.atlasManager,Fa(this,this.S),Da.call(this,{opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:1,snapToPixel:void 0===t.snapToPixel||t.snapToPixel})}function Fa(t,e){var o="",i="",n=0,r=null,s=0;if(t.Ya){var a=t.Ya.a;null===a&&(a=vm),a=Me(a),s=t.Ya.c,void 0===s&&(s=1),r=t.Ya.i,Kg||(r=null),i=t.Ya.j,void 0===i&&(i="round"),o=t.Ya.f,void 0===o&&(o="round"),n=t.Ya.o,void 0===n&&(n=10)}var l=2*(t.b+s)+1,o={strokeStyle:a,zj:s,size:l,lineCap:o,lineDash:r,lineJoin:i,miterLimit:n};if(void 0===e){var p=xe(l,l);t.u=p.canvas,e=l=t.u.width,t.rh(o,p,0,0),t.Va?t.D=t.u:(p=xe(o.size,o.size),t.D=p.canvas,t.qh(o,p,0,0))}else l=Math.round(l),(i=!t.Va)&&(p=t.qh.bind(t,o)),t.Ya?(n=t.Ya,void 0===n.b&&(n.b="s",n.b=n.a?"string"==typeof n.a?n.b+n.a:n.b+d(n.a).toString():n.b+"-",n.b+=","+(void 0!==n.f?n.f.toString():"-")+","+(n.i?n.i.toString():"-")+","+(void 0!==n.g?n.g:"-")+","+(void 0!==n.j?n.j:"-")+","+(void 0!==n.o?n.o.toString():"-")+","+(void 0!==n.c?n.c.toString():"-")),n=n.b):n="-",t.Va?(r=t.Va,void 0===r.a&&(r.a=r.b instanceof CanvasPattern||r.b instanceof CanvasGradient?d(r.b).toString():"f"+(r.b?Ce(r.b):"-")),r=r.a):r="-",t.c&&n==t.c[1]&&r==t.c[2]&&t.b==t.c[3]&&t.i==t.c[4]&&t.j==t.c[5]&&t.o==t.c[6]||(t.c=["r"+n+r+(void 0!==t.b?t.b.toString():"-")+(void 0!==t.i?t.i.toString():"-")+(void 0!==t.j?t.j.toString():"-")+(void 0!==t.o?t.o.toString():"-"),n,r,t.b,t.i,t.j,t.o]),p=e.add(t.c[0],l,l,t.rh.bind(t,o),p),t.u=p.image,t.oa=[p.offsetX,p.offsetY],e=p.image.width,t.D=i?p.Zl:t.u;t.C=[l/2,l/2],t.ra=[l,l],t.B=[e,e]}function Ua(t){t=t||{},ja.call(this,{points:1/0,fill:t.fill,radius:t.radius,snapToPixel:t.snapToPixel,stroke:t.stroke,atlasManager:t.atlasManager})}
function Ba(t){t=t||{},this.b=void 0!==t.color?t.color:null,this.a=void 0}function Va(t){t=t||{},this.Gc=null,this.Za=Ha,void 0!==t.geometry&&this.Ra(t.geometry),this.Va=void 0!==t.fill?t.fill:null,this.M=void 0!==t.image?t.image:null,this.Ya=void 0!==t.stroke?t.stroke:null,this.Ia=void 0!==t.text?t.text:null,this.Fj=t.zIndex}function Wa(t){if("function"!=typeof t){if(Array.isArray(t))var e=t;else y(t instanceof Va,41),e=[t];t=function(){return e}}return t}function za(){if(!nv){var t=new Ba({color:"rgba(255,255,255,0.4)"}),e=new xs({color:"#3399CC",width:1.25});nv=[new Va({image:new Ua({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return nv}function qa(){var t={},e=[255,255,255,1],o=[0,153,255,1];return t.Polygon=[new Va({fill:new Ba({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new Va({stroke:new xs({color:e,width:5})}),new Va({stroke:new xs({color:o,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new Va({image:new Ua({radius:6,fill:new Ba({color:o}),stroke:new xs({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function Ha(t){return t.V()}function Ya(t){ge.call(this),this.a=void 0,this.c="geometry",this.g=null,this.j=void 0,this.f=null,ne(this,me(this.c),this.Ee,this),void 0!==t&&(t instanceof ni||!t?this.Ra(t):this.H(t))}function Za(t){var e;if("function"==typeof t)e=2==t.length?function(e){return t(this,e)}:t;else{if(Array.isArray(t))var o=t;else y(t instanceof Va,41),o=[t];e=function(){return o}}return e}function Ka(t,e){return rv.createElementNS(t,e)}function Xa(t,e){return Ja(t,e,[]).join("")}function Ja(t,e,o){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?o.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):o.push(t.nodeValue);else for(t=t.firstChild;t;t=t.nextSibling)Ja(t,e,o);return o}function Qa(t){return t instanceof Document}function $a(t){return t instanceof Node}function tl(t){return(new DOMParser).parseFromString(t,"application/xml")}function el(t,e){return function(o,i){void 0!==(o=t.call(e,o,i))&&n(i[i.length-1],o)}}function ol(t,e){return function(o,i){void 0!==(o=t.call(void 0!==e?e:this,o,i))&&i[i.length-1].push(o)}}function il(t,e){return function(o,i){void 0!==(o=t.call(void 0!==e?e:this,o,i))&&(i[i.length-1]=o)}}function nl(t){return function(e,o){var i=t.call(this,e,o);if(void 0!==i){o=o[o.length-1],e=e.localName;var n;n=e in o?o[e]:o[e]=[],n.push(i)}}}function rl(t,e){return function(o,i){var n=t.call(this,o,i);void 0!==n&&(i[i.length-1][void 0!==e?e:o.localName]=n)}}function sl(t,e){return function(o,i,n){t.call(void 0!==e?e:this,o,i,n),n[n.length-1].node.appendChild(o)}}function al(t){var e,o;return function(i,n,r){if(!e){e={};var s={};s[i.localName]=t,e[i.namespaceURI]=s,o=ll(i.localName)}dl(e,o,n,r)}}function ll(t,e){return function(o,i,n){return o=i[i.length-1].node,i=t,void 0===i&&(i=n),n=e,void 0===e&&(n=o.namespaceURI),Ka(n,i)}}function pl(t,e){for(var o=e.length,i=Array(o),n=0;n<o;++n)i[n]=t[e[n]];return i}function cl(t,e,o){o=void 0!==o?o:{};var i,n=0;for(i=t.length;n<i;++n)o[t[n]]=e;return o}function ul(t,e,o,i){for(e=e.firstElementChild;e;e=e.nextElementSibling){var n=t[e.namespaceURI];void 0!==n&&(n=n[e.localName])&&n.call(i,e,o)}}function hl(t,e,o,i,n){return i.push(t),ul(e,o,i,n),i.pop()}function dl(t,e,o,i,n,r){for(var s,a,l=(void 0!==n?n:o).length,p=0;p<l;++p)void 0!==(s=o[p])&&void 0!==(a=e.call(r,s,i,void 0!==n?n[p]:void 0))&&t[a.namespaceURI][a.localName].call(r,a,s,i)}function fl(t,e,o,i,n,r,s){n.push(t),dl(e,o,i,n,r,s),n.pop()}function yl(t,e,o,i){return function(n,r,s){var a=new XMLHttpRequest;a.open("GET","function"==typeof t?t(n,r,s):t,!0),"arraybuffer"==e.U()&&(a.responseType="arraybuffer"),a.onload=function(){if(!a.status||200<=a.status&&300>a.status){var t=e.U();if("json"==t||"text"==t)var n=a.responseText;else"xml"==t?(n=a.responseXML)||(n=tl(a.responseText)):"arraybuffer"==t&&(n=a.response);n?o.call(this,e.Oa(n,{featureProjection:s}),e.kb(n)):i.call(this)}else i.call(this)}.bind(this),a.onerror=function(){i.call(this)}.bind(this),a.send()}}function gl(t,e){return yl(t,e,function(t){this.cd(t)},h)}function ml(){this.f=this.defaultDataProjection=null}function vl(t,e,o){var i;return o&&(i={dataProjection:o.dataProjection?o.dataProjection:t.kb(e),featureProjection:o.featureProjection}),_l(t,i)}function _l(t,e){return mg({dataProjection:t.defaultDataProjection,featureProjection:t.f},e)}function bl(t,e,o){var i,n=o?At(o.featureProjection):null,r=o?At(o.dataProjection):null;if(i=n&&r&&!Mt(n,r)?t instanceof ni?(e?t.clone():t).tb(e?n:r,e?r:n):Gt(t,r,n):t,e&&o&&void 0!==o.decimals){var s=Math.pow(10,o.decimals);i===t&&(i=i.clone()),i.Dc(function(t){for(var e=0,o=t.length;e<o;++e)t[e]=Math.round(t[e]*s)/s;return t})}return i}function El(){ml.call(this)}function Sl(t){return"string"==typeof t?(t=JSON.parse(t))?t:null:null!==t?t:null}function wl(t,o,i,n,r,s){var a=NaN,l=NaN,p=(i-o)/n;if(1===p)a=t[o],l=t[o+1];else if(2==p)a=(1-r)*t[o]+r*t[o+n],l=(1-r)*t[o+1]+r*t[o+n+1];else if(p){var c,l=t[o],p=t[o+1],u=0,a=[0];for(c=o+n;c<i;c+=n){var h=t[c],d=t[c+1],u=u+Math.sqrt((h-l)*(h-l)+(d-p)*(d-p));a.push(u),l=h,p=d}for(i=r*u,p=0,u=a.length,c=!1;p<u;)r=p+(u-p>>1),l=+e(a[r],i),0>l?p=r+1:(u=r,c=!l);r=c?p:~p,0>r?(i=(i-a[-r-2])/(a[-r-1]-a[-r-2]),o+=(-r-2)*n,a=A(t[o],t[o+n],i),l=A(t[o+1],t[o+n+1],i)):(a=t[o+r*n],l=t[o+r*n+1])}return s?(s[0]=a,s[1]=l,s):[a,l]}function Pl(t,e,o,i,n,r){if(o==e)return null;if(n<t[e+i-1])return r?(o=t.slice(e,e+i),o[i-1]=n,o):null;if(t[o-1]<n)return r?(o=t.slice(o-i,o),o[i-1]=n,o):null;if(n==t[e+i-1])return t.slice(e,e+i);for(e/=i,o/=i;e<o;)r=e+o>>1,n<t[(r+1)*i-1]?o=r:e=r+1;if(o=t[e*i-1],n==o)return t.slice((e-1)*i,(e-1)*i+i);r=(n-o)/(t[(e+1)*i-1]-o),o=[];var s;for(s=0;s<i-1;++s)o.push(A(t[(e-1)*i+s],t[e*i+s],r));return o.push(n),o}function Cl(t,e,o,i,n,r){var s=0;if(r)return Pl(t,s,e[e.length-1],o,i,n);if(i<t[o-1])return n?(t=t.slice(0,o),t[o-1]=i,t):null;if(t[t.length-1]<i)return n?(t=t.slice(t.length-o),t[o-1]=i,t):null;for(n=0,r=e.length;n<r;++n){var a=e[n];if(s!=a){if(i<t[s+o-1])break;if(i<=t[a-1])return Pl(t,s,a,o,i,!1);s=a}}return null}function Al(t,e){ai.call(this),this.c=null,this.u=this.D=this.j=-1,this.ma(t,e)}function Ml(t){return t.j!=t.i&&(t.c=t.wh(.5,t.c),t.j=t.i),t.c}function xl(t,e){ai.call(this),this.c=[],this.j=this.u=-1,this.ma(t,e)}function Rl(t){var e=[],o=t.A,i=0,r=t.c;t=t.a;var s,a=0;for(s=r.length;a<s;++a){var l=r[a],i=wl(o,i,l,t,.5);n(e,i),i=l}return e}function Il(t,e){var o,i=t.ja,r=[],s=[],a=0;for(o=e.length;a<o;++a){var l=e[a];a||(i=l.ja),n(r,l.ga()),s.push(r.length)}t.ba(i,r,s)}function Tl(t,e){ai.call(this),this.ma(t,e)}function Ll(t,e){ai.call(this),this.c=[],this.u=-1,this.D=null,this.I=this.C=this.B=-1,this.j=null,this.ma(t,e)}function Gl(t){if(t.u!=t.i){var e,o=t.A,i=t.c,n=t.a,r=0,s=[],a=0;for(e=i.length;a<e;++a){var l=i[a],r=V(o,r,l[0],n);s.push((r[0]+r[2])/2,(r[1]+r[3])/2),r=l[l.length-1]}for(o=Ol(t),i=t.c,n=t.a,a=0,e=[],l=0,r=i.length;l<r;++l){var p=i[l];e=Ti(o,a,p,n,s,2*l,e),a=p[p.length-1]}t.D=e,t.u=t.i}return t.D}function Ol(t){if(t.I!=t.i){var e=t.A;t:{var o,i=t.c,n=0;for(o=i.length;n<o;++n)if(!ki(e,i[n],t.a,void 0)){i=!1;break t}i=!0}i?t.j=e:(t.j=e.slice(),t.j.length=ji(t.j,t.c,t.a)),t.I=t.i}return t.j}function Nl(t,e,o,i){pi(t,e,o),t.c=i,t.s()}function kl(t,e){var o,i=t.ja,r=[],s=[],a=0;for(o=e.length;a<o;++a){var l=e[a];a||(i=l.ja);var p,c=r.length,u=l.Bb(),h=0;for(p=u.length;h<p;++h)u[h]+=c;n(r,l.ga()),s.push(u)}Nl(t,i,r,s)}function Dl(t){t=t||{},ml.call(this),this.b=t.geometryName}function jl(t,e){if(!t)return null;if("number"==typeof t.x&&"number"==typeof t.y)var o="Point";else if(t.points)o="MultiPoint";else if(t.paths)o=1===t.paths.length?"LineString":"MultiLineString";else if(t.rings){var i=t.rings,n=Fl(t),r=[],s=[];o=[];var a,l=0;for(a=i.length;l<a;++l)r.length=0,_i(r,0,i[l],n.length),Ni(r,0,r.length,n.length)?s.push([i[l]]):o.push(i[l]);for(;o.length;){for(i=o.shift(),n=!1,l=s.length-1;0<=l;l--)if(N(new Ci(s[l][0]).G(),new Ci(i).G())){s[l].push(i),n=!0;break}n||s.push([i.reverse()])}t=mg({},t),1===s.length?(o="Polygon",t.rings=s[0]):(o="MultiPolygon",t.rings=s)}return bl((0,av[o])(t),!1,e)}function Fl(t){var e="XY";return!0===t.hasZ&&!0===t.hasM?e="XYZM":!0===t.hasZ?e="XYZ":!0===t.hasM&&(e="XYM"),e}function Ul(t){return t=t.ja,{hasZ:"XYZ"===t||"XYZM"===t,hasM:"XYM"===t||"XYZM"===t}}function Bl(t,e){return(0,lv[t.U()])(bl(t,!0,e),e)}function Vl(t){this.kc=t}function Wl(t,e){this.kc=t,this.b=Array.prototype.slice.call(arguments,1),y(2<=this.b.length,57)}function zl(t){var e=["And"].concat(Array.prototype.slice.call(arguments));Wl.apply(this,e)}function ql(t,e,o){this.kc="BBOX",this.geometryName=t,this.extent=e,this.srsName=o}function Hl(t,e){this.kc=t,this.b=e}function Yl(t,e,o){Hl.call(this,"During",t),this.a=e,this.i=o}function Zl(t,e,o,i){Hl.call(this,t,e),this.i=o,this.a=i}function Kl(t,e,o){Zl.call(this,"PropertyIsEqualTo",t,e,o)}function Xl(t,e){Zl.call(this,"PropertyIsGreaterThan",t,e)}function Jl(t,e){Zl.call(this,"PropertyIsGreaterThanOrEqualTo",t,e)}function Ql(t,e,o,i){this.kc=t,this.geometryName=e||"the_geom",this.geometry=o,this.srsName=i}function $l(t,e,o){Ql.call(this,"Intersects",t,e,o)}function tp(t,e,o){Hl.call(this,"PropertyIsBetween",t),this.a=e,this.i=o}function ep(t,e,o,i,n,r){Hl.call(this,"PropertyIsLike",t),this.c=e,this.g=void 0!==o?o:"*",this.f=void 0!==i?i:".",this.i=void 0!==n?n:"!",this.a=r}function op(t){Hl.call(this,"PropertyIsNull",t)}function ip(t,e){Zl.call(this,"PropertyIsLessThan",t,e)}function np(t,e){Zl.call(this,"PropertyIsLessThanOrEqualTo",t,e)}function rp(t){this.kc="Not",this.condition=t}function sp(t,e,o){Zl.call(this,"PropertyIsNotEqualTo",t,e,o)}function ap(t){var e=["Or"].concat(Array.prototype.slice.call(arguments));Wl.apply(this,e)}function lp(t,e,o){Ql.call(this,"Within",t,e,o)}function pp(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(zl,e))}function cp(t,e,o){return new ql(t,e,o)}function up(t){ni.call(this),this.a=t||null,fp(this)}function hp(t){var e,o=[],i=0;for(e=t.length;i<e;++i)o.push(t[i].clone());return o}function dp(t){var e;if(t.a){var o=0;for(e=t.a.length;o<e;++o)se(t.a[o],"change",t.s,t)}}function fp(t){var e;if(t.a){var o=0;for(e=t.a.length;o<e;++o)ne(t.a[o],"change",t.s,t)}}function yp(t){t=t||{},ml.call(this),this.defaultDataProjection=At(t.defaultDataProjection?t.defaultDataProjection:"EPSG:4326"),t.featureProjection&&(this.f=At(t.featureProjection)),this.b=t.geometryName}function gp(t,e){return t?bl((0,pv[t.type])(t),!1,e):null}function mp(t,e){return(0,cv[t.U()])(bl(t,!0,e),e)}function vp(){this.i=new XMLSerializer,ml.call(this)}function _p(t,e,o){return t=bp(t,e,o),0<t.length?t[0]:null}function bp(t,e,o){var i=[];for(e=e.firstChild;e;e=e.nextSibling)e.nodeType==Node.ELEMENT_NODE&&n(i,t.zc(e,o));return i}function Ep(t){t=t||{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.b={},this.b["http://www.opengis.net/gml"]={featureMember:il(Ep.prototype.be),featureMembers:il(Ep.prototype.be)},vp.call(this)}function Sp(t){return t=Xa(t,!1),wp(t)}function wp(t){if(t=/^\s*(true|1)|(false|0)\s*$/.exec(t))return void 0!==t[1]||!1}function Pp(t){return t=Xa(t,!1),t=Date.parse(t),isNaN(t)?void 0:t/1e3}function Cp(t){return t=Xa(t,!1),Ap(t)}function Ap(t){if(t=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t))return parseFloat(t[1])}function Mp(t){return t=Xa(t,!1),xp(t)}function xp(t){if(t=/^\s*(\d+)\s*$/.exec(t))return parseInt(t[1],10)}function Rp(t){return Xa(t,!1).trim()}function Ip(t,e){Gp(t,e?"1":"0")}function Tp(t,e){t.appendChild(rv.createTextNode(e.toPrecision()))}function Lp(t,e){t.appendChild(rv.createTextNode(e.toString()))}function Gp(t,e){t.appendChild(rv.createTextNode(e))}function Op(t){t=t||{},Ep.call(this,t),this.l=void 0!==t.surface&&t.surface,this.c=void 0!==t.curve&&t.curve,this.g=void 0===t.multiCurve||t.multiCurve,this.j=void 0===t.multiSurface||t.multiSurface,this.schemaLocation=t.schemaLocation?t.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd"}function Np(t,e,o){var i=o[o.length-1];o=i.hasZ,i=i.srsName,e=e.X();for(var n,r=e.length,s=Array(r),a=0;a<r;++a){n=e[a];var l=a,p=o,c="enu";i&&(c=At(i).b),c="en"===c.substr(0,2)?n[0]+" "+n[1]:n[1]+" "+n[0],p&&(c+=" "+(n[2]||0)),s[l]=c}Gp(t,s.join(" "))}function kp(t){t=t||{},Ep.call(this,t),this.b["http://www.opengis.net/gml"].featureMember=ol(Ep.prototype.be),this.schemaLocation=t.schemaLocation?t.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}function Dp(t){return t=Ka(t,"coordinates"),t.setAttribute("decimal","."),t.setAttribute("cs",","),t.setAttribute("ts"," "),t}function jp(t,e,o){var i=o[o.length-1];o=i.hasZ,i=i.srsName,e=e.X();for(var n,r=e.length,s=Array(r),a=0;a<r;++a)n=e[a],s[a]=Fp(n,i,o);Gp(t,s.join(" "))}function Fp(t,e,o){var i="enu";return e&&(i=At(e).b),e="en"===i.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0],o&&(e+=","+(t[2]||0)),e}function Up(t){t=t||{},vp.call(this),this.defaultDataProjection=At("EPSG:4326"),this.b=t.readExtensions}function Bp(t,e,o,i){return t.push(parseFloat(o.getAttribute("lon")),parseFloat(o.getAttribute("lat"))),"ele"in i?(t.push(i.ele),delete i.ele,e.hasZ=!0):t.push(0),"time"in i?(t.push(i.time),delete i.time,e.hasM=!0):t.push(0),t}function Vp(t,e,o){var i="XY",n=2;if(t.hasZ&&t.hasM?(i="XYZM",n=4):t.hasZ?(i="XYZ",n=3):t.hasM&&(i="XYM",n=3),4!==n){var r,s=0;for(r=e.length/4;s<r;s++)e[s*n]=e[4*s],e[s*n+1]=e[4*s+1],t.hasZ&&(e[s*n+2]=e[4*s+2]),t.hasM&&(e[s*n+2]=e[4*s+3]);if(e.length=e.length/4*n,o)for(s=0,r=o.length;s<r;s++)o[s]=o[s]/4*n}return i}function Wp(t,e){var o=e[e.length-1],i=t.getAttribute("href");null!==i&&(o.link=i),ul(Rv,t,e)}function zp(t,e){e[e.length-1].extensionsNode_=t}function qp(t,e){var o=e[0];if(t=hl({flatCoordinates:[],layoutOptions:{}},Iv,t,e)){e=t.flatCoordinates,delete t.flatCoordinates;var i=t.layoutOptions;delete t.layoutOptions;var i=Vp(i,e),n=new Al(null);return n.ba(i,e),bl(n,!1,o),o=new Ya(n),o.H(t),o}}function Hp(t,e){var o=e[0];if(t=hl({flatCoordinates:[],ends:[],layoutOptions:{}},Lv,t,e)){e=t.flatCoordinates,delete t.flatCoordinates;var i=t.ends;delete t.ends;var n=t.layoutOptions;delete t.layoutOptions;var n=Vp(n,e,i),r=new xl(null);return r.ba(n,e,i),bl(r,!1,o),o=new Ya(r),o.H(t),o}}function Yp(t,e){var o=e[0];if(e=hl({},Nv,t,e)){var i={};return t=Bp([],i,t,e),i=Vp(i,t),t=new Mi(t,i),bl(t,!1,o),o=new Ya(t),o.H(e),o}}function Zp(t,e){e||(e=[]);for(var o=0,i=e.length;o<i;++o){var n=e[o];if(t.b){var r=n.get("extensionsNode_")||null;t.b(n,r)}n.set("extensionsNode_",void 0)}}function Kp(t,e,o){t.setAttribute("href",e),e=o[o.length-1].properties,fl({node:t},Dv,sv,[e.linkText,e.linkType],o,kv)}function Xp(t,e,o){var i=o[o.length-1],n=i.node.namespaceURI,r=i.properties;switch(t.setAttributeNS(null,"lat",e[1]),t.setAttributeNS(null,"lon",e[0]),i.geometryLayout){case"XYZM":e[3]&&(r.time=e[3]);case"XYZ":e[2]&&(r.ele=e[2]);break;case"XYM":e[2]&&(r.time=e[2])}e="rtept"==t.nodeName?Uv[n]:qv[n],i=pl(r,e),fl({node:t,properties:r},Hv,sv,i,o,e)}function Jp(t,e){if((t=t.V())&&(t=Yv[t.U()]))return Ka(e[e.length-1].node.namespaceURI,t)}function Qp(){ml.call(this)}function $p(t){return"string"==typeof t?t:""}function tc(t){t=t||{},ml.call(this),this.defaultDataProjection=At("EPSG:4326"),this.b=t.altitudeMode?t.altitudeMode:"none"}function ec(t,e,o,i,n,r){de.call(this),this.j=null,this.M=t||new Image,null!==i&&(this.M.crossOrigin=i),this.c=r?document.createElement("CANVAS"):null,this.g=r,this.f=null,this.i=n,this.a=o,this.o=e,this.l=!1,2==this.i&&oc(this)}function oc(t){var e=xe(1,1);try{e.drawImage(t.M,0,0),e.getImageData(0,0,1,1)}catch(e){t.l=!0}}function ic(t){t=t||{},this.o=void 0!==t.anchor?t.anchor:[.5,.5],this.u=null,this.i=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.C=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.B=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.ra=void 0!==t.crossOrigin?t.crossOrigin:null;var e=void 0!==t.img?t.img:null,o=void 0!==t.imgSize?t.imgSize:null,i=t.src;y(!(void 0!==i&&e),4),y(!e||e&&o,5),void 0!==i&&i.length||!e||(i=e.src||d(e).toString()),y(void 0!==i&&0<i.length,6);var n=void 0!==t.src?0:2;this.j=void 0!==t.color?Pe(t.color):null;var r=this.ra,s=this.j,a=fm.get(i,r,s);a||(a=new ec(e,i,o,r,n,s),fm.set(i,r,s,a)),this.b=a,this.oa=void 0!==t.offset?t.offset:[0,0],this.c=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.S=null,this.D=void 0!==t.size?t.size:null,Da.call(this,{opacity:void 0!==t.opacity?t.opacity:1,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,snapToPixel:void 0===t.snapToPixel||t.snapToPixel,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView})}function nc(t){t=t||{},this.a=t.font,this.f=t.rotation,this.o=t.rotateWithView,this.b=t.scale,this.Ia=t.text,this.g=t.textAlign,this.j=t.textBaseline,this.Va=void 0!==t.fill?t.fill:new Ba({color:"#333"}),this.Ya=void 0!==t.stroke?t.stroke:null,this.i=void 0!==t.offsetX?t.offsetX:0,this.c=void 0!==t.offsetY?t.offsetY:0}function rc(t){t=t||{},vp.call(this),$v||(t_=[255,255,255,1],e_=new Ba({color:t_}),o_=[20,2],n_=i_="pixels",r_=[64,64],s_="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",a_=.5,l_=new ic({anchor:o_,anchorOrigin:"bottom-left",anchorXUnits:i_,anchorYUnits:n_,crossOrigin:"anonymous",rotation:0,scale:a_,size:r_,src:s_}),p_="NO_IMAGE",c_=new xs({color:t_,width:1}),u_=new xs({color:[51,51,51,1],width:2}),h_=new nc({font:"bold 16px Helvetica",fill:e_,stroke:u_,scale:.8}),d_=new Va({fill:e_,image:l_,text:h_,stroke:c_,zIndex:0}),$v=[d_]),this.defaultDataProjection=At("EPSG:4326"),this.a=t.defaultStyle?t.defaultStyle:$v,this.c=void 0===t.extractStyles||t.extractStyles,this.j=void 0===t.writeStyles||t.writeStyles,this.b={},this.g=void 0===t.showPointNames||t.showPointNames}function sc(t,e){var o=[0,0],i="start";if(t.Y()){var n=t.Y().ye();null===n&&(n=r_),2==n.length&&(i=t.Y().a,o[0]=i*n[0]/2,o[1]=-i*n[1]/2,i="left")}return null!==t.Na()?(n=t.Na(),t=n.clone(),t.nj(n.a||h_.a),t.Si(n.b||h_.b),t.pf(n.Fa()||h_.Fa()),t.qf(n.Ga()||u_)):t=h_.clone(),t.xd(e),t.sj(o[0]),t.tj(o[1]),t.vj(i),new Va({text:t})}function ac(t,e,o,i,n){return function(){var r=n,s="";if(r&&this.V()&&(r="Point"===this.V().U()),r&&(s=this.get("name"),r=r&&s),t)return r?(r=sc(t[0],s),t.concat(r)):t;if(e){var a=lc(e,o,i);return r?(r=sc(a[0],s),a.concat(r)):a}return r?(r=sc(o[0],s),o.concat(r)):o}}function lc(t,e,o){return Array.isArray(t)?t:"string"==typeof t?(!(t in o)&&"#"+t in o&&(t="#"+t),lc(o[t],e,o)):e}function pc(t){if(t=Xa(t,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(t))return t=t[1],[parseInt(t.substr(6,2),16),parseInt(t.substr(4,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(0,2),16)/255]}function cc(t){t=Xa(t,!1);for(var e,o=[],i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i;e=i.exec(t);)o.push(parseFloat(e[1]),parseFloat(e[2]),e[3]?parseFloat(e[3]):0),t=t.substr(e[0].length);if(""===t)return o}function uc(t){var e=Xa(t,!1).trim();return t.baseURI&&"about:blank"!==t.baseURI?new URL(e,t.baseURI).href:e}function hc(t){return Cp(t)}function dc(t,e){return hl(null,w_,t,e)}function fc(t,e){if(e=hl({A:[],Ej:[]},C_,t,e)){t=e.A,e=e.Ej;var o,i=0;for(o=Math.min(t.length,e.length);i<o;++i)t[4*i+3]=e[i];return e=new Al(null),e.ba("XYZM",t),e}}function yc(t,e){var o=hl({},S_,t,e);if(t=hl(null,A_,t,e))return e=new Al(null),e.ba("XYZ",t),e.H(o),e}function gc(t,e){var o=hl({},S_,t,e);if(t=hl(null,A_,t,e))return e=new Fi(null),e.ba("XYZ",t,[t.length]),e.H(o),e}function mc(t,e){if(!(t=hl([],L_,t,e)))return null;if(!t.length)return new up(t);var o,i=!0,r=t[0].U(),s=1;for(o=t.length;s<o;++s)if(e=t[s],e.U()!=r){i=!1;break}if(i)if("Point"==r){var a=t[0];for(i=a.ja,r=a.ga(),s=1,o=t.length;s<o;++s)e=t[s],n(r,e.ga());a=new Tl(null),a.ba(i,r),Ec(a,t)}else"LineString"==r?(a=new xl(null),Il(a,t),Ec(a,t)):"Polygon"==r?(a=new Ll(null),kl(a,t),Ec(a,t)):"GeometryCollection"==r?a=new up(t):y(!1,37);else a=new up(t);return a}function vc(t,e){var o=hl({},S_,t,e);if(t=hl(null,A_,t,e))return e=new Mi(null),e.ba("XYZ",t),e.H(o),e}function _c(t,e){var o=hl({},S_,t,e);if((t=hl([null],P_,t,e))&&t[0]){e=new Fi(null);var i,r=t[0],s=[r.length],a=1;for(i=t.length;a<i;++a)n(r,t[a]),s.push(r.length);return e.ba("XYZ",r,s),e.H(o),e}}function bc(t,e){if(!(e=hl({},B_,t,e)))return null;t="fillStyle"in e?e.fillStyle:e_;var o=e.fill;void 0===o||o||(t=null),(o="imageStyle"in e?e.imageStyle:l_)==p_&&(o=void 0);var i="textStyle"in e?e.textStyle:h_,n="strokeStyle"in e?e.strokeStyle:c_;return e=e.outline,void 0===e||e||(n=null),[new Va({fill:t,image:o,stroke:n,text:i,zIndex:void 0})]}function Ec(t,e){var o,i,n=e.length,r=Array(e.length),s=Array(e.length),a=i=!1;for(o=0;o<n;++o){var l=e[o];r[o]=l.get("extrude"),s[o]=l.get("altitudeMode"),a=a||void 0!==r[o],i=i||s[o]}a&&t.set("extrude",r),i&&t.set("altitudeMode",s)}function Sc(t,e){ul(v_,t,e)}function wc(t,e){ul(__,t,e)}function Pc(t,e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){var o=Cc(t,e);if(o)return o}}function Cc(t,e){var i;for(i=e.firstElementChild;i;i=i.nextElementSibling)if(o(y_,i.namespaceURI)&&"name"==i.localName)return Rp(i);for(i=e.firstElementChild;i;i=i.nextElementSibling)if(e=i.localName,o(y_,i.namespaceURI)&&("Document"==e||"Folder"==e||"Placemark"==e||"kml"==e)&&(e=Cc(t,i)))return e}function Ac(t,e){var o=[];for(e=e.firstChild;e;e=e.nextSibling)e.nodeType==Node.ELEMENT_NODE&&n(o,Mc(t,e));return o}function Mc(t,e){var i,r=[];for(i=e.firstElementChild;i;i=i.nextElementSibling)if(o(y_,i.namespaceURI)&&"NetworkLink"==i.localName){var s=hl({},O_,i,[]);r.push(s)}for(i=e.firstElementChild;i;i=i.nextElementSibling)e=i.localName,!o(y_,i.namespaceURI)||"Document"!=e&&"Folder"!=e&&"kml"!=e||n(r,Mc(t,i));return r}function xc(t,e){var o=[];for(e=e.firstChild;e;e=e.nextSibling)e.nodeType==Node.ELEMENT_NODE&&n(o,t.lf(e));return o}function Rc(t,e){e=Pe(e),e=[255*(4==e.length?e[3]:1),e[2],e[1],e[0]];var o;for(o=0;4>o;++o){var i=parseInt(e[o],10).toString(16);e[o]=1==i.length?"0"+i:i}Gp(t,e.join(""))}function Ic(t,e,o){t={node:t};var i=e.U();if("GeometryCollection"==i)var n=e.Vf(),r=jc;else"MultiPoint"==i?(n=e.Zd(),r=gb):"MultiLineString"==i?(n=e.gd(),r=mb):"MultiPolygon"==i?(n=e.Td(),r=_b):y(!1,39);fl(t,ib,r,n,o)}function Tc(t,e,o){fl({node:t},ob,vb,[e],o)}function Lc(t,e,o){var i={node:t};e.a&&t.setAttribute("id",e.a),t=e.N();var n={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};n[e.c]=1;var r=Object.keys(t||{}).sort().filter(function(t){return!n[t]});if(0<r.length){var s=pl(t,r);fl(i,rb,fb,[{names:r,values:s}],o)}(r=e.Lc())&&(r=r.call(e,0))&&(r=Array.isArray(r)?r[0]:r,this.j&&(t.Style=r),(r=r.Na())&&(t.name=r.Na())),r=nb[o[o.length-1].node.namespaceURI],t=pl(t,r),fl(i,rb,sv,t,o,r),t=o[0],(e=e.V())&&(e=bl(e,!0,t)),fl(i,rb,jc,[e],o)}function Gc(t,e,o){var i=e.ga();t={node:t},t.layout=e.ja,t.stride=e.qa(),fl(t,sb,hb,[i],o)}function Oc(t,e,o){e=e.Sd();var i=e.shift();t={node:t},fl(t,ab,yb,e,o),fl(t,ab,bb,[i],o)}function Nc(t,e){Tp(t,Math.round(1e6*e)/1e6)}function kc(t,e,o){return Ka(f_[0],"gx:"+o)}function Dc(t,e){return Ka(e[e.length-1].node.namespaceURI,"Placemark")}function jc(t,e){if(t)return Ka(e[e.length-1].node.namespaceURI,Y_[t.U()])}function Fc(t,e,o,i,n){this.g=n,this.i=t,this.b=e,this.f=o,this.c=i}function Uc(t){ml.call(this),t=t||{},this.defaultDataProjection=new ht({code:"",units:"tile-pixels"}),this.b=t.featureClass?t.featureClass:Fc,this.a=t.geometryName,this.i=t.layerName?t.layerName:"layer",this.c=t.layers?t.layers:null}function Bc(t,e,o){for(var i=0,n=0,r=t.length;n<r;++n){var s,a=t[n],l=0;for(s=a.length;l<s;++l){var p=a[l];e.push(p.x,p.y)}i+=2*l,o.push(i)}}function Vc(){vp.call(this),this.defaultDataProjection=At("EPSG:4326")}function Wc(t,e){e[e.length-1].fe[t.getAttribute("k")]=t.getAttribute("v")}function zc(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}function qc(){}function Hc(){}function Yc(t,e,o,i){var n;n=void 0!==i?i:[];for(var r=i=0;r<e;){var s=t[r++];for(n[i++]=t[r++],n[i++]=s,s=2;s<o;++s)n[i++]=t[r++]}n.length=i}function Zc(t){t=t||{},ml.call(this),this.defaultDataProjection=At("EPSG:4326"),this.b=t.factor?t.factor:1e5,this.a=t.geometryLayout?t.geometryLayout:"XY"}function Kc(t,e,o){var i,n=Array(e);for(i=0;i<e;++i)n[i]=0;var r,s=0;for(r=t.length;s<r;)for(i=0;i<e;++i,++s){var a=t[s],l=a-n[i];n[i]=a,t[s]=l}return Jc(t,o||1e5)}function Xc(t,e,o){var i,n=Array(e);for(i=0;i<e;++i)n[i]=0;t=Qc(t,o||1e5);var r;for(o=0,r=t.length;o<r;)for(i=0;i<e;++i,++o)n[i]+=t[o],t[o]=n[i];return t}function Jc(t,e){e=e||1e5;var o,i=0;for(o=t.length;i<o;++i)t[i]=Math.round(t[i]*e);for(e=0,i=t.length;e<i;++e)o=t[e],t[e]=0>o?~(o<<1):o<<1;for(e="",i=0,o=t.length;i<o;++i){for(var n,r=t[i],s="";32<=r;)n=63+(32|31&r),s+=String.fromCharCode(n),r>>=5;s+=String.fromCharCode(r+63),e+=s}return e}function Qc(t,e){e=e||1e5;var o,i=[],n=0,r=0,s=0;for(o=t.length;s<o;++s){var a=t.charCodeAt(s)-63,n=n|(31&a)<<r;32>a?(i.push(n),r=n=0):r+=5}for(t=0,n=i.length;t<n;++t)r=i[t],i[t]=1&r?~(r>>1):r>>1;for(t=0,n=i.length;t<n;++t)i[t]/=e;return i}function $c(t){t=t||{},ml.call(this),this.a=t.layerName,this.b=t.layers?t.layers:null,this.defaultDataProjection=At(t.defaultDataProjection?t.defaultDataProjection:"EPSG:4326")}function tu(t,e){var o,i,n=[],r=0;for(i=t.length;r<i;++r){var s=t[r];0<r&&n.pop(),o=0<=s?e[s]:e[~s].slice().reverse(),n.push.apply(n,o)}for(t=0,e=n.length;t<e;++t)n[t]=n[t].slice();return n}function eu(t,e,o,i,n,r,s){t=t.geometries;var a,l=[],p=0;for(a=t.length;p<a;++p)l[p]=ou(t[p],e,o,i,n,r,s);return l}function ou(t,e,o,i,n,r,s){var a=t.type,l=Ub[a];return o="Point"===a||"MultiPoint"===a?l(t,o,i):l(t,e),e=new Ya,e.Ra(bl(o,!1,s)),void 0!==t.id&&e.jc(t.id),t=t.properties,n&&(t||(t={}),t[n]=r),t&&e.H(t),e}function iu(t,e,o){t[0]=t[0]*e[0]+o[0],t[1]=t[1]*e[1]+o[1]}function nu(t){t=t||{},this.c=t.featureType,this.a=t.featureNS,this.b=t.gmlFormat?t.gmlFormat:new Op,this.o=t.schemaLocation?t.schemaLocation:Bb["1.1.0"],vp.call(this)}function ru(t,e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return su(t,e)}function su(t,e){var o={},i=xp(e.getAttribute("numberOfFeatures"));return o.numberOfFeatures=i,hl(o,Vb,e,[],t.b)}function au(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return hl({},Hb,t,[])}function lu(t,e){var o=Ka("http://www.opengis.net/ogc","Filter"),i=Ka("http://www.opengis.net/ogc","FeatureId");o.appendChild(i),i.setAttribute("fid",e),t.appendChild(o)}function pu(t,e){return t=(t||"feature")+":",e.indexOf(t)?t+e:e}function cu(t,e,o){var i={node:t};e.b.forEach(function(t){fl(i,Kb,ll(t.kc),[t],o)})}function uu(t,e){void 0!==e.a&&t.setAttribute("matchCase",e.a.toString()),du(t,e.b),fu(t,""+e.i)}function hu(t,e,o){t=Ka("http://www.opengis.net/ogc",t),Gp(t,o),e.appendChild(t)}function du(t,e){hu("PropertyName",t,e)}function fu(t,e){hu("Literal",t,e)}function yu(t,e){var o=Ka("http://www.opengis.net/gml","TimeInstant");t.appendChild(o),t=Ka("http://www.opengis.net/gml","timePosition"),o.appendChild(t),Gp(t,e)}function gu(t){t=t||{},ml.call(this),this.b=void 0!==t.splitCollection&&t.splitCollection}function mu(t){return t=t.X(),t.length?t.join(" "):""}function vu(t){t=t.X();for(var e=[],o=0,i=t.length;o<i;++o)e.push(t[o].join(" "));return e.join(",")}function _u(t){var e=[];t=t.Sd();for(var o=0,i=t.length;o<i;++o)e.push("("+vu(t[o])+")");return e.join(",")}function bu(t){var e=t.U(),o=(0,Xb[e])(t),e=e.toUpperCase();if(t instanceof ai){t=t.ja;var i="";"XYZ"!==t&&"XYZM"!==t||(i+="Z"),"XYM"!==t&&"XYZM"!==t||(i+="M"),t=i,0<t.length&&(e+=" "+t)}return o.length?e+"("+o+")":e+" EMPTY"}function Eu(t){this.a=t,this.b=-1}function Su(t){var e=t.a.charAt(++t.b),o={position:t.b,value:e};if("("==e)o.type=2;else if(","==e)o.type=5;else if(")"==e)o.type=3;else if("0"<=e&&"9">=e||"."==e||"-"==e){o.type=4;var e=t.b,i=!1,n=!1;do{"."==r?i=!0:"e"!=r&&"E"!=r||(n=!0);var r=t.a.charAt(++t.b)}while("0"<=r&&"9">=r||"."==r&&(void 0===i||!i)||!n&&("e"==r||"E"==r)||n&&("-"==r||"+"==r));t=parseFloat(t.a.substring(e,t.b--)),o.value=t}else if("a"<=e&&"z">=e||"A"<=e&&"Z">=e){o.type=1,e=t.b;do{r=t.a.charAt(++t.b)}while("a"<=r&&"z">=r||"A"<=r&&"Z">=r);t=t.a.substring(e,t.b--).toUpperCase(),o.value=t}else{if(" "==e||"\t"==e||"\r"==e||"\n"==e)return Su(t);if(""!==e)throw Error("Unexpected character: "+e);o.type=6}return o}function wu(t){this.i=t,this.a="XY"}function Pu(t){t.b=Su(t.i)}function Cu(t,e){return(e=t.b.type==e)&&Pu(t),e}function Au(t){var e=t.b;if(Cu(t,1)){var e=e.value,o="XY",i=t.b;if(1==t.b.type&&(i=i.value,"Z"===i?o="XYZ":"M"===i?o="XYM":"ZM"===i&&(o="XYZM"),"XY"!==o&&Pu(t)),t.a=o,"GEOMETRYCOLLECTION"==e){t:{if(Cu(t,2)){e=[];do{e.push(Au(t))}while(Cu(t,5));if(Cu(t,3)){t=e;break t}}else if(Iu(t)){t=[];break t}throw Error(Tu(t))}return new up(t)}if(i=Qb[e],o=Jb[e],!i||!o)throw Error("Invalid geometry type: "+e);return e=i.call(t),new o(e,t.a)}throw Error(Tu(t))}function Mu(t){for(var e=[],o=t.a.length,i=0;i<o;++i){var n=t.b;if(!Cu(t,4))break;e.push(n.value)}if(e.length==o)return e;throw Error(Tu(t))}function xu(t){for(var e=[Mu(t)];Cu(t,5);)e.push(Mu(t));return e}function Ru(t){for(var e=[t.sg()];Cu(t,5);)e.push(t.sg());return e}function Iu(t){var e=1==t.b.type&&"EMPTY"==t.b.value;return e&&Pu(t),e}function Tu(t){return"Unexpected `"+t.b.value+"` at position "+t.b.position+" in `"+t.i.a+"`"}function Lu(){this.version=void 0}function Gu(t,e){return hl({},yE,t,e)}function Ou(t,e){return hl({},uE,t,e)}function Nu(t,e){if(e=Gu(t,e))return t=[xp(t.getAttribute("width")),xp(t.getAttribute("height"))],e.size=t,e}function ku(t,e){return hl([],gE,t,e)}function Du(t){t=t||{},this.a="http://mapserver.gis.umn.edu/mapserver",this.b=new kp,this.c=t.layers?t.layers:null,vp.call(this)}function ju(){this.i=new Hc}function Fu(t){var e=Rp(t).split(" ");if(e&&2==e.length&&(t=+e[0],e=+e[1],!isNaN(t)&&!isNaN(e)))return[t,e]}function Uu(t){ge.call(this),t=t||{},this.a=null,this.f=It,this.c=void 0,ne(this,me("projection"),this.Am,this),ne(this,me("tracking"),this.Bm,this),void 0!==t.projection&&this.Wh(t.projection),void 0!==t.trackingOptions&&this.wj(t.trackingOptions),this.Ke(void 0!==t.tracking&&t.tracking)}function Bu(t,e,o){ai.call(this),this.Ng(t,e||0,o)}function Vu(t){var e=t.A[t.a]-t.A[0];return t=t.A[t.a+1]-t.A[1],e*e+t*t}function Wu(t,e,o){for(var i,n,r,s,a,l=[],p=t(0),c=t(1),u=e(p),h=e(c),d=[c,p],f=[h,u],y=[1,0],g={},m=1e5;0<--m&&0<y.length;)r=y.pop(),p=d.pop(),u=f.pop(),c=r.toString(),c in g||(l.push(u[0],u[1]),g[c]=!0),s=y.pop(),c=d.pop(),h=f.pop(),a=(r+s)/2,i=t(a),n=e(i),S(n[0],n[1],u[0],u[1],h[0],h[1])<o?(l.push(h[0],h[1]),c=s.toString(),g[c]=!0):(y.push(s,a,a,r),f.push(h,n,n,u),d.push(c,i,i,p));return l}function zu(t,e,o,i,n){var r=At("EPSG:4326");return Wu(function(i){return[t,e+(o-e)*i]},xt(r,i),n)}function qu(t,e,o,i,n){var r=At("EPSG:4326");return Wu(function(i){return[e+(o-e)*i,t]},xt(r,i),n)}function Hu(t){t=t||{},this.j=this.v=null,this.f=this.o=1/0,this.g=this.l=-1/0,this.ra=this.oa=1/0,this.R=this.I=-1/0,this.Jb=void 0!==t.targetSize?t.targetSize:100,this.fb=void 0!==t.maxLines?t.maxLines:100,this.i=[],this.c=[],this.pa=void 0!==t.strokeStyle?t.strokeStyle:IE,this.D=this.u=void 0,this.a=this.b=this.S=null,1==t.showLabels&&(this.na=t.lonLabelFormatter?t.lonLabelFormatter:Yo.bind(this,"EW"),this.Ua=t.latLabelFormatter?t.latLabelFormatter:Yo.bind(this,"NS"),this.fa=void 0==t.lonLabelPosition?0:t.lonLabelPosition,this.T=void 0==t.latLabelPosition?1:t.latLabelPosition,this.B=void 0!==t.lonLabelStyle?t.lonLabelStyle:new nc({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new Ba({color:"rgba(0,0,0,1)"}),stroke:new xs({color:"rgba(255,255,255,1)",width:3})}),this.C=void 0!==t.latLabelStyle?t.latLabelStyle:new nc({font:"12px Calibri,sans-serif",textAlign:"end",fill:new Ba({color:"rgba(0,0,0,1)"}),
stroke:new xs({color:"rgba(255,255,255,1)",width:3})}),this.b=[],this.a=[]),this.setMap(void 0!==t.map?t.map:null)}function Yu(t,e,o,i,n,r,s){var a=s;return o=zu(e,o,i,t.j,n),a=void 0!==t.i[a]?t.i[a]:new Al(null),a.ba("XY",o),nt(a.G(),r)&&(t.b&&(o=s,i=a.ga(),r=[i[0],b(r[1]+Math.abs(r[1]-r[3])*t.fa,Math.max(r[1],i[1]),Math.min(r[3],i[i.length-1]))],o=t.b[o]?t.b[o].Qd:new Mi(null),o.ma(r),t.b[s]={Qd:o,text:t.na(e)}),t.i[s++]=a),s}function Zu(t,e,o,i,n){var r=n;if(o=qu(e,t.g,t.f,t.j,o),r=void 0!==t.c[r]?t.c[r]:new Al(null),r.ba("XY",o),nt(r.G(),i)){if(t.a){o=n;var s=r.ga();i=[b(i[0]+Math.abs(i[0]-i[2])*t.T,Math.max(i[0],s[0]),Math.min(i[2],s[s.length-2])),s[1]],o=t.a[o]?t.a[o].Qd:new Mi(null),o.ma(i),t.a[n]={Qd:o,text:t.Ua(e)}}t.c[n++]=r}return n}function Ku(t,e,o,i,n){de.call(this),this.f=n,this.extent=t,this.a=o,this.resolution=e,this.state=i}function Xu(t,e,o,i,n,r,s){Ku.call(this,t,e,o,0,i),this.j=n,this.M=new Image,null!==r&&(this.M.crossOrigin=r),this.c={},this.i=null,this.state=0,this.g=s}function Ju(t,e,o,i,n,r){this.c=r||null,Ku.call(this,t,e,o,r?0:2,i),this.i=n}function Qu(t,e){de.call(this),this.ta=t,this.state=e,this.i=null,this.key=""}function $u(t){if(!t.i)return t;var e=t.i;do{if(2==e.getState())return e;e=e.i}while(e);return t}function th(t,e){t.state=e,t.s()}function eh(t,e,o,i,n){Qu.call(this,t,e),this.g=o,this.M=new Image,null!==i&&(this.M.crossOrigin=i),this.c=null,this.j=n}function oh(t){t.c.forEach(ae),t.c=null}function ih(t){t=t||{},sn.call(this,{handleEvent:oi}),this.g=t.formatConstructors?t.formatConstructors:[],this.o=t.projection?At(t.projection):null,this.a=null,this.target=t.target?t.target:null}function nh(t){t=t.dataTransfer.files;var e,o=0;for(e=t.length;o<e;++o){var i=t.item(o),n=new FileReader;n.addEventListener("load",this.j.bind(this,i)),n.readAsText(i)}}function rh(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}function sh(t){var e=t.v;e&&(e=t.target?t.target:e.a,t.a=[ne(e,"drop",nh,t),ne(e,"dragenter",rh,t),ne(e,"dragover",rh,t),ne(e,"drop",rh,t)])}function ah(t){t.a&&(t.a.forEach(ae),t.a=null)}function lh(t,e,o,i){ue.call(this,t),this.features=o,this.file=e,this.projection=i}function ph(t){t=t||{},En.call(this,{handleDownEvent:hh,handleDragEvent:ch,handleUpEvent:uh}),this.l=t.condition?t.condition:mn,this.a=this.g=void 0,this.j=0,this.u=void 0!==t.duration?t.duration:400}function ch(t){if(_n(t)){var e=t.map,o=e.Ob(),i=t.pixel;t=i[0]-o[0]/2,i=o[1]/2-i[1],o=Math.atan2(i,t),t=Math.sqrt(t*t+i*i),e=e.Z(),e.g.rotation!==jo&&void 0!==this.g&&(i=o-this.g,an(e,e.Qa()-i)),this.g=o,void 0!==this.a&&(o=this.a*(e.Pa()/t),pn(e,o)),void 0!==this.a&&(this.j=this.a/t),this.a=t}}function uh(t){if(!_n(t))return!0;t=t.map.Z(),en(t,1,-1);var e=this.j-1,o=t.Qa(),o=t.constrainRotation(o,0);an(t,o,void 0,void 0);var o=t.Pa(),i=this.u,o=t.constrainResolution(o,0,e);return pn(t,o,void 0,i),this.j=0,!1}function hh(t){return!(!_n(t)||!this.l(t))&&(en(t.map.Z(),1,1),this.a=this.g=void 0,!0)}function dh(t,e,o,i){this.fb=t,this.Ua=e,this.overlaps=i,this.c=0,this.resolution=o,this.ra=this.oa=null,this.a=[],this.coordinates=[],this.T=pr(),this.b=[],this.B=null,this.fa=pr(),this.na=pr()}function fh(t,e,o,i,n,r,s){var a=t.coordinates.length,l=t.Sf();s&&(o+=n),s=[e[o],e[o+1]];var p,c=[NaN,NaN],u=!0;for(p=o+n;p<i;p+=n){c[0]=e[p],c[1]=e[p+1];var h=D(l,c);h!==d?(u&&(t.coordinates[a++]=s[0],t.coordinates[a++]=s[1]),t.coordinates[a++]=c[0],t.coordinates[a++]=c[1],u=!1):1===h?(t.coordinates[a++]=c[0],t.coordinates[a++]=c[1],u=!1):u=!0,s[0]=c[0],s[1]=c[1];var d=h}return(r&&u||p===o+n)&&(t.coordinates[a++]=s[0],t.coordinates[a++]=s[1]),a}function yh(t,e){t.oa=[0,e,0],t.a.push(t.oa),t.ra=[0,e,0],t.b.push(t.ra)}function gh(t,e,o,i,n,r,s,l,p){if(t.B&&a(i,t.T))var c=t.B;else t.B||(t.B=[]),c=ri(t.coordinates,0,t.coordinates.length,2,i,t.B),dr(t.T,i);i=!ct(r);for(var u,h,f,y,g,m=0,v=s.length,_=0,b=t.fa,E=t.na,S=0,w=0,P=t.a!=s||t.overlaps?0:200;m<v;){var C=s[m];switch(C[0]){case 0:_=C[1],i&&r[d(_).toString()]||!_.V()?m=C[2]:void 0===p||nt(p,_.V().G())?++m:m=C[2]+1;break;case 1:S>P&&(t.Va(e,n),S=0),w>P&&(e.stroke(),w=0),S||w||(e.beginPath(),h=f=NaN),++m;break;case 2:_=C[1],u=c[_],C=c[_+1],y=c[_+2]-u,_=c[_+3]-C,_=Math.sqrt(y*y+_*_),e.moveTo(u+_,C),e.arc(u,C,_,0,2*Math.PI,!0),++m;break;case 3:e.closePath(),++m;break;case 4:_=C[1],u=C[2];var A=C[3],M=C[4]*o,x=C[5]*o,R=C[6],I=C[7],T=C[8],L=C[9],G=C[10];y=C[11],g=C[12];var O=C[13],N=C[14];for(G&&(y+=n);_<u;_+=2){if(C=c[_]-M,G=c[_+1]-x,O&&(C=Math.round(C),G=Math.round(G)),1!=g||y){var k=C+M,D=G+x;vr(b,k,D,g,g,y,-k,-D),e.setTransform.apply(e,b)}k=e.globalAlpha,1!=I&&(e.globalAlpha=k*I);var D=N+T>A.width?A.width-T:N,j=R+L>A.height?A.height-L:R;e.drawImage(A,T,L,D,j,C,G,D*o,j*o),1!=I&&(e.globalAlpha=k),(1!=g||y)&&e.setTransform.apply(e,E)}++m;break;case 5:for(_=C[1],u=C[2],x=C[3],R=C[4]*o,I=C[5]*o,y=C[6],g=C[7]*o,A=C[8],M=C[9],(G=C[10])&&(y+=n);_<u;_+=2){for(C=c[_]+R,G=c[_+1]+I,(1!=g||y)&&(vr(b,C,G,g,g,y,-C,-G),e.setTransform.apply(e,b)),T=x.split("\n"),L=T.length,1<L?(O=Math.round(1.5*e.measureText("M").width),G-=(L-1)/2*O):O=0,N=0;N<L;N++)k=T[N],M&&e.strokeText(k,C,G),A&&e.fillText(k,C,G),G+=O;(1!=g||y)&&e.setTransform.apply(e,E)}++m;break;case 6:if(l&&(_=C[1],_=l(_)))return _;++m;break;case 7:P?S++:t.Va(e,n),++m;break;case 8:for(_=C[1],u=C[2],C=c[_],G=c[_+1],y=C+.5|0,g=G+.5|0,y===h&&g===f||(e.moveTo(C,G),h=y,f=g),_+=2;_<u;_+=2)C=c[_],G=c[_+1],y=C+.5|0,g=G+.5|0,(_==u-2||y!==h||g!==f)&&(e.lineTo(C,G),h=y,f=g);++m;break;case 9:t.R=C[2],S&&(t.Va(e,n),S=0,w&&(e.stroke(),w=0)),e.fillStyle=C[1],++m;break;case 10:var _=void 0===C[8]||C[8],F=C[9];u=C[2],w&&(e.stroke(),w=0),e.strokeStyle=C[1],e.lineWidth=_?u*o:u,e.lineCap=C[3],e.lineJoin=C[4],e.miterLimit=C[5],Kg&&(u=C[6],y=C[7],_&&o!==F&&(u=u.map(function(t){return t*o/F}),y*=o/F,C[6]=u,C[7]=y,C[9]=o),e.lineDashOffset=y,e.setLineDash(u)),++m;break;case 11:e.font=C[1],e.textAlign=C[2],e.textBaseline=C[3],++m;break;case 12:P?w++:e.stroke(),++m;break;default:++m}}S&&t.Va(e,n),w&&e.stroke()}function mh(t){var e=t.b;e.reverse();var o,i=e.length,n=-1;for(o=0;o<i;++o){var r=e[o],s=r[0];if(6==s)n=o;else if(0==s){for(r[2]=o,r=t.b,s=o;n<s;){var a=r[n];r[n]=r[s],r[s]=a,++n,--s}n=-1}}}function vh(t,e){t.oa[2]=t.a.length,t.oa=null,t.ra[2]=t.b.length,t.ra=null,e=[6,e],t.a.push(e),t.b.push(e)}function _h(t,e,o,i){dh.call(this,t,e,o,i),this.M=this.I=null,this.C=this.D=this.S=this.u=this.v=this.l=this.o=this.j=this.g=this.f=this.i=void 0}function bh(t,e,o,i){dh.call(this,t,e,o,i),this.f=null,this.i={Md:void 0,Gd:void 0,Hd:null,Id:void 0,Jd:void 0,Kd:void 0,Ld:void 0,eg:0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}function Eh(t,e,o,i,n){var r=t.coordinates.length;return e=fh(t,e,o,i,n,!1,!1),r=[8,r,e],t.a.push(r),t.b.push(r),i}function Sh(t){var e=t.i,o=e.strokeStyle,i=e.lineCap,n=e.lineDash,r=e.lineDashOffset,s=e.lineJoin,l=e.lineWidth,p=e.miterLimit;e.Md==o&&e.Gd==i&&a(e.Hd,n)&&e.Id==r&&e.Jd==s&&e.Kd==l&&e.Ld==p||(e.eg!=t.coordinates.length&&(t.a.push([12]),e.eg=t.coordinates.length),t.a.push([10,o,l,i,s,p,n,r,!0,1],[1]),e.Md=o,e.Gd=i,e.Hd=n,e.Id=r,e.Jd=s,e.Kd=l,e.Ld=p)}function wh(t,e,o,i){dh.call(this,t,e,o,i),this.f=null,this.i={oh:void 0,Md:void 0,Gd:void 0,Hd:null,Id:void 0,Jd:void 0,Kd:void 0,Ld:void 0,fillStyle:void 0,strokeStyle:void 0,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0}}function Ph(t,e,o,i,n){var r=t.i,s=void 0!==r.fillStyle,r=void 0!=r.strokeStyle,a=i.length,l=[1];for(t.a.push(l),t.b.push(l),l=0;l<a;++l){var p=i[l],c=t.coordinates.length;o=fh(t,e,o,p,n,!0,!r),o=[8,c,o],t.a.push(o),t.b.push(o),r&&(o=[3],t.a.push(o),t.b.push(o)),o=p}return e=[7],t.b.push(e),s&&t.a.push(e),r&&(s=[12],t.a.push(s),t.b.push(s)),o}function Ch(t,e){var o=t.i,i=o.fillStyle,n=o.strokeStyle,r=o.lineCap,s=o.lineDash,l=o.lineDashOffset,p=o.lineJoin,c=o.lineWidth,u=o.miterLimit;if(void 0!==i&&("string"!=typeof i||o.oh!=i)){var h=[9,i];"string"!=typeof i&&(e=e.G(),h.push([e[0],e[3]])),t.a.push(h),o.oh=o.fillStyle}void 0===n||o.Md==n&&o.Gd==r&&a(o.Hd,s)&&o.Id==l&&o.Jd==p&&o.Kd==c&&o.Ld==u||(t.a.push([10,n,c,r,p,u,s,l,!0,1]),o.Md=n,o.Gd=r,o.Hd=s,o.Id=l,o.Jd=p,o.Kd=c,o.Ld=u)}function Ah(t,e,o,i){dh.call(this,t,e,o,i),this.C=this.D=this.S=null,this.Ia="",this.o=this.j=0,this.l=void 0,this.u=this.v=0,this.g=this.f=this.i=null}function Mh(t,e,o,i,n){this.v=t,this.c=e,this.o=i,this.l=o,this.f=n,this.a={},this.g=xe(1,1),this.j=pr()}function xh(t,e,o){var i,n=Math.floor(t.length/2);if(e>=n)for(i=n;i<e;i++)t[i][o]=!0;else if(e<n)for(i=e+1;i<n;i++)t[i][o]=!0}function Rh(t){if(void 0!==OE[t])return OE[t];for(var e=2*t+1,o=Array(e),i=0;i<e;i++)o[i]=Array(e);for(var e=t,n=i=0;e>=i;)xh(o,t+e,t+i),xh(o,t+i,t+e),xh(o,t-i,t+e),xh(o,t-e,t+i),xh(o,t-e,t-i),xh(o,t-i,t-e),xh(o,t+i,t-e),xh(o,t+e,t-i),i++,0<2*((n+=1+2*i)-e)+1&&(--e,n+=1-2*e);return OE[t]=o}function Ih(t){for(var e in t.a){var o,i=t.a[e];for(o in i)i[o].Te()}}function Th(t,e){var o=t.c;t=o[0];var i=o[1],n=o[2],o=o[3];return t=[t,i,t,o,n,o,n,i],ri(t,0,8,2,e,t),t}function Lh(t,e,o,i,n,r,s){var a=Object.keys(t.a).map(Number);a.sort(function(t,e){return e-t});var l,p,c=0;for(l=a.length;c<l;++c){var u=t.a[a[c].toString()];for(p=_m.length-1;0<=p;--p){var h=u[_m[p]];if(void 0!==h&&(h=gh(h,e,1,o,i,n,h.b,r,s)))return h}}}function Gh(t){ye.call(this),this.a=t}function Oh(t,e){var o=e.getState();return 2!=o&&3!=o&&ne(e,"change",t.na,t),0==o&&(e.load(),o=e.getState()),2==o}function Nh(t){var e=t.a;e.Mb()&&"ready"==e.$f()&&t.s()}function kh(t,e){e.Ki()&&t.postRenderFunctions.push(function(t,e,o){e=d(t).toString(),t.fd(o.viewState.projection,o.usedTiles[e])}.bind(null,e))}function Dh(t,e){if(e){var o,i=0;for(o=e.length;i<o;++i){var n=e[i];t[d(n).toString()]=n}}}function jh(t,e){void 0!==(e=e.D)&&("string"==typeof e?t.logos[e]="":e&&(y("string"==typeof e.href,44),y("string"==typeof e.src,45),t.logos[e.src]=e.href))}function Fh(t,e,o,i){e=d(e).toString(),o=o.toString(),e in t?o in t[e]?(t=t[e][o],i.ca<t.ca&&(t.ca=i.ca),i.$>t.$&&(t.$=i.$),i.da<t.da&&(t.da=i.da),i.ia>t.ia&&(t.ia=i.ia)):t[e][o]=i:(t[e]={},t[e][o]=i)}function Uh(t,e,o,i,n,r,s,a,l,p){var c=d(e).toString();c in t.wantedTiles||(t.wantedTiles[c]={});var u=t.wantedTiles[c];t=t.tileQueue;var h,f,y,g=o.minZoom;for(y=s;y>=g;--y){var m=Bt(o,r,y,m),v=o.Da(y);for(h=m.ca;h<=m.$;++h)for(f=m.da;f<=m.ia;++f)if(s-y<=a){var _=e.Nc(y,h,f,i,n);0==_.getState()&&(u[_.bb()]=!0,_.bb()in t.a||t.f([_,c,Vt(o,_.ta),v])),l&&l.call(p,_)}else e.Ug(y,h,f,n)}}function Bh(t){Gh.call(this,t),this.fa=pr()}function Vh(t,e,o){var i=e.pixelRatio,n=e.size[0]*i,r=e.size[1]*i,s=e.viewState.rotation,a=et(o),l=ot(o),p=X(o);o=K(o),fr(e.coordinateToPixelTransform,a),fr(e.coordinateToPixelTransform,l),fr(e.coordinateToPixelTransform,p),fr(e.coordinateToPixelTransform,o),t.save(),Mr(t,-s,n/2,r/2),t.beginPath(),t.moveTo(a[0]*i,a[1]*i),t.lineTo(l[0]*i,l[1]*i),t.lineTo(p[0]*i,p[1]*i),t.lineTo(o[0]*i,o[1]*i),t.clip(),Mr(t,s,n/2,r/2)}function Wh(t,e,o,i,n){var r=t.a;if(fe(r,e)){var s=i.size[0]*i.pixelRatio,a=i.size[1]*i.pixelRatio,l=i.viewState.rotation;Mr(o,-l,s/2,a/2),t=n||zh(t,i,0),r.b(new Ar(e,new Rr(o,i.pixelRatio,i.extent,t,i.viewState.rotation),i,o,null)),Mr(o,l,s/2,a/2)}}function zh(t,e,o){var i=e.viewState,n=e.pixelRatio,r=n/i.resolution;return vr(t.fa,n*e.size[0]/2,n*e.size[1]/2,r,-r,-i.rotation,-i.center[0]+o,-i.center[1])}function qh(t,e){return d(t)-d(e)}function Hh(t,e){return(t=.5*t/e)*t}function Yh(t,e,o,i,n,r){var s,a=!1;if(s=o.Y()){var l=s.Ye();2==l||3==l?s.Bj(n,r):(0==l&&s.load(),s.Nh(n,r),a=!0)}return(n=(0,o.Za)(e))&&(i=n.Vd(i),(0,kE[i.U()])(t,i,o,e)),a}function Zh(t){Bh.call(this,t),this.c=!1,this.v=-1,this.l=NaN,this.j=j(),this.f=this.o=null,this.g=xe()}function Kh(){this.b="precision mediump float;varying vec2 a;uniform float f;uniform sampler2D g;void main(void){vec4 texColor=texture2D(g,a);gl_FragColor.rgb=texColor.rgb;gl_FragColor.a=texColor.a*f;}"}function Xh(){this.b="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform mat4 d;uniform mat4 e;void main(void){gl_Position=e*vec4(b,0.,1.);a=(d*vec4(c,0.,1.)).st;}"}function Jh(t,e){this.i=t.getUniformLocation(e,"f"),this.c=t.getUniformLocation(e,"e"),this.g=t.getUniformLocation(e,"d"),this.f=t.getUniformLocation(e,"g"),this.b=t.getAttribLocation(e,"b"),this.a=t.getAttribLocation(e,"c")}function Qh(t,e){Gh.call(this,e),this.c=t,this.T=new Xr([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]),this.g=this.Ib=null,this.j=void 0,this.v=pr(),this.S=pr(),this.C=qr(),this.u=null}function $h(t,e,o){var i=t.c.i;if(void 0===t.j||t.j!=o){e.postRenderFunctions.push(function(t,e,o){t.isContextLost()||(t.deleteFramebuffer(e),t.deleteTexture(o))}.bind(null,i,t.g,t.Ib)),e=ps(i,o,o);var n=i.createFramebuffer();i.bindFramebuffer(36160,n),i.framebufferTexture2D(36160,36064,3553,e,0),t.Ib=e,t.g=n,t.j=o}else i.bindFramebuffer(36160,t.g)}function td(t,e,o,i){if(t=t.a,fe(t,e)){var n=i.viewState;t.b(new Ar(e,new ua(o,n.center,n.resolution,n.rotation,i.size,i.extent,i.pixelRatio),i,null,o))}}function ed(t,e){Qh.call(this,t,e),this.l=!1,this.R=-1,this.I=NaN,this.D=j(),this.o=this.f=this.B=null}function od(t){t=t||{};var e=mg({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,sr.call(this,e),this.c=void 0!==t.renderBuffer?t.renderBuffer:100,this.u=null,this.f=void 0,this.g(t.style),this.T=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.na=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}function id(){return[[-1/0,-1/0,1/0,1/0]]}function nd(t){ge.call(this),this.c=At(t.projection),this.j=rd(t.attributions),this.D=t.logo,this.na=void 0!==t.state?t.state:"ready",this.u=void 0!==t.wrapX&&t.wrapX}function rd(t){if("string"==typeof t)return[new Xt({html:t})];if(t instanceof Xt)return[t];if(Array.isArray(t)){for(var e=t.length,o=Array(e),i=0;i<e;i++){var n=t[i];o[i]="string"==typeof n?new Xt({html:n}):n}return o}return null}function sd(t,e){t.na=e,t.s()}function ad(t){t=t||{},nd.call(this,{attributions:t.attributions,logo:t.logo,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.B=h,this.C=t.format,this.T=void 0==t.overlaps||t.overlaps,this.I=t.url,t.loader?this.B=t.loader:void 0!==this.I&&(y(this.C,7),this.B=gl(this.I,this.C)),this.fa=t.strategy?t.strategy:id;var e=void 0===t.useSpatialIndex||t.useSpatialIndex;if(this.a=e?new Ds:null,this.R=new Ds,this.g={},this.o={},this.l={},this.v={},this.f=null,t.features instanceof be)var o=t.features,i=o.a;else Array.isArray(t.features)&&(i=t.features);e||o||(o=new be(i)),i&&cd(this,i),o&&ud(this,o)}function ld(t,e,o){t.v[e]=[ne(o,"change",t.Oi,t),ne(o,"propertychange",t.Oi,t)]}function pd(t,e,o){var i=!0,n=o.a;return void 0!==n?n.toString()in t.o?i=!1:t.o[n.toString()]=o:(y(!(e in t.l),30),t.l[e]=o),i}function cd(t,e){var o,i=[],n=[],r=[],s=0;for(o=e.length;s<o;s++){var a=e[s],l=d(a).toString();pd(t,l,a)&&n.push(a)}for(s=0,o=n.length;s<o;s++)a=n[s],l=d(a).toString(),ld(t,l,a),(e=a.V())?(l=e.G(),i.push(l),r.push(a)):t.g[l]=a;for(t.a&&t.a.load(i,r),s=0,o=n.length;s<o;s++)t.b(new fd("addfeature",n[s]))}function ud(t,e){var o=!1;ne(t,"addfeature",function(t){o||(o=!0,e.push(t.feature),o=!1)}),ne(t,"removefeature",function(t){o||(o=!0,e.remove(t.feature),o=!1)}),ne(e,"add",function(t){o||(o=!0,this.yb(t.element),o=!1)},t),ne(e,"remove",function(t){o||(o=!0,this.Gb(t.element),o=!1)},t),t.f=e}function hd(t,e,o){t.$b([e[0],e[1],e[0],e[1]],function(t){if(t.V().sb(e))return o.call(void 0,t)})}function dd(t,e){for(var o in t.o)if(t.o[o]===e){delete t.o[o];break}}function fd(t,e){ue.call(this,t),this.feature=e}function yd(t){En.call(this,{handleDownEvent:vd,handleEvent:md,handleUpEvent:_d}),this.T=!1,this.fa=null,this.u=!1,this.Yb=t.source?t.source:null,this.$a=t.features?t.features:null,this.wk=t.snapTolerance?t.snapTolerance:12,this.R=t.type,this.g=Ad(this.R),this.Sa=t.minPoints?t.minPoints:this.g===VE?3:2,this.va=t.maxPoints?t.maxPoints:1/0,this.Cf=t.finishCondition?t.finishCondition:oi;var e=t.geometryFunction;if(!e)if("Circle"===this.R)e=function(t,e){return e=e||new Bu([NaN,NaN]),e.Ng(t[0],Math.sqrt(Qo(t[0],t[1]))),e};else{var o,i=this.g;i===UE?o=Mi:i===BE?o=Al:i===VE&&(o=Fi),e=function(t,e){return e?i===VE?e.ma([t[0].concat([t[0][0]])]):e.ma(t):e=new o(t),e}}this.Za=e,this.I=this.C=this.a=this.B=this.j=this.l=null,this.ad=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.pa=new od({source:new ad({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:gd()}),this.xb=t.geometryName,this.vk=t.condition?t.condition:gn,this.Df=t.freehand?oi:t.freehandCondition?t.freehandCondition:mn,ne(this,me("active"),this.ri,this)}function gd(){var t=qa();return function(e){return t[e.V().U()]}}function md(t){this.u=this.g!==UE&&this.Df(t);var e=!this.u;return this.u&&"pointerdrag"===t.type&&null!==this.j?(wd(this,t),e=!1):"pointermove"===t.type?e=bd(this,t):"dblclick"===t.type&&(e=!1),wn.call(this,t)&&e}function vd(t){return this.T=!this.u,this.u?(this.fa=t.pixel,this.l||Sd(this,t),!0):!!this.vk(t)&&(this.fa=t.pixel,!0)}function _d(t){var e=!0;bd(this,t);var o=this.g===WE;return this.T?(this.l?this.u||o?this.Pd():Ed(this,t)?this.Cf(t)&&this.Pd():wd(this,t):(Sd(this,t),this.g===UE&&this.Pd()),e=!1):this.u&&(this.l=null,Pd(this)),e}function bd(t,e){if(t.fa&&(!t.u&&t.T||t.u&&!t.T)){var o=t.fa,i=e.pixel,n=o[0]-i[0],o=o[1]-i[1],n=n*n+o*o;t.T=t.u?n>t.ad:n<=t.ad}return t.l?(n=e.coordinate,o=t.j.V(),t.g===UE?i=t.a:t.g===VE?(i=t.a[0],i=i[i.length-1],Ed(t,e)&&(n=t.l.slice())):(i=t.a,i=i[i.length-1]),i[0]=n[0],i[1]=n[1],t.Za(t.a,o),t.B&&t.B.V().ma(n),o instanceof Fi&&t.g!==VE?(t.C||(t.C=new Ya(new Al(null))),n=o.Ch(0),e=t.C.V(),e.ba(n.ja,n.ga())):t.I&&(e=t.C.V(),e.ma(t.I)),Cd(t)):(e=e.coordinate.slice(),t.B?t.B.V().ma(e):(t.B=new Ya(new Mi(e)),Cd(t))),!0}function Ed(t,e){var o=!1;if(t.j){var i=!1,n=[t.l];if(t.g===BE?i=t.a.length>t.Sa:t.g===VE&&(i=t.a[0].length>t.Sa,n=[t.a[0][0],t.a[0][t.a[0].length-2]]),i)for(var i=e.map,r=0,s=n.length;r<s;r++){var a=n[r],l=i.Ja(a),p=e.pixel,o=p[0]-l[0],l=p[1]-l[1];if(o=Math.sqrt(o*o+l*l)<=(t.u?1:t.wk)){t.l=a;break}}}return o}function Sd(t,e){e=e.coordinate,t.l=e,t.g===UE?t.a=e.slice():t.g===VE?(t.a=[[e.slice(),e.slice()]],t.I=t.a[0]):(t.a=[e.slice(),e.slice()],t.g===WE&&(t.I=t.a)),t.I&&(t.C=new Ya(new Al(t.I))),e=t.Za(t.a),t.j=new Ya,t.xb&&t.j.Tc(t.xb),t.j.Ra(e),Cd(t),t.b(new Md("drawstart",t.j))}function wd(t,e){e=e.coordinate;var o,i=t.j.V();if(t.g===BE){t.l=e.slice();var n=t.a;n.length>=t.va&&(t.u?n.pop():o=!0),n.push(e.slice()),t.Za(n,i)}else t.g===VE&&(n=t.a[0],n.length>=t.va&&(t.u?n.pop():o=!0),n.push(e.slice()),o&&(t.l=n[0]),t.Za(t.a,i));Cd(t),o&&t.Pd()}function Pd(t){t.l=null;var e=t.j;return e&&(t.j=null,t.B=null,t.C=null,t.pa.ha().clear(!0)),e}function Cd(t){var e=[];t.j&&e.push(t.j),t.C&&e.push(t.C),t.B&&e.push(t.B),t=t.pa.ha(),t.clear(!0),t.cd(e)}function Ad(t){var e;return"Point"===t||"MultiPoint"===t?e=UE:"LineString"===t||"MultiLineString"===t?e=BE:"Polygon"===t||"MultiPolygon"===t?e=VE:"Circle"===t&&(e=WE),e}function Md(t,e){ue.call(this,t),this.feature=e}function xd(t){this.a=this.j=null,this.C=!1,this.B=this.l=null,t||(t={}),t.extent&&this.g(t.extent),En.call(this,{handleDownEvent:Id,handleDragEvent:Td,handleEvent:Rd,handleUpEvent:Ld}),this.u=new od({source:new ad({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:Gd(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.I=new od({source:new ad({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:Od(),updateWhileAnimating:!0,updateWhileInteracting:!0})}function Rd(t){if(!(t instanceof $e))return!0;if("pointermove"==t.type&&!this.D){var e=t.pixel,o=t.map,i=Dd(this,e,o);i||(i=o.Wa(e)),jd(this,i)}return wn.call(this,t),!1}function Id(t){function e(t){var e=null,o=null;return t[0]==n[0]?e=n[2]:t[0]==n[2]&&(e=n[0]),t[1]==n[1]?o=n[3]:t[1]==n[3]&&(o=n[1]),null!==e&&null!==o?[e,o]:null}var o=t.pixel,i=t.map,n=this.G();return(t=Dd(this,o,i))&&n?(o=t[0]==n[0]||t[0]==n[2]?t[0]:null,i=t[1]==n[1]||t[1]==n[3]?t[1]:null,null!==o&&null!==i?this.a=Nd(e(t)):null!==o?this.a=kd(e([o,n[1]]),e([o,n[3]])):null!==i&&(this.a=kd(e([n[0],i]),e([n[2],i])))):(t=i.Wa(o),this.g([t[0],t[1],t[0],t[1]]),this.a=Nd(t)),!0}function Td(t){return this.a&&(t=t.coordinate,this.g(this.a(t)),jd(this,t)),!0}function Ld(){this.a=null;var t=this.G();return t&&Z(t)||this.g(null),!1}function Gd(){var t=qa();return function(){return t.Polygon}}function Od(){var t=qa();return function(){return t.Point}}function Nd(t){return function(e){return I([t,e])}}function kd(t,e){return t[0]==e[0]?function(o){return I([t,[o[0],e[1]]])}:t[1]==e[1]?function(o){return I([t,[e[0],o[1]]])}:null}function Dd(t,e,o){function i(t,e){return ti(n,t)-ti(n,e)}var n=o.Wa(e),r=t.G();if(r){r=[[[r[0],r[1]],[r[0],r[3]]],[[r[0],r[3]],[r[2],r[3]]],[[r[2],r[3]],[r[2],r[1]]],[[r[2],r[1]],[r[0],r[1]]]],r.sort(i);var r=r[0],s=Ho(n,r),a=o.Ja(s);if(10>=$o(e,a))return e=o.Ja(r[0]),o=o.Ja(r[1]),e=Qo(a,e),o=Qo(a,o),t.C=10>=Math.sqrt(Math.min(e,o)),t.C&&(s=e>o?r[1]:r[0]),s}return null}function jd(t,e){var o=t.B;o?o.V().ma(e):(o=new Ya(new Mi(e)),t.B=o,t.I.ha().yb(o))}function Fd(t){ue.call(this,zE),this.b=t}function Ud(t){En.call(this,{handleDownEvent:Hd,handleDragEvent:Yd,handleEvent:Kd,handleUpEvent:Zd}),this.ad=t.condition?t.condition:bn,this.$a=function(t){return gn(t)&&yn(t)},this.xb=t.deleteCondition?t.deleteCondition:this.$a,this.Yb=t.insertVertexCondition?t.insertVertexCondition:oi,this.Sa=this.g=null,this.va=[0,0],this.C=this.I=!1,this.a=new Ds,this.fa=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.l=this.pa=!1,this.j=[],this.B=new od({source:new ad({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:tf(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.T={Point:this.Dn,LineString:this.ti,LinearRing:this.ti,Polygon:this.En,MultiPoint:this.Bn,MultiLineString:this.An,MultiPolygon:this.Cn,Circle:this.yn,GeometryCollection:this.zn},this.u=t.features,this.u.forEach(this.kg,this),ne(this.u,"add",this.wn,this),ne(this.u,"remove",this.xn,this),this.R=null}function Bd(t,e){t.C||(t.C=!0,t.b(new ef("modifystart",t.u,e)))}function Vd(t,e){Wd(t,e),t.g&&!t.u.dc()&&(t.B.ha().Gb(t.g),t.g=null),se(e,"change",t.si,t)}function Wd(t,e){t=t.a;var o=[];t.forEach(function(t){e===t.feature&&o.push(t)});for(var i=o.length-1;0<=i;--i)t.remove(o[i])}function zd(t,e){var o=t.g;o?o.V().ma(e):(o=new Ya(new Mi(e)),t.g=o,t.B.ha().yb(o))}function qd(t,e){return t.index-e.index}function Hd(t){if(!this.ad(t))return!1;Xd(this,t.pixel,t.map);var e=t.map.Wa(t.pixel);this.j.length=0,this.C=!1;var o=this.g;if(o){var i=[],o=o.V().X(),n=I([o]),n=Us(this.a,n),r={};n.sort(qd);for(var s=0,a=n.length;s<a;++s){var l=n[s],p=l.la,c=d(l.feature),u=l.depth;u&&(c+="-"+u.join("-")),r[c]||(r[c]=Array(2)),"Circle"===l.geometry.U()&&1===l.index?(p=Qd(e,l),Ko(p,o)&&!r[c][0]&&(this.j.push([l,0]),r[c][0]=l)):Ko(p[0],o)&&!r[c][0]?(this.j.push([l,0]),r[c][0]=l):Ko(p[1],o)&&!r[c][1]?("LineString"!==l.geometry.U()&&"MultiLineString"!==l.geometry.U()||!r[c][0]||0!==r[c][0].index)&&(this.j.push([l,1]),r[c][1]=l):this.Yb(t)&&d(p)in this.Sa&&!r[c][0]&&!r[c][1]&&i.push([l,o])}for(i.length&&Bd(this,t),t=i.length-1;0<=t;--t)this.bm.apply(this,i[t])}return!!this.g}function Yd(t){this.I=!1,Bd(this,t),t=t.coordinate;for(var e=0,o=this.j.length;e<o;++e){for(var i,n=this.j[e],r=n[0],s=r.depth,a=r.geometry,l=r.la,n=n[1];t.length<a.qa();)t.push(l[n][t.length]);switch(a.U()){case"Point":i=t,l[0]=l[1]=t;break;case"MultiPoint":i=a.X(),i[r.index]=t,l[0]=l[1]=t;break;case"LineString":i=a.X(),i[r.index+n]=t,l[n]=t;break;case"MultiLineString":case"Polygon":i=a.X(),i[s[0]][r.index+n]=t,l[n]=t;break;case"MultiPolygon":i=a.X(),i[s[1]][s[0]][r.index+n]=t,l[n]=t;break;case"Circle":l[0]=l[1]=t,0===r.index?(this.l=!0,a.ob(t)):(this.l=!0,a.Uc($o(a.wa(),t))),this.l=!1}i&&(r=a,s=i,this.l=!0,r.ma(s),this.l=!1)}zd(this,t)}function Zd(t){for(var e,o,i=this.j.length-1;0<=i;--i)if(e=this.j[i][0],o=e.geometry,"Circle"===o.U()){var n=o.wa(),r=e.Pf[0];e=e.Pf[1],r.la[0]=r.la[1]=n,e.la[0]=e.la[1]=n,js(this.a,B(n),r),js(this.a,o.G(),e)}else js(this.a,I(e.la),e);return this.C&&(this.b(new ef("modifyend",this.u,t)),this.C=!1),!1}function Kd(t){if(!(t instanceof $e))return!0;this.R=t;var e;return Ji(t.map.Z())[1]||"pointermove"!=t.type||this.D||(this.va=t.pixel,Xd(this,t.pixel,t.map)),this.g&&this.xb(t)&&(e=!("singleclick"!=t.type||!this.I)||this.hj()),"singleclick"==t.type&&(this.I=!1),wn.call(this,t)&&!e}function Xd(t,e,o){function i(t,e){return Jd(n,t)-Jd(n,e)}var n=o.Wa(e),r=T(B(n),o.Z().Pa()*t.fa),r=Us(t.a,r);if(0<r.length){r.sort(i);var s=r[0],a=s.la,l=Qd(n,s),p=o.Ja(l),c=$o(e,p);if(c<=t.fa){if(e={},"Circle"===s.geometry.U()&&1===s.index)t.pa=!0,zd(t,l);else for(c=o.Ja(a[0]),s=o.Ja(a[1]),o=Qo(p,c),p=Qo(p,s),c=Math.sqrt(Math.min(o,p)),t.pa=c<=t.fa,t.pa&&(l=o>p?a[1]:a[0]),zd(t,l),p=1,o=r.length;p<o&&(l=r[p].la,Ko(a[0],l[0])&&Ko(a[1],l[1])||Ko(a[0],l[1])&&Ko(a[1],l[0]));++p)e[d(l)]=!0;return e[d(a)]=!0,void(t.Sa=e)}}t.g&&(t.B.ha().Gb(t.g),t.g=null)}function Jd(t,e){var o=e.geometry;return"Circle"===o.U()&&1===e.index?(t=Qo(o.wa(),t),(o=Math.sqrt(t)-o.pd())*o):ti(t,e.la)}function Qd(t,e){var o=e.geometry;return"Circle"===o.U()&&1===e.index?o.Ab(t):Ho(t,e.la)}function $d(t,e,o,i,n){Bs(t.a,e.G(),function(t){t.geometry===e&&(void 0===i||void 0===t.depth||a(t.depth,i))&&t.index>o&&(t.index+=n)})}function tf(){var t=qa();return function(){return t.Point}}function ef(t,e,o){ue.call(this,t),this.features=e,this.mapBrowserEvent=o}function of(t){if(sn.call(this,{handleEvent:nf}),t=t||{},this.C=t.condition?t.condition:yn,this.D=t.addCondition?t.addCondition:ii,this.B=t.removeCondition?t.removeCondition:ii,this.I=t.toggleCondition?t.toggleCondition:mn,this.l=!!t.multi&&t.multi,this.o=t.filter?t.filter:oi,this.j=t.hitTolerance?t.hitTolerance:0,this.g=new od({source:new ad({useSpatialIndex:!1,features:t.features,wrapX:t.wrapX}),style:t.style?t.style:rf(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.layers)if("function"==typeof t.layers)t=t.layers;else{var e=t.layers;t=function(t){return o(e,t)}}else t=oi;this.u=t,this.a={},t=this.g.ha().f,ne(t,"add",this.Fn,this),ne(t,"remove",this.Jn,this)}function nf(t){if(!this.C(t))return!0;var e=this.D(t),i=this.B(t),n=this.I(t),r=!e&&!i&&!n,s=t.map,a=this.g.ha().f,l=[],p=[];if(r){for(lt(this.a),s.we(t.pixel,function(t,e){if(this.o(t,e))return p.push(t),t=d(t),this.a[t]=e,!this.l}.bind(this),{layerFilter:this.u,hitTolerance:this.j}),r=a.dc()-1;0<=r;--r){var s=a.item(r),c=p.indexOf(s);-1<c?p.splice(c,1):(a.remove(s),l.push(s))}p.length&&a.fg(p)}else{for(s.we(t.pixel,function(t,r){if(this.o(t,r))return!e&&!n||o(a.a,t)?(i||n)&&o(a.a,t)&&(l.push(t),r=d(t),delete this.a[r]):(p.push(t),t=d(t),this.a[t]=r),!this.l}.bind(this),{layerFilter:this.u,hitTolerance:this.j}),r=l.length-1;0<=r;--r)a.remove(l[r]);a.fg(p)}return(0<p.length||0<l.length)&&this.b(new sf(qE,p,l,t)),fn(t)}function rf(){var t=qa();return n(t.Polygon,t.LineString),n(t.GeometryCollection,t.LineString),function(e){return e.V()?t[e.V().U()]:null}}function sf(t,e,o,i){ue.call(this,t),this.selected=e,this.deselected=o,this.mapBrowserEvent=i}function af(t){En.call(this,{handleEvent:pf,handleDownEvent:oi,handleUpEvent:cf}),t=t||{},this.l=t.source?t.source:null,this.R=void 0===t.vertex||t.vertex,this.C=void 0===t.edge||t.edge,this.j=t.features?t.features:null,this.pa=[],this.B={},this.T={},this.u={},this.I=null,this.g=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.va=uf.bind(this),this.a=new Ds,this.fa={Point:this.Rn,LineString:this.wi,LinearRing:this.wi,Polygon:this.Sn,MultiPoint:this.Pn,MultiLineString:this.On,MultiPolygon:this.Qn,GeometryCollection:this.Nn,Circle:this.Mn}}function lf(t,e,o,i){var n=i.Wa([e[0]-t.g,e[1]+t.g]),r=i.Wa([e[0]+t.g,e[1]-t.g]),n=I([n,r]),s=Us(t.a,n);t.R&&!t.C&&(s=s.filter(function(t){return"Circle"!==t.feature.V().U()}));var a=!1,n=!1,l=r=null;if(0<s.length){t.I=o,s.sort(t.va);var p=s[0].la,a="Circle"===s[0].feature.V().U();t.R&&!t.C?(o=i.Ja(p[0]),a=i.Ja(p[1]),o=Qo(e,o),e=Qo(e,a),a=Math.sqrt(Math.min(o,e)),(a=a<=t.g)&&(n=!0,r=o>e?p[1]:p[0],l=i.Ja(r))):t.C&&(r=a?qo(o,s[0].feature.V()):Ho(o,p),l=i.Ja(r),$o(e,l)<=t.g&&(n=!0,t.R&&!a&&(o=i.Ja(p[0]),a=i.Ja(p[1]),o=Qo(l,o),e=Qo(l,a),a=Math.sqrt(Math.min(o,e)),a=a<=t.g)))&&(r=o>e?p[1]:p[0],l=i.Ja(r)),n&&(l=[Math.round(l[0]),Math.round(l[1])])}return{nq:n,vertex:r,wq:l}}function pf(t){var e=lf(this,t.pixel,t.coordinate,t.map);return e.nq&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.wq),wn.call(this,t)}function cf(){var t=pt(this.u);return t.length&&(t.forEach(this.Dj,this),this.u={}),!1}function uf(t,e){return ti(this.I,t.la)-ti(this.I,e.la)}function hf(t){if(En.call(this,{handleDownEvent:df,handleDragEvent:yf,handleMoveEvent:gf,handleUpEvent:ff}),t=t||{},this.a=null,this.j=void 0!==t.features?t.features:null,t.layers)if("function"==typeof t.layers)var e=t.layers;else{var i=t.layers;e=function(t){return o(i,t)}}else e=oi;this.C=e,this.l=t.hitTolerance?t.hitTolerance:0,this.g=null,ne(this,me("active"),this.u,this)}function df(t){if(this.g=mf(this,t.pixel,t.map),!this.a&&this.g){this.a=t.coordinate,gf.call(this,t);var e=this.j||new be([this.g]);return this.b(new _f("translatestart",e,t.coordinate)),!0}return!1}function ff(t){if(this.a){this.a=null,gf.call(this,t);var e=this.j||new be([this.g]);return this.b(new _f("translateend",e,t.coordinate)),!0}return!1}function yf(t){if(this.a){t=t.coordinate;var e=t[0]-this.a[0],o=t[1]-this.a[1],i=this.j||new be([this.g]);i.forEach(function(t){var i=t.V();i.translate(e,o),t.Ra(i)}),this.a=t,this.b(new _f("translating",i,t))}}function gf(t){var e=t.map.a;mf(this,t.pixel,t.map)?(e.classList.remove(this.a?"ol-grab":"ol-grabbing"),e.classList.add(this.a?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}function mf(t,e,i){return i.we(e,function(t){if(!this.j||o(this.j.a,t))return t}.bind(t),{layerFilter:t.C,hitTolerance:t.l})}function vf(t,e){var o=t.v;t=t.c(),o&&t||(o||(o=e),o.a.classList.remove("ol-grab","ol-grabbing"))}function _f(t,e,o){ue.call(this,t),this.features=e,this.coordinate=o}function bf(t){t=t||{};var e=mg({},t);delete e.gradient,delete e.radius,delete e.blur,delete e.shadow,delete e.weight,od.call(this,e),this.j=null,this.R=void 0!==t.shadow?t.shadow:250,this.I=void 0,this.B=null,ne(this,me(ZE),this.Bl,this),this.pj(t.gradient?t.gradient:HE),this.jj(void 0!==t.blur?t.blur:15),this.Uc(void 0!==t.radius?t.radius:8),ne(this,me(YE),this.cg,this),ne(this,me(KE),this.cg,this),this.cg();var o,i=t.weight?t.weight:"weight";o="string"==typeof i?function(t){return t.get(i)}:i,this.g(function(t){t=o(t),t=void 0!==t?b(t,0,1):1;var e=255*t|0,i=this.B[e];return i||(i=[new Va({image:new ic({opacity:t,src:this.I})})],this.B[e]=i),i}.bind(this)),this.set(FE,null),ne(this,"render",this.Sl,this)}function Ef(t){Bh.call(this,t),this.v=pr(),this.j=null}function Sf(t){Ef.call(this,t),this.M=null,this.c=pr()}function wf(t,e,o,i){var n=Lt(o,e,t);return o=_t(e,i,o),e=e.sc(),void 0!==e&&(o*=e),e=t.sc(),void 0!==e&&(o/=e),t=_t(t,o,n)/o,isFinite(t)&&0<t&&(o/=t),o}function Pf(t,e,o,i){t=o-t,e=i-e;var n=Math.sqrt(t*t+e*e);return[Math.round(o+t/n),Math.round(i+e/n)]}function Cf(t,e,o,i,n,r,s,a,l,p,c){var u=xe(Math.round(o*t),Math.round(o*e));if(!l.length)return u.canvas;u.scale(o,o);var h=j();l.forEach(function(t){z(h,t.extent)});var d=xe(Math.round(o*it(h)/i),Math.round(o*$(h)/i)),f=o/i;l.forEach(function(t){d.drawImage(t.image,p,p,t.image.width-2*p,t.image.height-2*p,(t.extent[0]-h[0])*f,-(t.extent[3]-h[3])*f,it(t.extent)*f,$(t.extent)*f)});var y=et(s);return a.c.forEach(function(t){var e=t.source,n=t.target,s=e[1][0],a=e[1][1],l=e[2][0],p=e[2][1];t=(n[0][0]-y[0])/r;var c=-(n[0][1]-y[1])/r,f=(n[1][0]-y[0])/r,g=-(n[1][1]-y[1])/r,m=(n[2][0]-y[0])/r,v=-(n[2][1]-y[1])/r,n=e[0][0],e=e[0][1],s=s-n,a=a-e,l=l-n,p=p-e;t:{for(s=[[s,a,0,0,f-t],[l,p,0,0,m-t],[0,0,s,a,g-c],[0,0,l,p,v-c]],a=s.length,l=0;l<a;l++){for(var p=l,_=Math.abs(s[l][l]),b=l+1;b<a;b++){var E=Math.abs(s[b][l]);E>_&&(_=E,p=b)}if(!_){s=null;break t}
for(_=s[p],s[p]=s[l],s[l]=_,p=l+1;p<a;p++)for(_=-s[p][l]/s[l][l],b=l;b<a+1;b++)s[p][b]=l==b?0:s[p][b]+_*s[l][b]}for(l=Array(a),p=a-1;0<=p;p--)for(l[p]=s[p][a]/s[p][p],_=p-1;0<=_;_--)s[_][a]-=s[_][p]*l[p];s=l}s&&(u.save(),u.beginPath(),l=(t+f+m)/3,p=(c+g+v)/3,a=Pf(l,p,t,c),f=Pf(l,p,f,g),m=Pf(l,p,m,v),u.moveTo(f[0],f[1]),u.lineTo(a[0],a[1]),u.lineTo(m[0],m[1]),u.clip(),u.transform(s[0],s[2],s[1],s[3],t,c),u.translate(h[0]-n,h[3]-e),u.scale(i/o,-i/o),u.drawImage(d.canvas,0,0),u.restore())}),c&&(u.save(),u.strokeStyle="black",u.lineWidth=1,a.c.forEach(function(t){var e=t.target;t=(e[0][0]-y[0])/r;var o=-(e[0][1]-y[1])/r,i=(e[1][0]-y[0])/r,n=-(e[1][1]-y[1])/r,s=(e[2][0]-y[0])/r,e=-(e[2][1]-y[1])/r;u.beginPath(),u.moveTo(i,n),u.lineTo(t,o),u.lineTo(s,e),u.closePath(),u.stroke()}),u.restore()),u.canvas}function Af(t,e,o,i,n){this.i=t,this.f=e;var r={},s=xt(this.f,this.i);if(this.a=function(t){var e=t[0]+"/"+t[1];return r[e]||(r[e]=s(t)),r[e]},this.g=i,this.v=n*n,this.c=[],this.o=!1,this.l=this.i.i&&!!i&&!!this.i.G()&&it(i)==it(this.i.G()),this.b=this.i.G()?it(this.i.G()):null,this.j=this.f.G()?it(this.f.G()):null,t=et(o),e=ot(o),i=X(o),o=K(o),n=this.a(t),Mf(this,t,e,i,o,n,this.a(e),this.a(i),this.a(o),10),this.o){var a=1/0;this.c.forEach(function(t){a=Math.min(a,t.source[0][0],t.source[1][0],t.source[2][0])}),this.c.forEach(function(t){if(Math.max(t.source[0][0],t.source[1][0],t.source[2][0])-a>this.b/2){var e=[[t.source[0][0],t.source[0][1]],[t.source[1][0],t.source[1][1]],[t.source[2][0],t.source[2][1]]];e[0][0]-a>this.b/2&&(e[0][0]-=this.b),e[1][0]-a>this.b/2&&(e[1][0]-=this.b),e[2][0]-a>this.b/2&&(e[2][0]-=this.b),Math.max(e[0][0],e[1][0],e[2][0])-Math.min(e[0][0],e[1][0],e[2][0])<this.b/2&&(t.source=e)}},this)}r={}}function Mf(t,e,o,i,n,r,s,a,l,p){var c=I([r,s,a,l]),u=t.b?it(c)/t.b:null,h=t.b,d=t.i.i&&.5<u&&1>u,f=!1;if(0<p){if(t.f.c&&t.j)var y=I([e,o,i,n]),f=f|.25<it(y)/t.j;!d&&t.i.c&&u&&(f|=.25<u)}if(f||!t.g||nt(c,t.g)){if(!(f||isFinite(r[0])&&isFinite(r[1])&&isFinite(s[0])&&isFinite(s[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1]))){if(!(0<p))return;f=!0}if(0<p&&(f||(c=t.a([(e[0]+i[0])/2,(e[1]+i[1])/2]),h=d?(C(r[0],h)+C(a[0],h))/2-C(c[0],h):(r[0]+a[0])/2-c[0],c=(r[1]+a[1])/2-c[1],f=h*h+c*c>t.v),f))return void(Math.abs(e[0]-i[0])<=Math.abs(e[1]-i[1])?(d=[(o[0]+i[0])/2,(o[1]+i[1])/2],h=t.a(d),c=[(n[0]+e[0])/2,(n[1]+e[1])/2],u=t.a(c),Mf(t,e,o,d,c,r,s,h,u,p-1),Mf(t,c,d,i,n,u,h,a,l,p-1)):(d=[(e[0]+o[0])/2,(e[1]+o[1])/2],h=t.a(d),c=[(i[0]+n[0])/2,(i[1]+n[1])/2],u=t.a(c),Mf(t,e,d,c,n,r,h,u,l,p-1),Mf(t,d,o,i,c,h,s,a,u,p-1)));if(d){if(!t.l)return;t.o=!0}t.c.push({source:[r,a,l],target:[e,i,n]}),t.c.push({source:[r,s,a],target:[e,o,i]})}}function xf(t){var e=j();return t.c.forEach(function(t){t=t.source,q(e,t[0]),q(e,t[1]),q(e,t[2])}),e}function Rf(t,e,o,i,n,r){this.v=e,this.l=t.G();var s=e.G(),a=s?tt(o,s):o,s=wf(t,e,J(a),i);this.j=new Af(t,e,a,this.l,.5*s),this.c=i,this.i=o,t=xf(this.j),this.o=(this.Hb=r(t,s,n))?this.Hb.a:1,this.ee=this.g=null,n=2,r=[],this.Hb&&(n=0,r=this.Hb.f),Ku.call(this,o,i,this.o,n,r)}function If(t){nd.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state}),this.C=void 0!==t.resolutions?t.resolutions:null,this.a=null,this.fa=0}function Tf(t,e){return t.C&&(e=t.C[i(t.C,e,0)]),e}function Lf(t,e){t.Y().src=e}function Gf(t,e){ue.call(this,t),this.image=e}function Of(t){If.call(this,{attributions:t.attributions,logo:t.logo,projection:t.projection,resolutions:t.resolutions,state:t.state}),this.pa=t.canvasFunction,this.R=null,this.T=0,this.va=void 0!==t.ratio?t.ratio:1.5}function Nf(t){this.f=t.source,this.$a=pr(),this.g=xe(),this.l=[0,0],this.Sa=void 0==t.renderBuffer?100:t.renderBuffer,this.B=null,Of.call(this,{attributions:t.attributions,canvasFunction:this.tk.bind(this),logo:t.logo,projection:t.projection,ratio:t.ratio,resolutions:t.resolutions,state:this.f.getState()}),this.I=null,this.v=void 0,this.Ii(t.style),ne(this.f,"change",this.ro,this)}function kf(t,e,o,i,n){return o=i/o,vr(t.$a,n[0]/2,n[1]/2,o,-o,0,-e[0],-e[1])}function Df(t,e){Qh.call(this,t,e),this.o=this.f=this.M=null}function jf(t,e){return e=e.Y(),cs(t.c.i,e)}function Ff(t,e,o,i,n,r,s,a){e*=r,o*=r,t=t.S,cr(t),gr(t,2*i/e,2*i/o),yr(t,-s),mr(t,a[0]-n[0],a[1]-n[1]),gr(t,(a[2]-a[0])/2,(a[3]-a[1])/2),mr(t,1,1)}function Uf(t){sr.call(this,t||{})}function Bf(t){Ef.call(this,t),this.c=null===this.c?null:xe(),this.o=null,this.g=[],this.l=j(),this.va=new g(0,0,0,0),this.B=pr(),this.T=0}function Vf(t,e){return e=e.getState(),t=t.a.kd(),2==e||4==e||3==e&&!t}function Wf(){this.b="precision mediump float;varying vec2 a;uniform sampler2D e;void main(void){gl_FragColor=texture2D(e,a);}"}function zf(){this.b="varying vec2 a;attribute vec2 b;attribute vec2 c;uniform vec4 d;void main(void){gl_Position=vec4(b*d.xy+d.zw,0.,1.);a=c;}"}function qf(t,e){this.i=t.getUniformLocation(e,"e"),this.c=t.getUniformLocation(e,"d"),this.b=t.getAttribLocation(e,"b"),this.a=t.getAttribLocation(e,"c")}function Hf(t,e){Qh.call(this,t,e),this.I=$E,this.fa=tS,this.f=null,this.B=new Xr([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]),this.D=this.o=null,this.l=-1,this.R=[0,0]}function Yf(t){t=t||{};var e=mg({},t);delete e.preload,delete e.useInterimTilesOnError,sr.call(this,e),this.zi(void 0!==t.preload?t.preload:0),this.Ai(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}function Zf(t){this.c=null,Bf.call(this,t),this.I=!1,this.D=pr(),this.T="vector"==t.j?1:0}function Kf(t){t=t||{};var e=mg({},t);delete e.preload,delete e.useInterimTilesOnError,od.call(this,e),this.Bi(t.preload?t.preload:0),this.Ci(!t.useInterimTilesOnError||t.useInterimTilesOnError),y(void 0==t.renderMode||"image"==t.renderMode||"hybrid"==t.renderMode||"vector"==t.renderMode,28),this.j=t.renderMode||"hybrid"}function Xf(t,e,o,i){function n(){delete window[s],r.parentNode.removeChild(r)}var r=document.createElement("script"),s="olc_"+d(e);r.async=!0,r.src=t+(-1==t.indexOf("?")?"?":"&")+(i||"callback")+"="+s;var a=setTimeout(function(){n(),o&&o()},1e4);window[s]=function(t){clearTimeout(a),n(),e(t)},document.getElementsByTagName("head")[0].appendChild(r)}function Jf(t,e,o,i,n,r,s,a,l,p,c){if(Qu.call(this,n,0),this.D=void 0!==c&&c,this.S=s,this.u=a,this.v=null,this.c=e,this.j=i,this.o=r||n,this.a=[],this.yd=null,this.g=0,r=i.Aa(this.o),a=this.j.G(),n=this.c.G(),r=a?tt(r,a):r,Z(r))if((a=t.G())&&(n=n?tt(n,a):a),i=wf(t,o,J(r),i.Da(this.o[0])),!isFinite(i)||0>=i)this.state=4;else if(this.l=new Af(t,o,r,n,i*(void 0!==p?p:.5)),this.l.c.length)if(this.g=e.tc(i),o=xf(this.l),n&&(t.i?(o[1]=b(o[1],n[1],n[3]),o[3]=b(o[3],n[1],n[3])):o=tt(o,n)),Z(o)){for(t=Bt(e,o,this.g),e=t.ca;e<=t.$;e++)for(o=t.da;o<=t.ia;o++)(p=l(this.g,e,o,s))&&this.a.push(p);this.a.length||(this.state=4)}else this.state=4;else this.state=4;else this.state=4}function Qf(t,e){var o=/\{z\}/g,i=/\{x\}/g,n=/\{y\}/g,r=/\{-y\}/g;return function(s){if(s)return t.replace(o,s[0].toString()).replace(i,s[1].toString()).replace(n,function(){return(-s[2]-1).toString()}).replace(r,function(){var t=e.a?e.a[s[0]]:null;return y(t,55),(t.ia-t.da+1+s[2]).toString()})}}function $f(t,e){for(var o=t.length,i=Array(o),n=0;n<o;++n)i[n]=Qf(t[n],e);return ty(i)}function ty(t){return 1===t.length?t[0]:function(e,o,i){if(e)return t[C((e[1]<<e[0])+e[2],t.length)](e,o,i)}}function ey(){}function oy(t){var e=[],o=/\{([a-z])-([a-z])\}/.exec(t);if(o){var i,n=o[2].charCodeAt(0);for(i=o[1].charCodeAt(0);i<=n;++i)e.push(t.replace(o[0],String.fromCharCode(i)));return e}if(o=o=/\{(\d+)-(\d+)\}/.exec(t)){for(n=parseInt(o[2],10),i=parseInt(o[1],10);i<=n;i++)e.push(t.replace(o[0],i.toString()));return e}return e.push(t),e}function iy(t){ha.call(this),this.highWaterMark=void 0!==t?t:2048}function ny(t){return t.c>t.highWaterMark}function ry(t){nd.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,state:t.state,wrapX:t.wrapX}),this.va=void 0!==t.opaque&&t.opaque,this.$a=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.a=new iy(t.cacheSize),this.o=[0,0],this.uc=""}function sy(t,e,o,i,n){if(!(e=t.Wd(e)))return!1;for(var r,s,a=!0,l=i.ca;l<=i.$;++l)for(var p=i.da;p<=i.ia;++p)r=t.Sb(o,l,p),s=!1,e.b.hasOwnProperty(r)&&(r=e.get(r),(s=2===r.getState())&&(s=!1!==n(r))),s||(a=!1);return a}function ay(t,e){t.uc!==e&&(t.uc=e,t.s())}function ly(t,e,o){var i=void 0!==o?o:t.c;if(o=t.Ta(i),t.u&&i.c){var n=e;e=n[0],t=Vt(o,n),i=Kt(i),O(i,t)?e=n:(n=it(i),t[0]+=n*Math.ceil((i[0]-t[0])/n),e=o.bg(t,e))}if(n=e[0],i=e[1],t=e[2],o.minZoom>n||n>o.maxZoom)o=!1;else{var r=o.G();o=!(o=r?Bt(o,r,n):o.a?o.a[n]:null)||m(o,i,t)}return o?e:null}function py(t,e){ue.call(this,t),this.tile=e}function cy(t){ry.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX}),this.tileLoadFunction=t.tileLoadFunction,this.tileUrlFunction=this.Fc?this.Fc.bind(this):ey,this.urls=null,t.urls?this.eb(t.urls):t.url&&this.jb(t.url),t.tileUrlFunction&&this.cb(t.tileUrlFunction)}function uy(t){cy.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,extent:t.extent,logo:t.logo,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:fy,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=t.tileClass?t.tileClass:eh,this.g={},this.v={},this.Sa=t.reprojectionErrorThreshold,this.I=!1}function hy(t,e,o,i,n,r,s){return e=[e,o,i],n=(o=ly(t,e,r))?t.tileUrlFunction(o,n,r):void 0,n=new t.tileClass(e,void 0!==n?0:4,void 0!==n?n:"",t.crossOrigin,t.tileLoadFunction),n.key=s,ne(n,"change",t.Li,t),n}function dy(t,e,o,i,n,r){var s=t.Sb(e,o,i),a=t.uc;if(t.a.b.hasOwnProperty(s)){var l=t.a.get(s);if(l.key!=a){var p=l;if(l=hy(t,e,o,i,n,r,a),0==p.getState()?l.i=p.i:l.i=p,l.i){e=l.i,o=l;do{if(2==e.getState()){e.i=null;break}1==e.getState()?o=e:0==e.getState()?o.i=e.i:o=e,e=o.i}while(e)}t.a.replace(s,l)}}else l=hy(t,e,o,i,n,r,a),t.a.set(s,l);return l}function fy(t,e){t.Y().src=e}function yy(t){this.B=void 0!==t.hidpi&&t.hidpi,uy.call(this,{cacheSize:t.cacheSize,crossOrigin:"anonymous",opaque:!0,projection:At("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:this.B?2:1,wrapX:void 0===t.wrapX||t.wrapX}),this.R=void 0!==t.culture?t.culture:"en-us",this.C=void 0!==t.maxZoom?t.maxZoom:-1,this.f=t.key,this.l=t.imagerySet,Xf("https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.l+"?uriScheme=https&include=ImageryProviders&key="+this.f,this.pa.bind(this),void 0,"jsonp")}function gy(t){t=t||{};var e=void 0!==t.projection?t.projection:"EPSG:3857",o=void 0!==t.tileGrid?t.tileGrid:Ht({extent:Kt(e),maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});uy.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:o,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX})}function my(t){this.C=t.account,this.B=t.map||"",this.f=t.config||{},this.l={},gy.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,maxZoom:void 0!==t.maxZoom?t.maxZoom:18,minZoom:t.minZoom,projection:t.projection,state:"loading",wrapX:t.wrapX}),vy(this)}function vy(t){var e=JSON.stringify(t.f);if(t.l[e])_y(t,t.l[e]);else{var o="https://"+t.C+".cartodb.com/api/v1/map";t.B&&(o+="/named/"+t.B);var i=new XMLHttpRequest;i.addEventListener("load",t.Dl.bind(t,e)),i.addEventListener("error",t.Cl.bind(t)),i.open("POST",o),i.setRequestHeader("Content-type","application/json"),i.send(JSON.stringify(t.f))}}function _y(t,e){t.jb("https://"+e.cdn_url.https+"/"+t.C+"/api/v1/map/"+e.layergroupid+"/{z}/{x}/{y}.png")}function by(t){ad.call(this,{attributions:t.attributions,extent:t.extent,logo:t.logo,projection:t.projection,wrapX:t.wrapX}),this.resolution=void 0,this.distance=void 0!==t.distance?t.distance:20,this.features=[],this.geometryFunction=t.geometryFunction||function(t){return t=t.V(),y(t instanceof Mi,10),t},this.source=t.source,this.source.J("change",by.prototype.sa,this)}function Ey(t){if(void 0!==t.resolution){t.features.length=0;for(var e=j(),o=t.distance*t.resolution,i=t.source.Xe(),n={},r=0,s=i.length;r<s;r++){var a=i[r];d(a).toString()in n||!(a=t.geometryFunction(a))||(a=a.X(),B(a,e),T(e,o,e),a=t.source.Uf(e),a=a.filter(function(t){return!((t=d(t).toString())in n)&&(n[t]=!0)}),t.features.push(Sy(t,a)))}}}function Sy(t,e){for(var o=[0,0],i=e.length-1;0<=i;--i){var n=t.geometryFunction(e[i]);n?zo(o,n.X()):e.splice(i,1)}return Jo(o,1/e.length),t=new Ya(new Mi(o)),t.set("features",e),t}function wy(t,e){var o=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&o.push(t+"="+encodeURIComponent(e[t]))});var i=o.join("&");return t=t.replace(/[?&]$/,""),(t=-1===t.indexOf("?")?t+"?":t+"&")+i}function Py(t){t=t||{},If.call(this,{attributions:t.attributions,logo:t.logo,projection:t.projection,resolutions:t.resolutions}),this.R=void 0!==t.crossOrigin?t.crossOrigin:null,this.T=void 0===t.hidpi||t.hidpi,this.f=t.url,this.g=t.imageLoadFunction?t.imageLoadFunction:Lf,this.v=t.params||{},this.M=null,this.l=[0,0],this.I=0,this.B=void 0!==t.ratio?t.ratio:1.5}function Cy(t){If.call(this,{projection:t.projection,resolutions:t.resolutions}),this.R=void 0!==t.crossOrigin?t.crossOrigin:null,this.l=void 0!==t.displayDpi?t.displayDpi:96,this.g=t.params||{},this.I=t.url,this.f=t.imageLoadFunction?t.imageLoadFunction:Lf,this.T=void 0===t.hidpi||t.hidpi,this.pa=void 0!==t.metersPerUnit?t.metersPerUnit:1,this.v=void 0!==t.ratio?t.ratio:1,this.va=void 0!==t.useOverlay&&t.useOverlay,this.M=null,this.B=0}function Ay(t){var e=t.imageExtent,o=void 0!==t.crossOrigin?t.crossOrigin:null,i=t.imageLoadFunction?t.imageLoadFunction:Lf;If.call(this,{attributions:t.attributions,logo:t.logo,projection:At(t.projection)}),this.M=new Xu(e,void 0,1,this.j,t.url,o,i),this.f=t.imageSize?t.imageSize:null,ne(this.M,"change",this.o,this)}function My(t){t=t||{},If.call(this,{attributions:t.attributions,logo:t.logo,projection:t.projection,resolutions:t.resolutions}),this.pa=void 0!==t.crossOrigin?t.crossOrigin:null,this.g=t.url,this.v=t.imageLoadFunction?t.imageLoadFunction:Lf,this.f=t.params||{},this.l=!0,Ry(this),this.T=t.serverType,this.va=void 0===t.hidpi||t.hidpi,this.M=null,this.B=[0,0],this.R=0,this.I=void 0!==t.ratio?t.ratio:1.5}function xy(t,e,o,i,n,r){if(y(void 0!==t.g,9),r[t.l?"CRS":"SRS"]=n.mb,"STYLES"in t.f||(r.STYLES=""),1!=i)switch(t.T){case"geoserver":i=90*i+.5|0,r.FORMAT_OPTIONS="FORMAT_OPTIONS"in r?r.FORMAT_OPTIONS+";dpi:"+i:"dpi:"+i;break;case"mapserver":r.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":r.DPI=90*i;break;default:y(!1,8)}r.WIDTH=o[0],r.HEIGHT=o[1],o=n.b;var s;return s=t.l&&"ne"==o.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,r.BBOX=s.join(","),wy(t.g,r)}function Ry(t){t.l=0<=Wo(t.f.VERSION||"1.3.0")}function Iy(t){t=t||{};var e;e=void 0!==t.attributions?t.attributions:[rS],gy.call(this,{attributions:e,cacheSize:t.cacheSize,crossOrigin:void 0!==t.crossOrigin?t.crossOrigin:"anonymous",opaque:void 0===t.opaque||t.opaque,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:void 0!==t.url?t.url:"https://{a-c}.tile.openstreetmap.org/{z}/{x}/{y}.png",wrapX:t.wrapX})}function Ty(t){this.B=null,this.va=void 0!==t.operationType?t.operationType:"pixel",this.Sa=void 0!==t.threads?t.threads:1,this.g=Gy(t.sources);for(var e=0,o=this.g.length;e<o;++e)ne(this.g[e],"change",this.s,this);this.T=new Oo(function(){return 1},this.s.bind(this));for(var e=Ly(this.g),o={},i=0,n=e.length;i<n;++i)o[d(e[i].layer)]=e[i];this.f=null,this.I={animate:!1,attributions:{},coordinateToPixelTransform:pr(),extent:null,focus:null,index:0,layerStates:o,layerStatesArray:e,logos:{},pixelRatio:1,pixelToCoordinateTransform:pr(),postRenderFunctions:[],size:[0,0],skippedFeatureUids:{},tileQueue:this.T,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{}},If.call(this,{}),t.operation&&this.v(t.operation,t.lib)}function Ly(t){return t.map(function(t){return nr(t.a)})}function Gy(t){for(var e=t.length,o=Array(e),i=0;i<e;++i){var n=i,r=t[i],s=null;r instanceof ry?(r=new Yf({source:r}),s=new Bf(r)):r instanceof If&&(r=new Uf({source:r}),s=new Sf(r)),o[n]=s}return o}function Oy(t,e,o){ue.call(this,t),this.extent=e.extent,this.resolution=e.viewState.resolution/e.pixelRatio,this.data=o}function Ny(t){var e=t.layer.indexOf("-"),e=uS[-1==e?t.layer:t.layer.slice(0,e)],o=cS[t.layer];gy.call(this,{attributions:pS,cacheSize:t.cacheSize,crossOrigin:"anonymous",maxZoom:void 0!=t.maxZoom?t.maxZoom:e.maxZoom,minZoom:void 0!=t.minZoom?t.minZoom:e.minZoom,opaque:o.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,url:void 0!==t.url?t.url:"https://stamen-tiles-{a-d}.a.ssl.fastly.net/"+t.layer+"/{z}/{x}/{y}."+o.Lb,wrapX:t.wrapX})}function ky(t){t=t||{},uy.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX}),this.f=t.params||{},this.l=j(),ay(this,Dy(this))}function Dy(t){var e,o=0,i=[];for(e in t.f)i[o++]=e+"-"+t.f[e];return i.join("/")}function jy(t){ry.call(this,{opaque:!1,projection:t.projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX})}function Fy(t,e,o){Qu.call(this,t,2),this.c=e,this.Ia=o,this.a=null}function Uy(t){if(this.f=null,uy.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,projection:At("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX}),t.url)if(t.jsonp)Xf(t.url,this.og.bind(this),this.Ve.bind(this));else{var e=new XMLHttpRequest;e.addEventListener("load",this.Ao.bind(this)),e.addEventListener("error",this.zo.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.og(t.tileJSON):y(!1,51)}function By(t){if(ry.call(this,{projection:At("EPSG:3857"),state:"loading"}),this.v=void 0===t.preemptive||t.preemptive,this.l=ey,this.g=void 0,this.f=t.jsonp||!1,t.url)if(this.f)Xf(t.url,this.pg.bind(this),this.We.bind(this));else{var e=new XMLHttpRequest;e.addEventListener("load",this.Eo.bind(this)),e.addEventListener("error",this.Do.bind(this)),e.open("GET",t.url),e.send()}else t.tileJSON?this.pg(t.tileJSON):y(!1,51)}function Vy(t,e,o,i,n,r){Qu.call(this,t,e),this.o=o,this.a=i,this.v=n,this.c=this.j=this.g=null,this.l=r}function Wy(t,e,o,i,n){0==t.state&&!0===n?(re(t,"change",function(){o.call(i,this.getData(e))},t),zy(t)):!0===n?setTimeout(function(){o.call(i,this.getData(e))}.bind(t),0):o.call(i,t.getData(e))}function zy(t){if(0==t.state)if(t.state=1,t.l)Xf(t.o,t.Ji.bind(t),t.De.bind(t));else{var e=new XMLHttpRequest;e.addEventListener("load",t.Co.bind(t)),e.addEventListener("error",t.Bo.bind(t)),e.open("GET",t.o),e.send()}}function qy(t){t=t||{};var e=t.params||{};uy.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,opaque:!("TRANSPARENT"in e?e.TRANSPARENT:1),projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX}),this.C=void 0!==t.gutter?t.gutter:0,this.f=e,this.l=!0,this.B=t.serverType,this.T=void 0===t.hidpi||t.hidpi,this.R="",Yy(this),this.fa=j(),Ky(this),ay(this,Zy(this))}function Hy(t,e,o,i,n,r,s){var a=t.urls;if(a){if(s.WIDTH=o[0],s.HEIGHT=o[1],s[t.l?"CRS":"SRS"]=r.mb,"STYLES"in t.f||(s.STYLES=""),1!=n)switch(t.B){case"geoserver":o=90*n+.5|0,s.FORMAT_OPTIONS="FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+";dpi:"+o:"dpi:"+o;break;case"mapserver":s.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":s.DPI=90*n;break;default:y(!1,52)}return r=r.b,t.l&&"ne"==r.substr(0,2)&&(t=i[0],i[0]=i[1],i[1]=t,t=i[2],i[2]=i[3],i[3]=t),s.BBOX=i.join(","),wy(1==a.length?a[0]:a[C((e[1]<<e[0])+e[2],a.length)],s)}}function Yy(t){var e=0,o=[];if(t.urls){var i,n=0;for(i=t.urls.length;n<i;++n)o[e++]=t.urls[n]}t.R=o.join("#")}function Zy(t){var e,o=0,i=[];for(e in t.f)i[o++]=e+"-"+t.f[e];return i.join("/")}function Ky(t){t.l=0<=Wo(t.f.VERSION||"1.3.0")}function Xy(t,e,o,i,n,r,s,a,l,p,c,u,h,d){if(Qu.call(this,t,e),this.j=null,this.o={Nd:!1,Kg:null,mf:-1,Lg:-1},this.c=p,this.a=[],this.u=o,this.v=r,this.g=[],this.l=[],r){var f=l.Aa(r),y=l.Da(t[0]);a.Rf(f,a.tc(y),function(t){var e=tt(f,a.Aa(t));if(.5<=it(e)/y&&.5<=$(e)/y){var e=t.toString(),o=p[e];o||(o=s(t,c,u),o=p[e]=new h(t,void 0==o?4:0,void 0==o?"":o,i,n),this.l.push(ne(o,"change",d))),o.j++,this.a.push(e)}}.bind(this))}}function Jy(t,e){t.Pg(yl(e,t.o,t.$o.bind(t),t.Zo.bind(t)))}function Qy(t,e,o,i,n){Qu.call(this,t,e),this.j=0,this.o=i,this.g=null,this.c={},this.u=n,this.l=o}function $y(t){cy.call(this,{attributions:t.attributions,cacheSize:void 0!==t.cacheSize?t.cacheSize:128,extent:t.extent,logo:t.logo,opaque:!1,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:Jy,tileUrlFunction:t.tileUrlFunction,tilePixelRatio:t.tilePixelRatio,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX}),this.g=t.format?t.format:null,this.v={},this.l=void 0==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:Qy,this.f={},this.tileGrid||(this.tileGrid=this.Ta(At(t.projection||"EPSG:3857")))}function tg(t){this.o=t.matrixIds,Dt.call(this,{extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes})}function eg(t,e,o){var i=[],n=[],r=[],a=[],l=[],p=void 0!==o?o:[];o=At(t.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"));var c=o.sc(),u="ne"==o.b.substr(0,2);return t.TileMatrix.sort(function(t,e){return e.ScaleDenominator-t.ScaleDenominator}),t.TileMatrix.forEach(function(t){var e;if(e=!(0<p.length)||s(p,function(e){return t.Identifier==e.TileMatrix})){n.push(t.Identifier),e=28e-5*t.ScaleDenominator/c;var o=t.TileWidth,h=t.TileHeight;u?r.push([t.TopLeftCorner[1],t.TopLeftCorner[0]]):r.push(t.TopLeftCorner),i.push(e),a.push(o==h?o:[o,h]),l.push([t.MatrixWidth,-t.MatrixHeight])}}),new tg({extent:e,origins:r,resolutions:i,matrixIds:n,tileSizes:a,sizes:l})}function og(t){function e(t){return t="KVP"==i?wy(t,r):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase()in r?r[e.toLowerCase()]:t}),function(e){if(e){var o={TileMatrix:n.o[e[0]],TileCol:e[1],TileRow:-e[2]-1};return mg(o,s),e=t,e="KVP"==i?wy(e,o):e.replace(/\{(\w+?)\}/g,function(t,e){return o[e]})}}}this.fa=void 0!==t.version?t.version:"1.0.0",this.C=void 0!==t.format?t.format:"image/jpeg",this.f=t.dimensions?t.dimensions:{},this.B=t.layer,this.l=t.matrixSet,this.R=t.style;var o=t.urls;void 0===o&&void 0!==t.url&&(o=oy(t.url));var i=this.T=void 0!==t.requestEncoding?t.requestEncoding:"KVP",n=t.tileGrid,r={layer:this.B,style:this.R,tilematrixset:this.l};"KVP"==i&&mg(r,{Service:"WMTS",Request:"GetTile",Version:this.fa,Format:this.C});var s=this.f,a=o&&0<o.length?ty(o.map(e)):ey;uy.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:a,urls:o,wrapX:void 0!==t.wrapX&&t.wrapX}),ay(this,ig(this))}function ig(t){var e,o=0,i=[];for(e in t.f)i[o++]=e+"-"+t.f[e];return i.join("/")}function ng(t){t=t||{};var e=t.size,o=e[0],i=e[1],n=[],r=256;switch(void 0!==t.tierSizeCalculation?t.tierSizeCalculation:hS){case hS:for(;o>r||i>r;)n.push([Math.ceil(o/r),Math.ceil(i/r)]),r+=r;break;case dS:for(;o>r||i>r;)n.push([Math.ceil(o/r),Math.ceil(i/r)]),o>>=1,i>>=1;break;default:y(!1,53)}n.push([1,1]),n.reverse();for(var r=[1],s=[0],i=1,o=n.length;i<o;i++)r.push(1<<i),s.push(n[i-1][0]*n[i-1][1]+s[i-1]);r.reverse(),e=[0,-e[1],e[0],0],e=new Dt({extent:e,origin:et(e),resolutions:r}),(r=t.url)&&-1==r.indexOf("{TileGroup}")&&(r+="{TileGroup}/{z}-{x}-{y}.jpg"),r=oy(r),r=ty(r.map(function(t){return function(e){if(e){var o=e[0],i=e[1];e=-e[2]-1;var r={z:o,x:i,y:e,TileGroup:"TileGroup"+((i+e*n[o][0]+s[o])/256|0)};return t.replace(/\{(\w+?)\}/g,function(t,e){return r[e]})}}})),uy.call(this,{attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,logo:t.logo,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:rg,tileGrid:e,tileUrlFunction:r})}function rg(t,e,o,i,n){eh.call(this,t,e,o,i,n),this.a=null}function sg(t,e){this.b=e,this.a=[{x:0,y:0,width:t,height:t}],this.c={},this.i=xe(t,t),this.f=this.i.canvas}function ag(t,e,o,i){e=[e,1],0<o.width&&0<o.height&&e.push(o),0<i.width&&0<i.height&&e.push(i),t.a.splice.apply(t.a,e)}function lg(t){t=t||{},this.a=void 0!==t.initialSize?t.initialSize:256,this.i=void 0!==t.maxSize?t.maxSize:void 0!==ug?ug:2048,this.b=void 0!==t.space?t.space:1,this.f=[new sg(this.a,this.b)],this.c=this.a,this.g=[new sg(this.c,this.b)]}function pg(t,e,o,i,n,r,s){var a,l=e?t.g:t.f,p=0;for(a=l.length;p<a;++p){var c=l[p];if(c=c.add(o,i,n,r,s))return c;c||p!==a-1||(e?(c=Math.min(2*t.c,t.i),t.c=c):(c=Math.min(2*t.a,t.i),t.a=c),c=new sg(c,t.b),l.push(c),++a)}return null}var cg,ug,hg,dg={},fg=this,yg=0;u(f,Error);var gg=function(){return"cosh"in Math?Math.cosh:function(t){return((t=Math.exp(t))+1/t)/2}}(),mg="function"==typeof Object.assign?Object.assign:function(t,e){if(!t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(t),i=1,n=arguments.length;i<n;++i){var r=arguments[i];if(void 0!==r&&null!==r)for(var s in r)r.hasOwnProperty(s)&&(o[s]=r[s])}return o};ut.prototype.a=function(t){for(var e=0,o=t.length,i=t[o-1][0],n=t[o-1][1],r=0;r<o;r++)var s=t[r][0],a=t[r][1],e=e+P(s-i)*(2+Math.sin(P(n))+Math.sin(P(a))),i=s,n=a;return e*this.radius*this.radius/2},ut.prototype.b=function(t,e){var o=P(t[1]),i=P(e[1]),n=(i-o)/2;return t=P(e[0]-t[0])/2,o=Math.sin(n)*Math.sin(n)+Math.sin(t)*Math.sin(t)*Math.cos(o)*Math.cos(i),2*this.radius*Math.atan2(Math.sqrt(o),Math.sqrt(1-o))},ut.prototype.offset=function(t,e,o){var i=P(t[1]);e/=this.radius;var n=Math.asin(Math.sin(i)*Math.cos(e)+Math.cos(i)*Math.sin(e)*Math.cos(o));return[180*(P(t[0])+Math.atan2(Math.sin(o)*Math.sin(e)*Math.cos(i),Math.cos(e)-Math.sin(i)*Math.sin(n)))/Math.PI,180*n/Math.PI]};var vg=new ut(6370997),_g={};_g.degrees=2*Math.PI*vg.radius/360,_g.ft=.3048,_g.m=1,_g["us-ft"]=1200/3937;var bg=null;cg=ht.prototype,cg.Jk=function(){return this.mb},cg.G=function(){return this.f},cg.Un=function(){return this.a},cg.sc=function(){return this.l||_g[this.a]},cg.tl=function(){return this.g},cg.dm=function(){return this.c},cg.$p=function(t){this.c=t,this.i=!(!t||!this.f)},cg.Vn=function(t){this.f=t,this.i=!(!this.c||!t)},cg.kq=function(t){this.g=t},cg.Zp=function(t){this.o=t},u(dt,ht);var Eg=6378137*Math.PI,Sg=[-Eg,-Eg,Eg,Eg],wg=[-180,-85,180,85],Pg="EPSG:3857 EPSG:102100 EPSG:102113 EPSG:900913 urn:ogc:def:crs:EPSG:6.18:3:3857 urn:ogc:def:crs:EPSG::3857 http://www.opengis.net/gml/srs/epsg.xml#3857".split(" ").map(function(t){return new dt(t)}),Cg=new ut(6378137);u(gt,ht);var Ag=[-180,-90,180,90],Mg=Math.PI*Cg.radius/180,xg=[new gt("CRS:84"),new gt("EPSG:4326","neu"),new gt("urn:ogc:def:crs:EPSG::4326","neu"),new gt("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new gt("urn:ogc:def:crs:OGC:1.3:CRS84"),new gt("urn:ogc:def:crs:OGC:2:84"),new gt("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new gt("urn:x-ogc:def:crs:EPSG:4326","neu")],Rg={},Ig={};Ot();var Tg=[0,0,0];cg=Dt.prototype,cg.Rf=function(t,e,o){t=Bt(this,t,e);for(var i=t.ca,n=t.$;i<=n;++i)for(var r=t.da,s=t.ia;r<=s;++r)o([e,i,r])},cg.G=function(){return this.v},cg.Ti=function(){return this.maxZoom},cg.Ui=function(){return this.minZoom},cg.Pc=function(t){return this.i?this.i:this.c[t]},cg.Da=function(t){return this.b[t]},cg.Vi=function(){return this.b},cg.Aa=function(t,e){var o=this.Pc(t[0]),i=this.Da(t[0]),n=R(this.gb(t[0]),this.j),r=o[0]+t[1]*n[0]*i;return t=o[1]+t[2]*n[1]*i,F(r,t,r+n[0]*i,t+n[1]*i,e)},cg.Be=function(t,e,o){return Wt(this,t[0],t[1],e,!1,o)},cg.bg=function(t,e,o){return Wt(this,t[0],t[1],this.Da(e),!1,o)},cg.gb=function(t){return this.g?this.g:this.f[t]},cg.tc=function(t,e){return b(i(this.b,t,e||0),this.minZoom,this.maxZoom)},Xt.prototype.i=function(){return this.b},pe.prototype.Jb=!1,pe.prototype.ka=h,ue.prototype.preventDefault=ue.prototype.stopPropagation=function(){this.qp=!0},u(de,pe),de.prototype.addEventListener=function(t,e){var o=this.oa[t];o||(o=this.oa[t]=[]),-1===o.indexOf(e)&&o.push(e)},de.prototype.b=function(t){var e="string"==typeof t?new ue(t):t;t=e.type,e.target=this;var o=this.oa[t];if(o){t in this.ra||(this.ra[t]=0,this.Ua[t]=0),++this.ra[t];for(var i=0,n=o.length;i<n;++i)if(!1===o[i].call(this,e)||e.qp){var r=!1;break}if(!--this.ra[t]){for(e=this.Ua[t],delete this.Ua[t];e--;)this.removeEventListener(t,h);delete this.ra[t]}return r}},de.prototype.ka=function(){le(this)},de.prototype.removeEventListener=function(t,e){var o=this.oa[t];o&&(e=o.indexOf(e),t in this.Ua?(o[e]=h,++this.Ua[t]):(o.splice(e,1),o.length||delete this.oa[t]))},u(ye,de),cg=ye.prototype,cg.s=function(){++this.i,this.b("change")},cg.L=function(){return this.i},cg.J=function(t,e,o){if(Array.isArray(t)){for(var i=t.length,n=Array(i),r=0;r<i;++r)n[r]=ne(this,t[r],e,o);return n}return ne(this,t,e,o)},cg.once=function(t,e,o){if(Array.isArray(t)){for(var i=t.length,n=Array(i),r=0;r<i;++r)n[r]=re(this,t[r],e,o);return n}return re(this,t,e,o)},cg.K=function(t,e,o){if(Array.isArray(t))for(var i=0,n=t.length;i<n;++i)se(this,t[i],e,o);else se(this,t,e,o)},u(ge,ye);var Lg={};cg=ge.prototype,cg.get=function(t){var e;return this.S.hasOwnProperty(t)&&(e=this.S[t]),e},cg.O=function(){return Object.keys(this.S)},cg.N=function(){return mg({},this.S)},cg.set=function(t,e,o){o?this.S[t]=e:(o=this.S[t],this.S[t]=e,o!==e&&ve(this,t,o))},cg.H=function(t,e){for(var o in t)this.set(o,t[o],e)},cg.P=function(t,e){if(t in this.S){var o=this.S[t];delete this.S[t],e||ve(this,t,o)}},u(_e,ue),u(be,ge),cg=be.prototype,cg.clear=function(){for(;0<this.dc();)this.pop()},cg.fg=function(t){var e,o=0;for(e=t.length;o<e;++o)this.push(t[o]);return this},cg.forEach=function(t,e){this.a.forEach(t,e)},cg.tm=function(){return this.a},cg.item=function(t){return this.a[t]},cg.dc=function(){return this.get(Gg)},cg.He=function(t,e){this.c&&Se(this,e),this.a.splice(t,0,e),Ee(this),this.b(new we("add",e))},cg.pop=function(){return this.Hg(this.dc()-1)},cg.push=function(t){this.c&&Se(this,t);var e=this.dc();return this.He(e,t),this.dc()},cg.remove=function(t){var e,o=this.a,i=0;for(e=o.length;i<e;++i)if(o[i]===t)return this.Hg(i)},cg.Hg=function(t){var e=this.a[t];return this.a.splice(t,1),Ee(this),this.b(new we("remove",e)),e},cg.Wp=function(t,e){var o=this.dc();if(t<o)this.c&&Se(this,e,t),o=this.a[t],this.a[t]=e,this.b(new we("remove",o)),this.b(new we("add",e));else{for(;o<t;++o)this.He(o,void 0);this.He(t,e)}};var Gg="length";u(we,ue);var Og=/^#(?:[0-9a-f]{3}){1,2}$/i,Ng=/^([a-z]*)$/i,kg=function(){var t={},e=0;return function(o){if(t.hasOwnProperty(o))var i=t[o];else{if(1024<=e){i=0;for(var n in t)3&i++||(delete t[n],--e)}if(i=o,Ng.exec(i)&&(n=document.createElement("div"),n.style.color=i,document.body.appendChild(n),i=getComputedStyle(n).color,document.body.removeChild(n)),Og.exec(i)){var r=i.length-1;y(3==r||6==r,54);var s=3==r?1:2
;r=parseInt(i.substr(1+0*s,s),16),n=parseInt(i.substr(1+1*s,s),16),i=parseInt(i.substr(1+2*s,s),16),1==s&&(r=(r<<4)+r,n=(n<<4)+n,i=(i<<4)+i),r=[r,n,i,1]}else i.indexOf("rgba(")?i.indexOf("rgb(")?y(!1,14):(i=i.slice(4,-1).split(",").map(Number),i.push(1),r=Ae(i)):(i=i.slice(5,-1).split(",").map(Number),r=Ae(i));i=r,t[o]=i,++e}return i}}();u(Te,ge),Te.prototype.ka=function(){Ie(this.element),ge.prototype.ka.call(this)},Te.prototype.g=function(){return this.a},Te.prototype.setMap=function(t){this.a&&Ie(this.element);for(var e=0,o=this.v.length;e<o;++e)ae(this.v[e]);this.v.length=0,(this.a=t)&&((this.R?this.R:t.D).appendChild(this.element),this.render!==h&&this.v.push(ne(t,"postrender",this.render,this)),t.render())},Te.prototype.f=function(t){this.R="string"==typeof t?document.getElementById(t):t},u(Le,Te),cg=Le.prototype,cg.Vm=function(t){t.preventDefault(),Oe(this)},cg.Um=function(){return this.o},cg.Xm=function(t){this.o!==t&&(this.o=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.c&&Oe(this))},cg.Wm=function(t){this.o&&this.c!==t&&Oe(this)},cg.Tm=function(){return this.c},u(Fe,Te),Fe.prototype.D=function(t){t.preventDefault(),this.o?this.o():(t=this.a.Z())&&void 0!==t.Qa()&&(0<this.l?t.animate({rotation:0,duration:this.l,easing:ke}):t.Oe(0))},u(Be,Te),Be.prototype.j=function(t,e){if(e.preventDefault(),e=this.a.Z()){var o=e.Pa();o&&(t=e.constrainResolution(o,t),0<this.c?(e.Ic()&&e.ed(),e.animate({resolution:t,duration:this.c,easing:ke})):e.Vc(t))}},u(We,Te),We.prototype.C=function(t){t.preventDefault(),ze()&&(t=this.a)&&(qe()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():(t=this.j?"string"==typeof this.j?document.getElementById(this.j):this.j:t.jd(),this.D?t.mozRequestFullScreenWithKeys?t.mozRequestFullScreenWithKeys():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):He(t):He(t)))},We.prototype.u=function(){var t=this.element.firstElementChild,e=this.a;qe()?(t.className=this.c+"-true",Re(this.l,this.o)):(t.className=this.c+"-false",Re(this.o,this.l)),e&&e.Ad()},We.prototype.setMap=function(t){Te.prototype.setMap.call(this,t),t&&this.v.push(ne(document,Dg(),this.u,this))};var Dg=function(){var t;return function(){if(!t){var e=document.body;e.webkitRequestFullscreen?t="webkitfullscreenchange":e.mozRequestFullScreen?t="mozfullscreenchange":e.msRequestFullscreen?t="MSFullscreenChange":e.requestFullscreen&&(t="fullscreenchange")}return t}}();u(Ye,Te),cg=Ye.prototype,cg.Ym=function(){this.j=null},cg.xh=function(){return this.get(Fg)},cg.Zh=function(){return this.get(jg)},cg.Ll=function(t){this.o=this.a.xe(t),Ke(this,this.o)},cg.Ml=function(){Ke(this,null),this.o=null},cg.setMap=function(t){Te.prototype.setMap.call(this,t),t&&(t=t.a,this.v.push(ne(t,"mousemove",this.Ll,this),ne(t,"mouseout",this.Ml,this)))},cg.kj=function(t){this.set(Fg,t)},cg.$h=function(t){this.set(jg,At(t))};var jg="projection",Fg="coordinateFormat";u(Xe,ue),u(Je,Xe),Je.prototype.preventDefault=function(){Xe.prototype.preventDefault.call(this),this.originalEvent.preventDefault()},Je.prototype.stopPropagation=function(){Xe.prototype.stopPropagation.call(this),this.originalEvent.stopPropagation()};var Ug,Bg,Vg=["experimental-webgl","webgl","webkit-3d","moz-webgl"],Wg="undefined"!=typeof navigator?navigator.userAgent.toLowerCase():"",zg=-1!==Wg.indexOf("firefox"),qg=-1!==Wg.indexOf("safari")&&-1==Wg.indexOf("chrom"),Hg=-1!==Wg.indexOf("webkit")&&-1==Wg.indexOf("edge"),Yg=-1!==Wg.indexOf("macintosh"),Zg=window.devicePixelRatio||1,Kg=!1,Xg=function(){if(!("HTMLCanvasElement"in window))return!1;try{var t=document.createElement("CANVAS").getContext("2d");return!!t&&(void 0!==t.setLineDash&&(Kg=!0),!0)}catch(t){return!1}}(),Jg="DeviceOrientationEvent"in window,Qg="geolocation"in navigator,$g="ontouchstart"in window,tm="PointerEvent"in window,em=!!navigator.msPointerEnabled,om=!1,im=[];if("WebGLRenderingContext"in window)try{var nm=Qe(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});nm&&(om=!0,Bg=nm.getParameter(nm.MAX_TEXTURE_SIZE),im=nm.getSupportedExtensions())}catch(t){}Ug=om,hg=im,ug=Bg;var rm={Iq:"singleclick",xq:"click",yq:"dblclick",Bq:"pointerdrag",Eq:"pointermove",Aq:"pointerdown",Hq:"pointerup",Gq:"pointerover",Fq:"pointerout",Cq:"pointerenter",Dq:"pointerleave",zq:"pointercancel"};u($e,Je),u(eo,to),cg=eo.prototype,cg.fm=function(t){if(!oo(this,t)){1..toString()in this.a&&this.cancel(t);var e=io(t);this.a[1..toString()]=t,wo(this.b,"pointerdown",e,t)}},cg.gm=function(t){if(!oo(this,t)){var e=io(t);wo(this.b,"pointermove",e,t)}},cg.jm=function(t){if(!oo(this,t)){var e=this.a[1..toString()];e&&e.button===t.button&&(e=io(t),wo(this.b,"pointerup",e,t),delete this.a[1..toString()])}},cg.im=function(t){if(!oo(this,t)){var e=io(t);So(this.b,e,t)}},cg.hm=function(t){if(!oo(this,t)){var e=io(t);Eo(this.b,e,t)}},cg.cancel=function(t){var e=io(t);this.b.cancel(e,t),delete this.a[1..toString()]},u(no,to),cg=no.prototype,cg.om=function(t){this.a[t.pointerId.toString()]=t;var e=ro(this,t);wo(this.b,"pointerdown",e,t)},cg.pm=function(t){var e=ro(this,t);wo(this.b,"pointermove",e,t)},cg.sm=function(t){var e=ro(this,t);wo(this.b,"pointerup",e,t),delete this.a[t.pointerId.toString()]},cg.qm=function(t){var e=ro(this,t);Eo(this.b,e,t)},cg.rm=function(t){var e=ro(this,t);So(this.b,e,t)},cg.nm=function(t){var e=ro(this,t);this.b.cancel(e,t),delete this.a[t.pointerId.toString()]},cg.mm=function(t){this.b.b(new ao("lostpointercapture",t,t))},cg.lm=function(t){this.b.b(new ao("gotpointercapture",t,t))},u(so,to),cg=so.prototype,cg.ip=function(t){Po(this.b,t)},cg.jp=function(t){Po(this.b,t)},cg.mp=function(t){Po(this.b,t)},cg.kp=function(t){Po(this.b,t)},cg.lp=function(t){Po(this.b,t)},cg.hp=function(t){Po(this.b,t)},cg.em=function(t){Po(this.b,t)},cg.ul=function(t){Po(this.b,t)},u(ao,ue);var sm=!1;try{sm=1===new MouseEvent("click",{buttons:1}).buttons}catch(t){}u(co,to),cg=co.prototype,cg.ij=function(){this.g=0,this.c=void 0},cg.rq=function(t){var e=t.touches,o=Object.keys(this.a),i=o.length;if(i>=e.length){var n,r=[];for(n=0;n<i;++n){var s,a=o[n],l=this.a[a];if(!(s=1==a))t:{for(var p=e.length,c=0;c<p;c++)if(s=e[c],s.identifier===a-2){s=!0;break t}s=!1}s||r.push(l.out)}for(n=0;n<r.length;++n)this.Kf(t,r[n])}e=t.changedTouches[0],o=Object.keys(this.a).length,(!o||1===o&&1..toString()in this.a)&&(this.i=e.identifier,void 0!==this.c&&clearTimeout(this.c)),fo(this,t),this.g++,ho(this,t,this.cp)},cg.cp=function(t,e){this.a[e.pointerId]={target:e.target,out:e,Wi:e.target};var o=this.b;e.bubbles=!0,wo(o,"pointerover",e,t),o=this.b,e.bubbles=!1,wo(o,"pointerenter",e,t),wo(this.b,"pointerdown",e,t)},cg.qq=function(t){t.preventDefault(),ho(this,t,this.km)},cg.km=function(t,e){var o=this.a[e.pointerId];if(o){var i=o.out,n=o.Wi;wo(this.b,"pointermove",e,t),i&&n!==e.target&&(i.relatedTarget=e.target,e.relatedTarget=n,i.target=n,e.target?(Eo(this.b,i,t),So(this.b,e,t)):(e.target=n,e.relatedTarget=null,this.Kf(t,e))),o.out=e,o.Wi=e.target}},cg.pq=function(t){fo(this,t),ho(this,t,this.sq)},cg.sq=function(t,e){wo(this.b,"pointerup",e,t),this.b.out(e,t),bo(this.b,e,t),delete this.a[e.pointerId],e.isPrimary&&(this.i=void 0,this.c=setTimeout(this.ij.bind(this),200))},cg.oq=function(t){ho(this,t,this.Kf)},cg.Kf=function(t,e){this.b.cancel(e,t),this.b.out(e,t),bo(this.b,e,t),delete this.a[e.pointerId],e.isPrimary&&(this.i=void 0,this.c=setTimeout(this.ij.bind(this),200))},u(yo,de),yo.prototype.c=function(t){var e=this.f[t.type];e&&e(t)},yo.prototype.out=function(t,e){t.bubbles=!0,wo(this,"pointerout",t,e)},yo.prototype.cancel=function(t,e){wo(this,"pointercancel",t,e)},yo.prototype.ka=function(){for(var t,e=this.a.length,o=0;o<e;o++)t=this.a[o],vo(this,Object.keys(t.f));de.prototype.ka.call(this)};var am=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];u(Co,de),cg=Co.prototype,cg.Jh=function(t){Mo(this,t);var e=new $e("pointerup",this.i,t);this.b(e),this.o||t.button||Ao(this,this.c),this.S||(this.f.forEach(ae),this.f.length=0,this.o=!1,this.c=null,ce(this.a),this.a=null)},cg.Ol=function(t){Mo(this,t);var e=new $e("pointerdown",this.i,t);this.b(e),this.c=t,this.f.length||(this.a=new yo(document),this.f.push(ne(this.a,"pointermove",this.Hm,this),ne(this.a,"pointerup",this.Jh,this),ne(this.g,"pointercancel",this.Jh,this)))},cg.Hm=function(t){if(xo(this,t)){this.o=!0;var e=new $e("pointerdrag",this.i,t,this.o);this.b(e)}t.preventDefault()},cg.Lp=function(t){this.b(new $e(t.type,this.i,t,!(!this.c||!xo(this,t))))},cg.ka=function(){this.v&&(ae(this.v),this.v=null),this.l&&(ae(this.l),this.l=null),this.f.forEach(ae),this.f.length=0,this.a&&(ce(this.a),this.a=null),this.g&&(ce(this.g),this.g=null),de.prototype.ka.call(this)},Ro.prototype.clear=function(){this.b.length=0,this.i.length=0,lt(this.a)},Ro.prototype.f=function(t){y(!(this.c(t)in this.a),31);var e=this.l(t);return 1/0!=e&&(this.b.push(t),this.i.push(e),this.a[this.c(t)]=!0,Lo(this,0,this.b.length-1),!0)},u(Oo,Ro),Oo.prototype.f=function(t){var e=Ro.prototype.f.call(this,t);return e&&ne(t[0],"change",this.o,this),e},Oo.prototype.o=function(t){t=t.target;var e=t.getState();2!==e&&3!==e&&4!==e&&5!==e||(se(t,"change",this.o,this),t=t.bb(),t in this.g&&(delete this.g[t],--this.j),this.v())},u(ni,ge),cg=ni.prototype,cg.Ab=function(t,e){return e=e||[NaN,NaN],this.Kb(t[0],t[1],e,1/0),e},cg.sb=function(t){return this.Mc(t[0],t[1])},cg.Mc=ii,cg.G=function(t){this.v!=this.i&&(this.l=this.se(this.l),this.v=this.i);var e=this.l;return t?(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3]):t=e,t},cg.Rb=function(t){return this.Vd(t*t)},cg.tb=function(t,e){return this.Dc(xt(t,e)),this},u(ai,ni),cg=ai.prototype,cg.Mc=ii,cg.se=function(t){return V(this.A,0,this.A.length,this.a,t)},cg.ac=function(){return this.A.slice(0,this.a)},cg.ga=function(){return this.A},cg.bc=function(){return this.A.slice(this.A.length-this.a)},cg.cc=function(){return this.ja},cg.Vd=function(t){if(this.o!=this.i&&(lt(this.f),this.g=0,this.o=this.i),0>t||this.g&&t<=this.g)return this;var e=t.toString();if(this.f.hasOwnProperty(e))return this.f[e];var o=this.hd(t);return o.ga().length<this.A.length?this.f[e]=o:(this.g=t,this)},cg.hd=function(){return this},cg.qa=function(){return this.a},cg.Dc=function(t){this.A&&(t(this.A,this.A,this.a),this.s())},cg.rotate=function(t,e){var o=this.ga();if(o){var i=o.length,n=this.qa(),r=o||[],s=Math.cos(t);t=Math.sin(t);var a=e[0];e=e[1];for(var l=0,p=0;p<i;p+=n){var c=o[p]-a,u=o[p+1]-e;for(r[l++]=a+c*s-u*t,r[l++]=e+c*t+u*s,c=p+2;c<p+n;++c)r[l++]=o[c]}o&&r.length!=l&&(r.length=l),this.s()}},cg.scale=function(t,e,o){var i=e;void 0===i&&(i=t);var n=o;if(n||(n=J(this.G())),o=this.ga()){e=o.length;for(var r=this.qa(),s=o||[],a=n[0],n=n[1],l=0,p=0;p<e;p+=r){var c=o[p]-a,u=o[p+1]-n;for(s[l++]=a+t*c,s[l++]=n+i*u,c=p+2;c<p+r;++c)s[l++]=o[c]}o&&s.length!=l&&(s.length=l),this.s()}},cg.translate=function(t,e){var o=this.ga();o&&(si(o,0,o.length,this.qa(),t,e,o),this.s())},u(Ci,ai),cg=Ci.prototype,cg.clone=function(){var t=new Ci(null);return Ai(t,this.ja,this.A.slice()),t},cg.Kb=function(t,e,o,i){return i<G(this.G(),t,e)?i:(this.c!=this.i&&(this.j=Math.sqrt(fi(this.A,0,this.A.length,this.a,0)),this.c=this.i),gi(this.A,0,this.A.length,this.a,this.j,!0,t,e,o,i))},cg.qn=function(){return ui(this.A,0,this.A.length,this.a)},cg.X=function(){return Ei(this.A,0,this.A.length,this.a)},cg.hd=function(t){var e=[];return e.length=wi(this.A,0,this.A.length,this.a,t,e,0),t=new Ci(null),Ai(t,"XY",e),t},cg.U=function(){return"LinearRing"},cg.Xa=function(){},cg.ma=function(t,e){t?(ci(this,e,t,1),this.A||(this.A=[]),this.A.length=_i(this.A,0,t,this.a),this.s()):Ai(this,"XY",null)},u(Mi,ai),cg=Mi.prototype,cg.clone=function(){var t=new Mi(null);return t.ba(this.ja,this.A.slice()),t},cg.Kb=function(t,e,o,i){var n=this.A;if((t=w(t,e,n[0],n[1]))<i){for(i=this.a,e=0;e<i;++e)o[e]=n[e];return o.length=i,t}return i},cg.X=function(){return this.A?this.A.slice():[]},cg.se=function(t){return B(this.A,t)},cg.U=function(){return"Point"},cg.Xa=function(t){return k(t,this.A[0],this.A[1])},cg.ma=function(t,e){t?(ci(this,e,t,0),this.A||(this.A=[]),this.A.length=vi(this.A,t),this.s()):this.ba("XY",null)},cg.ba=function(t,e){pi(this,t,e),this.s()},u(Fi,ai),cg=Fi.prototype,cg.pk=function(t){this.A?n(this.A,t.ga()):this.A=t.ga().slice(),this.c.push(this.A.length),this.s()},cg.clone=function(){var t=new Fi(null);return t.ba(this.ja,this.A.slice(),this.c.slice()),t},cg.Kb=function(t,e,o,i){return i<G(this.G(),t,e)?i:(this.C!=this.i&&(this.B=Math.sqrt(yi(this.A,0,this.c,this.a,0)),this.C=this.i),mi(this.A,0,this.c,this.a,this.B,!0,t,e,o,i))},cg.Mc=function(t,e){return Ii(this.ec(),0,this.c,this.a,t,e)},cg.tn=function(){return hi(this.ec(),0,this.c,this.a)},cg.X=function(t){if(void 0!==t){var e=this.ec().slice();Di(e,0,this.c,this.a,t)}else e=this.A;return Si(e,0,this.c,this.a)},cg.Bb=function(){return this.c},cg.Tk=function(){return new Mi(Ui(this))},cg.Zk=function(){return this.c.length},cg.Ch=function(t){if(0>t||this.c.length<=t)return null;var e=new Ci(null);return Ai(e,this.ja,this.A.slice(t?this.c[t-1]:0,this.c[t])),e},cg.Sd=function(){var t,e=this.ja,o=this.A,i=this.c,n=[],r=0,s=0;for(t=i.length;s<t;++s){var a=i[s],l=new Ci(null);Ai(l,e,o.slice(r,a)),n.push(l),r=a}return n},cg.ec=function(){if(this.I!=this.i){var t=this.A;ki(t,this.c,this.a)?this.j=t:(this.j=t.slice(),this.j.length=Di(this.j,0,this.c,this.a)),this.I=this.i}return this.j},cg.hd=function(t){var e=[],o=[];return e.length=Pi(this.A,0,this.c,this.a,Math.sqrt(t),e,0,o),t=new Fi(null),t.ba("XY",e,o),t},cg.U=function(){return"Polygon"},cg.Xa=function(t){return Oi(this.ec(),0,this.c,this.a,t)},cg.ma=function(t,e){t?(ci(this,e,t,2),this.A||(this.A=[]),t=bi(this.A,0,t,this.a,this.c),this.A.length=t.length?t[t.length-1]:0,this.s()):this.ba("XY",null,this.c)},cg.ba=function(t,e,o){pi(this,t,e),this.c=o,this.s()},u(qi,ge),cg=qi.prototype,cg.animate=function(t){var e=Date.now(),o=this.wa().slice(),i=this.Pa(),n=this.Qa(),r=arguments.length;if(1<r&&"function"==typeof arguments[r-1]){var s=arguments[r-1];--r}for(var a=[],l=0;l<r;++l){var p=arguments[l],c={start:e,complete:!1,anchor:p.anchor,duration:void 0!==p.duration?p.duration:1e3,easing:p.easing||De};p.center&&(c.Rg=o,c.Tg=p.center,o=c.Tg),void 0!==p.zoom?(c.tf=i,c.zd=this.constrainResolution(this.a,p.zoom-this.l,0),i=c.zd):p.resolution&&(c.tf=i,c.zd=p.resolution,i=c.zd),void 0!==p.rotation&&(c.Sg=n,c.uf=p.rotation,n=c.uf),c.callback=s,e+=c.duration,a.push(c)}this.c.push(a),en(this,0,1),this.wf()},cg.Ic=function(){return 0<Ji(this)[0]},cg.Rk=function(){return 0<Ji(this)[1]},cg.ed=function(){en(this,0,-Ji(this)[0]);for(var t=0,e=this.c.length;t<e;++t){var o=this.c[t];o[0].callback&&o[0].callback(!1)}this.c.length=0},cg.wf=function(){if(void 0!==this.u&&(cancelAnimationFrame(this.u),this.u=void 0),this.Ic()){for(var t=Date.now(),e=!1,o=this.c.length-1;0<=o;--o){for(var i=this.c[o],n=!0,r=0,s=i.length;r<s;++r){var a=i[r];if(!a.complete){if(e=t-a.start,e=0<a.duration?e/a.duration:1,1<=e?(a.complete=!0,e=1):n=!1,e=a.easing(e),a.Rg){var l=a.Rg[0],p=a.Rg[1];this.set("center",[l+e*(a.Tg[0]-l),p+e*(a.Tg[1]-p)])}if(a.tf&&a.zd&&(l=1===e?a.zd:a.tf+e*(a.zd-a.tf),a.anchor&&this.set("center",Ki(this,l,a.anchor)),this.set("resolution",l)),void 0!==a.Sg&&void 0!==a.uf&&(e=1===e?a.uf:a.Sg+e*(a.uf-a.Sg),a.anchor&&this.set("center",Zi(this,e,a.anchor)),this.set("rotation",e)),e=!0,!a.complete)break}}n&&(this.c[o]=null,en(this,0,-1),(i=i[0].callback)&&i(!0))}this.c=this.c.filter(Boolean),e&&void 0===this.u&&(this.u=requestAnimationFrame(this.wf))}},cg.Ec=function(t){return this.g.center(t)},cg.constrainResolution=function(t,e,o){return this.g.resolution(t,e||0,o||0)},cg.constrainRotation=function(t,e){return this.g.rotation(t,e||0)},cg.wa=function(){return this.get("center")},cg.dd=function(t){t=t||Xi(this);var e=this.wa();y(e,1);var o=this.Pa();y(void 0!==o,2);var i=this.Qa();return y(void 0!==i,3),Q(e,o,i,t)},cg.Nm=function(){return this.a},cg.Pm=function(){return this.f},cg.Om=function(){return this.Ce(this.f)},cg.eq=function(t){Hi(this,Yi(this,{maxZoom:t}))},cg.Qm=function(){return this.Ce(this.a)},cg.fq=function(t){Hi(this,Yi(this,{minZoom:t}))},cg.Rm=function(){return this.v},cg.Pa=function(){return this.get("resolution")},cg.Sm=function(){return this.j},cg.ze=function(t,e){return e=e||Xi(this),Math.max(it(t)/e[0],$(t)/e[1])},cg.Qa=function(){return this.get("rotation")},cg.getState=function(){var t=this.wa(),e=this.v,o=this.Pa(),i=this.Qa();return{center:t.slice(),projection:void 0!==e?e:null,resolution:o,rotation:i}},cg.Hh=function(){var t,e=this.Pa();return void 0!==e&&(t=this.Ce(e)),t},cg.Ce=function(t){if(t>=this.f&&t<=this.a){var e=this.l||0;if(this.j){var o=i(this.j,t,1);if(e+=o,o==this.j.length-1)return e;var n=this.j[o];o=n/this.j[o+1]}else n=this.a,o=this.C;e+=Math.log(n/t)/Math.log(o)}return e},cg.Qf=function(t,e){e=e||{};var o=e.size;if(o||(o=Xi(this)),t instanceof ai)if("Circle"===t.U()){t=t.G();var i=Vi(t);i.rotate(this.Qa(),J(t))}else i=t;else y(Array.isArray(t),24),y(!rt(t),25),i=Vi(t);var n,r=e.padding?e.padding:[0,0,0,0],s=void 0===e.constrainResolution||e.constrainResolution,a=void 0!==e.nearest&&e.nearest;n=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.constrainResolution(this.a,e.maxZoom-this.l,0):0;var l=i.ga(),p=this.Qa();t=Math.cos(-p);var p=Math.sin(-p),c=1/0,u=1/0,d=-1/0,f=-1/0;i=i.qa();for(var g=0,m=l.length;g<m;g+=i)var v=l[g]*t-l[g+1]*p,_=l[g]*p+l[g+1]*t,c=Math.min(c,v),u=Math.min(u,_),d=Math.max(d,v),f=Math.max(f,_);o=this.ze([c,u,d,f],[o[0]-r[1]-r[3],o[1]-r[0]-r[2]]),o=isNaN(o)?n:Math.max(o,n),s&&(n=this.constrainResolution(o,0,0),!a&&n<o&&(n=this.constrainResolution(n,-1,0)),o=n),p=-p,n=(c+d)/2+(r[1]-r[3])/2*o,r=(u+f)/2+(r[0]-r[2])/2*o,t=[n*t-r*p,r*t+n*p],r=e.callback?e.callback:h,void 0!==e.duration?this.animate({resolution:o,center:t,duration:e.duration,easing:e.easing},r):(this.Vc(o),this.ob(t),setTimeout(r.bind(void 0,!0),0))},cg.uk=function(t,e,o){var i=this.Qa(),n=Math.cos(-i),i=Math.sin(-i),r=t[0]*n-t[1]*i;t=t[1]*n+t[0]*i;var s=this.Pa(),r=r+(e[0]/2-o[0])*s;t+=(o[1]-e[1]/2)*s,i=-i,this.ob([r*n-t*i,t*n+r*i])},cg.rotate=function(t,e){void 0!==e&&(e=Zi(this,t,e),this.ob(e)),this.Oe(t)},cg.ob=function(t){this.set("center",t),this.Ic()&&this.ed()},cg.Vc=function(t){this.set("resolution",t),this.Ic()&&this.ed()},cg.Oe=function(t){this.set("rotation",t),this.Ic()&&this.ed()},cg.lq=function(t){t=this.constrainResolution(this.a,t-this.l,0),this.Vc(t)},u(sn,ge),sn.prototype.c=function(){return this.get("active")},sn.prototype.f=function(){return this.v},sn.prototype.Ha=function(t){this.set("active",t)},sn.prototype.setMap=function(t){this.v=t},u(cn,sn),u(En,sn),En.prototype.Xc=function(t){return t},u(Pn,En),Pn.prototype.Xc=ii,u(xn,En),xn.prototype.Xc=ii,u(Ln,pe),Ln.prototype.ka=function(){this.setMap(null)},Ln.prototype.setMap=function(t){if(this.b){this.b.C.removeChild(this.a);var e=this.a.style;e.left=e.top=e.width=e.height="inherit"}(this.b=t)&&this.b.C.appendChild(this.a)},Ln.prototype.V=function(){return this.Gc},u(Nn,En),Nn.prototype.V=function(){return this.a.V()},Nn.prototype.j=h;var lm="boxstart",pm="boxdrag",cm="boxend";u(Un,ue),u(Bn,Nn),Bn.prototype.j=function(){var t=this.v,e=t.Z(),o=t.Ob(),i=this.V().G();if(this.I){var n,r=e.dd(o),i=[t.Ja(K(i)),t.Ja(ot(i))],t=U(void 0),s=0;for(n=i.length;s<n;++s)q(t,i[s]);i=e.ze(t,o),st(r,1/i),i=r}o=e.constrainResolution(e.ze(i,o)),r=J(i),r=e.Ec(r),e.animate({resolution:o,center:r,duration:this.B,easing:ke})},u(Vn,sn),u(zn,sn),u(Hn,sn),Hn.prototype.B=function(){this.l=void 0,en(this.v.Z(),1,-1)},Hn.prototype.I=function(t){t=t.Z(),t.Ic()&&t.ed(),ln(t,-b(this.j,-1,1),this.a,this.D),this.o=void 0,this.j=0,this.a=null,this.u=this.g=void 0},Hn.prototype.T=function(t){this.C=t,t||(this.a=null)};var um="trackpad",hm="wheel";u(Zn,En),Zn.prototype.Xc=ii,u(Qn,En),Qn.prototype.Xc=ii,u(ir,ge),cg=ir.prototype,cg.G=function(){return this.get("extent")},cg.fc=function(){return this.get("maxResolution")},cg.gc=function(){return this.get("minResolution")},cg.hc=function(){return this.get("opacity")},cg.Mb=function(){return this.get("visible")},cg.Ba=function(){return this.get("zIndex")},cg.vc=function(t){this.set("extent",t)},cg.Ac=function(t){this.set("maxResolution",t)},cg.Bc=function(t){this.set("minResolution",t)},cg.wc=function(t){this.set("opacity",t)},cg.xc=function(t){this.set("visible",t)},cg.Vb=function(t){this.set("zIndex",t)},u(rr,ir),cg=rr.prototype,cg.Fd=function(){},cg.Fe=function(){this.Mb()&&this.s()},cg.Hl=function(){this.f.forEach(ae),this.f.length=0;var t=this.qd();this.f.push(ne(t,"add",this.Gl,this),ne(t,"remove",this.Il,this));for(var e in this.c)this.c[e].forEach(ae);lt(this.c);var o,t=t.a;for(e=0,o=t.length;e<o;e++){var i=t[e];this.c[d(i).toString()]=[ne(i,"propertychange",this.Fe,this),ne(i,"change",this.Fe,this)]}this.s()},cg.Gl=function(t){t=t.element;var e=d(t).toString();this.c[e]=[ne(t,"propertychange",this.Fe,this),ne(t,"change",this.Fe,this)],this.s()},cg.Il=function(t){t=d(t.element).toString(),this.c[t].forEach(ae),delete this.c[t],this.s()},cg.qd=function(){return this.get(dm)},cg.xi=function(t){this.set(dm,t)},cg.Yf=function(t){var e=void 0!==t?t:[],o=e.length;this.qd().forEach(function(t){t.Yf(e)}),t=nr(this);var i;for(i=e.length;o<i;o++){var n=e[o];n.opacity*=t.opacity,n.visible=n.visible&&t.visible,n.maxResolution=Math.min(n.maxResolution,t.maxResolution),n.minResolution=Math.max(n.minResolution,t.minResolution),void 0!==t.extent&&(n.extent=void 0!==n.extent?tt(n.extent,t.extent):t.extent)}return e},cg.$f=function(){return"ready"};var dm="layers";u(sr,ir),cg=sr.prototype,cg.Yf=function(t){return t=t||[],t.push(nr(this)),t},cg.ha=function(){return this.get("source")||null},cg.$f=function(){var t=this.ha();return t?t.getState():"undefined"},cg.Tn=function(){this.s()},cg.Ul=function(){this.v&&(ae(this.v),this.v=null);var t=this.ha();t&&(this.v=ne(t,"change",this.Tn,this)),this.s()},cg.setMap=function(t){this.o&&(ae(this.o),this.o=null),t||this.s(),this.l&&(ae(this.l),this.l=null),t&&(this.o=ne(t,"precompose",function(t){var e=nr(this);e.Je=!1,e.zIndex=1/0,t.frameState.layerStatesArray.push(e),t.frameState.layerStates[d(this)]=e},this),this.l=ne(this,"change",t.render,t),this.s())},cg.Wc=function(t){this.set("source",t)},lr.prototype.clear=function(){this.b={},this.a=0},lr.prototype.get=function(t,e,o){return t=e+":"+t+":"+(o?Ce(o):"null"),t in this.b?this.b[t]:null},lr.prototype.set=function(t,e,o,i){this.b[e+":"+t+":"+(o?Ce(o):"null")]=i,++this.a};var fm=new lr,ym=Array(6);u(br,pe),cg=br.prototype,cg.ka=function(){for(var t in this.c)ce(this.c[t])},cg.Ea=function(t,e,o,i,n,r,s){function a(t,o){var r=d(t).toString(),s=e.layerStates[d(o)].Je;if(!(r in e.skippedFeatureUids)||s)return i.call(n,t,s?o:null)}var l,p=e.viewState,c=p.resolution,u=p.projection,p=t;if(u.i){var u=u.G(),h=it(u),f=t[0];(f<u[0]||f>u[2])&&(p=[f+h*Math.ceil((u[0]-f)/h),t[1]])}for(u=e.layerStatesArray,h=u.length-1;0<=h;--h){var y=u[h],f=y.layer;if(ar(y,c)&&r.call(s,f)&&(y=wr(this,f),f.ha()&&(l=y.Ea(f.ha().u?p:t,e,o,a,n)),l))return l}},cg.Ei=function(t,e,o,i,n){return void 0!==this.Ea(t,e,o,oi,this,i,n)},cg.Fl=function(){this.o.render()},cg.Jg=h,cg.Rp=function(t,e){for(var o in this.c)if(!(e&&o in e.layerStates)){t=o;var i=this.c[t];delete this.c[t],ae(this.v[t]),delete this.v[t],ce(i)}},u(Ar,ue);var gm=[0,0,0,1],mm=[],vm=[0,0,0,1];cg=xr.prototype,cg.zb=function(){},cg.rd=function(){},cg.Zb=function(){},cg.te=function(){},cg.ue=function(){},cg.mc=function(){},cg.nc=function(){},cg.oc=function(){},cg.pc=function(){},cg.qc=function(){},cg.rc=function(){},cg.yc=function(){},cg.Ma=function(){},cg.Ub=function(){},cg.Cb=function(){},u(Rr,xr),cg=Rr.prototype,cg.Zb=function(t){if(nt(this.c,t.G())){if(this.a||this.b){this.a&&Or(this,this.a),this.b&&Nr(this,this.b);var e=this.S,o=this.v,i=t.ga();e=i?ri(i,0,i.length,t.qa(),e,o):null,o=e[2]-e[0],i=e[3]-e[1],o=Math.sqrt(o*o+i*i),i=this.i,i.beginPath(),i.arc(e[0],e[1],o,0,2*Math.PI),this.a&&i.fill(),this.b&&i.stroke()}""!==this.Ia&&Tr(this,t.wa(),2,2)}},cg.rd=function(t){this.Ma(t.Fa(),t.Ga()),this.Ub(t.Y()),this.Cb(t.Na())},cg.zb=function(t){switch(t.U()){case"Point":this.qc(t);break;case"LineString":this.mc(t);break;case"Polygon":this.rc(t);break;case"MultiPoint":this.oc(t);break;case"MultiLineString":this.nc(t);break;case"MultiPolygon":this.pc(t);break;case"GeometryCollection":this.ue(t);break;case"Circle":this.Zb(t)}},cg.te=function(t,e){(t=(0,e.Za)(t))&&nt(this.c,t.G())&&(this.rd(e),this.zb(t))},cg.ue=function(t){t=t.a;var e,o=0;for(e=t.length;o<e;++o)this.zb(t[o])},cg.qc=function(t){var e=t.ga();t=t.qa(),this.M&&Ir(this,e,e.length),""!==this.Ia&&Tr(this,e,e.length,t)},cg.oc=function(t){var e=t.ga();t=t.qa(),this.M&&Ir(this,e,e.length),""!==this.Ia&&Tr(this,e,e.length,t)},cg.mc=function(t){if(nt(this.c,t.G())){if(this.b){Nr(this,this.b);var e=this.i,o=t.ga();e.beginPath(),Lr(this,o,0,o.length,t.qa(),!1),e.stroke()}""!==this.Ia&&(t=Ml(t),Tr(this,t,2,2))}},cg.nc=function(t){var e=t.G();if(nt(this.c,e)){if(this.b){Nr(this,this.b);var e=this.i,o=t.ga(),i=0,n=t.Bb(),r=t.qa();e.beginPath();var s,a=0;for(s=n.length;a<s;++a)i=Lr(this,o,i,n[a],r,!1);e.stroke()}""!==this.Ia&&(t=Rl(t),Tr(this,t,t.length,2))}},cg.rc=function(t){if(nt(this.c,t.G())){if(this.b||this.a){this.a&&Or(this,this.a),this.b&&Nr(this,this.b);var e=this.i;e.beginPath(),Gr(this,t.ec(),0,t.Bb(),t.qa()),this.a&&e.fill(),this.b&&e.stroke()}""!==this.Ia&&(t=Ui(t),Tr(this,t,2,2))}},cg.pc=function(t){if(nt(this.c,t.G())){if(this.b||this.a){this.a&&Or(this,this.a),this.b&&Nr(this,this.b);var e,o=this.i,i=Ol(t),n=0,r=t.c,s=t.qa();o.beginPath();var a=0;for(e=r.length;a<e;++a)n=Gr(this,i,n,r[a],s);this.a&&o.fill(),this.b&&o.stroke()}""!==this.Ia&&(t=Gl(t),Tr(this,t,t.length,2))}},cg.Ma=function(t,e){if(t?(t=t.b,this.a={fillStyle:Me(t||gm)}):this.a=null,e){t=e.a;var o=e.f,i=e.i,n=e.g,r=e.j,s=e.c;e=e.o,this.b={lineCap:void 0!==o?o:"round",lineDash:i||mm,lineDashOffset:n||0,lineJoin:void 0!==r?r:"round",lineWidth:this.u*(void 0!==s?s:1),miterLimit:void 0!==e?e:10,strokeStyle:Me(t||vm)}}else this.b=null},cg.Ub=function(t){if(t){var e=t.Hc(),o=t.Y(1),i=t.Oc(),n=t.ic();this.D=e[0],this.C=e[1],this.B=n[1],this.M=o,this.l=t.f,this.T=i[0],this.na=i[1],this.fa=t.l,this.fb=t.g,this.f=t.a,this.pa=t.v,this.oa=n[0]}else this.M=null},cg.Cb=function(t){if(t){var e=t.Fa();e?(e=e.b,this.g={fillStyle:Me(e||gm)}):this.g=null;var o=t.Ga();if(o){var e=o.a,i=o.f,n=o.i,r=o.g,s=o.j,a=o.c,o=o.o;this.o={lineCap:void 0!==i?i:"round",lineDash:n||mm,lineDashOffset:r||0,lineJoin:void 0!==s?s:"round",lineWidth:void 0!==a?a:1,miterLimit:void 0!==o?o:10,strokeStyle:Me(e||vm)}}else this.o=null;var e=t.a,i=t.i,n=t.c,r=t.o,s=t.f,a=t.b,o=t.Na(),l=t.g;t=t.j,this.ra={font:void 0!==e?e:"10px sans-serif",textAlign:void 0!==l?l:"center",textBaseline:void 0!==t?t:"middle"},this.Ia=void 0!==o?o:"",this.Jb=void 0!==i?this.u*i:0,this.va=void 0!==n?this.u*n:0,this.Sa=void 0!==r&&r,this.$a=void 0!==s?s:0,this.j=this.u*(void 0!==a?a:1)}else this.Ia=""},u(kr,br),kr.prototype.U=function(){return"canvas"},kr.prototype.Jg=function(t){if(t){var e=this.i,o=t.pixelRatio,i=Math.round(t.size[0]*o),n=Math.round(t.size[1]*o);this.b.width!=i||this.b.height!=n?(this.b.width=i,this.b.height=n):e.clearRect(0,0,i,n),o=t.viewState.rotation,Er(t),Dr(this,"precompose",t);var r=t.layerStatesArray;l(r),o&&(e.save(),Mr(e,o,i/2,n/2));var s,i=t.viewState.resolution,n=0;for(s=r.length;n<s;++n){var a=r[n],p=a.layer;p=wr(this,p),ar(a,i)&&"ready"==a.yj&&p.sd(t,a)&&p.S(t,a,e)}o&&e.restore(),Dr(this,"postcompose",t),this.a||(this.b.style.display="",this.a=!0),Pr(this,t),t.postRenderFunctions.push(Sr)}else this.a&&(this.b.style.display="none",this.a=!1)},kr.prototype.Di=function(t,e,o,i,n,r){var s=e.viewState.resolution,a=e.layerStatesArray,l=a.length;for(t=fr(e.pixelToCoordinateTransform,t.slice()),--l;0<=l;--l){var p=a[l],c=p.layer;if(ar(p,s)&&n.call(r,c)&&(p=wr(this,c).u(t,e,o,i)))return p}};var _m=["Polygon","Circle","LineString","Image","Text"];u(Ur,Fr),Ur.prototype.U=function(){return 35632},u(Br,Fr),Br.prototype.U=function(){return 35633},u(Vr,Ur);var bm=new Vr;u(Wr,Br);var Em=new Wr;u(Yr,xr),Yr.prototype.La=function(t,e,o,i,n,r,s,a,l,p,c){var u=t.b;if(this.g){var h=u.isEnabled(u.STENCIL_TEST),d=u.getParameter(u.STENCIL_FUNC),f=u.getParameter(u.STENCIL_VALUE_MASK),y=u.getParameter(u.STENCIL_REF),g=u.getParameter(u.STENCIL_WRITEMASK),m=u.getParameter(u.STENCIL_FAIL),v=u.getParameter(u.STENCIL_PASS_DEPTH_PASS),_=u.getParameter(u.STENCIL_PASS_DEPTH_FAIL);u.enable(u.STENCIL_TEST),u.clear(u.STENCIL_BUFFER_BIT),u.stencilMask(255),u.stencilFunc(u.ALWAYS,1,255),u.stencilOp(u.KEEP,u.KEEP,u.REPLACE),this.g.La(t,e,o,i,n,r,s,a,l,p,c),u.stencilMask(0),u.stencilFunc(u.NOTEQUAL,1,255)}is(t,34962,this.l),is(t,34963,this.o),r=this.rf(u,t,n,r);var b=cr(this.xb);if(gr(b,2/(o*n[0]),2/(o*n[1])),yr(b,-i),mr(b,-(e[0]-this.origin[0]),-(e[1]-this.origin[1])),e=cr(this.$a),gr(e,2/n[0],2/n[1]),n=cr(this.Sa),i&&yr(n,-i),u.uniformMatrix4fv(r.i,!1,Hr(this.Jb,b)),u.uniformMatrix4fv(r.f,!1,Hr(this.Jb,e)),u.uniformMatrix4fv(r.c,!1,Hr(this.Jb,n)),u.uniform1f(r.a,s),l){p?t=this.ve(u,t,a,l,c):(u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),this.Od(u,t,a,!0),t=(t=l(null))?t:void 0);var E=t}else this.Od(u,t,a,!1);return this.sf(u,r),this.g&&(h||u.disable(u.STENCIL_TEST),u.clear(u.STENCIL_BUFFER_BIT),u.stencilFunc(d,y,f),u.stencilMask(g),u.stencilOp(m,_,v)),E};var Sm=[0,0,0,1],wm=[],Pm=[0,0,0,1],Cm=Number.EPSILON||2.220446049250313e-16,Am=35044;u(Jr,Yr),cg=Jr.prototype,cg.Zb=function(t,e){var o=t.pd(),i=t.qa();if(o){this.i.push(this.b.length),this.f.push(e),this.c.s&&(this.u.push(this.b.length),this.c.s=!1),this.S=o,t=t.ga(),t=si(t,0,2,i,-this.origin[0],-this.origin[1]),e=this.a.length;var n,o=this.b.length,r=e/4;for(n=0;2>n;n+=i)this.a[e++]=t[n],this.a[e++]=t[n+1],this.a[e++]=0,this.a[e++]=this.S,this.a[e++]=t[n],this.a[e++]=t[n+1],this.a[e++]=1,this.a[e++]=this.S,this.a[e++]=t[n],this.a[e++]=t[n+1],this.a[e++]=2,this.a[e++]=this.S,this.a[e++]=t[n],this.a[e++]=t[n+1],this.a[e++]=3,this.a[e++]=this.S,this.b[o++]=r,this.b[o++]=r+1,this.b[o++]=r+2,this.b[o++]=r+2,this.b[o++]=r+3,this.b[o++]=r,r+=4}else this.c.s&&(this.j.pop(),this.j.length&&(i=this.j[this.j.length-1],this.c.fillColor=i[0],this.c.strokeColor=i[1],this.c.lineWidth=i[2],this.c.s=!1))},cg.Db=function(){this.l=new Xr(this.a),this.o=new Xr(this.b),this.i.push(this.b.length),!this.u.length&&0<this.j.length&&(this.j=[]),this.b=this.a=null},cg.Eb=function(t){var e=this.l,o=this.o;return function(){ns(t,e),ns(t,o)}},cg.rf=function(t,e,o,i){var n=as(e,bm,Em);if(this.v)var r=this.v;else this.v=r=new zr(t,n);return e.Qc(n),t.enableVertexAttribArray(r.b),t.vertexAttribPointer(r.b,2,5126,!1,16,0),t.enableVertexAttribArray(r.j),t.vertexAttribPointer(r.j,1,5126,!1,16,8),t.enableVertexAttribArray(r.S),t.vertexAttribPointer(r.S,1,5126,!1,16,12),t.uniform2fv(r.I,o),t.uniform1f(r.ra,i),r},cg.sf=function(t,e){t.disableVertexAttribArray(e.b),t.disableVertexAttribArray(e.j),t.disableVertexAttribArray(e.S)},cg.Od=function(t,e,o){if(ct(o)){var i=this.i[this.i.length-1];for(o=this.u.length-1;0<=o;--o){var n=this.u[o],r=this.j[o];t.uniform4fv(this.v.B,r[0]),Qr(this,t,r[1],r[2]),Zr(t,e,n,i),i=n}}else{var s=this.i.length-2;for(r=i=this.i[s+1],n=this.u.length-1;0<=n;--n){var a=this.j[n];for(t.uniform4fv(this.v.B,a[0]),Qr(this,t,a[1],a[2]),a=this.u[n];0<=s&&this.i[s]>=a;){var l=this.i[s],p=this.f[s];p=d(p).toString(),o[p]&&(i!==r&&Zr(t,e,i,r),r=l),s--,i=l}i!==r&&Zr(t,e,i,r),i=r=a}}
},cg.ve=function(t,e,o,i,n){var r,s,a=this.i.length-2,l=this.i[a+1];for(r=this.u.length-1;0<=r;--r){var p=this.j[r];for(t.uniform4fv(this.v.B,p[0]),Qr(this,t,p[1],p[2]),s=this.u[r];0<=a&&this.i[a]>=s;){p=this.i[a];var c=this.f[a];if(void 0===o[d(c).toString()]&&c.V()&&(void 0===n||nt(n,c.V().G()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),Zr(t,e,p,l),l=i(c)))return l;a--,l=p}}},cg.Ma=function(t,e){if(e){var o=e.i;this.c.lineDash=o||wm,o=e.g,this.c.lineDashOffset=o||0,o=e.a,o=o instanceof CanvasGradient||o instanceof CanvasPattern?Pm:Pe(o).map(function(t,e){return 3!=e?t/255:t})||Pm,e=e.c,e=void 0!==e?e:1}else o=[0,0,0,0],e=0;t=t?t.b:[0,0,0,0],t=t instanceof CanvasGradient||t instanceof CanvasPattern?Sm:Pe(t).map(function(t,e){return 3!=e?t/255:t})||Sm,this.c.strokeColor&&a(this.c.strokeColor,o)&&this.c.fillColor&&a(this.c.fillColor,t)&&this.c.lineWidth===e||(this.c.s=!0,this.c.fillColor=t,this.c.strokeColor=o,this.c.lineWidth=e,this.j.push([t,o,e]))},u($r,Ur);var Mm=new $r;u(ts,Br);var xm=new ts;u(os,pe),cg=os.prototype,cg.ka=function(){le(this.j);var t=this.b;if(!t.isContextLost()){for(var e in this.a)t.deleteBuffer(this.a[e].buffer);for(e in this.i)t.deleteProgram(this.i[e]);for(e in this.c)t.deleteShader(this.c[e]);t.deleteFramebuffer(this.f),t.deleteRenderbuffer(this.l),t.deleteTexture(this.v)}},cg.Wo=function(){return this.b},cg.Xo=function(){lt(this.a),lt(this.c),lt(this.i),this.l=this.v=this.f=this.o=null},cg.Yo=function(){},cg.Qc=function(t){return t!=this.o&&(this.b.useProgram(t),this.o=t,!0)},u(us,Yr),cg=us.prototype,cg.Eb=function(t){var e=this.l,o=this.o,i=this.va,n=this.u,r=t.b;return function(){if(!r.isContextLost()){var s,a=0;for(s=i.length;a<s;++a)r.deleteTexture(i[a]);for(a=0,s=n.length;a<s;++a)r.deleteTexture(n[a])}ns(t,e),ns(t,o)}},cg.oc=function(t,e){this.i.push(this.b.length),this.f.push(e),e=t.ga(),hs(this,e,e.length,t.qa())},cg.qc=function(t,e){this.i.push(this.b.length),this.f.push(e),e=t.ga(),hs(this,e,e.length,t.qa())},cg.Db=function(t){t=t.b,this.S.push(this.b.length),this.v.push(this.b.length),this.l=new Xr(this.a),this.o=new Xr(this.b);var e={};ds(this.va,this.j,e,t),ds(this.u,this.c,e,t),this.oa=this.C=this.D=void 0,this.c=this.j=null,this.I=this.ra=void 0,this.b=null,this.fb=this.fa=this.na=this.T=this.Ua=this.R=void 0,this.a=null,this.pa=void 0},cg.rf=function(t,e){var o=as(e,Mm,xm);if(this.B)var i=this.B;else this.B=i=new es(t,o);return e.Qc(o),t.enableVertexAttribArray(i.b),t.vertexAttribPointer(i.b,2,5126,!1,32,0),t.enableVertexAttribArray(i.v),t.vertexAttribPointer(i.v,2,5126,!1,32,8),t.enableVertexAttribArray(i.C),t.vertexAttribPointer(i.C,2,5126,!1,32,16),t.enableVertexAttribArray(i.u),t.vertexAttribPointer(i.u,1,5126,!1,32,24),t.enableVertexAttribArray(i.D),t.vertexAttribPointer(i.D,1,5126,!1,32,28),i},cg.sf=function(t,e){t.disableVertexAttribArray(e.b),t.disableVertexAttribArray(e.v),t.disableVertexAttribArray(e.C),t.disableVertexAttribArray(e.u),t.disableVertexAttribArray(e.D)},cg.Od=function(t,e,o,i){var n=i?this.u:this.va;if(i=i?this.v:this.S,ct(o)){var r;o=0;var s=n.length;for(r=0;o<s;++o){t.bindTexture(3553,n[o]);var a=i[o];Zr(t,e,r,a),r=a}}else for(r=s=0,a=n.length;r<a;++r){t.bindTexture(3553,n[r]);for(var l=0<r?i[r-1]:0,p=i[r],c=l;s<this.i.length&&this.i[s]<=p;){var u=d(this.f[s]).toString();void 0!==o[u]?(c!==l&&Zr(t,e,c,l),l=c=s===this.i.length-1?p:this.i[s+1]):l=s===this.i.length-1?p:this.i[s+1],s++}c!==l&&Zr(t,e,c,l)}},cg.ve=function(t,e,o,i,n){var r,s,a=this.i.length-1;for(r=this.u.length-1;0<=r;--r){t.bindTexture(3553,this.u[r]);var l=0<r?this.v[r-1]:0;for(s=this.v[r];0<=a&&this.i[a]>=l;){var p=this.i[a],c=this.f[a];if(void 0===o[d(c).toString()]&&c.V()&&(void 0===n||nt(n,c.V().G()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),Zr(t,e,p,s),s=i(c)))return s;s=p,a--}}},cg.Ub=function(t){var e=t.Hc(),o=t.Y(1),i=t.ye(),n=t.qg(1),r=t.f,s=t.Oc(),a=t.l,l=t.g,p=t.ic();if(t=t.a,this.j.length){var c=this.j[this.j.length-1];d(c)!=d(o)&&(this.S.push(this.b.length),this.j.push(o))}else this.j.push(o);this.c.length?(c=this.c[this.c.length-1],d(c)!=d(n)&&(this.v.push(this.b.length),this.c.push(n))):this.c.push(n),this.D=e[0],this.C=e[1],this.oa=p[1],this.ra=i[1],this.I=i[0],this.R=r,this.Ua=s[0],this.T=s[1],this.fa=l,this.na=a,this.fb=t,this.pa=p[0]},u(ys,Ur);var Rm=new ys;u(gs,Br);var Im=new gs;u(vs,Yr),cg=vs.prototype,cg.mc=function(t,e){var o=t.ga();t=t.qa(),Es(o,0,o.length,t)&&(o=si(o,0,o.length,t,-this.origin[0],-this.origin[1]),this.c.s&&(this.j.push(this.b.length),this.c.s=!1),this.i.push(this.b.length),this.f.push(e),_s(this,o,o.length,t))},cg.nc=function(t,e){var o=this.b.length,i=t.Bb();i.unshift(0);var n=t.ga();t=t.qa();var r;if(1<i.length){var s=1;for(r=i.length;s<r;++s)if(Es(n,i[s-1],i[s],t)){var a=si(n,i[s-1],i[s],t,-this.origin[0],-this.origin[1]);_s(this,a,a.length,t)}}this.b.length>o&&(this.i.push(o),this.f.push(e),this.c.s&&(this.j.push(o),this.c.s=!1))},cg.Db=function(){this.l=new Xr(this.a),this.o=new Xr(this.b),this.i.push(this.b.length),!this.j.length&&0<this.u.length&&(this.u=[]),this.b=this.a=null},cg.Eb=function(t){var e=this.l,o=this.o;return function(){ns(t,e),ns(t,o)}},cg.rf=function(t,e,o,i){var n=as(e,Rm,Im);if(this.v)var r=this.v;else this.v=r=new ms(t,n);return e.Qc(n),t.enableVertexAttribArray(r.o),t.vertexAttribPointer(r.o,2,5126,!1,28,0),t.enableVertexAttribArray(r.b),t.vertexAttribPointer(r.b,2,5126,!1,28,8),t.enableVertexAttribArray(r.l),t.vertexAttribPointer(r.l,2,5126,!1,28,16),t.enableVertexAttribArray(r.g),t.vertexAttribPointer(r.g,1,5126,!1,28,24),t.uniform2fv(r.I,o),t.uniform1f(r.ra,i),r},cg.sf=function(t,e){t.disableVertexAttribArray(e.o),t.disableVertexAttribArray(e.b),t.disableVertexAttribArray(e.l),t.disableVertexAttribArray(e.g)},cg.Od=function(t,e,o,i){var n=t.getParameter(t.DEPTH_FUNC),r=t.getParameter(t.DEPTH_WRITEMASK);if(i||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),ct(o)){var s=this.i[this.i.length-1];for(o=this.j.length-1;0<=o;--o){var a=this.j[o],l=this.u[o];Ps(this,t,l[0],l[1],l[2]),Zr(t,e,a,s),t.clear(t.DEPTH_BUFFER_BIT),s=a}}else{var p=this.i.length-2;for(l=s=this.i[p+1],a=this.j.length-1;0<=a;--a){var c=this.u[a];for(Ps(this,t,c[0],c[1],c[2]),c=this.j[a];0<=p&&this.i[p]>=c;){var u=this.i[p],h=this.f[p];h=d(h).toString(),o[h]&&(s!==l&&(Zr(t,e,s,l),t.clear(t.DEPTH_BUFFER_BIT)),l=u),p--,s=u}s!==l&&(Zr(t,e,s,l),t.clear(t.DEPTH_BUFFER_BIT)),s=l=c}}i||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(r),t.depthFunc(n))},cg.ve=function(t,e,o,i,n){var r,s,a=this.i.length-2,l=this.i[a+1];for(r=this.j.length-1;0<=r;--r){var p=this.u[r];for(Ps(this,t,p[0],p[1],p[2]),s=this.j[r];0<=a&&this.i[a]>=s;){p=this.i[a];var c=this.f[a];if(void 0===o[d(c).toString()]&&c.V()&&(void 0===n||nt(n,c.V().G()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),Zr(t,e,p,l),l=i(c)))return l;a--,l=p}}},cg.Ma=function(t,e){t=e.f,this.c.lineCap=void 0!==t?t:"round",t=e.i,this.c.lineDash=t||wm,t=e.g,this.c.lineDashOffset=t||0,t=e.j,this.c.lineJoin=void 0!==t?t:"round",t=e.a,t=t instanceof CanvasGradient||t instanceof CanvasPattern?Pm:Pe(t).map(function(t,e){return 3!=e?t/255:t})||Pm;var o=e.c,o=void 0!==o?o:1;e=e.o,e=void 0!==e?e:10,this.c.strokeColor&&a(this.c.strokeColor,t)&&this.c.lineWidth===o&&this.c.miterLimit===e||(this.c.s=!0,this.c.strokeColor=t,this.c.lineWidth=o,this.c.miterLimit=e,this.u.push([t,o,e]))};var Tm=3,Lm=5,Gm=7,Om=11,Nm=13,km=17,Dm=19,jm=23;u(Cs,Ur);var Fm=new Cs;u(As,Br);var Um=new As;cg=xs.prototype,cg.clone=function(){var t=this.a;return new xs({color:t&&t.slice?t.slice():t||void 0,lineCap:this.f,lineDash:this.i?this.i.slice():void 0,lineDashOffset:this.g,lineJoin:this.j,miterLimit:this.o,width:this.c})},cg.No=function(){return this.a},cg.Vk=function(){return this.f},cg.Oo=function(){return this.i},cg.Wk=function(){return this.g},cg.Xk=function(){return this.j},cg.bl=function(){return this.o},cg.Po=function(){return this.c},cg.Qo=function(t){this.a=t,this.b=void 0},cg.aq=function(t){this.f=t,this.b=void 0},cg.setLineDash=function(t){this.i=t,this.b=void 0},cg.bq=function(t){this.g=t,this.b=void 0},cg.cq=function(t){this.j=t,this.b=void 0},cg.gq=function(t){this.o=t,this.b=void 0},cg.jq=function(t){this.c=t,this.b=void 0},Rs.prototype.concat=function(t){if(t.b){if(this.b){var e=this.b.next;this.b.next=t.i,t.i.ub=this.b,e.ub=t.a,t.a.next=e,this.c+=t.c}else this.b=t.b,this.i=t.i,this.a=t.a,this.c=t.c;t.b=void 0,t.i=void 0,t.a=void 0,t.c=0}};var Bm={$d:function(){}};!function(t){function e(t,n,r,s,a){for(r=r||0,s=s||t.length-1,a=a||i;s>r;){if(600<s-r){var l=s-r+1,p=n-r+1,c=Math.log(l),u=.5*Math.exp(2*c/3),c=.5*Math.sqrt(c*u*(l-u)/l)*(0>p-l/2?-1:1);e(t,n,Math.max(r,Math.floor(n-p*u/l+c)),Math.min(s,Math.floor(n+(l-p)*u/l+c)),a)}for(l=t[n],p=r,u=s,o(t,r,n),0<a(t[s],l)&&o(t,r,s);p<u;){for(o(t,p,u),p++,u--;0>a(t[p],l);)p++;for(;0<a(t[u],l);)u--}0===a(t[r],l)?o(t,r,u):(u++,o(t,u,s)),u<=n&&(r=u+1),n<=u&&(s=u-1)}}function o(t,e,o){var i=t[e];t[e]=t[o],t[o]=i}function i(t,e){return t<e?-1:t>e?1:0}function n(t,e){if(!(this instanceof n))return new n(t,e);this.Hf=Math.max(4,t||9),this.fh=Math.max(2,Math.ceil(.4*this.Hf)),e&&this.ek(e),this.clear()}function r(t,e){s(t,0,t.children.length,e,t)}function s(t,e,o,i,n){n||(n=f(null)),n.ca=1/0,n.da=1/0,n.$=-1/0,n.ia=-1/0;for(var r;e<o;e++)r=t.children[e],a(n,t.ib?i(r):r);return n}function a(t,e){t.ca=Math.min(t.ca,e.ca),t.da=Math.min(t.da,e.da),t.$=Math.max(t.$,e.$),t.ia=Math.max(t.ia,e.ia)}function l(t,e){return t.ca-e.ca}function p(t,e){return t.da-e.da}function c(t){return(t.$-t.ca)*(t.ia-t.da)}function u(t){return t.$-t.ca+(t.ia-t.da)}function h(t,e){return t.ca<=e.ca&&t.da<=e.da&&e.$<=t.$&&e.ia<=t.ia}function d(t,e){return e.ca<=t.$&&e.da<=t.ia&&e.$>=t.ca&&e.ia>=t.da}function f(t){return{children:t,height:1,ib:!0,ca:1/0,da:1/0,$:-1/0,ia:-1/0}}function y(t,e,o,i,n){for(var r,s=[e,o];s.length;)o=s.pop(),e=s.pop(),o-e<=i||(r=e+Math.ceil((o-e)/i/2)*i,g(t,r,e,o,n),s.push(e,r,r,o))}var g=e;n.prototype={all:function(){return this.$g(this.data,[])},search:function(t){var e=this.data,o=[],i=this.wb;if(!d(t,e))return o;for(var n,r,s,a,l=[];e;){for(n=0,r=e.children.length;n<r;n++)s=e.children[n],a=e.ib?i(s):s,d(t,a)&&(e.ib?o.push(s):h(t,a)?this.$g(s,o):l.push(s));e=l.pop()}return o},load:function(t){if(!t||!t.length)return this;if(t.length<this.fh){for(var e=0,o=t.length;e<o;e++)this.Ca(t[e]);return this}return t=this.bh(t.slice(),0,t.length-1,0),this.data.children.length?this.data.height===t.height?this.hh(this.data,t):(this.data.height<t.height&&(e=this.data,this.data=t,t=e),this.eh(t,this.data.height-t.height-1,!0)):this.data=t,this},Ca:function(t){return t&&this.eh(t,this.data.height-1),this},clear:function(){return this.data=f([]),this},remove:function(t,e){if(!t)return this;for(var o,i,n,r,s=this.data,a=this.wb(t),l=[],p=[];s||l.length;){if(s||(s=l.pop(),i=l[l.length-1],o=p.pop(),r=!0),s.ib){t:{n=t;var c=s.children,u=e;if(u){for(var d=0;d<c.length;d++)if(u(n,c[d])){n=d;break t}n=-1}else n=c.indexOf(n)}if(-1!==n){s.children.splice(n,1),l.push(s),this.ck(l);break}}r||s.ib||!h(s,a)?i?(o++,s=i.children[o],r=!1):s=null:(l.push(s),p.push(o),o=0,i=s,s=s.children[0])}return this},wb:function(t){return t},Lf:l,Mf:p,toJSON:function(){return this.data},$g:function(t,e){for(var o=[];t;)t.ib?e.push.apply(e,t.children):o.push.apply(o,t.children),t=o.pop();return e},bh:function(t,e,o,i){var n=o-e+1,s=this.Hf;if(n<=s){var a=f(t.slice(e,o+1));return r(a,this.wb),a}i||(i=Math.ceil(Math.log(n)/Math.log(s)),s=Math.ceil(n/Math.pow(s,i-1))),a=f([]),a.ib=!1,a.height=i;var l,n=Math.ceil(n/s),s=n*Math.ceil(Math.sqrt(s));for(y(t,e,o,s,this.Lf);e<=o;e+=s){var p=Math.min(e+s-1,o);for(y(t,e,p,n,this.Mf),l=e;l<=p;l+=n){var c=Math.min(l+n-1,p);a.children.push(this.bh(t,l,c,i-1))}}return r(a,this.wb),a},bk:function(t,e,o,i){for(var n,r,s,a,l,p,u,h;i.push(e),!e.ib&&i.length-1!==o;){for(u=h=1/0,n=0,r=e.children.length;n<r;n++)s=e.children[n],l=c(s),p=(Math.max(s.$,t.$)-Math.min(s.ca,t.ca))*(Math.max(s.ia,t.ia)-Math.min(s.da,t.da))-l,p<h?(h=p,u=l<u?l:u,a=s):p===h&&l<u&&(u=l,a=s);e=a||e.children[0]}return e},eh:function(t,e,o){var i=this.wb;o=o?t:i(t);var i=[],n=this.bk(o,this.data,e,i);for(n.children.push(t),a(n,o);0<=e&&i[e].children.length>this.Hf;)this.jk(i,e),e--;this.Zj(o,i,e)},jk:function(t,e){var o=t[e],i=o.children.length,n=this.fh;this.$j(o,n,i),i=this.ak(o,n,i),i=f(o.children.splice(i,o.children.length-i)),i.height=o.height,i.ib=o.ib,r(o,this.wb),r(i,this.wb),e?t[e-1].children.push(i):this.hh(o,i)},hh:function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.ib=!1,r(this.data,this.wb)},ak:function(t,e,o){var i,n,r=n=1/0;for(i=e;i<=o-e;i++){var a=s(t,0,i,this.wb),l=s(t,i,o,this.wb),p=Math.max(0,Math.min(a.$,l.$)-Math.max(a.ca,l.ca))*Math.max(0,Math.min(a.ia,l.ia)-Math.max(a.da,l.da));if(a=c(a)+c(l),p<r){r=p;var u=i;n=a<n?a:n}else p===r&&a<n&&(n=a,u=i)}return u},$j:function(t,e,o){var i=t.ib?this.Lf:l,n=t.ib?this.Mf:p,r=this.ah(t,e,o,i);e=this.ah(t,e,o,n),r<e&&t.children.sort(i)},ah:function(t,e,o,i){t.children.sort(i),i=this.wb;var n,r=s(t,0,e,i),l=s(t,o-e,o,i),p=u(r)+u(l);for(n=e;n<o-e;n++){var c=t.children[n];a(r,t.ib?i(c):c),p+=u(r)}for(n=o-e-1;n>=e;n--)c=t.children[n],a(l,t.ib?i(c):c),p+=u(l);return p},Zj:function(t,e,o){for(;0<=o;o--)a(e[o],t)},ck:function(t){for(var e,o=t.length-1;0<=o;o--)0===t[o].children.length?0<o?(e=t[o-1].children,e.splice(e.indexOf(t[o]),1)):this.clear():r(t[o],this.wb)},ek:function(t){var e=["return a"," - b",";"];this.Lf=new Function("a","b",e.join(t[0])),this.Mf=new Function("a","b",e.join(t[1])),this.wb=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}},t.default=n}(Bm.$d=Bm.$d||{}),Bm.$d=Bm.$d.default,cg=Ds.prototype,cg.Ca=function(t,e){t={ca:t[0],da:t[1],$:t[2],ia:t[3],value:e},this.a.Ca(t),this.b[d(e)]=t},cg.load=function(t,e){for(var o=Array(e.length),i=0,n=e.length;i<n;i++){var r=t[i],s=e[i],r={ca:r[0],da:r[1],$:r[2],ia:r[3],value:s};o[i]=r,this.b[d(s)]=r}this.a.load(o)},cg.remove=function(t){t=d(t);var e=this.b[t];return delete this.b[t],null!==this.a.remove(e)},cg.forEach=function(t,e){return Vs(Fs(this),t,e)},cg.clear=function(){this.a.clear(),this.b={}},cg.G=function(t){var e=this.a.data;return F(e.ca,e.da,e.$,e.ia,t)},cg.concat=function(t){this.a.load(t.a.all());for(var e in t.b)this.b[0|e]=t.b[0|e]},u(Ws,Yr),cg=Ws.prototype,cg.pc=function(t,e){var o=t.c,i=t.qa(),n=this.b.length,r=this.g.b.length;t=t.ga();var s,a,l,p=a=0;for(s=o.length;p<s;++p){var c=o[p];if(0<c.length){var u=si(t,a,c[0],i,-this.origin[0],-this.origin[1]);if(u.length){var h=[];for(a=1,l=c.length;a<l;++a)if(c[a]!==c[a-1]){var d=si(t,c[a-1],c[a],i,-this.origin[0],-this.origin[1]);h.push(d)}Ss(this.g,u,h,i),zs(this,u,h,i)}}a=c[c.length-1]}this.b.length>n&&(this.i.push(n),this.f.push(e),this.j.s&&(this.c.push(n),this.j.s=!1)),this.g.b.length>r&&ws(this.g,e,r)},cg.rc=function(t,e){var o=t.Bb(),i=t.qa();if(0<o.length){t=t.ga().map(Number);var n=si(t,0,o[0],i,-this.origin[0],-this.origin[1]);if(n.length){var r,s=[],a=1;for(r=o.length;a<r;++a)if(o[a]!==o[a-1]){var l=si(t,o[a-1],o[a],i,-this.origin[0],-this.origin[1]);s.push(l)}this.i.push(this.b.length),this.f.push(e),this.j.s&&(this.c.push(this.b.length),this.j.s=!1),ws(this.g,e),Ss(this.g,n,s,i),zs(this,n,s,i)}}},cg.Db=function(t){this.l=new Xr(this.a),this.o=new Xr(this.b),this.i.push(this.b.length),this.g.Db(t),!this.c.length&&0<this.u.length&&(this.u=[]),this.b=this.a=null},cg.Eb=function(t){var e=this.l,o=this.o,i=this.g.Eb(t);return function(){ns(t,e),ns(t,o),i()}},cg.rf=function(t,e){var o=as(e,Fm,Um);if(this.v)var i=this.v;else this.v=i=new Ms(t,o);return e.Qc(o),t.enableVertexAttribArray(i.b),t.vertexAttribPointer(i.b,2,5126,!1,8,0),i},cg.sf=function(t,e){t.disableVertexAttribArray(e.b)},cg.Od=function(t,e,o,i){var n=t.getParameter(t.DEPTH_FUNC),r=t.getParameter(t.DEPTH_WRITEMASK);if(i||(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.NOTEQUAL)),ct(o)){var s=this.i[this.i.length-1];for(o=this.c.length-1;0<=o;--o){var a=this.c[o],l=this.u[o];t.uniform4fv(this.v.B,l),Zr(t,e,a,s),s=a}}else{var p=this.i.length-2;for(l=s=this.i[p+1],a=this.c.length-1;0<=a;--a){var c=this.u[a];for(t.uniform4fv(this.v.B,c),c=this.c[a];0<=p&&this.i[p]>=c;){var u=this.i[p],h=this.f[p];h=d(h).toString(),o[h]&&(s!==l&&(Zr(t,e,s,l),t.clear(t.DEPTH_BUFFER_BIT)),l=u),p--,s=u}s!==l&&(Zr(t,e,s,l),t.clear(t.DEPTH_BUFFER_BIT)),s=l=c}}i||(t.disable(t.DEPTH_TEST),t.clear(t.DEPTH_BUFFER_BIT),t.depthMask(r),t.depthFunc(n))},cg.ve=function(t,e,o,i,n){var r,s,a=this.i.length-2,l=this.i[a+1];for(r=this.c.length-1;0<=r;--r){var p=this.u[r];for(t.uniform4fv(this.v.B,p),s=this.c[r];0<=a&&this.i[a]>=s;){p=this.i[a];var c=this.f[a];if(void 0===o[d(c).toString()]&&c.V()&&(void 0===n||nt(n,c.V().G()))&&(t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),Zr(t,e,p,l),l=i(c)))return l;a--,l=p}}},cg.Ma=function(t,e){t=t?t.b:[0,0,0,0],t=t instanceof CanvasGradient||t instanceof CanvasPattern?Sm:Pe(t).map(function(t,e){return 3!=e?t/255:t})||Sm,this.j.fillColor&&a(t,this.j.fillColor)||(this.j.fillColor=t,this.j.s=!0,this.u.push(t)),e?this.g.Ma(null,e):this.g.Ma(null,new xs({color:[0,0,0,0],lineWidth:0}))},ra.prototype.La=function(){},u(sa,jr),sa.prototype.b=function(t,e){var o=void 0!==t?t.toString():"0";return t=this.a[o],void 0===t&&(t={},this.a[o]=t),o=t[e],void 0===o&&(o=new Wm[e](this.g,this.f),t[e]=o),o},sa.prototype.i=function(){return ct(this.a)},sa.prototype.La=function(t,o,i,n,r,s,a,l){var p=Object.keys(this.a).map(Number);p.sort(e);var c,u,h=0;for(c=p.length;h<c;++h){var d=this.a[p[h].toString()],f=0;for(u=_m.length;f<u;++f){var y=d[_m[f]];void 0!==y&&y.La(t,o,i,n,r,s,a,l,void 0,!1)}}},sa.prototype.Ea=function(t,e,o,i,n,r,s,a,l,p){var c=e.b;c.bindFramebuffer(c.FRAMEBUFFER,rs(e));var u;return void 0!==this.c&&(u=T(B(t),i*this.c)),pa(this,e,t,i,n,s,a,l,function(t){var e=new Uint8Array(4);if(c.readPixels(0,0,1,1,c.RGBA,c.UNSIGNED_BYTE,e),0<e[3]&&(t=p(t)))return t},!0,u)};var Vm=[1,1],Wm={Circle:Jr,Image:us,LineString:vs,Polygon:Ws,Text:ra};u(ua,xr),cg=ua.prototype,cg.rd=function(t){this.Ma(t.Fa(),t.Ga()),this.Ub(t.Y())},cg.zb=function(t){switch(t.U()){case"Point":this.qc(t,null);break;case"LineString":this.mc(t,null);break;case"Polygon":this.rc(t,null);break;case"MultiPoint":this.oc(t,null);break;case"MultiLineString":this.nc(t,null);break;case"MultiPolygon":this.pc(t,null);break;case"GeometryCollection":this.ue(t,null);break;case"Circle":this.Zb(t,null)}},cg.te=function(t,e){(t=(0,e.Za)(t))&&nt(this.a,t.G())&&(this.rd(e),this.zb(t))},cg.ue=function(t){t=t.a;var e,o=0;for(e=t.length;o<e;++o)this.zb(t[o])},cg.qc=function(t,e){var o=this.b,i=new sa(1,this.a).b(0,"Image");i.Ub(this.v),i.qc(t,e),i.Db(o),i.La(this.b,this.i,this.f,this.g,this.j,this.c,1,{},void 0,!1),i.Eb(o)()},cg.oc=function(t,e){var o=this.b,i=new sa(1,this.a).b(0,"Image");i.Ub(this.v),i.oc(t,e),i.Db(o),i.La(this.b,this.i,this.f,this.g,this.j,this.c,1,{},void 0,!1),i.Eb(o)()},cg.mc=function(t,e){var o=this.b,i=new sa(1,this.a).b(0,"LineString");i.Ma(null,this.o),i.mc(t,e),i.Db(o),i.La(this.b,this.i,this.f,this.g,this.j,this.c,1,{},void 0,!1),i.Eb(o)()},cg.nc=function(t,e){var o=this.b,i=new sa(1,this.a).b(0,"LineString");i.Ma(null,this.o),i.nc(t,e),i.Db(o),i.La(this.b,this.i,this.f,this.g,this.j,this.c,1,{},void 0,!1),i.Eb(o)()},cg.rc=function(t,e){var o=this.b,i=new sa(1,this.a).b(0,"Polygon");i.Ma(this.l,this.o),i.rc(t,e),i.Db(o),i.La(this.b,this.i,this.f,this.g,this.j,this.c,1,{},void 0,!1),i.Eb(o)()},cg.pc=function(t,e){var o=this.b,i=new sa(1,this.a).b(0,"Polygon");i.Ma(this.l,this.o),i.pc(t,e),i.Db(o),i.La(this.b,this.i,this.f,this.g,this.j,this.c,1,{},void 0,!1),i.Eb(o)()},cg.Zb=function(t,e){var o=this.b,i=new sa(1,this.a).b(0,"Circle");i.Ma(this.l,this.o),i.Zb(t,e),i.Db(o),i.La(this.b,this.i,this.f,this.g,this.j,this.c,1,{},void 0,!1),i.Eb(o)()},cg.Ub=function(t){this.v=t},cg.Ma=function(t,e){this.l=t,this.o=e},cg=ha.prototype,cg.clear=function(){this.c=0,this.b={},this.i=this.a=null},cg.forEach=function(t,e){for(var o=this.a;o;)t.call(e,o.Yc,o.uc,this),o=o.Nb},cg.get=function(t){return t=this.b[t],y(!!t,15),t===this.i?t.Yc:(t===this.a?(this.a=this.a.Nb,this.a.vd=null):(t.Nb.vd=t.vd,t.vd.Nb=t.Nb),t.Nb=null,t.vd=this.i,this.i=this.i.Nb=t,t.Yc)},cg.pop=function(){var t=this.a;return delete this.b[t.uc],t.Nb&&(t.Nb.vd=null),this.a=t.Nb,this.a||(this.i=null),--this.c,t.Yc},cg.replace=function(t,e){this.get(t),this.b[t].Yc=e},cg.set=function(t,e){y(!(t in this.b),16),e={uc:t,Nb:null,vd:this.i,Yc:e},this.i?this.i.Nb=e:this.a=e,this.i=e,this.b[t]=e,++this.c},u(da,br),cg=da.prototype,cg.ka=function(){var t=this.i;t.isContextLost()||this.a.forEach(function(e){e&&t.deleteTexture(e.Ib)}),ce(this.f),br.prototype.ka.call(this)},cg.xk=function(t,e){t=this.i;for(var o;1024<this.a.c-this.g;){if(o=this.a.a.Yc)t.deleteTexture(o.Ib);else{if(+this.a.a.uc==e.index)break;--this.g}this.a.pop()}},cg.U=function(){return"webgl"},cg.Yn=function(t){t.preventDefault(),this.a.clear(),this.g=0,t=this.c;for(var e in t)t[e].mg()},cg.Zn=function(){ga(this),this.o.render()},cg.Jg=function(t){var e=this.f,o=this.i;if(o.isContextLost())return!1;if(!t)return this.l&&(this.b.style.display="none",this.l=!1),!1;this.u=t.focus,this.a.set((-t.index).toString(),null),++this.g,ya(this,"precompose",t);var i=[],n=t.layerStatesArray;l(n);var r,s=t.viewState.resolution,a=0;for(r=n.length;a<r;++a){var p=n[a];if(ar(p,s)&&"ready"==p.yj){var c=wr(this,p.layer);c.ng(t,p,e)&&i.push(p)}}for(n=t.size[0]*t.pixelRatio,s=t.size[1]*t.pixelRatio,this.b.width==n&&this.b.height==s||(this.b.width=n,this.b.height=s),o.bindFramebuffer(36160,null),o.clearColor(0,0,0,0),o.clear(16384),o.enable(3042),o.viewport(0,0,this.b.width,this.b.height),a=0,r=i.length;a<r;++a)p=i[a],c=wr(this,p.layer),c.Gi(t,p,e);this.l||(this.b.style.display="",this.l=!0),Er(t),1024<this.a.c-this.g&&t.postRenderFunctions.push(this.xk.bind(this)),this.j.b.length&&(t.postRenderFunctions.push(this.B),t.animate=!0),ya(this,"postcompose",t),Pr(this,t),t.postRenderFunctions.push(Sr)},cg.Ea=function(t,e,o,i,n,r,s){if(this.i.isContextLost())return!1;var a,l=e.viewState,p=e.layerStatesArray;for(a=p.length-1;0<=a;--a){var c=p[a],u=c.layer;if(ar(c,l.resolution)&&r.call(s,u)&&(c=wr(this,u).Ea(t,e,o,i,n)))return c}},cg.Ei=function(t,e,o,i,n){if(o=!1,this.i.isContextLost())return!1;var r,s=e.viewState,a=e.layerStatesArray;for(r=a.length-1;0<=r;--r){var l=a[r],p=l.layer;if(ar(l,s.resolution)&&i.call(n,p)&&(o=wr(this,p).Ue(t,e)))return!0}return o},cg.Di=function(t,e,o,i,n){if(this.i.isContextLost())return!1;var r,s=e.viewState,a=e.layerStatesArray;for(r=a.length-1;0<=r;--r){var l=a[r],p=l.layer;if(ar(l,s.resolution)&&n.call(i,p)&&(l=wr(this,p).lg(t,e,o,i)))return l}};var zm=["canvas","webgl"];u(ma,ge),cg=ma.prototype,cg.kk=function(t){this.l.push(t)},cg.lk=function(t){this.o.push(t)},cg.ih=function(t){this.Kc().qd().push(t)},cg.jh=function(t){this.v.push(t)},cg.kh=function(t){var e=t.g;void 0!==e&&(this.rg[e.toString()]=t),t.setMap(this)},cg.ka=function(){ce(this.Sa),ce(this.B),se(this.a,"wheel",this.ld,this),se(this.a,"mousewheel",this.ld,this),this.f&&(window.removeEventListener("resize",this.f,!1),this.f=void 0),this.j&&(cancelAnimationFrame(this.j),this.j=void 0),this.Le(null),ge.prototype.ka.call(this)},cg.we=function(t,e,o){if(this.c)return t=this.Wa(t),o=o||{},this.B.Ea(t,this.c,void 0!==o.hitTolerance?o.hitTolerance*this.c.pixelRatio:0,e,null,o.layerFilter?o.layerFilter:oi,null)},cg.Im=function(t,e,o,i,n){if(this.c)return this.B.Di(t,this.c,e,void 0!==o?o:null,i||oi,void 0!==n?n:null)},cg.Yl=function(t,e){return!!this.c&&(t=this.Wa(t),e=e||{},this.B.Ei(t,this.c,void 0!==e.hitTolerance?e.hitTolerance*this.c.pixelRatio:0,e.layerFilter?e.layerFilter:oi,null))},cg.Tf=function(t){return this.Wa(this.xe(t))},cg.xe=function(t){var e=this.a.getBoundingClientRect();return t=t.changedTouches?t.changedTouches[0]:t,[t.clientX-e.left,t.clientY-e.top]},cg.ag=function(){return this.get("target")},cg.jd=function(){var t=this.ag();return void 0!==t?"string"==typeof t?document.getElementById(t):t:null},cg.Wa=function(t){var e=this.c;return e?fr(e.pixelToCoordinateTransform,t.slice()):null},cg.Lk=function(){return this.l},cg.fl=function(){return this.v},cg.el=function(t){return t=this.rg[t.toString()],void 0!==t?t:null},cg.Sk=function(){return this.o},cg.Kc=function(){return this.get("layergroup")},cg.Xh=function(){return this.Kc().qd()},cg.Ja=function(t){var e=this.c;return e?fr(e.coordinateToPixelTransform,t.slice(0,2)):null},cg.Ob=function(){return this.get("size")},cg.Z=function(){return this.get("view")},cg.sl=function(){return this.a},cg.ql=function(t,e,o,i){var n=this.c;return n&&e in n.wantedTiles&&n.wantedTiles[e][t.bb()]?(t=o[0]-n.focus[0],o=o[1]-n.focus[1],65536*Math.log(i)+Math.sqrt(t*t+o*o)/i):1/0},cg.ld=function(t,e){t=new Je(e||t.type,this,t),this.Ih(t)},cg.Ih=function(t){if(this.c){this.na=t.coordinate,t.frameState=this.c;var e,o=this.o.a;if(!1!==this.b(t))for(e=o.length-1;0<=e;e--){var i=o[e];if(i.c()&&!i.handleEvent(t))break}}},cg.Rl=function(){var t=this.c,e=this.$a;if(e.b.length){var o=16,i=o;if(t){var n=t.viewHints;n[0]&&(o=this.Cf?8:0,i=2),n[1]&&(o=this.Df?8:0,i=2)}e.j<o&&(Go(e),No(e,o,i))}for(e=this.xb,o=0,i=e.length;o<i;++o)e[o](this,t);e.length=0},cg.Tl=function(){this.render()},cg.Vl=function(){var t;if(this.ag()&&(t=this.jd()),this.u){for(var e=0,o=this.u.length;e<o;++e)ae(this.u[e]);this.u=null}t?(t.appendChild(this.a),t=this.va?this.va:t,this.u=[ne(t,"keydown",this.ld,this),ne(t,"keypress",this.ld,this)],this.f||(this.f=this.Ad.bind(this),window.addEventListener("resize",this.f,!1))):(Ie(this.a),this.f&&(window.removeEventListener("resize",this.f,!1),this.f=void 0)),this.Ad()},cg.Wl=function(){this.render()},cg.Lh=function(){this.render()},cg.Xl=function(){this.T&&(ae(this.T),this.T=null),this.R&&(ae(this.R),this.R=null);var t=this.Z();t&&(this.a.setAttribute("data-view",d(t)),this.T=ne(t,"propertychange",this.Lh,this),this.R=ne(t,"change",this.Lh,this)),this.render()},cg.El=function(){this.I&&(this.I.forEach(ae),this.I=null);var t=this.Kc();t&&(this.I=[ne(t,"propertychange",this.render,this),ne(t,"change",this.render,this)]),this.render()},cg.Tp=function(){this.j&&cancelAnimationFrame(this.j),this.pa()},cg.render=function(){void 0===this.j&&(this.j=requestAnimationFrame(this.pa))},cg.Mp=function(t){return this.l.remove(t)},cg.Np=function(t){return this.o.remove(t)},cg.Pp=function(t){return this.Kc().qd().remove(t)},cg.Qp=function(t){return this.v.remove(t)},cg.Sp=function(t){var e,o=this.Ob(),i=this.Z(),n=j(),r=this.c,s=null;if(void 0!==o&&0<o[0]&&0<o[1]&&i&&tn(i)){var s=Ji(i,this.c?this.c.viewHints:void 0),a=this.Kc().Yf(),l={},p=0;for(e=a.length;p<e;++p)l[d(a[p].layer)]=a[p];p=i.getState(),s={animate:!1,attributions:{},coordinateToPixelTransform:this.Yb,extent:n,focus:this.na?this.na:p.center,index:this.ad++,layerStates:l,layerStatesArray:a,logos:mg({},this.yf),pixelRatio:this.If,pixelToCoordinateTransform:this.Jf,postRenderFunctions:[],size:o,skippedFeatureUids:this.fa,tileQueue:this.$a,time:t,usedTiles:{},viewState:p,viewHints:s,wantedTiles:{}}}s&&(s.extent=Q(p.center,p.resolution,p.rotation,s.size,n)),this.c=s,this.B.Jg(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.xb,s.postRenderFunctions),!r||this.g&&(rt(this.g)||W(s.extent,this.g))||(this.b(new Xe("movestart",this,r)),this.g=U(this.g)),!this.g||s.viewHints[0]||s.viewHints[1]||W(s.extent,this.g)||(this.b(new Xe("moveend",this,s)),L(s.extent,this.g))),this.b(new Xe("postrender",this,s)),setTimeout(this.Rl.bind(this),0)},cg.qj=function(t){this.set("layergroup",t)},cg.Qg=function(t){this.set("size",t)},cg.Le=function(t){this.set("target",t)},cg.iq=function(t){this.set("view",t)},cg.xj=function(t){t=d(t).toString(),this.fa[t]=!0,this.render()},cg.Ad=function(){var t=this.jd();if(t){var e=getComputedStyle(t);this.Qg([t.offsetWidth-parseFloat(e.borderLeftWidth)-parseFloat(e.paddingLeft)-parseFloat(e.paddingRight)-parseFloat(e.borderRightWidth),t.offsetHeight-parseFloat(e.borderTopWidth)-parseFloat(e.paddingTop)-parseFloat(e.paddingBottom)-parseFloat(e.borderBottomWidth)])}else this.Qg(void 0)},cg.Cj=function(t){t=d(t).toString(),delete this.fa[t],this.render()},u(_a,ge),cg=_a.prototype,cg.Rd=function(){return this.get(qm)},cg.Jm=function(){return this.g},cg.Me=function(){return this.get(Hm)},cg.Dh=function(){return this.get(Ym)},cg.Yh=function(){return this.get(Zm)},cg.Eh=function(){return this.get(Km)},cg.zl=function(){for(var t=this.c;t.lastChild;)t.removeChild(t.lastChild);(t=this.Rd())&&this.c.appendChild(t)},cg.Jl=function(){this.f&&(Ie(this.c),ae(this.f),this.f=null);var t=this.Me();t&&(this.f=ne(t,"postrender",this.render,this),Sa(this),t=this.v?t.D:t.C,this.l?t.insertBefore(this.c,t.childNodes[0]||null):t.appendChild(this.c))},cg.render=function(){Sa(this)},cg.Nl=function(){Sa(this)},cg.Pl=function(){if(Sa(this),this.get(Zm)&&this.autoPan){var t=this.Me();if(t&&t.jd()){var e=ba(t.jd(),t.Ob()),o=this.Rd(),i=o.offsetWidth,n=getComputedStyle(o),i=i+(parseInt(n.marginLeft,10)+parseInt(n.marginRight,10)),n=o.offsetHeight,r=getComputedStyle(o),n=n+(parseInt(r.marginTop,10)+parseInt(r.marginBottom,10)),s=ba(o,[i,n]),o=this.o;N(e,s)||(i=s[0]-e[0],n=e[2]-s[2],r=s[1]-e[1],s=e[3]-s[3],e=[0,0],0>i?e[0]=i-o:0>n&&(e[0]=Math.abs(n)+o),0>r?e[1]=r-o:0>s&&(e[1]=Math.abs(s)+o),0===e[0]&&0===e[1])||(o=t.Z().wa(),o=t.Ja(o),e=[o[0]+e[0],o[1]+e[1]],t.Z().animate({center:t.Wa(e),duration:this.j.duration,easing:this.j.easing}))}}},cg.Ql=function(){Sa(this)},cg.lj=function(t){this.set(qm,t)},cg.setMap=function(t){this.set(Hm,t)},cg.rj=function(t){this.set(Ym,t)},cg.Ne=function(t){this.set(Zm,t)},cg.uj=function(t){this.set(Km,t)};var qm="element",Hm="map",Ym="offset",Zm="position",Km="positioning";u(wa,Te),cg=wa.prototype,cg.setMap=function(t){var e=this.a;t!==e&&(e&&((e=e.Z())&&se(e,me("rotation"),this.Ge,this),this.c.Le(null)),Te.prototype.setMap.call(this,t),t&&(this.c.Le(this.C),this.v.push(ne(t,"propertychange",this.Kl,this)),this.c.Xh().dc()||this.c.qj(t.Kc()),t=t.Z()))&&(ne(t,me("rotation"),this.Ge,this),tn(t)&&(this.c.Ad(),Ca(this)))},cg.Kl=function(t){"view"===t.key&&((t=t.oldValue)&&se(t,me("rotation"),this.Ge,this),t=this.a.Z(),ne(t,me("rotation"),this.Ge,this))},cg.Ge=function(){this.c.Z().Oe(this.a.Z().Qa())},cg.an=function(t){t.preventDefault(),Ma(this)},cg.$m=function(){return this.o},cg.cn=function(t){this.o!==t&&(this.o=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.j&&Ma(this))},cg.bn=function(t){this.o&&this.j!==t&&Ma(this)},cg.Zm=function(){return this.j},cg.gl=function(){return this.c},u(xa,Te);var Xm=[1,2,5];xa.prototype.C=function(){return this.get(Jm)},xa.prototype.T=function(){Ia(this)},xa.prototype.I=function(t){this.set(Jm,t)};var Jm="units";u(Ta,Te),Ta.prototype.ka=function(){ce(this.o),Te.prototype.ka.call(this)};var Qm=0;cg=Ta.prototype,cg.setMap=function(t){Te.prototype.setMap.call(this,t),t&&t.render()},cg.vl=function(t){var e=this.a.Z();t=Oa(this,b(1===this.j?(t.offsetX-this.I[0]/2)/this.D:(t.offsetY-this.I[1]/2)/this.l,0,1)),e.animate({resolution:e.constrainResolution(t),duration:this.T,easing:ke})},cg.yl=function(t){this.u||t.b.target!==this.element.firstElementChild||(en(this.a.Z(),1,1),this.C=t.clientX,this.B=t.clientY,this.u=!0)},cg.wl=function(t){if(this.u){var e=this.element.firstElementChild;this.c=Oa(this,b(1===this.j?(t.clientX-this.C+parseInt(e.style.left,10))/this.D:(t.clientY-this.B+parseInt(e.style.top,10))/this.l,0,1)),this.a.Z().Vc(this.c),Ga(this,this.c),this.C=t.clientX,this.B=t.clientY}},cg.xl=function(){if(this.u){var t=this.a.Z();en(t,1,-1),t.animate({resolution:t.constrainResolution(this.c),duration:this.T,easing:ke}),this.u=!1,this.B=this.C=void 0}},u(Na,Te),Na.prototype.j=function(t){t.preventDefault(),t=this.a.Z();var e=this.c?this.c:t.v.G();t.Qf(e)},u(ka,ge),cg=ka.prototype,cg.ka=function(){this.gg(!1),ge.prototype.ka.call(this)},cg.ap=function(t){if(null!==t.alpha){var e=P(t.alpha);this.set($m,e),
"boolean"==typeof t.absolute&&t.absolute?this.set(ov,e):"number"==typeof t.webkitCompassHeading&&-1!=t.webkitCompassAccuracy&&this.set(ov,P(t.webkitCompassHeading))}null!==t.beta&&this.set(tv,P(t.beta)),null!==t.gamma&&this.set(ev,P(t.gamma)),this.s()},cg.Fk=function(){return this.get($m)},cg.Ik=function(){return this.get(tv)},cg.Ok=function(){return this.get(ev)},cg.um=function(){return this.get(ov)},cg.Th=function(){return this.get(iv)},cg.vm=function(){if(Jg){var t=this.Th();t&&!this.a?this.a=ne(window,"deviceorientation",this.ap,this):t||null===this.a||(ae(this.a),this.a=null)}},cg.gg=function(t){this.set(iv,t)};var $m="alpha",tv="beta",ev="gamma",ov="heading",iv="tracking";cg=Da.prototype,cg.Ze=function(){return this.f},cg.$e=function(){return this.l},cg.af=function(){return this.g},cg.bf=function(){return this.a},cg.Ae=function(){return this.v},cg.td=function(t){this.f=t},cg.cf=function(t){this.g=t},cg.ud=function(t){this.a=t},u(ja,Da),cg=ja.prototype,cg.clone=function(){var t=new ja({fill:this.Fa()?this.Fa().clone():void 0,points:this.o,radius:this.b,radius2:this.i,angle:this.j,snapToPixel:this.v,stroke:this.Ga()?this.Ga().clone():void 0,rotation:this.g,rotateWithView:this.l,atlasManager:this.S});return t.td(this.f),t.ud(this.a),t},cg.Hc=function(){return this.C},cg.Pi=function(){return this.j},cg.Fa=function(){return this.Va},cg.qg=function(){return this.D},cg.Y=function(){return this.u},cg.ye=function(){return this.B},cg.Ye=function(){return 2},cg.Oc=function(){return this.oa},cg.Qi=function(){return this.o},cg.Ri=function(){return this.b},cg.Fh=function(){return this.i},cg.ic=function(){return this.ra},cg.Ga=function(){return this.Ya},cg.Nh=function(){},cg.load=function(){},cg.Bj=function(){},cg.rh=function(t,e,o,i){e.setTransform(1,0,0,1,0,0),e.translate(o,i),e.beginPath();var n=this.o;if(1/0===n)e.arc(t.size/2,t.size/2,this.b,0,2*Math.PI,!0);else{var r=void 0!==this.i?this.i:this.b;for(r!==this.b&&(n*=2),o=0;o<=n;o++){i=2*o*Math.PI/n-Math.PI/2+this.j;var s=o%2?r:this.b;e.lineTo(t.size/2+s*Math.cos(i),t.size/2+s*Math.sin(i))}}this.Va&&(o=this.Va.b,null===o&&(o=gm),e.fillStyle=Me(o),e.fill()),this.Ya&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.zj,t.lineDash&&e.setLineDash(t.lineDash),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke()),e.closePath()},cg.qh=function(t,e,o,i){if(e.setTransform(1,0,0,1,0,0),e.translate(o,i),e.beginPath(),o=this.o,1/0===o)e.arc(t.size/2,t.size/2,this.b,0,2*Math.PI,!0);else{i=void 0!==this.i?this.i:this.b,i!==this.b&&(o*=2);var n;for(n=0;n<=o;n++){var r=2*n*Math.PI/o-Math.PI/2+this.j,s=n%2?i:this.b;e.lineTo(t.size/2+s*Math.cos(r),t.size/2+s*Math.sin(r))}}e.fillStyle=gm,e.fill(),this.Ya&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.zj,t.lineDash&&e.setLineDash(t.lineDash),e.stroke()),e.closePath()},u(Ua,ja),Ua.prototype.clone=function(){var t=new Ua({fill:this.Fa()?this.Fa().clone():void 0,stroke:this.Ga()?this.Ga().clone():void 0,radius:this.b,snapToPixel:this.v,atlasManager:this.S});return t.td(this.f),t.ud(this.a),t},Ua.prototype.Uc=function(t){this.b=t,Fa(this,this.S)},Ba.prototype.clone=function(){var t=this.b;return new Ba({color:t&&t.slice?t.slice():t||void 0})},Ba.prototype.i=function(){return this.b},Ba.prototype.c=function(t){this.b=t,this.a=void 0},cg=Va.prototype,cg.clone=function(){var t=this.V();return t&&t.clone&&(t=t.clone()),new Va({geometry:t,fill:this.Fa()?this.Fa().clone():void 0,image:this.Y()?this.Y().clone():void 0,stroke:this.Ga()?this.Ga().clone():void 0,text:this.Na()?this.Na().clone():void 0,zIndex:this.Ba()})},cg.V=function(){return this.Gc},cg.Pk=function(){return this.Za},cg.Fa=function(){return this.Va},cg.pf=function(t){this.Va=t},cg.Y=function(){return this.M},cg.Og=function(t){this.M=t},cg.Ga=function(){return this.Ya},cg.qf=function(t){this.Ya=t},cg.Na=function(){return this.Ia},cg.xd=function(t){this.Ia=t},cg.Ba=function(){return this.Fj},cg.Ra=function(t){"function"==typeof t?this.Za=t:"string"==typeof t?this.Za=function(e){return e.get(t)}:t?t&&(this.Za=function(){return t}):this.Za=Ha,this.Gc=t},cg.Vb=function(t){this.Fj=t};var nv=null;u(Ya,ge),cg=Ya.prototype,cg.clone=function(){var t=new Ya(this.N());t.Tc(this.c);var e=this.V();return e&&t.Ra(e.clone()),(e=this.g)&&t.hg(e),t},cg.V=function(){return this.get(this.c)},cg.wm=function(){return this.a},cg.Qk=function(){return this.c},cg.xm=function(){return this.g},cg.Lc=function(){return this.j},cg.Al=function(){this.s()},cg.Ee=function(){this.f&&(ae(this.f),this.f=null);var t=this.V();t&&(this.f=ne(t,"change",this.Al,this)),this.s()},cg.Ra=function(t){this.set(this.c,t)},cg.hg=function(t){this.j=(this.g=t)?Za(t):void 0,this.s()},cg.jc=function(t){this.a=t,this.s()},cg.Tc=function(t){se(this,me(this.c),this.Ee,this),this.c=t,ne(this,me(this.c),this.Ee,this),this.Ee()};var rv=document.implementation.createDocument("","",null),sv=ll();u(El,ml),cg=El.prototype,cg.U=function(){return"json"},cg.Tb=function(t,e){return this.Rc(Sl(t),vl(this,t,e))},cg.Oa=function(t,e){return this.yg(Sl(t),vl(this,t,e))},cg.Sc=function(t,e){return this.Cg(Sl(t),vl(this,t,e))},cg.kb=function(t){return this.Fg(Sl(t))},cg.Bd=function(t,e){return JSON.stringify(this.Zc(t,e))},cg.Wb=function(t,e){return JSON.stringify(this.he(t,e))},cg.$c=function(t,e){return JSON.stringify(this.je(t,e))},u(Al,ai),cg=Al.prototype,cg.mk=function(t){this.A?n(this.A,t):this.A=t.slice(),this.s()},cg.clone=function(){var t=new Al(null);return t.ba(this.ja,this.A.slice()),t},cg.Kb=function(t,e,o,i){return i<G(this.G(),t,e)?i:(this.u!=this.i&&(this.D=Math.sqrt(fi(this.A,0,this.A.length,this.a,0)),this.u=this.i),gi(this.A,0,this.A.length,this.a,this.D,!1,t,e,o,i))},cg.Ck=function(t,e){return Li(this.A,0,this.A.length,this.a,t,e)},cg.nn=function(t,e){return"XYM"!=this.ja&&"XYZM"!=this.ja?null:Pl(this.A,0,this.A.length,this.a,t,void 0!==e&&e)},cg.X=function(){return Ei(this.A,0,this.A.length,this.a)},cg.wh=function(t,e){return wl(this.A,0,this.A.length,this.a,t,e)},cg.pn=function(){var t,e=this.A,o=this.a,i=e[0],n=e[1],r=0;for(t=0+o;t<this.A.length;t+=o)var s=e[t],a=e[t+1],r=r+Math.sqrt((s-i)*(s-i)+(a-n)*(a-n)),i=s,n=a;return r},cg.hd=function(t){var e=[];return e.length=wi(this.A,0,this.A.length,this.a,t,e,0),t=new Al(null),t.ba("XY",e),t},cg.U=function(){return"LineString"},cg.Xa=function(t){return Gi(this.A,0,this.A.length,this.a,t)},cg.ma=function(t,e){t?(ci(this,e,t,1),this.A||(this.A=[]),this.A.length=_i(this.A,0,t,this.a),this.s()):this.ba("XY",null)},cg.ba=function(t,e){pi(this,t,e),this.s()},u(xl,ai),cg=xl.prototype,cg.nk=function(t){this.A?n(this.A,t.ga().slice()):this.A=t.ga().slice(),this.c.push(this.A.length),this.s()},cg.clone=function(){var t=new xl(null);return t.ba(this.ja,this.A.slice(),this.c.slice()),t},cg.Kb=function(t,e,o,i){return i<G(this.G(),t,e)?i:(this.j!=this.i&&(this.u=Math.sqrt(yi(this.A,0,this.c,this.a,0)),this.j=this.i),mi(this.A,0,this.c,this.a,this.u,!1,t,e,o,i))},cg.rn=function(t,e,o){return"XYM"!=this.ja&&"XYZM"!=this.ja||!this.A.length?null:Cl(this.A,this.c,this.a,t,void 0!==e&&e,void 0!==o&&o)},cg.X=function(){return Si(this.A,0,this.c,this.a)},cg.Bb=function(){return this.c},cg.Yk=function(t){if(0>t||this.c.length<=t)return null;var e=new Al(null);return e.ba(this.ja,this.A.slice(t?this.c[t-1]:0,this.c[t])),e},cg.gd=function(){var t,e=this.A,o=this.c,i=this.ja,n=[],r=0,s=0;for(t=o.length;s<t;++s){var a=o[s],l=new Al(null);l.ba(i,e.slice(r,a)),n.push(l),r=a}return n},cg.hd=function(t){var e,o=[],i=[],n=this.A,r=this.c,s=this.a,a=0,l=0,p=0;for(e=r.length;p<e;++p){var c=r[p],l=wi(n,a,c,s,t,o,l);i.push(l),a=c}return o.length=l,t=new xl(null),t.ba("XY",o,i),t},cg.U=function(){return"MultiLineString"},cg.Xa=function(t){t:{var e,o=this.A,i=this.c,n=this.a,r=0,s=0;for(e=i.length;s<e;++s){if(Gi(o,r,i[s],n,t)){t=!0;break t}r=i[s]}t=!1}return t},cg.ma=function(t,e){t?(ci(this,e,t,2),this.A||(this.A=[]),t=bi(this.A,0,t,this.a,this.c),this.A.length=t.length?t[t.length-1]:0,this.s()):this.ba("XY",null,this.c)},cg.ba=function(t,e,o){pi(this,t,e),this.c=o,this.s()},u(Tl,ai),cg=Tl.prototype,cg.qk=function(t){this.A?n(this.A,t.ga()):this.A=t.ga().slice(),this.s()},cg.clone=function(){var t=new Tl(null);return t.ba(this.ja,this.A.slice()),t},cg.Kb=function(t,e,o,i){if(i<G(this.G(),t,e))return i;var n,r=this.A,s=this.a,a=0;for(n=r.length;a<n;a+=s){var l=w(t,e,r[a],r[a+1]);if(l<i){for(i=l,l=0;l<s;++l)o[l]=r[a+l];o.length=s}}return i},cg.X=function(){return Ei(this.A,0,this.A.length,this.a)},cg.il=function(t){var e=this.A?this.A.length/this.a:0;return 0>t||e<=t?null:(e=new Mi(null),e.ba(this.ja,this.A.slice(t*this.a,(t+1)*this.a)),e)},cg.Zd=function(){var t,e=this.A,o=this.ja,i=this.a,n=[],r=0;for(t=e.length;r<t;r+=i){var s=new Mi(null);s.ba(o,e.slice(r,r+i)),n.push(s)}return n},cg.U=function(){return"MultiPoint"},cg.Xa=function(t){var e,o=this.A,i=this.a,n=0;for(e=o.length;n<e;n+=i){if(k(t,o[n],o[n+1]))return!0}return!1},cg.ma=function(t,e){t?(ci(this,e,t,1),this.A||(this.A=[]),this.A.length=_i(this.A,0,t,this.a),this.s()):this.ba("XY",null)},cg.ba=function(t,e){pi(this,t,e),this.s()},u(Ll,ai),cg=Ll.prototype,cg.rk=function(t){if(this.A){var e=this.A.length;n(this.A,t.ga()),t=t.Bb().slice();var o,i=0;for(o=t.length;i<o;++i)t[i]+=e}else this.A=t.ga().slice(),t=t.Bb().slice(),this.c.push();this.c.push(t),this.s()},cg.clone=function(){for(var t=new Ll(null),e=this.c.length,o=Array(e),i=0;i<e;++i)o[i]=this.c[i].slice();return Nl(t,this.ja,this.A.slice(),o),t},cg.Kb=function(t,e,o,i){if(i<G(this.G(),t,e))return i;if(this.C!=this.i){var n,r=this.c,s=0,a=0,l=0;for(n=r.length;l<n;++l)var p=r[l],a=yi(this.A,s,p,this.a,a),s=p[p.length-1];this.B=Math.sqrt(a),this.C=this.i}r=Ol(this),s=this.c,a=this.a,l=this.B,n=0;var c,p=[NaN,NaN],u=0;for(c=s.length;u<c;++u){var h=s[u];i=mi(r,n,h,a,l,!0,t,e,o,i,p),n=h[h.length-1]}return i},cg.Mc=function(t,e){t:{var o=Ol(this),i=this.c,n=0;if(i.length){var r,s=0;for(r=i.length;s<r;++s){var a=i[s];if(Ii(o,n,a,this.a,t,e)){t=!0;break t}n=a[a.length-1]}}t=!1}return t},cg.sn=function(){var t,e=Ol(this),o=this.c,i=0,n=0,r=0;for(t=o.length;r<t;++r)var s=o[r],n=n+hi(e,i,s,this.a),i=s[s.length-1];return n},cg.X=function(t){if(void 0!==t){var e=Ol(this).slice();ji(e,this.c,this.a,t)}else e=this.A;t=e,e=this.c;var o,i=this.a,n=0,r=[],s=0,a=0;for(o=e.length;a<o;++a){var l=e[a];r[s++]=Si(t,n,l,i,r[s]),n=l[l.length-1]}return r.length=s,r},cg.Uk=function(){var t=new Tl(null);return t.ba("XY",Gl(this).slice()),t},cg.hd=function(t){var e=[],o=[],i=this.A,n=this.c,r=this.a;t=Math.sqrt(t);var s,a=0,l=0,p=0;for(s=n.length;p<s;++p){var c=n[p],u=[],l=Pi(i,a,c,r,t,e,l,u);o.push(u),a=c[c.length-1]}return e.length=l,i=new Ll(null),Nl(i,"XY",e,o),i},cg.jl=function(t){if(0>t||this.c.length<=t)return null;if(t){var e=this.c[t-1];e=e[e.length-1]}else e=0;t=this.c[t].slice();var o=t[t.length-1];if(e){var i,n=0;for(i=t.length;n<i;++n)t[n]-=e}return n=new Fi(null),n.ba(this.ja,this.A.slice(e,o),t),n},cg.Td=function(){var t,e,o=this.ja,i=this.A,n=this.c,r=[],s=0,a=0;for(t=n.length;a<t;++a){var l=n[a].slice(),p=l[l.length-1];if(s){var c=0;for(e=l.length;c<e;++c)l[c]-=s}c=new Fi(null),c.ba(o,i.slice(s,p),l),r.push(c),s=p}return r},cg.U=function(){return"MultiPolygon"},cg.Xa=function(t){t:{var e,o=Ol(this),i=this.c,n=this.a,r=0,s=0;for(e=i.length;s<e;++s){var a=i[s];if(Oi(o,r,a,n,t)){t=!0;break t}r=a[a.length-1]}t=!1}return t},cg.ma=function(t,e){if(t){ci(this,e,t,3),this.A||(this.A=[]),e=this.A;var o,i=this.a,n=this.c,r=0,n=n||[],s=0,a=0;for(o=t.length;a<o;++a)r=bi(e,r,t[a],i,n[s]),n[s++]=r,r=r[r.length-1];n.length=s,n.length?(t=n[n.length-1],this.A.length=t.length?t[t.length-1]:0):this.A.length=0,this.s()}else Nl(this,"XY",null,this.c)},u(Dl,El);var av={Point:function(t){return void 0!==t.m&&void 0!==t.z?new Mi([t.x,t.y,t.z,t.m],"XYZM"):void 0!==t.z?new Mi([t.x,t.y,t.z],"XYZ"):void 0!==t.m?new Mi([t.x,t.y,t.m],"XYM"):new Mi([t.x,t.y])},LineString:function(t){return new Al(t.paths[0],Fl(t))},Polygon:function(t){return new Fi(t.rings,Fl(t))},MultiPoint:function(t){return new Tl(t.points,Fl(t))},MultiLineString:function(t){return new xl(t.paths,Fl(t))},MultiPolygon:function(t){return new Ll(t.rings,Fl(t))}},lv={Point:function(t){var e,o=t.X();return t=t.ja,"XYZ"===t?e={x:o[0],y:o[1],z:o[2]}:"XYM"===t?e={x:o[0],y:o[1],m:o[2]}:"XYZM"===t?e={x:o[0],y:o[1],z:o[2],m:o[3]}:"XY"===t?e={x:o[0],y:o[1]}:y(!1,34),e},LineString:function(t){var e=Ul(t);return{hasZ:e.hasZ,hasM:e.hasM,paths:[t.X()]}},Polygon:function(t){var e=Ul(t);return{hasZ:e.hasZ,hasM:e.hasM,rings:t.X(!1)}},MultiPoint:function(t){var e=Ul(t);return{hasZ:e.hasZ,hasM:e.hasM,points:t.X()}},MultiLineString:function(t){var e=Ul(t);return{hasZ:e.hasZ,hasM:e.hasM,paths:t.X()}},MultiPolygon:function(t){var e=Ul(t);t=t.X(!1);for(var o=[],i=0;i<t.length;i++)for(var n=t[i].length-1;0<=n;n--)o.push(t[i][n]);return{hasZ:e.hasZ,hasM:e.hasM,rings:o}}};cg=Dl.prototype,cg.Rc=function(t,e){var o=jl(t.geometry,e),i=new Ya;return this.b&&i.Tc(this.b),i.Ra(o),e&&e.dg&&t.attributes[e.dg]&&i.jc(t.attributes[e.dg]),t.attributes&&i.H(t.attributes),i},cg.yg=function(t,e){if(e=e||{},t.features){var o,i=[],n=t.features;for(e.dg=t.objectIdFieldName,t=0,o=n.length;t<o;++t)i.push(this.Rc(n[t],e));return i}return[this.Rc(t,e)]},cg.Cg=function(t,e){return jl(t,e)},cg.Fg=function(t){return t.spatialReference&&t.spatialReference.wkid?At("EPSG:"+t.spatialReference.wkid):null},cg.je=function(t,e){return Bl(t,_l(this,e))},cg.Zc=function(t,e){e=_l(this,e);var o={},i=t.V();return i&&(o.geometry=Bl(i,e)),i=t.N(),delete i[t.c],o.attributes=ct(i)?{}:i,e&&e.featureProjection&&(o.spatialReference={wkid:At(e.featureProjection).mb.split(":").pop()}),o},cg.he=function(t,e){e=_l(this,e);var o,i=[],n=0;for(o=t.length;n<o;++n)i.push(this.Zc(t[n],e));return{features:i}},u(Wl,Vl),u(zl,Wl),u(ql,Vl),u(Hl,Vl),u(Yl,Hl),u(Zl,Hl),u(Kl,Zl),u(Xl,Zl),u(Jl,Zl),u(Ql,Vl),u($l,Ql),u(tp,Hl),u(ep,Hl),u(op,Hl),u(ip,Zl),u(np,Zl),u(rp,Vl),u(sp,Zl),u(ap,Wl),u(lp,Ql),u(up,ni),cg=up.prototype,cg.clone=function(){var t=new up(null);return t.oj(this.a),t},cg.Kb=function(t,e,o,i){if(i<G(this.G(),t,e))return i;var n,r=this.a,s=0;for(n=r.length;s<n;++s)i=r[s].Kb(t,e,o,i);return i},cg.Mc=function(t,e){var o,i=this.a,n=0;for(o=i.length;n<o;++n)if(i[n].Mc(t,e))return!0;return!1},cg.se=function(t){U(t);for(var e=this.a,o=0,i=e.length;o<i;++o)z(t,e[o].G());return t},cg.Vf=function(){return hp(this.a)},cg.Vd=function(t){if(this.o!=this.i&&(lt(this.f),this.g=0,this.o=this.i),0>t||this.g&&t<this.g)return this;var e=t.toString();if(this.f.hasOwnProperty(e))return this.f[e];var o,i=[],n=this.a,r=!1,s=0;for(o=n.length;s<o;++s){var a=n[s],l=a.Vd(t);i.push(l),l!==a&&(r=!0)}return r?(t=new up(null),dp(t),t.a=i,fp(t),t.s(),this.f[e]=t):(this.g=t,this)},cg.U=function(){return"GeometryCollection"},cg.Xa=function(t){var e,o=this.a,i=0;for(e=o.length;i<e;++i)if(o[i].Xa(t))return!0;return!1},cg.rotate=function(t,e){for(var o=this.a,i=0,n=o.length;i<n;++i)o[i].rotate(t,e);this.s()},cg.scale=function(t,e,o){o||(o=J(this.G()));for(var i=this.a,n=0,r=i.length;n<r;++n)i[n].scale(t,e,o);this.s()},cg.oj=function(t){t=hp(t),dp(this),this.a=t,fp(this),this.s()},cg.Dc=function(t){var e,o=this.a,i=0;for(e=o.length;i<e;++i)o[i].Dc(t);this.s()},cg.translate=function(t,e){var o,i=this.a,n=0;for(o=i.length;n<o;++n)i[n].translate(t,e);this.s()},cg.ka=function(){dp(this),ni.prototype.ka.call(this)},u(yp,El);var pv={Point:function(t){return new Mi(t.coordinates)},LineString:function(t){return new Al(t.coordinates)},Polygon:function(t){return new Fi(t.coordinates)},MultiPoint:function(t){return new Tl(t.coordinates)},MultiLineString:function(t){return new xl(t.coordinates)},MultiPolygon:function(t){return new Ll(t.coordinates)},GeometryCollection:function(t,e){return t=t.geometries.map(function(t){return gp(t,e)}),new up(t)}},cv={Point:function(t){return{type:"Point",coordinates:t.X()}},LineString:function(t){return{type:"LineString",coordinates:t.X()}},Polygon:function(t,e){if(e)var o=e.rightHanded;return{type:"Polygon",coordinates:t.X(o)}},MultiPoint:function(t){return{type:"MultiPoint",coordinates:t.X()}},MultiLineString:function(t){return{type:"MultiLineString",coordinates:t.X()}},MultiPolygon:function(t,e){if(e)var o=e.rightHanded;return{type:"MultiPolygon",coordinates:t.X(o)}},GeometryCollection:function(t,e){return{type:"GeometryCollection",geometries:t.a.map(function(t){var o=mg({},e);return delete o.featureProjection,mp(t,o)})}},Circle:function(){return{type:"GeometryCollection",geometries:[]}}};cg=yp.prototype,cg.Rc=function(t,e){t="Feature"===t.type?t:{type:"Feature",geometry:t},e=gp(t.geometry,e);var o=new Ya;return this.b&&o.Tc(this.b),o.Ra(e),void 0!==t.id&&o.jc(t.id),t.properties&&o.H(t.properties),o},cg.yg=function(t,e){if("FeatureCollection"===t.type){var o=[];t=t.features;var i,n=0;for(i=t.length;n<i;++n)o.push(this.Rc(t[n],e))}else o=[this.Rc(t,e)];return o},cg.Cg=function(t,e){return gp(t,e)},cg.Fg=function(t){t=t.crs;var e;return t?"name"==t.type?e=At(t.properties.name):"EPSG"==t.type?e=At("EPSG:"+t.properties.code):y(!1,36):e=this.defaultDataProjection,e},cg.Zc=function(t,e){e=_l(this,e);var o={type:"Feature"},i=t.a;return void 0!==i&&(o.id=i),(i=t.V())?o.geometry=mp(i,e):o.geometry=null,e=t.N(),delete e[t.c],ct(e)?o.properties=null:o.properties=e,o},cg.he=function(t,e){e=_l(this,e);var o,i=[],n=0;for(o=t.length;n<o;++n)i.push(this.Zc(t[n],e));return{type:"FeatureCollection",features:i}},cg.je=function(t,e){return mp(t,_l(this,e))},u(vp,ml),cg=vp.prototype,cg.U=function(){return"xml"},cg.Tb=function(t,e){return Qa(t)?_p(this,t,e):$a(t)?this.xg(t,e):"string"==typeof t?(t=tl(t),_p(this,t,e)):null},cg.xg=function(){return null},cg.Oa=function(t,e){return Qa(t)?bp(this,t,e):$a(t)?this.zc(t,e):"string"==typeof t?(t=tl(t),bp(this,t,e)):[]},cg.Sc=function(t,e){return Qa(t)?null:$a(t)?this.aj(t,e):("string"==typeof t&&tl(t),null)},cg.aj=function(){return null},cg.kb=function(t){return Qa(t)?this.Eg(t):$a(t)?this.kf(t):"string"==typeof t?(t=tl(t),this.Eg(t)):null},cg.Eg=function(){return this.defaultDataProjection},cg.kf=function(){return this.defaultDataProjection},cg.Bd=function(t,e){return this.i.serializeToString(this.Vg(t,e))},cg.Vg=function(){return null},cg.Wb=function(t,e){return t=this.Xb(t,e),this.i.serializeToString(t)},cg.Xb=function(){return null},cg.$c=function(t,e){return t=this.ie(t,e),this.i.serializeToString(t)},cg.ie=function(){return null},u(Ep,vp);var uv=/^[\s\xa0]*$/;cg=Ep.prototype,cg.be=function(t,e){var o=t.localName,i=null;if("FeatureCollection"==o)i="http://www.opengis.net/wfs"===t.namespaceURI?hl([],this.b,t,e,this):hl(null,this.b,t,e,this);else if("featureMembers"==o||"featureMember"==o){var n,r=e[0],s=r.featureType,a=r.featureNS;if(!s&&t.childNodes){s=[],a={};var l=0;for(n=t.childNodes.length;l<n;++l){var p=t.childNodes[l];if(1===p.nodeType){var c=p.nodeName.split(":").pop();if(-1===s.indexOf(c)){var u,h="",d=0,p=p.namespaceURI;for(u in a){if(a[u]===p){h=u;break}++d}h||(h="p"+d,a[h]=p),s.push(h+":"+c)}}}"featureMember"!=o&&(r.featureType=s,r.featureNS=a)}"string"==typeof a&&(l=a,a={},a.p0=l);var f,r={},s=Array.isArray(s)?s:[s];for(f in a){for(c={},l=0,n=s.length;l<n;++l)(-1===s[l].indexOf(":")?"p0":s[l].split(":")[0])===f&&(c[s[l].split(":").pop()]="featureMembers"==o?ol(this.wg,this):il(this.wg,this));r[a[f]]=c}i="featureMember"==o?hl(void 0,r,t,e):hl([],r,t,e)}return null===i&&(i=[]),i},cg.gf=function(t,e){var o=e[0];if(o.srsName=t.firstElementChild.getAttribute("srsName"),t=hl(null,this.Zg,t,e,this))return bl(t,!1,o)},cg.wg=function(t,e){var o;(o=t.getAttribute("fid"))||(o=t.getAttributeNS("http://www.opengis.net/gml","id")||"");var i,n={};for(t=t.firstElementChild;t;t=t.nextElementSibling){var r=t.localName;if(0===t.childNodes.length||1===t.childNodes.length&&(3===t.firstChild.nodeType||4===t.firstChild.nodeType)){var s=Xa(t,!1);uv.test(s)&&(s=void 0),n[r]=s}else"boundedBy"!==r&&(i=r),n[r]=this.gf(t,e)}return e=new Ya(n),i&&e.Tc(i),o&&e.jc(o),e},cg.fj=function(t,e){if(t=this.ff(t,e))return e=new Mi(null),e.ba("XYZ",t),e},cg.dj=function(t,e){if(t=hl([],this.Nj,t,e,this))return new Tl(t)},cg.cj=function(t,e){if(t=hl([],this.Mj,t,e,this))return e=new xl(null),Il(e,t),e},cg.ej=function(t,e){if(t=hl([],this.Oj,t,e,this))return e=new Ll(null),kl(e,t),e},cg.Xi=function(t,e){ul(this.Rj,t,e,this)},cg.Mh=function(t,e){ul(this.Kj,t,e,this)},cg.Yi=function(t,e){ul(this.Sj,t,e,this)},cg.hf=function(t,e){if(t=this.ff(t,e))return e=new Al(null),e.ba("XYZ",t),e},cg.wp=function(t,e){if(t=hl(null,this.ke,t,e,this))return t},cg.bj=function(t,e){if(t=this.ff(t,e))return e=new Ci(null),Ai(e,"XYZ",t),e},cg.jf=function(t,e){if((t=hl([null],this.zf,t,e,this))&&t[0]){e=new Fi(null);var o,i=t[0],r=[i.length],s=1;for(o=t.length;s<o;++s)n(i,t[s]),r.push(i.length);return e.ba("XYZ",i,r),e}},cg.ff=function(t,e){return hl(null,this.ke,t,e,this)},cg.Nj={"http://www.opengis.net/gml":{pointMember:ol(Ep.prototype.Xi),pointMembers:ol(Ep.prototype.Xi)}},cg.Mj={"http://www.opengis.net/gml":{lineStringMember:ol(Ep.prototype.Mh),lineStringMembers:ol(Ep.prototype.Mh)}},cg.Oj={"http://www.opengis.net/gml":{polygonMember:ol(Ep.prototype.Yi),polygonMembers:ol(Ep.prototype.Yi)}},cg.Rj={"http://www.opengis.net/gml":{Point:ol(Ep.prototype.ff)}},cg.Kj={"http://www.opengis.net/gml":{LineString:ol(Ep.prototype.hf)}},cg.Sj={"http://www.opengis.net/gml":{Polygon:ol(Ep.prototype.jf)}},cg.le={"http://www.opengis.net/gml":{LinearRing:il(Ep.prototype.wp)}},cg.aj=function(t,e){return(t=this.gf(t,[vl(this,t,e||{})]))?t:null},cg.zc=function(t,e){var o={featureType:this.featureType,featureNS:this.featureNS};return e&&mg(o,vl(this,t,e)),this.be(t,[o])||[]},cg.kf=function(t){return At(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))},u(Op,Ep),cg=Op.prototype,cg.Ap=function(t,e){if(t=hl([],this.Lj,t,e,this))return e=new xl(null),Il(e,t),e},cg.Bp=function(t,e){if(t=hl([],this.Pj,t,e,this))return e=new Ll(null),kl(e,t),e},cg.ph=function(t,e){ul(this.Hj,t,e,this)},cg.Aj=function(t,e){ul(this.Uj,t,e,this)},cg.Ep=function(t,e){return hl([null],this.Qj,t,e,this)},cg.Hp=function(t,e){return hl([null],this.Tj,t,e,this)},cg.Fp=function(t,e){return hl([null],this.zf,t,e,this)},cg.zp=function(t,e){return hl([null],this.ke,t,e,this)},cg.cm=function(t,e){(t=hl(void 0,this.le,t,e,this))&&e[e.length-1].push(t)},cg.yk=function(t,e){(t=hl(void 0,this.le,t,e,this))&&(e[e.length-1][0]=t)},cg.gj=function(t,e){if((t=hl([null],this.Vj,t,e,this))&&t[0]){e=new Fi(null);var o,i=t[0],r=[i.length],s=1;for(o=t.length;s<o;++s)n(i,t[s]),r.push(i.length);return e.ba("XYZ",i,r),e}},cg.Zi=function(t,e){if(t=hl([null],this.Ij,t,e,this))return e=new Al(null),e.ba("XYZ",t),e},cg.vp=function(t,e){return t=hl([null],this.Jj,t,e,this),F(t[1][0],t[1][1],t[2][0],t[2][1])},cg.xp=function(t,e){var o=Xa(t,!1),i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;t=[];for(var n;n=i.exec(o);)t.push(parseFloat(n[1])),o=o.substr(n[0].length);if(""===o){if(e=e[0].srsName,o="enu",e&&(o=At(e).b),"neu"===o)for(e=0,o=t.length;e<o;e+=3)i=t[e],t[e]=t[e+1],t[e+1]=i;if(e=t.length,2==e&&t.push(0),e)return t}},cg.Bg=function(t,e){var o=Xa(t,!1).replace(/^\s*|\s*$/g,""),i=e[0].srsName,n=t.parentNode.getAttribute("srsDimension");e="enu",i&&(e=At(i).b),o=o.split(/\s+/),i=2,t.getAttribute("srsDimension")?i=xp(t.getAttribute("srsDimension")):t.getAttribute("dimension")?i=xp(t.getAttribute("dimension")):n&&(i=xp(n));for(var r,s=[],a=0,l=o.length;a<l;a+=i)t=parseFloat(o[a]),n=parseFloat(o[a+1]),r=3===i?parseFloat(o[a+2]):0,"en"===e.substr(0,2)?s.push(t,n,r):s.push(n,t,r);return s},cg.ke={"http://www.opengis.net/gml":{pos:il(Op.prototype.xp),posList:il(Op.prototype.Bg)}},cg.zf={"http://www.opengis.net/gml":{interior:Op.prototype.cm,exterior:Op.prototype.yk}},cg.Zg={"http://www.opengis.net/gml":{Point:il(Ep.prototype.fj),MultiPoint:il(Ep.prototype.dj),LineString:il(Ep.prototype.hf),MultiLineString:il(Ep.prototype.cj),LinearRing:il(Ep.prototype.bj),Polygon:il(Ep.prototype.jf),MultiPolygon:il(Ep.prototype.ej),Surface:il(Op.prototype.gj),MultiSurface:il(Op.prototype.Bp),Curve:il(Op.prototype.Zi),MultiCurve:il(Op.prototype.Ap),Envelope:il(Op.prototype.vp)}},cg.Lj={"http://www.opengis.net/gml":{curveMember:ol(Op.prototype.ph),curveMembers:ol(Op.prototype.ph)}},cg.Pj={"http://www.opengis.net/gml":{surfaceMember:ol(Op.prototype.Aj),surfaceMembers:ol(Op.prototype.Aj)}},cg.Hj={"http://www.opengis.net/gml":{LineString:ol(Ep.prototype.hf),Curve:ol(Op.prototype.Zi)}},cg.Uj={"http://www.opengis.net/gml":{Polygon:ol(Ep.prototype.jf),Surface:ol(Op.prototype.gj)}},cg.Vj={"http://www.opengis.net/gml":{patches:il(Op.prototype.Ep)}},cg.Ij={"http://www.opengis.net/gml":{segments:il(Op.prototype.Hp)}},cg.Jj={"http://www.opengis.net/gml":{lowerCorner:ol(Op.prototype.Bg),upperCorner:ol(Op.prototype.Bg)}},cg.Qj={"http://www.opengis.net/gml":{PolygonPatch:il(Op.prototype.Fp)}},cg.Tj={"http://www.opengis.net/gml":{LineStringSegment:il(Op.prototype.zp)}},cg.ni=function(t,e,o){var i=o[o.length-1].srsName;i&&t.setAttribute("srsName",i),i=Ka(t.namespaceURI,"pos"),t.appendChild(i),o=o[o.length-1],t=o.hasZ;var n=o.srsName;o="enu",n&&(o=At(n).b),e=e.X(),o="en"===o.substr(0,2)?e[0]+" "+e[1]:e[1]+" "+e[0],t&&(o+=" "+(e[2]||0)),Gp(i,o)};var hv={"http://www.opengis.net/gml":{lowerCorner:sl(Gp),upperCorner:sl(Gp)}};cg=Op.prototype,cg.jn=function(t,e,o){var i=o[o.length-1].srsName;i&&t.setAttribute("srsName",i),fl({node:t},hv,sv,[e[0]+" "+e[1],e[2]+" "+e[3]],o,["lowerCorner","upperCorner"],this)},cg.ki=function(t,e,o){var i=o[o.length-1].srsName;i&&t.setAttribute("srsName",i),i=Ka(t.namespaceURI,"posList"),t.appendChild(i),Np(i,e,o)},cg.hn=function(t,e){t=e[e.length-1],e=t.node;var o=t.exteriorWritten;return void 0===o&&(t.exteriorWritten=!0),Ka(e.namespaceURI,void 0!==o?"interior":"exterior")},cg.Se=function(t,e,o){var i=o[o.length-1],n=i.hasZ,i=i.srsName;"PolygonPatch"!==t.nodeName&&i&&t.setAttribute("srsName",i),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName?(e=e.Sd(),fl({node:t,hasZ:n,srsName:i},gv,this.hn,e,o,void 0,this)):"Surface"===t.nodeName&&(n=Ka(t.namespaceURI,"patches"),t.appendChild(n),t=Ka(n.namespaceURI,"PolygonPatch"),n.appendChild(t),this.Se(t,e,o))},cg.Re=function(t,e,o){var i=o[o.length-1].srsName;"LineStringSegment"!==t.nodeName&&i&&t.setAttribute("srsName",i),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName?(i=Ka(t.namespaceURI,"posList"),t.appendChild(i),Np(i,e,o)):"Curve"===t.nodeName&&(i=Ka(t.namespaceURI,"segments"),t.appendChild(i),t=Ka(i.namespaceURI,"LineStringSegment"),i.appendChild(t),this.Re(t,e,o))},cg.mi=function(t,e,o){var i=o[o.length-1],n=i.hasZ,r=i.srsName,i=i.surface;r&&t.setAttribute("srsName",r),e=e.Td(),fl({node:t,hasZ:n,srsName:r,surface:i},dv,this.o,e,o,void 0,this)},cg.kn=function(t,e,o){var i=o[o.length-1],n=i.srsName,i=i.hasZ;n&&t.setAttribute("srsName",n),e=e.Zd(),fl({node:t,hasZ:i,srsName:n},fv,ll("pointMember"),e,o,void 0,this)},cg.li=function(t,e,o){var i=o[o.length-1],n=i.hasZ,r=i.srsName,i=i.curve;r&&t.setAttribute("srsName",r),e=e.gd(),fl({node:t,hasZ:n,srsName:r,curve:i},yv,this.o,e,o,void 0,this)},cg.oi=function(t,e,o){var i=Ka(t.namespaceURI,"LinearRing");t.appendChild(i),this.ki(i,e,o)},cg.pi=function(t,e,o){var i=this.a(e,o);i&&(t.appendChild(i),this.Se(i,e,o))},cg.ln=function(t,e,o){var i=Ka(t.namespaceURI,"Point");t.appendChild(i),this.ni(i,e,o)},cg.ji=function(t,e,o){var i=this.a(e,o);i&&(t.appendChild(i),this.Re(i,e,o))},cg.od=function(t,e,o){var i=o[o.length-1],n=mg({},i);n.node=t;var r;r=Array.isArray(e)?i.dataProjection?Gt(e,i.featureProjection,i.dataProjection):e:bl(e,!0,i),fl(n,mv,this.a,[r],o,void 0,this)},cg.ii=function(t,e,o){var i=e.a;i&&t.setAttribute("fid",i);var i=o[o.length-1],n=i.featureNS,r=e.c;i.lb||(i.lb={},i.lb[n]={});var s=e.N();e=[];var a=[];for(p in s){var l=s[p];null!==l&&(e.push(p),a.push(l),p==r||l instanceof ni?p in i.lb[n]||(i.lb[n][p]=sl(this.od,this)):p in i.lb[n]||(i.lb[n][p]=sl(Gp)))}var p=mg({},i);p.node=t,fl(p,i.lb,ll(void 0,n),a,o,e)};var dv={"http://www.opengis.net/gml":{surfaceMember:sl(Op.prototype.pi),polygonMember:sl(Op.prototype.pi)}},fv={"http://www.opengis.net/gml":{pointMember:sl(Op.prototype.ln)}},yv={"http://www.opengis.net/gml":{lineStringMember:sl(Op.prototype.ji),curveMember:sl(Op.prototype.ji)}},gv={"http://www.opengis.net/gml":{exterior:sl(Op.prototype.oi),interior:sl(Op.prototype.oi)}},mv={"http://www.opengis.net/gml":{Curve:sl(Op.prototype.Re),MultiCurve:sl(Op.prototype.li),Point:sl(Op.prototype.ni),MultiPoint:sl(Op.prototype.kn),LineString:sl(Op.prototype.Re),MultiLineString:sl(Op.prototype.li),LinearRing:sl(Op.prototype.ki),Polygon:sl(Op.prototype.Se),MultiPolygon:sl(Op.prototype.mi),Surface:sl(Op.prototype.Se),MultiSurface:sl(Op.prototype.mi),Envelope:sl(Op.prototype.jn)}},vv={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};Op.prototype.o=function(t,e){return Ka("http://www.opengis.net/gml",vv[e[e.length-1].node.nodeName])},Op.prototype.a=function(t,e){var o=e[e.length-1];e=o.multiSurface;var i=o.surface,n=o.curve,o=o.multiCurve;return Array.isArray(t)?t="Envelope":(t=t.U(),"MultiPolygon"===t&&!0===e?t="MultiSurface":"Polygon"===t&&!0===i?t="Surface":"LineString"===t&&!0===n?t="Curve":"MultiLineString"===t&&!0===o&&(t="MultiCurve")),Ka("http://www.opengis.net/gml",t)},Op.prototype.ie=function(t,e){e=_l(this,e);var o=Ka("http://www.opengis.net/gml","geom"),i={node:o,hasZ:this.hasZ,srsName:this.srsName,curve:this.c,surface:this.l,multiSurface:this.j,multiCurve:this.g};return e&&mg(i,e),this.od(o,t,[i]),o},Op.prototype.Xb=function(t,e){e=_l(this,e);var o=Ka("http://www.opengis.net/gml","featureMembers");o.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var i={srsName:this.srsName,hasZ:this.hasZ,curve:this.c,surface:this.l,multiSurface:this.j,multiCurve:this.g,featureNS:this.featureNS,featureType:this.featureType};e&&mg(i,e),e=[i];var n=e[e.length-1],i=n.featureType,r=n.featureNS,s={};return s[r]={},s[r][i]=sl(this.ii,this),n=mg({},n),n.node=o,fl(n,s,ll(i,r),t,e),o},u(kp,Ep),cg=kp.prototype,cg.$i=function(t,e){t=Xa(t,!1).replace(/^\s*|\s*$/g,"");var o=e[0].srsName;e="enu",o&&(o=At(o))&&(e=o.b),t=t.trim().split(/\s+/);for(var i,n,r=[],s=0,a=t.length;s<a;s++)n=t[s].split(/,+/),o=parseFloat(n[0]),i=parseFloat(n[1]),n=3===n.length?parseFloat(n[2]):0,"en"===e.substr(0,2)?r.push(o,i,n):r.push(i,o,n);return r},cg.tp=function(t,e){return t=hl([null],this.Gj,t,e,this),F(t[1][0],t[1][1],t[1][3],t[1][4])},cg.am=function(t,e){(t=hl(void 0,this.le,t,e,this))&&e[e.length-1].push(t)},cg.bp=function(t,e){(t=hl(void 0,this.le,t,e,this))&&(e[e.length-1][0]=t)},cg.ke={"http://www.opengis.net/gml":{coordinates:il(kp.prototype.$i)}},cg.zf={"http://www.opengis.net/gml":{innerBoundaryIs:kp.prototype.am,outerBoundaryIs:kp.prototype.bp}},cg.Gj={"http://www.opengis.net/gml":{coordinates:ol(kp.prototype.$i)}},cg.Zg={"http://www.opengis.net/gml":{Point:il(Ep.prototype.fj),MultiPoint:il(Ep.prototype.dj),LineString:il(Ep.prototype.hf),MultiLineString:il(Ep.prototype.cj),LinearRing:il(Ep.prototype.bj),Polygon:il(Ep.prototype.jf),MultiPolygon:il(Ep.prototype.ej),Box:il(kp.prototype.tp)}},cg.jg=function(t,e){var o=e[e.length-1];e=o.multiSurface;var i=o.surface,o=o.multiCurve;return Array.isArray(t)?t="Envelope":(t=t.U(),"MultiPolygon"===t&&!0===e?t="MultiSurface":"Polygon"===t&&!0===i?t="Surface":"MultiLineString"===t&&!0===o&&(t="MultiCurve")),Ka("http://www.opengis.net/gml",t)},cg.ai=function(t,e,o){var i=o[o.length-1],n=mg({},i);n.node=t;var r;r=Array.isArray(e)?i.dataProjection?Gt(e,i.featureProjection,i.dataProjection):e:bl(e,!0,i),fl(n,_v,this.jg,[r],o,void 0,this)},cg.Pe=function(t,e,o){var i=o[o.length-1].srsName;"LineStringSegment"!==t.nodeName&&i&&t.setAttribute("srsName",i),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName?(i=Dp(t.namespaceURI),t.appendChild(i),jp(i,e,o)):"Curve"===t.nodeName&&(i=Ka(t.namespaceURI,"segments"),t.appendChild(i),t=Ka(i.namespaceURI,"LineStringSegment"),i.appendChild(t),
this.Pe(t,e,o))},cg.Qe=function(t,e,o){var i=o[o.length-1],n=i.hasZ,i=i.srsName;"PolygonPatch"!==t.nodeName&&i&&t.setAttribute("srsName",i),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName?(e=e.Sd(),fl({node:t,hasZ:n,srsName:i},bv,this.dn,e,o,void 0,this)):"Surface"===t.nodeName&&(n=Ka(t.namespaceURI,"patches"),t.appendChild(n),t=Ka(n.namespaceURI,"PolygonPatch"),n.appendChild(t),this.Qe(t,e,o))},cg.dn=function(t,e){t=e[e.length-1],e=t.node;var o=t.exteriorWritten;return void 0===o&&(t.exteriorWritten=!0),Ka(e.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")},cg.gi=function(t,e,o){var i=Ka(t.namespaceURI,"LinearRing");t.appendChild(i),this.ci(i,e,o)},cg.di=function(t,e,o){var i=o[o.length-1],n=i.hasZ,r=i.srsName,i=i.curve;r&&t.setAttribute("srsName",r),e=e.gd(),fl({node:t,hasZ:n,srsName:r,curve:i},Sv,this.a,e,o,void 0,this)},cg.fi=function(t,e,o){var i=o[o.length-1];o=i.hasZ;var n=i.srsName;n&&t.setAttribute("srsName",n),i=Dp(t.namespaceURI),t.appendChild(i),t=e.X(),t=Fp(t,n,o),Gp(i,t)},cg.fn=function(t,e,o){var i=o[o.length-1],n=i.hasZ;(i=i.srsName)&&t.setAttribute("srsName",i),e=e.Zd(),fl({node:t,hasZ:n,srsName:i},Ev,ll("pointMember"),e,o,void 0,this)},cg.gn=function(t,e,o){var i=Ka(t.namespaceURI,"Point");t.appendChild(i),this.fi(i,e,o)},cg.bi=function(t,e,o){var i=this.jg(e,o);i&&(t.appendChild(i),this.Pe(i,e,o))},cg.ci=function(t,e,o){var i=o[o.length-1].srsName;i&&t.setAttribute("srsName",i),i=Dp(t.namespaceURI),t.appendChild(i),jp(i,e,o)},cg.ei=function(t,e,o){var i=o[o.length-1],n=i.hasZ,r=i.srsName,i=i.surface;r&&t.setAttribute("srsName",r),e=e.Td(),fl({node:t,hasZ:n,srsName:r,surface:i},Pv,this.a,e,o,void 0,this)},cg.hi=function(t,e,o){var i=this.jg(e,o);i&&(t.appendChild(i),this.Qe(i,e,o))},cg.en=function(t,e,o){var i=o[o.length-1].srsName;i&&t.setAttribute("srsName",i),fl({node:t},Cv,sv,[e[0]+" "+e[1],e[2]+" "+e[3]],o,["lowerCorner","upperCorner"],this)};var _v={"http://www.opengis.net/gml":{Curve:sl(kp.prototype.Pe),MultiCurve:sl(kp.prototype.di),Point:sl(kp.prototype.fi),MultiPoint:sl(kp.prototype.fn),LineString:sl(kp.prototype.Pe),MultiLineString:sl(kp.prototype.di),LinearRing:sl(kp.prototype.ci),Polygon:sl(kp.prototype.Qe),MultiPolygon:sl(kp.prototype.ei),Surface:sl(kp.prototype.Qe),MultiSurface:sl(kp.prototype.ei),Envelope:sl(kp.prototype.en)}},bv={"http://www.opengis.net/gml":{outerBoundaryIs:sl(kp.prototype.gi),innerBoundaryIs:sl(kp.prototype.gi)}},Ev={"http://www.opengis.net/gml":{pointMember:sl(kp.prototype.gn)}},Sv={"http://www.opengis.net/gml":{lineStringMember:sl(kp.prototype.bi),curveMember:sl(kp.prototype.bi)}};kp.prototype.a=function(t,e){return Ka("http://www.opengis.net/gml",wv[e[e.length-1].node.nodeName])};var wv={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"},Pv={"http://www.opengis.net/gml":{surfaceMember:sl(kp.prototype.hi),polygonMember:sl(kp.prototype.hi)}},Cv={"http://www.opengis.net/gml":{lowerCorner:sl(Gp),upperCorner:sl(Gp)}};u(Up,vp);var Av=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],Mv={rte:qp,trk:Hp,wpt:Yp},xv=cl(Av,{rte:ol(qp),trk:ol(Hp),wpt:ol(Yp)}),Rv=cl(Av,{text:rl(Rp,"linkText"),type:rl(Rp,"linkType")}),Iv=cl(Av,{name:rl(Rp),cmt:rl(Rp),desc:rl(Rp),src:rl(Rp),link:Wp,number:rl(Mp),extensions:zp,type:rl(Rp),rtept:function(t,e){var o=hl({},Tv,t,e);o&&(e=e[e.length-1],Bp(e.flatCoordinates,e.layoutOptions,t,o))}}),Tv=cl(Av,{ele:rl(Cp),time:rl(Pp)}),Lv=cl(Av,{name:rl(Rp),cmt:rl(Rp),desc:rl(Rp),src:rl(Rp),link:Wp,number:rl(Mp),type:rl(Rp),extensions:zp,trkseg:function(t,e){var o=e[e.length-1];ul(Gv,t,e),o.ends.push(o.flatCoordinates.length)}}),Gv=cl(Av,{trkpt:function(t,e){var o=hl({},Ov,t,e);o&&(e=e[e.length-1],Bp(e.flatCoordinates,e.layoutOptions,t,o))}}),Ov=cl(Av,{ele:rl(Cp),time:rl(Pp)}),Nv=cl(Av,{ele:rl(Cp),time:rl(Pp),magvar:rl(Cp),geoidheight:rl(Cp),name:rl(Rp),cmt:rl(Rp),desc:rl(Rp),src:rl(Rp),link:Wp,sym:rl(Rp),type:rl(Rp),fix:rl(Rp),sat:rl(Mp),hdop:rl(Cp),vdop:rl(Cp),pdop:rl(Cp),ageofdgpsdata:rl(Cp),dgpsid:rl(Mp),extensions:zp});Up.prototype.xg=function(t,e){if(!o(Av,t.namespaceURI))return null;var i=Mv[t.localName];return i&&(t=i(t,[vl(this,t,e)]))?(Zp(this,[t]),t):null},Up.prototype.zc=function(t,e){return o(Av,t.namespaceURI)&&"gpx"==t.localName&&(t=hl([],xv,t,[vl(this,t,e)]))?(Zp(this,t),t):[]};var kv=["text","type"],Dv=cl(Av,{text:sl(Gp),type:sl(Gp)}),jv=cl(Av,"name cmt desc src link number type rtept".split(" ")),Fv=cl(Av,{name:sl(Gp),cmt:sl(Gp),desc:sl(Gp),src:sl(Gp),link:sl(Kp),number:sl(Lp),type:sl(Gp),rtept:al(sl(Xp))}),Uv=cl(Av,["ele","time"]),Bv=cl(Av,"name cmt desc src link number type trkseg".split(" ")),Vv=cl(Av,{name:sl(Gp),cmt:sl(Gp),desc:sl(Gp),src:sl(Gp),link:sl(Kp),number:sl(Lp),type:sl(Gp),trkseg:al(sl(function(t,e,o){fl({node:t,geometryLayout:e.ja,properties:{}},zv,Wv,e.X(),o)}))}),Wv=ll("trkpt"),zv=cl(Av,{trkpt:sl(Xp)}),qv=cl(Av,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),Hv=cl(Av,{ele:sl(Tp),time:sl(function(t,e){e=new Date(1e3*e),t.appendChild(rv.createTextNode(e.getUTCFullYear()+"-"+Vo(e.getUTCMonth()+1)+"-"+Vo(e.getUTCDate())+"T"+Vo(e.getUTCHours())+":"+Vo(e.getUTCMinutes())+":"+Vo(e.getUTCSeconds())+"Z"))}),magvar:sl(Tp),geoidheight:sl(Tp),name:sl(Gp),cmt:sl(Gp),desc:sl(Gp),src:sl(Gp),link:sl(Kp),sym:sl(Gp),type:sl(Gp),fix:sl(Gp),sat:sl(Lp),hdop:sl(Tp),vdop:sl(Tp),pdop:sl(Tp),ageofdgpsdata:sl(Tp),dgpsid:sl(Lp)}),Yv={Point:"wpt",LineString:"rte",MultiLineString:"trk"},Zv=cl(Av,{rte:sl(function(t,e,o){var i=o[0],n=e.N();t={node:t,properties:n},(e=e.V())&&(e=bl(e,!0,i),t.geometryLayout=e.ja,n.rtept=e.X()),i=jv[o[o.length-1].node.namespaceURI],n=pl(n,i),fl(t,Fv,sv,n,o,i)}),trk:sl(function(t,e,o){var i=o[0],n=e.N();t={node:t,properties:n},(e=e.V())&&(e=bl(e,!0,i),n.trkseg=e.gd()),i=Bv[o[o.length-1].node.namespaceURI],n=pl(n,i),fl(t,Vv,sv,n,o,i)}),wpt:sl(function(t,e,o){var i=o[0],n=o[o.length-1];n.properties=e.N(),(e=e.V())&&(e=bl(e,!0,i),n.geometryLayout=e.ja,Xp(t,e.X(),o))})});Up.prototype.Xb=function(t,e){e=_l(this,e);var o=Ka("http://www.topografix.com/GPX/1/1","gpx");return o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),o.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),o.setAttribute("version","1.1"),o.setAttribute("creator","OpenLayers"),fl({node:o},Zv,Jp,t,[e]),o},u(Qp,ml),cg=Qp.prototype,cg.U=function(){return"text"},cg.Tb=function(t,e){return this.ae($p(t),_l(this,e))},cg.Oa=function(t,e){return this.zg($p(t),_l(this,e))},cg.Sc=function(t,e){return this.wd($p(t),_l(this,e))},cg.kb=function(){return this.defaultDataProjection},cg.Bd=function(t,e){return this.ge(t,_l(this,e))},cg.Wb=function(t,e){return this.Wg(t,_l(this,e))},cg.$c=function(t,e){return this.Cd(t,_l(this,e))},u(tc,Qp);var Kv=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,Xv=/^H.([A-Z]{3}).*?:(.*)/,Jv=/^HFDTE(\d{2})(\d{2})(\d{2})/,Qv=/\r\n|\r|\n/;cg=tc.prototype,cg.ae=function(t,e){var o=this.b,i=t.split(Qv);t={};var n,r=[],s=2e3,a=0,l=1,p=-1,c=0;for(n=i.length;c<n;++c){var u,h=i[c];if("B"==h.charAt(0)){if(u=Kv.exec(h)){var h=parseInt(u[1],10),d=parseInt(u[2],10),f=parseInt(u[3],10),y=parseInt(u[4],10)+parseInt(u[5],10)/6e4;"S"==u[6]&&(y=-y);var g=parseInt(u[7],10)+parseInt(u[8],10)/6e4;"W"==u[9]&&(g=-g),r.push(g,y),"none"!=o&&r.push("gps"==o?parseInt(u[11],10):"barometric"==o?parseInt(u[12],10):0),u=Date.UTC(s,a,l,h,d,f),u<p&&(u=Date.UTC(s,a,l+1,h,d,f)),r.push(u/1e3),p=u}}else"H"==h.charAt(0)&&((u=Jv.exec(h))?(l=parseInt(u[1],10),a=parseInt(u[2],10)-1,s=2e3+parseInt(u[3],10)):(u=Xv.exec(h))&&(t[u[1]]=u[2].trim()))}return r.length?(i=new Al(null),i.ba("none"==o?"XYM":"XYZM",r),e=new Ya(bl(i,!1,e)),e.H(t),e):null},cg.zg=function(t,e){return(t=this.ae(t,e))?[t]:[]},cg.ge=function(){},cg.Wg=function(){},cg.Cd=function(){},cg.wd=function(){},u(ec,de),ec.prototype.v=function(){this.i=3,this.f.forEach(ae),this.f=null,this.b("change")},ec.prototype.u=function(){if(this.i=2,this.a&&(this.M.width=this.a[0],this.M.height=this.a[1]),this.a=[this.M.width,this.M.height],this.f.forEach(ae),this.f=null,oc(this),!this.l&&null!==this.g){this.c.width=this.M.width,this.c.height=this.M.height;var t=this.c.getContext("2d");t.drawImage(this.M,0,0);for(var e=t.getImageData(0,0,this.M.width,this.M.height),o=e.data,i=this.g[0]/255,n=this.g[1]/255,r=this.g[2]/255,s=0,a=o.length;s<a;s+=4)o[s]*=i,o[s+1]*=n,o[s+2]*=r;t.putImageData(e,0,0)}this.b("change")},ec.prototype.Y=function(){return this.c?this.c:this.M},ec.prototype.load=function(){if(0==this.i){this.i=1,this.f=[re(this.M,"error",this.v,this),re(this.M,"load",this.u,this)];try{this.M.src=this.o}catch(t){this.v()}}},u(ic,Da),cg=ic.prototype,cg.clone=function(){var t=this.Y(1);if(2===this.b.i)if("IMG"===t.tagName.toUpperCase())var e=t.cloneNode(!0);else{e=document.createElement("canvas");var o=e.getContext("2d");e.width=t.width,e.height=t.height,o.drawImage(t,0,0)}return new ic({anchor:this.o.slice(),anchorOrigin:this.i,anchorXUnits:this.C,anchorYUnits:this.B,crossOrigin:this.ra,color:this.j&&this.j.slice?this.j.slice():this.j||void 0,img:e||void 0,imgSize:e?this.b.a.slice():void 0,src:e?void 0:this.b.o,offset:this.oa.slice(),offsetOrigin:this.c,size:null!==this.D?this.D.slice():void 0,opacity:this.f,scale:this.a,snapToPixel:this.v,rotation:this.g,rotateWithView:this.l})},cg.Hc=function(){if(this.u)return this.u;var t=this.o,e=this.ic();if("fraction"==this.C||"fraction"==this.B){if(!e)return null;t=this.o.slice(),"fraction"==this.C&&(t[0]*=e[0]),"fraction"==this.B&&(t[1]*=e[1])}if("top-left"!=this.i){if(!e)return null;t===this.o&&(t=this.o.slice()),"top-right"!=this.i&&"bottom-right"!=this.i||(t[0]=-t[0]+e[0]),"bottom-left"!=this.i&&"bottom-right"!=this.i||(t[1]=-t[1]+e[1])}return this.u=t},cg.Lo=function(){return this.j},cg.Y=function(t){return this.b.Y(t)},cg.ye=function(){return this.b.a},cg.Ye=function(){return this.b.i},cg.qg=function(){var t=this.b;if(!t.j)if(t.l){var e=t.a[0],o=t.a[1],i=xe(e,o);i.fillRect(0,0,e,o),t.j=i.canvas}else t.j=t.M;return t.j},cg.Oc=function(){if(this.S)return this.S;var t=this.oa;if("top-left"!=this.c){var e=this.ic(),o=this.b.a;if(!e||!o)return null;t=t.slice(),"top-right"!=this.c&&"bottom-right"!=this.c||(t[0]=o[0]-e[0]-t[0]),"bottom-left"!=this.c&&"bottom-right"!=this.c||(t[1]=o[1]-e[1]-t[1])}return this.S=t},cg.Mo=function(){return this.b.o},cg.ic=function(){return this.D?this.D:this.b.a},cg.Nh=function(t,e){return ne(this.b,"change",t,e)},cg.load=function(){this.b.load()},cg.Bj=function(t,e){se(this.b,"change",t,e)},cg=nc.prototype,cg.clone=function(){return new nc({font:this.a,rotation:this.f,rotateWithView:this.o,scale:this.b,text:this.Na(),textAlign:this.g,textBaseline:this.j,fill:this.Fa()?this.Fa().clone():void 0,stroke:this.Ga()?this.Ga().clone():void 0,offsetX:this.i,offsetY:this.c})},cg.Nk=function(){return this.a},cg.cl=function(){return this.i},cg.dl=function(){return this.c},cg.Fa=function(){return this.Va},cg.Ro=function(){return this.o},cg.So=function(){return this.f},cg.To=function(){return this.b},cg.Ga=function(){return this.Ya},cg.Na=function(){return this.Ia},cg.nl=function(){return this.g},cg.ol=function(){return this.j},cg.nj=function(t){this.a=t},cg.sj=function(t){this.i=t},cg.tj=function(t){this.c=t},cg.pf=function(t){this.Va=t},cg.Uo=function(t){this.f=t},cg.Si=function(t){this.b=t},cg.qf=function(t){this.Ya=t},cg.xd=function(t){this.Ia=t},cg.vj=function(t){this.g=t},cg.hq=function(t){this.j=t};var $v,t_,e_,o_,i_,n_,r_,s_,a_,l_,p_,c_,u_,h_,d_;u(rc,vp);var f_=["http://www.google.com/kml/ext/2.2"],y_=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],g_={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},m_=cl(y_,{displayName:rl(Rp),value:rl(Rp)}),v_=cl(y_,{Data:function(t,e){var o=t.getAttribute("name");ul(m_,t,e),t=e[e.length-1],null!==o?t[o]=t.value:null!==t.displayName&&(t[t.displayName]=t.value)},SchemaData:function(t,e){ul(U_,t,e)}}),__=cl(y_,{LatLonAltBox:function(t,e){(t=hl({},b_,t,e))&&(e=e[e.length-1],e.extent=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)],e.altitudeMode=t.altitudeMode,e.minAltitude=parseFloat(t.minAltitude),e.maxAltitude=parseFloat(t.maxAltitude))},Lod:function(t,e){(t=hl({},E_,t,e))&&(e=e[e.length-1],e.minLodPixels=parseFloat(t.minLodPixels),e.maxLodPixels=parseFloat(t.maxLodPixels),e.minFadeExtent=parseFloat(t.minFadeExtent),e.maxFadeExtent=parseFloat(t.maxFadeExtent))}}),b_=cl(y_,{altitudeMode:rl(Rp),minAltitude:rl(Cp),maxAltitude:rl(Cp),north:rl(Cp),south:rl(Cp),east:rl(Cp),west:rl(Cp)}),E_=cl(y_,{minLodPixels:rl(Cp),maxLodPixels:rl(Cp),minFadeExtent:rl(Cp),maxFadeExtent:rl(Cp)}),S_=cl(y_,{extrude:rl(Sp),altitudeMode:rl(Rp)}),w_=cl(y_,{coordinates:il(cc)}),P_=cl(y_,{innerBoundaryIs:function(t,e){(t=hl(void 0,R_,t,e))&&e[e.length-1].push(t)},outerBoundaryIs:function(t,e){(t=hl(void 0,k_,t,e))&&(e[e.length-1][0]=t)}}),C_=cl(y_,{when:function(t,e){e=e[e.length-1].Ej,t=Xa(t,!1),t=Date.parse(t),e.push(isNaN(t)?0:t)}},cl(f_,{coord:function(t,e){e=e[e.length-1].A,t=Xa(t,!1),(t=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(t))?e.push(parseFloat(t[1]),parseFloat(t[2]),parseFloat(t[3]),0):e.push(0,0,0,0)}})),A_=cl(y_,{coordinates:il(cc)}),M_=cl(y_,{href:rl(uc)},cl(f_,{x:rl(Cp),y:rl(Cp),w:rl(Cp),h:rl(Cp)})),x_=cl(y_,{Icon:rl(function(t,e){return(t=hl({},M_,t,e))?t:null}),heading:rl(Cp),hotSpot:rl(function(t){var e=t.getAttribute("xunits"),o=t.getAttribute("yunits"),i="insetPixels"!==e?"insetPixels"!==o?"bottom-left":"top-left":"insetPixels"!==o?"bottom-right":"top-right";return{x:parseFloat(t.getAttribute("x")),Xg:g_[e],y:parseFloat(t.getAttribute("y")),Yg:g_[o],origin:i}}),scale:rl(hc)}),R_=cl(y_,{LinearRing:il(dc)}),I_=cl(y_,{color:rl(pc),scale:rl(hc)}),T_=cl(y_,{color:rl(pc),width:rl(Cp)}),L_=cl(y_,{LineString:ol(yc),LinearRing:ol(gc),MultiGeometry:ol(mc),Point:ol(vc),Polygon:ol(_c)}),G_=cl(f_,{Track:ol(fc)}),O_=cl(y_,{ExtendedData:Sc,Region:wc,Link:function(t,e){ul(N_,t,e)},address:rl(Rp),description:rl(Rp),name:rl(Rp),open:rl(Sp),phoneNumber:rl(Rp),visibility:rl(Sp)}),N_=cl(y_,{href:rl(uc)}),k_=cl(y_,{LinearRing:il(dc)}),D_=cl(y_,{Style:rl(bc),key:rl(Rp),styleUrl:rl(uc)}),j_=cl(y_,{ExtendedData:Sc,Region:wc,MultiGeometry:rl(mc,"geometry"),LineString:rl(yc,"geometry"),LinearRing:rl(gc,"geometry"),Point:rl(vc,"geometry"),Polygon:rl(_c,"geometry"),Style:rl(bc),StyleMap:function(t,e){(t=hl(void 0,V_,t,e))&&(e=e[e.length-1],Array.isArray(t)?e.Style=t:"string"==typeof t?e.styleUrl=t:y(!1,38))},address:rl(Rp),description:rl(Rp),name:rl(Rp),open:rl(Sp),phoneNumber:rl(Rp),styleUrl:rl(uc),visibility:rl(Sp)},cl(f_,{MultiTrack:rl(function(t,e){if(t=hl([],G_,t,e))return e=new xl(null),Il(e,t),e},"geometry"),Track:rl(fc,"geometry")})),F_=cl(y_,{color:rl(pc),fill:rl(Sp),outline:rl(Sp)}),U_=cl(y_,{SimpleData:function(t,e){var o=t.getAttribute("name");null!==o&&(t=Rp(t),e[e.length-1][o]=t)}}),B_=cl(y_,{IconStyle:function(t,e){if(t=hl({},x_,t,e)){e=e[e.length-1];var o,i="Icon"in t?t.Icon:{},n=!("Icon"in t)||0<Object.keys(i).length,r=i.href;r?o=r:n&&(o=s_);var r="bottom-left",s=t.hotSpot;if(s){var a=[s.x,s.y],l=s.Xg,p=s.Yg;r=s.origin}else o===s_?(a=o_,l=i_,p=n_):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(a=[.5,0],p=l="fraction");var c,s=i.x,u=i.y;void 0!==s&&void 0!==u&&(c=[s,u]);var h,s=i.w,i=i.h;void 0!==s&&void 0!==i&&(h=[s,i]);var d,i=t.heading;void 0!==i&&(d=P(i)),t=t.scale,n?(o==s_&&(h=r_,void 0===t&&(t=a_)),o=new ic({anchor:a,anchorOrigin:r,anchorXUnits:l,anchorYUnits:p,crossOrigin:"anonymous",offset:c,offsetOrigin:"bottom-left",rotation:d,scale:t,size:h,src:o}),e.imageStyle=o):e.imageStyle=p_}},LabelStyle:function(t,e){(t=hl({},I_,t,e))&&(e[e.length-1].textStyle=new nc({fill:new Ba({color:"color"in t?t.color:t_}),scale:t.scale}))},LineStyle:function(t,e){(t=hl({},T_,t,e))&&(e[e.length-1].strokeStyle=new xs({color:"color"in t?t.color:t_,width:"width"in t?t.width:1}))},PolyStyle:function(t,e){if(t=hl({},F_,t,e)){e=e[e.length-1],e.fillStyle=new Ba({color:"color"in t?t.color:t_});var o=t.fill;void 0!==o&&(e.fill=o),t=t.outline,void 0!==t&&(e.outline=t)}}}),V_=cl(y_,{Pair:function(t,e){if(t=hl({},D_,t,e)){var o=t.key;o&&"normal"==o&&((o=t.styleUrl)&&(e[e.length-1]=o),(t=t.Style)&&(e[e.length-1]=t))}}});cg=rc.prototype,cg.vg=function(t,e){if(t=hl([],cl(y_,{Document:el(this.vg,this),Folder:el(this.vg,this),Placemark:ol(this.Dg,this),Style:this.Jp.bind(this),StyleMap:this.Ip.bind(this)}),t,e,this))return t},cg.Dg=function(t,e){var o=hl({geometry:null},j_,t,e);if(o){var i=new Ya;return t=t.getAttribute("id"),null!==t&&i.jc(t),e=e[0],(t=o.geometry)&&bl(t,!1,e),i.Ra(t),delete o.geometry,this.c&&i.hg(ac(o.Style,o.styleUrl,this.a,this.b,this.g)),delete o.Style,i.H(o),i}},cg.Jp=function(t,e){var o=t.getAttribute("id");null!==o&&(e=bc(t,e))&&(t=t.baseURI&&"about:blank"!==t.baseURI?new URL("#"+o,t.baseURI).href:"#"+o,this.b[t]=e)},cg.Ip=function(t,e){var o=t.getAttribute("id");null!==o&&(e=hl(void 0,V_,t,e))&&(t=t.baseURI&&"about:blank"!==t.baseURI?new URL("#"+o,t.baseURI).href:"#"+o,this.b[t]=e)},cg.xg=function(t,e){return o(y_,t.namespaceURI)&&(t=this.Dg(t,[vl(this,t,e)]))?t:null},cg.zc=function(t,e){if(!o(y_,t.namespaceURI))return[];var i=t.localName;if("Document"==i||"Folder"==i)return(i=this.vg(t,[vl(this,t,e)]))?i:[];if("Placemark"==i)return(e=this.Dg(t,[vl(this,t,e)]))?[e]:[];if("kml"==i){for(i=[],t=t.firstElementChild;t;t=t.nextElementSibling){var r=this.zc(t,e);r&&n(i,r)}return i}return[]},cg.Cp=function(t){return Qa(t)?Pc(this,t):$a(t)?Cc(this,t):"string"==typeof t?(t=tl(t),Pc(this,t)):void 0},cg.Dp=function(t){var e=[];return Qa(t)?n(e,Ac(this,t)):$a(t)?n(e,Mc(this,t)):"string"==typeof t&&(t=tl(t),n(e,Ac(this,t))),e},cg.Gp=function(t){var e=[];return Qa(t)?n(e,xc(this,t)):$a(t)?n(e,this.lf(t)):"string"==typeof t&&(t=tl(t),n(e,xc(this,t))),e},cg.lf=function(t){var e,i=[];for(e=t.firstElementChild;e;e=e.nextElementSibling)if(o(y_,e.namespaceURI)&&"Region"==e.localName){var r=hl({},__,e,[]);i.push(r)}for(e=t.firstElementChild;e;e=e.nextElementSibling)t=e.localName,!o(y_,e.namespaceURI)||"Document"!=t&&"Folder"!=t&&"kml"!=t||n(i,this.lf(e));return i};var W_=cl(y_,["Document","Placemark"]),z_=cl(y_,{Document:sl(function(t,e,o){fl({node:t},q_,Dc,e,o,void 0,this)}),Placemark:sl(Lc)}),q_=cl(y_,{Placemark:sl(Lc)}),H_=cl(y_,{Data:sl(function(t,e,o){t.setAttribute("name",e.name),t={node:t},e=e.value,"object"==typeof e?(null!==e&&e.displayName&&fl(t,H_,sv,[e.displayName],o,["displayName"]),null!==e&&e.value&&fl(t,H_,sv,[e.value],o,["value"])):fl(t,H_,sv,[e],o,["value"])}),value:sl(function(t,e){Gp(t,e)}),displayName:sl(function(t,e){t.appendChild(rv.createCDATASection(e))})}),Y_={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Z_=cl(y_,["href"],cl(f_,["x","y","w","h"])),K_=cl(y_,{href:sl(Gp)},cl(f_,{x:sl(Tp),y:sl(Tp),w:sl(Tp),h:sl(Tp)})),X_=cl(y_,["scale","heading","Icon","hotSpot"]),J_=cl(y_,{Icon:sl(function(t,e,o){t={node:t};var i=Z_[o[o.length-1].node.namespaceURI],n=pl(e,i);fl(t,K_,sv,n,o,i),i=Z_[f_[0]],n=pl(e,i),fl(t,K_,kc,n,o,i)}),heading:sl(Tp),hotSpot:sl(function(t,e){t.setAttribute("x",e.x),t.setAttribute("y",e.y),t.setAttribute("xunits",e.Xg),t.setAttribute("yunits",e.Yg)}),scale:sl(Nc)}),Q_=cl(y_,["color","scale"]),$_=cl(y_,{color:sl(Rc),scale:sl(Nc)}),tb=cl(y_,["color","width"]),eb=cl(y_,{color:sl(Rc),width:sl(Tp)}),ob=cl(y_,{LinearRing:sl(Gc)}),ib=cl(y_,{LineString:sl(Gc),Point:sl(Gc),Polygon:sl(Oc),GeometryCollection:sl(Ic)}),nb=cl(y_,"name open visibility address phoneNumber description styleUrl Style".split(" ")),rb=cl(y_,{ExtendedData:sl(function(t,e,o){t={node:t};var i=e.names;e=e.values;for(var n=i.length,r=0;r<n;r++)fl(t,H_,db,[{name:i[r],value:e[r]}],o)}),MultiGeometry:sl(Ic),LineString:sl(Gc),LinearRing:sl(Gc),Point:sl(Gc),Polygon:sl(Oc),Style:sl(function(t,e,o){t={node:t};var i={},n=e.Fa(),r=e.Ga(),s=e.Y();e=e.Na(),s instanceof ic&&(i.IconStyle=s),e&&(i.LabelStyle=e),r&&(i.LineStyle=r),n&&(i.PolyStyle=n),e=pb[o[o.length-1].node.namespaceURI],i=pl(i,e),fl(t,cb,sv,i,o,e)}),address:sl(Gp),description:sl(Gp),name:sl(Gp),open:sl(Ip),phoneNumber:sl(Gp),styleUrl:sl(Gp),visibility:sl(Ip)}),sb=cl(y_,{coordinates:sl(function(t,e,o){o=o[o.length-1];var i=o.layout;o=o.stride;var n;"XY"==i||"XYM"==i?n=2:"XYZ"==i||"XYZM"==i?n=3:y(!1,34);var r,s=e.length,a="";if(0<s){for(a+=e[0],i=1;i<n;++i)a+=","+e[i];for(r=o;r<s;r+=o)for(a+=" "+e[r],i=1;i<n;++i)a+=","+e[r+i]}Gp(t,a)})}),ab=cl(y_,{outerBoundaryIs:sl(Tc),innerBoundaryIs:sl(Tc)}),lb=cl(y_,{color:sl(Rc)}),pb=cl(y_,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),cb=cl(y_,{IconStyle:sl(function(t,e,o){t={node:t};var i={},n=e.ic(),r=e.ye(),s={href:e.b.o};if(n){s.w=n[0],s.h=n[1];var a=e.Hc(),l=e.Oc();l&&r&&l[0]&&l[1]!==n[1]&&(s.x=l[0],s.y=r[1]-(l[1]+n[1])),a&&a[0]&&a[1]!==n[1]&&(i.hotSpot={x:a[0],Xg:"pixels",y:n[1]-a[1],Yg:"pixels"})}i.Icon=s,n=e.a,1!==n&&(i.scale=n),(e=e.g)&&(i.heading=e),e=X_[o[o.length-1].node.namespaceURI],i=pl(i,e),fl(t,J_,sv,i,o,e)}),LabelStyle:sl(function(t,e,o){t={node:t};var i={},n=e.Fa();n&&(i.color=n.b),(e=e.b)&&1!==e&&(i.scale=e),e=Q_[o[o.length-1].node.namespaceURI],i=pl(i,e),fl(t,$_,sv,i,o,e)}),LineStyle:sl(function(t,e,o){t={node:t};var i=tb[o[o.length-1].node.namespaceURI];e=pl({color:e.a,width:e.c},i),fl(t,eb,sv,e,o,i)}),PolyStyle:sl(function(t,e,o){fl({node:t},lb,ub,[e.b],o)})}),ub=ll("color"),hb=ll("coordinates"),db=ll("Data"),fb=ll("ExtendedData"),yb=ll("innerBoundaryIs"),gb=ll("Point"),mb=ll("LineString"),vb=ll("LinearRing"),_b=ll("Polygon"),bb=ll("outerBoundaryIs");rc.prototype.Xb=function(t,e){e=_l(this,e);var o=Ka(y_[4],"kml");o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:gx",f_[0]),o.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance"),o.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var i={node:o},n={};return 1<t.length?n.Document=t:1==t.length&&(n.Placemark=t[0]),t=W_[o.namespaceURI],n=pl(n,t),fl(i,z_,sv,n,[e],t,this),o},Bm.Dd=function(){},function(t){function e(t){this.lc=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.type=this.ea=0,this.length=this.lc.length}function o(t,e,o){var n=o.lc,r=n[o.ea++],s=(112&r)>>4;if(128>r)return i(t,s,e);if(r=n[o.ea++],s|=(127&r)<<3,128>r)return i(t,s,e);if(r=n[o.ea++],s|=(127&r)<<10,128>r)return i(t,s,e);if(r=n[o.ea++],s|=(127&r)<<17,128>r)return i(t,s,e);if(r=n[o.ea++],s|=(127&r)<<24,128>r)return i(t,s,e);if(128>(r=n[o.ea++]))return i(t,s|(1&r)<<31,e);throw Error("Expected varint not more than 10 bytes")}function i(t,e,o){return o?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}var n={read:function(t,e,o,i,n){var r=8*n-i-1,s=(1<<r)-1,a=s>>1,l=-7;n=o?n-1:0;var p=o?-1:1,c=t[e+n];for(n+=p,o=c&(1<<-l)-1,c>>=-l,l+=r;0<l;o=256*o+t[e+n],n+=p,l-=8);for(r=o&(1<<-l)-1,o>>=-l,l+=i;0<l;r=256*r+t[e+n],n+=p,l-=8);if(0===o)o=1-a;else{if(o===s)return r?NaN:1/0*(c?-1:1);r+=Math.pow(2,i),o-=a}return(c?-1:1)*r*Math.pow(2,o-i)},write:function(t,e,o,i,n,r){var s,a=8*r-n-1,l=(1<<a)-1,p=l>>1,c=23===n?Math.pow(2,-24)-Math.pow(2,-77):0;r=i?0:r-1;var u=i?1:-1,h=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(e=isNaN(e)?1:0,i=l):(i=Math.floor(Math.log(e)/Math.LN2),1>e*(s=Math.pow(2,-i))&&(i--,s*=2),e=1<=i+p?e+c/s:e+c*Math.pow(2,1-p),2<=e*s&&(i++,s/=2),i+p>=l?(e=0,i=l):1<=i+p?(e=(e*s-1)*Math.pow(2,n),i+=p):(e=e*Math.pow(2,p-1)*Math.pow(2,n),i=0));8<=n;t[o+r]=255&e,r+=u,e/=256,n-=8);for(i=i<<n|e,a+=n;0<a;t[o+r]=255&i,r+=u,i/=256,a-=8);t[o+r-u]|=128*h}};e.c=0,e.i=1,e.b=2,e.a=5,e.prototype={Ag:function(t,e,o){for(o=o||this.length;this.ea<o;){var i=this.Ka(),n=i>>3,r=this.ea;this.type=7&i,t(n,e,this),this.ea===r&&this.mq(i)}return e},yp:function(){var t=n.read(this.lc,this.ea,!0,23,4);return this.ea+=4,t},up:function(){var t=n.read(this.lc,this.ea,!0,52,8);return this.ea+=8,t},Ka:function(t){var e=this.lc,i=e[this.ea++],n=127&i;return 128>i?n:(i=e[this.ea++],n|=(127&i)<<7,128>i?n:(i=e[this.ea++],n|=(127&i)<<14,128>i?n:(i=e[this.ea++],n|=(127&i)<<21,128>i?n:(i=e[this.ea],o(n|(15&i)<<28,t,this)))))},Kp:function(){return this.Ka(!0)},ce:function(){var t=this.Ka();return 1==t%2?(t+1)/-2:t/2},sp:function(){return!!this.Ka()},Gg:function(){for(var t=this.Ka()+this.ea,e=this.lc,o="",i=this.ea;i<t;){var n=e[i],r=null,s=239<n?4:223<n?3:191<n?2:1;if(i+s>t)break;if(1===s)128>n&&(r=n);else if(2===s){var a=e[i+1];128==(192&a)&&127>=(r=(31&n)<<6|63&a)&&(r=null)}else if(3===s){a=e[i+1];var l=e[i+2];128==(192&a)&&128==(192&l)&&(2047>=(r=(15&n)<<12|(63&a)<<6|63&l)||55296<=r&&57343>=r)&&(r=null)}else if(4===s){a=e[i+1],l=e[i+2];var p=e[i+3];128==(192&a)&&128==(192&l)&&128==(192&p)&&(65535>=(r=(15&n)<<18|(63&a)<<12|(63&l)<<6|63&p)||1114112<=r)&&(r=null)}null===r?(r=65533,s=1):65535<r&&(r-=65536,o+=String.fromCharCode(r>>>10&1023|55296),r=56320|1023&r),o+=String.fromCharCode(r),i+=s}return this.ea=t,o},mq:function(t){if((t&=7)===e.c)for(;127<this.lc[this.ea++];);else if(t===e.b)this.ea=this.Ka()+this.ea;else if(t===e.a)this.ea+=4;else{if(t!==e.i)throw Error("Unimplemented type: "+t);this.ea+=8}}},t.default=e}(Bm.Dd=Bm.Dd||{}),Bm.Dd=Bm.Dd.default,Bm.xf={},Bm.xf.Bf=function(){},function(t){function e(t,e){this.layers=t.Ag(l,{},e)}function o(t,e){this.x=t,this.y=e}function i(t,e,o,i,r){this.properties={},this.extent=o,this.type=0,this.Cc=t,this.Ef=-1,this.ne=i,this.pe=r,t.Ag(n,this,e)}function n(t,e,o){if(1==t)e.id=o.Ka();else if(2==t)for(t=o.Ka()+o.ea;o.ea<t;){var i=e.ne[o.Ka()],n=e.pe[o.Ka()];e.properties[i]=n}else 3==t?e.type=o.Ka():4==t&&(e.Ef=o.ea)}function r(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this.Cc=t,this.ne=[],this.pe=[],this.me=[],t.Ag(s,this,e),this.length=this.me.length}function s(t,e,o){15===t?e.version=o.Ka():1===t?e.name=o.Gg():5===t?e.extent=o.Ka():2===t?e.me.push(o.ea):3===t?e.ne.push(o.Gg()):4===t&&e.pe.push(a(o))}function a(t){for(var e=null,o=t.Ka()+t.ea;t.ea<o;)e=t.Ka()>>3,e=1===e?t.Gg():2===e?t.yp():3===e?t.up():4===e?t.Kp():5===e?t.Ka():6===e?t.ce():7===e?t.sp():null;return e}function l(t,e,o){3===t&&(t=new p(o,o.Ka()+o.ea),t.length&&(e[t.name]=t))}o.prototype={clone:function(){return new o(this.x,this.y)},add:function(t){return this.clone().Yj(t)},rotate:function(t){return this.clone().hk(t)},round:function(){return this.clone().ik()},angle:function(){return Math.atan2(this.y,this.x)},Yj:function(t){return this.x+=t.x,this.y+=t.y,this},hk:function(t){var e=Math.cos(t);t=Math.sin(t);var o=t*this.x+e*this.y;return this.x=e*this.x-t*this.y,this.y=o,this},ik:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},o.Kq=function(t){return t instanceof o?t:Array.isArray(t)?new o(t[0],t[1]):t},i.b=["Unknown","Point","LineString","Polygon"],i.prototype.Oh=function(){var t=this.Cc;t.ea=this.Ef;for(var e,i=t.Ka()+t.ea,n=1,r=0,s=0,a=0,l=[];t.ea<i;)if(r||(r=t.Ka(),n=7&r,r>>=3),r--,1===n||2===n)s+=t.ce(),a+=t.ce(),1===n&&(e&&l.push(e),e=[]),e.push(new o(s,a));else{if(7!==n)throw Error("unknown command "+n);e&&e.push(e[0].clone())}return e&&l.push(e),l},i.prototype.bbox=function(){var t=this.Cc;t.ea=this.Ef;for(var e=t.Ka()+t.ea,o=1,i=0,n=0,r=0,s=1/0,a=-1/0,l=1/0,p=-1/0;t.ea<e;)if(i||(i=t.Ka(),o=7&i,i>>=3),i--,1===o||2===o)n+=t.ce(),r+=t.ce(),n<s&&(s=n),n>a&&(a=n),r<l&&(l=r),r>p&&(p=r);else if(7!==o)throw Error("unknown command "+o);return[s,l,a,p]};var p=r;r.prototype.feature=function(t){if(0>t||t>=this.me.length)throw Error("feature index out of bounds");return this.Cc.ea=this.me[t],t=this.Cc.Ka()+this.Cc.ea,new i(this.Cc,t,this.extent,this.ne,this.pe)};var c=p;t.default={Bf:e,Wj:i,Xj:c},t.Bf=e,t.Wj=i,t.Xj=c}(Bm.xf=Bm.xf||{}),cg=Fc.prototype,cg.get=function(t){return this.c[t]},cg.Bb=function(){return this.f},cg.G=function(){return this.a||(this.a="Point"===this.i?B(this.b):V(this.b,0,this.b.length,2)),this.a},cg.Wn=function(){return this.g},cg.ec=function(){return this.b},cg.ga=Fc.prototype.ec,cg.V=function(){return this},cg.Xn=function(){return this.c},cg.Vd=Fc.prototype.V,cg.qa=function(){return 2},cg.Lc=h,cg.U=function(){return this.i},u(Uc,ml),cg=Uc.prototype,cg.U=function(){return"arraybuffer"},cg.Oa=function(t,e){var o=this.c;t=new Bm.Dd(t),t=new Bm.xf.Bf(t);var i,n=[],r=this.b;for(i in t.layers)if(!o||-1!=o.indexOf(i))for(var s=t.layers[i],a=0,l=s.length;a<l;++a){if(r===Fc){var p=void 0,c=s.feature(a),u=i,h=c.Oh(),d=[],f=[];Bc(h,f,d);var y=c.type;1===y?p=1===h.length?"Point":"MultiPoint":2===y?p=1===h.length?"LineString":"MultiLineString":3===y&&(p="Polygon"),h=c.properties,h[this.i]=u,p=new this.b(p,f,d,h,c.id)}else{if(y=s.feature(a),f=i,d=e,p=new this.b,c=y.id,u=y.properties,u[this.i]=f,this.a&&p.Tc(this.a),f=void 0,0===(h=y.type))f=null;else{var y=y.Oh(),g=[],m=[];Bc(y,m,g),1===h?f=1===y.length?new Mi(null):new Tl(null):2===h?f=1===y.length?new Al(null):new xl(null):3===h&&(f=new Fi(null)),f.ba("XY",m,g)}d=bl(f,!1,_l(this,d)),p.Ra(d),p.jc(c),p.H(u)}n.push(p)}return n},cg.kb=function(){return this.defaultDataProjection},cg.mn=function(t){this.c=t},cg.Tb=function(){},cg.Sc=function(){},cg.Bd=function(){},cg.$c=function(){},cg.Wb=function(){},u(Vc,vp);var Eb=[null],Sb=cl(Eb,{nd:function(t,e){e[e.length-1].md.push(t.getAttribute("ref"))},tag:Wc}),wb=cl(Eb,{node:function(t,e){var o=e[0],i=e[e.length-1],n=t.getAttribute("id"),r=[parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))];i.Sh[n]=r,t=hl({fe:{}},Pb,t,e),ct(t.fe)||(r=new Mi(r),bl(r,!1,o),o=new Ya(r),o.jc(n),o.H(t.fe),i.features.push(o))},way:function(t,e){var o=e[0],i=t.getAttribute("id");t=hl({md:[],fe:{}},Sb,t,e),e=e[e.length-1];for(var r=[],s=0,a=t.md.length;s<a;s++)n(r,e.Sh[t.md[s]]);t.md[0]==t.md[t.md.length-1]?(s=new Fi(null),s.ba("XY",r,[r.length])):(s=new Al(null),s.ba("XY",r)),bl(s,!1,o),o=new Ya(s),o.jc(i),o.H(t.fe),e.features.push(o)}}),Pb=cl(Eb,{tag:Wc});Vc.prototype.zc=function(t,e){return e=vl(this,t,e),"osm"==t.localName&&(t=hl({Sh:{},features:[]},wb,t,[e]),t.features)?t.features:[]},Vc.prototype.Vg=function(){},Vc.prototype.Xb=function(){},Vc.prototype.ie=function(){},qc.prototype.read=function(t){return Qa(t)?this.a(t):$a(t)?this.b(t):"string"==typeof t?(t=tl(t),this.a(t)):null},u(Hc,qc),Hc.prototype.a=function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.b(t);return null},Hc.prototype.b=function(t){return(t=hl({},Ab,t,[]))?t:null};var Cb=[null,"http://www.opengis.net/ows/1.1"],Ab=cl(Cb,{ServiceIdentification:rl(function(t,e){return hl({},jb,t,e)}),ServiceProvider:rl(function(t,e){return hl({},Fb,t,e)}),OperationsMetadata:rl(function(t,e){return hl({},Ob,t,e)})}),Mb=cl(Cb,{DeliveryPoint:rl(Rp),City:rl(Rp),AdministrativeArea:rl(Rp),PostalCode:rl(Rp),Country:rl(Rp),ElectronicMailAddress:rl(Rp)}),xb=cl(Cb,{Value:nl(function(t){return Rp(t)})}),Rb=cl(Cb,{AllowedValues:rl(function(t,e){return hl({},xb,t,e)})}),Ib=cl(Cb,{Phone:rl(function(t,e){return hl({},Nb,t,e)}),Address:rl(function(t,e){return hl({},Mb,t,e)})}),Tb=cl(Cb,{HTTP:rl(function(t,e){return hl({},Lb,t,e)})}),Lb=cl(Cb,{Get:nl(function(t,e){var o=zc(t);if(o)return hl({href:o},kb,t,e)}),Post:void 0}),Gb=cl(Cb,{DCP:rl(function(t,e){return hl({},Tb,t,e)})}),Ob=cl(Cb,{Operation:function(t,e){var o=t.getAttribute("name");(t=hl({},Gb,t,e))&&(e[e.length-1][o]=t)}}),Nb=cl(Cb,{Voice:rl(Rp),Facsimile:rl(Rp)}),kb=cl(Cb,{Constraint:nl(function(t,e){var o=t.getAttribute("name");if(o)return hl({name:o},Rb,t,e)})}),Db=cl(Cb,{IndividualName:rl(Rp),PositionName:rl(Rp),ContactInfo:rl(function(t,e){return hl({},Ib,t,e)})}),jb=cl(Cb,{Title:rl(Rp),
ServiceTypeVersion:rl(Rp),ServiceType:rl(Rp)}),Fb=cl(Cb,{ProviderName:rl(Rp),ProviderSite:rl(zc),ServiceContact:rl(function(t,e){return hl({},Db,t,e)})});u(Zc,Qp),cg=Zc.prototype,cg.ae=function(t,e){return t=this.wd(t,e),new Ya(t)},cg.zg=function(t,e){return[this.ae(t,e)]},cg.wd=function(t,e){var o=li(this.a);return t=Xc(t,o,this.b),Yc(t,t.length,o,t),o=Ei(t,0,t.length,o),bl(new Al(o,this.a),!1,_l(this,e))},cg.ge=function(t,e){return(t=t.V())?this.Cd(t,e):(y(!1,40),"")},cg.Wg=function(t,e){return this.ge(t[0],e)},cg.Cd=function(t,e){return t=bl(t,!0,_l(this,e)),e=t.ga(),t=t.qa(),Yc(e,e.length,t,e),Kc(e,t,this.b)},u($c,El),$c.prototype.yg=function(t,e){if("Topology"==t.type){var o=null,i=null;if(t.transform){var n=t.transform;o=n.scale,i=n.translate}var r=t.arcs;if(n){n=o;var s,a=i,l=0;for(s=r.length;l<s;++l){var p,c=r[l],u=n,h=a,d=0,f=0,y=0;for(p=c.length;y<p;++y){var g=c[y];d+=g[0],f+=g[1],g[0]=d,g[1]=f,iu(g,u,h)}}}n=[],t=t.objects;var m,a=this.a;for(m in t)this.b&&-1==this.b.indexOf(m)||("GeometryCollection"===t[m].type?(l=t[m],n.push.apply(n,eu(l,r,o,i,a,m,e))):(l=t[m],n.push(ou(l,r,o,i,a,m,e))));return n}return[]},$c.prototype.Fg=function(){return this.defaultDataProjection};var Ub={Point:function(t,e,o){return t=t.coordinates,e&&o&&iu(t,e,o),new Mi(t)},LineString:function(t,e){return t=tu(t.arcs,e),new Al(t)},Polygon:function(t,e){var o,i=[],n=0;for(o=t.arcs.length;n<o;++n)i[n]=tu(t.arcs[n],e);return new Fi(i)},MultiPoint:function(t,e,o){t=t.coordinates;var i;if(e&&o){var n=0;for(i=t.length;n<i;++n)iu(t[n],e,o)}return new Tl(t)},MultiLineString:function(t,e){var o,i=[],n=0;for(o=t.arcs.length;n<o;++n)i[n]=tu(t.arcs[n],e);return new xl(i)},MultiPolygon:function(t,e){var o,i,n=[],r=0;for(i=t.arcs.length;r<i;++r){var s=t.arcs[r],a=[],l=0;for(o=s.length;l<o;++l)a[l]=tu(s[l],e);n[r]=a}return new Ll(n)}};cg=$c.prototype,cg.Zc=function(){},cg.he=function(){},cg.je=function(){},cg.Cg=function(){},cg.Rc=function(){},u(nu,vp);var Bb={"1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"};nu.prototype.zc=function(t,e){var o={featureType:this.c,featureNS:this.a};return mg(o,vl(this,t,e||{})),e=[o],this.b.b["http://www.opengis.net/gml"].featureMember=ol(Ep.prototype.be),(t=hl([],this.b.b,t,e,this.b))||(t=[]),t},nu.prototype.j=function(t){return Qa(t)?au(t):$a(t)?hl({},Hb,t,[]):"string"==typeof t?(t=tl(t),au(t)):void 0},nu.prototype.g=function(t){return Qa(t)?ru(this,t):$a(t)?su(this,t):"string"==typeof t?(t=tl(t),ru(this,t)):void 0};var Vb={"http://www.opengis.net/gml":{boundedBy:rl(Ep.prototype.gf,"bounds")}},Wb={"http://www.opengis.net/wfs":{totalInserted:rl(Mp),totalUpdated:rl(Mp),totalDeleted:rl(Mp)}},zb={"http://www.opengis.net/ogc":{FeatureId:ol(function(t){return t.getAttribute("fid")})}},qb={"http://www.opengis.net/wfs":{Feature:function(t,e){ul(zb,t,e)}}},Hb={"http://www.opengis.net/wfs":{TransactionSummary:rl(function(t,e){return hl({},Wb,t,e)},"transactionSummary"),InsertResults:rl(function(t,e){return hl([],qb,t,e)},"insertIds")}},Yb={"http://www.opengis.net/wfs":{PropertyName:sl(Gp)}},Zb={"http://www.opengis.net/wfs":{Insert:sl(function(t,e,o){var i=o[o.length-1],n=i.gmlVersion,i=Ka(i.featureNS,i.featureType);if(t.appendChild(i),2===n){t=kp.prototype,(n=e.a)&&i.setAttribute("fid",n);var n=o[o.length-1],r=n.featureNS,s=e.c;n.lb||(n.lb={},n.lb[r]={});var a=e.N();e=[];var l=[];for(c in a){var p=a[c];null!==p&&(e.push(c),l.push(p),c==s||p instanceof ni?c in n.lb[r]||(n.lb[r][c]=sl(t.ai,t)):c in n.lb[r]||(n.lb[r][c]=sl(Gp)))}var c=mg({},n);c.node=i,fl(c,n.lb,ll(void 0,r),l,o,e)}else Op.prototype.ii(i,e,o)}),Update:sl(function(t,e,o){var i=o[o.length-1];y(void 0!==e.a,27);var n=i.featurePrefix,r=i.featureNS;if(t.setAttribute("typeName",pu(n,i.featureType)),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+n,r),void 0!==(n=e.a)){for(var r=e.O(),s=[],a=0,l=r.length;a<l;a++){var p=e.get(r[a]);void 0!==p&&s.push({name:r[a],value:p})}fl({gmlVersion:i.gmlVersion,node:t,hasZ:i.hasZ,srsName:i.srsName},Zb,ll("Property"),s,o),lu(t,n)}}),Delete:sl(function(t,e,o){o=o[o.length-1],y(void 0!==e.a,26);var i=o.featurePrefix,n=o.featureNS;t.setAttribute("typeName",pu(i,o.featureType)),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+i,n),void 0!==(e=e.a)&&lu(t,e)}),Property:sl(function(t,e,o){var i=Ka("http://www.opengis.net/wfs","Name"),n=o[o.length-1].gmlVersion;t.appendChild(i),Gp(i,e.name),void 0!==e.value&&null!==e.value&&(i=Ka("http://www.opengis.net/wfs","Value"),t.appendChild(i),e.value instanceof ni?2===n?kp.prototype.ai(i,e.value,o):Op.prototype.od(i,e.value,o):Gp(i,e.value))}),Native:sl(function(t,e){e.vq&&t.setAttribute("vendorId",e.vq),void 0!==e.Vp&&t.setAttribute("safeToIgnore",e.Vp),void 0!==e.value&&Gp(t,e.value)})}},Kb={"http://www.opengis.net/wfs":{Query:sl(function(t,e,o){var i=o[o.length-1],n=i.featurePrefix,r=i.featureNS,s=i.propertyNames,a=i.srsName;t.setAttribute("typeName",n?pu(n,e):e),a&&t.setAttribute("srsName",a),r&&t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:"+n,r),e=mg({},i),e.node=t,fl(e,Yb,ll("PropertyName"),s,o),(i=i.filter)&&(s=Ka("http://www.opengis.net/ogc","Filter"),t.appendChild(s),fl({node:s},Kb,ll(i.kc),[i],o))})},"http://www.opengis.net/ogc":{During:sl(function(t,e){var o=Ka("http://www.opengis.net/fes","ValueReference");Gp(o,e.b),t.appendChild(o),o=Ka("http://www.opengis.net/gml","TimePeriod"),t.appendChild(o),t=Ka("http://www.opengis.net/gml","begin"),o.appendChild(t),yu(t,e.a),t=Ka("http://www.opengis.net/gml","end"),o.appendChild(t),yu(t,e.i)}),And:sl(cu),Or:sl(cu),Not:sl(function(t,e,o){e=e.condition,fl({node:t},Kb,ll(e.kc),[e],o)}),BBOX:sl(function(t,e,o){o[o.length-1].srsName=e.srsName,du(t,e.geometryName),Op.prototype.od(t,e.extent,o)}),Intersects:sl(function(t,e,o){o[o.length-1].srsName=e.srsName,du(t,e.geometryName),Op.prototype.od(t,e.geometry,o)}),Within:sl(function(t,e,o){o[o.length-1].srsName=e.srsName,du(t,e.geometryName),Op.prototype.od(t,e.geometry,o)}),PropertyIsEqualTo:sl(uu),PropertyIsNotEqualTo:sl(uu),PropertyIsLessThan:sl(uu),PropertyIsLessThanOrEqualTo:sl(uu),PropertyIsGreaterThan:sl(uu),PropertyIsGreaterThanOrEqualTo:sl(uu),PropertyIsNull:sl(function(t,e){du(t,e.b)}),PropertyIsBetween:sl(function(t,e){du(t,e.b);var o=Ka("http://www.opengis.net/ogc","LowerBoundary");t.appendChild(o),fu(o,""+e.a),o=Ka("http://www.opengis.net/ogc","UpperBoundary"),t.appendChild(o),fu(o,""+e.i)}),PropertyIsLike:sl(function(t,e){t.setAttribute("wildCard",e.g),t.setAttribute("singleChar",e.f),t.setAttribute("escapeChar",e.i),void 0!==e.a&&t.setAttribute("matchCase",e.a.toString()),du(t,e.b),fu(t,""+e.c)})}};nu.prototype.l=function(t){var e=Ka("http://www.opengis.net/wfs","GetFeature");if(e.setAttribute("service","WFS"),e.setAttribute("version","1.1.0"),t){t.handle&&e.setAttribute("handle",t.handle),t.outputFormat&&e.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&e.setAttribute("maxFeatures",t.maxFeatures),t.resultType&&e.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&e.setAttribute("startIndex",t.startIndex),void 0!==t.count&&e.setAttribute("count",t.count);var o=t.filter;if(t.bbox){y(t.geometryName,12);var i=cp(t.geometryName,t.bbox,t.srsName);o=o?pp(o,i):i}}return e.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.o),o={node:e,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.a,featurePrefix:t.featurePrefix,geometryName:t.geometryName,filter:o,propertyNames:t.propertyNames?t.propertyNames:[]},y(Array.isArray(t.featureTypes),11),t=t.featureTypes,o=[o],i=mg({},o[o.length-1]),i.node=e,fl(i,Kb,ll("Query"),t,o),e},nu.prototype.v=function(t,e,o,i){var n=[],r=Ka("http://www.opengis.net/wfs","Transaction"),s=i.version?i.version:"1.1.0",a="1.0.0"===s?2:3;if(r.setAttribute("service","WFS"),r.setAttribute("version",s),i){var l=i.gmlOptions?i.gmlOptions:{};i.handle&&r.setAttribute("handle",i.handle)}return r.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",Bb[s]),t&&(s={node:r,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:i.featurePrefix,gmlVersion:a,hasZ:i.hasZ,srsName:i.srsName},mg(s,l),fl(s,Zb,ll("Insert"),t,n)),e&&(s={node:r,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:i.featurePrefix,gmlVersion:a,hasZ:i.hasZ,srsName:i.srsName},mg(s,l),fl(s,Zb,ll("Update"),e,n)),o&&fl({node:r,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:i.featurePrefix,gmlVersion:a,srsName:i.srsName},Zb,ll("Delete"),o,n),i.nativeElements&&fl({node:r,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:i.featurePrefix,gmlVersion:a,srsName:i.srsName},Zb,ll("Native"),i.nativeElements,n),r},nu.prototype.Eg=function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.kf(t);return null},nu.prototype.kf=function(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild)for(t=t.firstElementChild.firstElementChild,t=t.firstElementChild;t;t=t.nextElementSibling)if(0!==t.childNodes.length&&(1!==t.childNodes.length||3!==t.firstChild.nodeType)){var e=[{}];return this.b.gf(t,e),At(e.pop().srsName)}return null},u(gu,Qp);var Xb={Point:mu,LineString:vu,Polygon:_u,MultiPoint:function(t){var e=[];t=t.Zd();for(var o=0,i=t.length;o<i;++o)e.push("("+mu(t[o])+")");return e.join(",")},MultiLineString:function(t){var e=[];t=t.gd();for(var o=0,i=t.length;o<i;++o)e.push("("+vu(t[o])+")");return e.join(",")},MultiPolygon:function(t){var e=[];t=t.Td();for(var o=0,i=t.length;o<i;++o)e.push("("+_u(t[o])+")");return e.join(",")},GeometryCollection:function(t){var e=[];t=t.Vf();for(var o=0,i=t.length;o<i;++o)e.push(bu(t[o]));return e.join(",")}};cg=gu.prototype,cg.ae=function(t,e){return(t=this.wd(t,e))?(e=new Ya,e.Ra(t),e):null},cg.zg=function(t,e){var o=[];t=this.wd(t,e),o=this.b&&"GeometryCollection"==t.U()?t.a:[t],e=[];for(var i=0,n=o.length;i<n;++i)t=new Ya,t.Ra(o[i]),e.push(t);return e},cg.wd=function(t,e){return t=new wu(new Eu(t)),Pu(t),(t=Au(t))?bl(t,!1,e):null},cg.ge=function(t,e){return(t=t.V())?this.Cd(t,e):""},cg.Wg=function(t,e){if(1==t.length)return this.ge(t[0],e);for(var o=[],i=0,n=t.length;i<n;++i)o.push(t[i].V());return t=new up(o),this.Cd(t,e)},cg.Cd=function(t,e){return bu(bl(t,!0,e))},cg=wu.prototype,cg.tg=function(){if(Cu(this,2)){var t=Mu(this);if(Cu(this,3))return t}else if(Iu(this))return null;throw Error(Tu(this))},cg.sg=function(){if(Cu(this,2)){var t=xu(this);if(Cu(this,3))return t}else if(Iu(this))return[];throw Error(Tu(this))},cg.ug=function(){if(Cu(this,2)){var t=Ru(this);if(Cu(this,3))return t}else if(Iu(this))return[];throw Error(Tu(this))},cg.fp=function(){if(Cu(this,2)){var t;if(2==this.b.type)for(t=[this.tg()];Cu(this,5);)t.push(this.tg());else t=xu(this);if(Cu(this,3))return t}else if(Iu(this))return[];throw Error(Tu(this))},cg.ep=function(){if(Cu(this,2)){var t=Ru(this);if(Cu(this,3))return t}else if(Iu(this))return[];throw Error(Tu(this))},cg.gp=function(){if(Cu(this,2)){for(var t=[this.ug()];Cu(this,5);)t.push(this.ug());if(Cu(this,3))return t}else if(Iu(this))return[];throw Error(Tu(this))};var Jb={POINT:Mi,LINESTRING:Al,POLYGON:Fi,MULTIPOINT:Tl,MULTILINESTRING:xl,MULTIPOLYGON:Ll},Qb={POINT:wu.prototype.tg,LINESTRING:wu.prototype.sg,POLYGON:wu.prototype.ug,MULTIPOINT:wu.prototype.fp,MULTILINESTRING:wu.prototype.ep,MULTIPOLYGON:wu.prototype.gp};u(Lu,qc),Lu.prototype.a=function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.b(t);return null},Lu.prototype.b=function(t){return this.version=t.getAttribute("version").trim(),(t=hl({version:this.version},tE,t,[]))?t:null};var $b=[null,"http://www.opengis.net/wms"],tE=cl($b,{Service:rl(function(t,e){return hl({},oE,t,e)}),Capability:rl(function(t,e){return hl({},eE,t,e)})}),eE=cl($b,{Request:rl(function(t,e){return hl({},cE,t,e)}),Exception:rl(function(t,e){return hl([],sE,t,e)}),Layer:rl(function(t,e){return hl({},aE,t,e)})}),oE=cl($b,{Name:rl(Rp),Title:rl(Rp),Abstract:rl(Rp),KeywordList:rl(ku),OnlineResource:rl(zc),ContactInformation:rl(function(t,e){return hl({},iE,t,e)}),Fees:rl(Rp),AccessConstraints:rl(Rp),LayerLimit:rl(Mp),MaxWidth:rl(Mp),MaxHeight:rl(Mp)}),iE=cl($b,{ContactPersonPrimary:rl(function(t,e){return hl({},nE,t,e)}),ContactPosition:rl(Rp),ContactAddress:rl(function(t,e){return hl({},rE,t,e)}),ContactVoiceTelephone:rl(Rp),ContactFacsimileTelephone:rl(Rp),ContactElectronicMailAddress:rl(Rp)}),nE=cl($b,{ContactPerson:rl(Rp),ContactOrganization:rl(Rp)}),rE=cl($b,{AddressType:rl(Rp),Address:rl(Rp),City:rl(Rp),StateOrProvince:rl(Rp),PostCode:rl(Rp),Country:rl(Rp)}),sE=cl($b,{Format:ol(Rp)}),aE=cl($b,{Name:rl(Rp),Title:rl(Rp),Abstract:rl(Rp),KeywordList:rl(ku),CRS:nl(Rp),EX_GeographicBoundingBox:rl(function(t,e){var o=hl({},pE,t,e);if(o){t=o.westBoundLongitude,e=o.southBoundLatitude;var i=o.eastBoundLongitude,o=o.northBoundLatitude;if(void 0!==t&&void 0!==e&&void 0!==i&&void 0!==o)return[t,e,i,o]}}),BoundingBox:nl(function(t){var e=[Ap(t.getAttribute("minx")),Ap(t.getAttribute("miny")),Ap(t.getAttribute("maxx")),Ap(t.getAttribute("maxy"))],o=[Ap(t.getAttribute("resx")),Ap(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:e,res:o}}),Dimension:nl(function(t){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:wp(t.getAttribute("multipleValues")),nearestValue:wp(t.getAttribute("nearestValue")),current:wp(t.getAttribute("current")),values:Rp(t)}}),Attribution:rl(function(t,e){return hl({},lE,t,e)}),AuthorityURL:nl(function(t,e){if(e=Gu(t,e))return e.name=t.getAttribute("name"),e}),Identifier:nl(Rp),MetadataURL:nl(function(t,e){if(e=Gu(t,e))return e.type=t.getAttribute("type"),e}),DataURL:nl(Gu),FeatureListURL:nl(Gu),Style:nl(function(t,e){return hl({},fE,t,e)}),MinScaleDenominator:rl(Cp),MaxScaleDenominator:rl(Cp),Layer:nl(function(t,e){var o=e[e.length-1],i=hl({},aE,t,e);if(i)return e=wp(t.getAttribute("queryable")),void 0===e&&(e=o.queryable),i.queryable=void 0!==e&&e,e=xp(t.getAttribute("cascaded")),void 0===e&&(e=o.cascaded),i.cascaded=e,e=wp(t.getAttribute("opaque")),void 0===e&&(e=o.opaque),i.opaque=void 0!==e&&e,e=wp(t.getAttribute("noSubsets")),void 0===e&&(e=o.noSubsets),i.noSubsets=void 0!==e&&e,(e=Ap(t.getAttribute("fixedWidth")))||(e=o.fixedWidth),i.fixedWidth=e,(t=Ap(t.getAttribute("fixedHeight")))||(t=o.fixedHeight),i.fixedHeight=t,["Style","CRS","AuthorityURL"].forEach(function(t){t in o&&(i[t]=(i[t]||[]).concat(o[t]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(t){t in i||(i[t]=o[t])}),i})}),lE=cl($b,{Title:rl(Rp),OnlineResource:rl(zc),LogoURL:rl(Nu)}),pE=cl($b,{westBoundLongitude:rl(Cp),eastBoundLongitude:rl(Cp),southBoundLatitude:rl(Cp),northBoundLatitude:rl(Cp)}),cE=cl($b,{GetCapabilities:rl(Ou),GetMap:rl(Ou),GetFeatureInfo:rl(Ou)}),uE=cl($b,{Format:nl(Rp),DCPType:nl(function(t,e){return hl({},hE,t,e)})}),hE=cl($b,{HTTP:rl(function(t,e){return hl({},dE,t,e)})}),dE=cl($b,{Get:rl(Gu),Post:rl(Gu)}),fE=cl($b,{Name:rl(Rp),Title:rl(Rp),Abstract:rl(Rp),LegendURL:nl(Nu),StyleSheetURL:rl(Gu),StyleURL:rl(Gu)}),yE=cl($b,{Format:rl(Rp),OnlineResource:rl(zc)}),gE=cl($b,{Keyword:ol(Rp)});u(Du,vp),Du.prototype.zc=function(t,e){var i={};e&&mg(i,vl(this,t,e)),i=[i],t.setAttribute("namespaceURI",this.a);var r=t.localName;if(e=[],t.childNodes.length){if("msGMLOutput"==r)for(var s=0,a=t.childNodes.length;s<a;s++){var l=t.childNodes[s];if(l.nodeType===Node.ELEMENT_NODE){var p=i[0],c=l.localName.replace("_layer","");if(!this.c||o(this.c,c)){c+="_feature",p.featureType=c,p.featureNS=this.a;var u={};u[c]=ol(this.b.wg,this.b),p=cl([p.featureNS,null],u),l.setAttribute("namespaceURI",this.a),(l=hl([],p,l,i,this.b))&&n(e,l)}}}"FeatureCollection"==r&&(t=hl([],this.b.b,t,[{}],this.b))&&(e=t)}return e},Du.prototype.Vg=function(){},Du.prototype.Xb=function(){},Du.prototype.ie=function(){},u(ju,qc),ju.prototype.a=function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.b(t);return null},ju.prototype.b=function(t){var e=t.getAttribute("version").trim(),o=this.i.b(t);return o?(o.version=e,(o=hl(o,_E,t,[]))?o:null):null};var mE=[null,"http://www.opengis.net/wmts/1.0"],vE=[null,"http://www.opengis.net/ows/1.1"],_E=cl(mE,{Contents:rl(function(t,e){return hl({},bE,t,e)})}),bE=cl(mE,{Layer:nl(function(t,e){return hl({},EE,t,e)}),TileMatrixSet:nl(function(t,e){return hl({},xE,t,e)})}),EE=cl(mE,{Style:nl(function(t,e){if(e=hl({},SE,t,e))return t="true"===t.getAttribute("isDefault"),e.isDefault=t,e}),Format:nl(Rp),TileMatrixSetLink:nl(function(t,e){return hl({},wE,t,e)}),Dimension:nl(function(t,e){return hl({},AE,t,e)}),ResourceURL:nl(function(t){var e=t.getAttribute("format"),o=t.getAttribute("template");t=t.getAttribute("resourceType");var i={};return e&&(i.format=e),o&&(i.template=o),t&&(i.resourceType=t),i})},cl(vE,{Title:rl(Rp),Abstract:rl(Rp),WGS84BoundingBox:rl(function(t,e){if(t=hl([],ME,t,e),2==t.length)return I(t)}),Identifier:rl(Rp)})),SE=cl(mE,{LegendURL:nl(function(t){var e={};return e.format=t.getAttribute("format"),e.href=zc(t),e})},cl(vE,{Title:rl(Rp),Identifier:rl(Rp)})),wE=cl(mE,{TileMatrixSet:rl(Rp),TileMatrixSetLimits:rl(function(t,e){return hl([],PE,t,e)})}),PE=cl(mE,{TileMatrixLimits:ol(function(t,e){return hl({},CE,t,e)})}),CE=cl(mE,{TileMatrix:rl(Rp),MinTileRow:rl(Mp),MaxTileRow:rl(Mp),MinTileCol:rl(Mp),MaxTileCol:rl(Mp)}),AE=cl(mE,{Default:rl(Rp),Value:nl(Rp)},cl(vE,{Identifier:rl(Rp)})),ME=cl(vE,{LowerCorner:ol(Fu),UpperCorner:ol(Fu)}),xE=cl(mE,{WellKnownScaleSet:rl(Rp),TileMatrix:nl(function(t,e){return hl({},RE,t,e)})},cl(vE,{SupportedCRS:rl(Rp),Identifier:rl(Rp)})),RE=cl(mE,{TopLeftCorner:rl(Fu),ScaleDenominator:rl(Cp),TileWidth:rl(Mp),TileHeight:rl(Mp),MatrixWidth:rl(Mp),MatrixHeight:rl(Mp)},cl(vE,{Identifier:rl(Rp)}));u(Uu,ge),cg=Uu.prototype,cg.ka=function(){this.Ke(!1),ge.prototype.ka.call(this)},cg.Am=function(){var t=this.Uh();t&&(this.f=Rt(At("EPSG:4326"),t),this.a&&this.set("position",this.f(this.a)))},cg.Bm=function(){if(Qg){var t=this.Vh();t&&void 0===this.c?this.c=navigator.geolocation.watchPosition(this.np.bind(this),this.op.bind(this),this.Gh()):t||void 0===this.c||(navigator.geolocation.clearWatch(this.c),this.c=void 0)}},cg.np=function(t){t=t.coords,this.set("accuracy",t.accuracy),this.set("altitude",null===t.altitude?void 0:t.altitude),this.set("altitudeAccuracy",null===t.altitudeAccuracy?void 0:t.altitudeAccuracy),this.set("heading",null===t.heading?void 0:P(t.heading)),this.a?(this.a[0]=t.longitude,this.a[1]=t.latitude):this.a=[t.longitude,t.latitude];var e=this.f(this.a);this.set("position",e),this.set("speed",null===t.speed?void 0:t.speed),t=Bi(Cg,this.a,t.accuracy),t.Dc(this.f),this.set("accuracyGeometry",t),this.s()},cg.op=function(t){t.type="error",this.Ke(!1),this.b(t)},cg.Dk=function(){return this.get("accuracy")},cg.Ek=function(){return this.get("accuracyGeometry")||null},cg.Gk=function(){return this.get("altitude")},cg.Hk=function(){return this.get("altitudeAccuracy")},cg.ym=function(){return this.get("heading")},cg.zm=function(){return this.get("position")},cg.Uh=function(){return this.get("projection")},cg.ll=function(){return this.get("speed")},cg.Vh=function(){return this.get("tracking")},cg.Gh=function(){return this.get("trackingOptions")},cg.Wh=function(t){this.set("projection",At(t))},cg.Ke=function(t){this.set("tracking",t)},cg.wj=function(t){this.set("trackingOptions",t)},u(Bu,ai),cg=Bu.prototype,cg.clone=function(){var t=new Bu(null);return pi(t,this.ja,this.A.slice()),t.s(),t},cg.Kb=function(t,e,o,i){var n=this.A;t-=n[0];var r=e-n[1];if((e=t*t+r*r)<i){if(e)for(i=this.pd()/Math.sqrt(e),o[0]=n[0]+i*t,o[1]=n[1]+i*r,i=2;i<this.a;++i)o[i]=n[i];else for(i=0;i<this.a;++i)o[i]=n[i];return o.length=this.a,e}return i},cg.Mc=function(t,e){var o=this.A;return t-=o[0],e-=o[1],t*t+e*e<=Vu(this)},cg.wa=function(){return this.A.slice(0,this.a)},cg.se=function(t){var e=this.A,o=e[this.a]-e[0];return F(e[0]-o,e[1]-o,e[0]+o,e[1]+o,t)},cg.pd=function(){return Math.sqrt(Vu(this))},cg.U=function(){return"Circle"},cg.Xa=function(t){var e=this.G();return!!nt(t,e)&&(e=this.wa(),t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||Y(t,this.sb,this))},cg.ob=function(t){var e=this.a,o=t.slice();o[e]=o[0]+(this.A[e]-this.A[0]);var i;for(i=1;i<e;++i)o[e+i]=t[i];pi(this,this.ja,o),this.s()},cg.Ng=function(t,e,o){if(t){ci(this,o,t,0),this.A||(this.A=[]),o=this.A,t=vi(o,t),o[t++]=o[0]+e;var i;for(e=1,i=this.a;e<i;++e)o[t++]=o[e];o.length=t}else pi(this,"XY",null);this.s()},cg.X=function(){},cg.ma=function(){},cg.Uc=function(t){this.A[this.a]=this.A[0]+t,this.s()};var IE=new xs({color:"rgba(0,0,0,0.2)"}),TE=[90,45,30,20,10,5,2,1,.5,.2,.1,.05,.01,.005,.002,.001];cg=Hu.prototype,cg.Cm=function(){return this.v},cg.al=function(){return this.i},cg.hl=function(){return this.c},cg.Kh=function(t){var e=t.vectorContext,o=t.frameState,i=o.extent;t=o.viewState;var n=t.center,r=t.projection,s=t.resolution;if(t=o.pixelRatio,t=s*s/(4*t*t),!this.j||!Mt(this.j,r)){var a=At("EPSG:4326"),l=r.G(),p=r.g,c=Gt(p,a,r),u=p[2],h=p[1],d=p[0],f=c[3],y=c[2],g=c[1],c=c[0];this.o=p[3],this.f=u,this.l=h,this.g=d,this.oa=f,this.ra=y,this.I=g,this.R=c,this.u=xt(a,r),this.D=xt(r,a),this.S=this.D(J(l)),this.j=r}for(r.i&&(r=r.G(),a=it(r),(o=o.focus[0])<r[0]||o>r[2])&&(o=a*Math.ceil((r[0]-o)/a),i=[i[0]+o,i[1],i[2]+o,i[3]]),o=this.S[0],r=this.S[1],a=-1,p=Math.pow(this.Jb*s,2),u=[],h=[],s=0,l=TE.length;s<l&&(d=TE[s]/2,u[0]=o-d,u[1]=r-d,h[0]=o+d,h[1]=r+d,this.u(u,u),this.u(h,h),!((d=Math.pow(h[0]-u[0],2)+Math.pow(h[1]-u[1],2))<=p));++s)a=TE[s];if(-1==(s=a))this.i.length=this.c.length=0,this.b&&(this.b.length=0),this.a&&(this.a.length=0);else{for(o=this.D(n),n=o[0],o=o[1],r=this.fb,a=[Math.max(i[0],this.R),Math.max(i[1],this.I),Math.min(i[2],this.ra),Math.min(i[3],this.oa)],a=Gt(a,this.j,"EPSG:4326"),p=a[3],h=a[1],n=Math.floor(n/s)*s,u=b(n,this.g,this.f),l=Yu(this,u,h,p,t,i,0),a=0;u!=this.g&&a++<r;)u=Math.max(u-s,this.g),l=Yu(this,u,h,p,t,i,l);for(u=b(n,this.g,this.f),a=0;u!=this.f&&a++<r;)u=Math.min(u+s,this.f),l=Yu(this,u,h,p,t,i,l);for(this.i.length=l,this.b&&(this.b.length=l),o=Math.floor(o/s)*s,n=b(o,this.l,this.o),l=Zu(this,n,t,i,0),a=0;n!=this.l&&a++<r;)n=Math.max(n-s,this.l),l=Zu(this,n,t,i,l);for(n=b(o,this.l,this.o),a=0;n!=this.o&&a++<r;)n=Math.min(n+s,this.o),l=Zu(this,n,t,i,l);this.c.length=l,this.a&&(this.a.length=l)}for(e.Ma(null,this.pa),t=0,n=this.i.length;t<n;++t)s=this.i[t],e.zb(s);for(t=0,n=this.c.length;t<n;++t)s=this.c[t],e.zb(s);if(this.b)for(t=0,n=this.b.length;t<n;++t)s=this.b[t],this.B.xd(s.text),e.Cb(this.B),e.zb(s.Qd);if(this.a)for(t=0,n=this.a.length;t<n;++t)s=this.a[t],this.C.xd(s.text),e.Cb(this.C),e.zb(s.Qd)},cg.setMap=function(t){this.v&&(this.v.K("postcompose",this.Kh,this),this.v.render()),t&&(t.J("postcompose",this.Kh,this),t.render()),this.v=t},u(Ku,de),Ku.prototype.s=function(){this.b("change")},Ku.prototype.G=function(){return this.extent},Ku.prototype.getState=function(){return this.state},u(Xu,Ku),cg=Xu.prototype,cg.Y=function(t){if(void 0!==t){var e;return(t=d(t))in this.c?this.c[t]:(e=ct(this.c)?this.M:this.M.cloneNode(!1),this.c[t]=e)}return this.M},cg.Fm=function(){this.state=3,this.i.forEach(ae),this.i=null,this.s()},cg.Gm=function(){void 0===this.resolution&&(this.resolution=$(this.extent)/this.M.height),this.state=2,this.i.forEach(ae),this.i=null,this.s()},cg.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.s(),this.i=[re(this.M,"error",this.Fm,this),re(this.M,"load",this.Gm,this)],this.g(this,this.j))},cg.Og=function(t){this.M=t},u(Ju,Ku),Ju.prototype.g=function(t){this.state=t?3:2,this.s()},Ju.prototype.load=function(){0==this.state&&(this.state=1,this.s(),this.c(this.g.bind(this)))},Ju.prototype.Y=function(){return this.i},u(Qu,de),Qu.prototype.s=function(){this.b("change")},Qu.prototype.bb=function(){return this.key+"/"+this.ta},Qu.prototype.f=function(){return this.ta},Qu.prototype.getState=function(){return this.state},u(eh,Qu),cg=eh.prototype,cg.ka=function(){1==this.state&&oh(this),this.i&&ce(this.i),this.state=5,this.s(),Qu.prototype.ka.call(this)},cg.Y=function(){return this.M},cg.bb=function(){return this.g},cg.Dm=function(){this.state=3,this.M=LE,oh(this),this.s()},cg.Em=function(){this.state=this.M.naturalWidth&&this.M.naturalHeight?2:4,oh(this),this.s()},cg.load=function(){0!=this.state&&3!=this.state||(this.state=1,this.s(),this.c=[re(this.M,"error",this.Dm,this),re(this.M,"load",this.Em,this)],this.j(this,this.g))};var LE=new Image;LE.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",u(ih,sn),ih.prototype.j=function(t,e){e=e.target.result;var o=this.v,i=this.o;i||(i=o.Z().v);var n,o=this.g,r=[],s=0;for(n=o.length;s<n;++s){var a=new o[s],l={featureProjection:i};try{r=a.Oa(e,l)}catch(t){r=null}if(r&&0<r.length)break}this.b(new lh(GE,t,r,i))},ih.prototype.Ha=function(t){sn.prototype.Ha.call(this,t),t?sh(this):ah(this)},ih.prototype.setMap=function(t){ah(this),sn.prototype.setMap.call(this,t),this.c()&&sh(this)};var GE="addfeatures";u(lh,ue),u(ph,En),u(dh,xr),dh.prototype.Va=function(t,e){if(this.R){var o=fr(this.T,this.R.slice());t.translate(o[0],o[1]),t.rotate(e)}t.fill(),this.R&&t.setTransform.apply(t,this.na)},dh.prototype.La=function(t,e,o,i,n){gh(this,t,e,o,i,n,this.a,void 0,void 0)},dh.prototype.Te=h,dh.prototype.Sf=function(){return this.Ua},u(_h,dh),_h.prototype.qc=function(t,e){if(this.M){yh(this,e);var o=t.ga(),i=this.coordinates.length;t=fh(this,o,0,o.length,t.qa(),!1,!1),this.a.push([4,i,t,this.M,this.i,this.f,this.g,this.j,this.o,this.l,this.v,this.u,this.S,this.D,this.C]),this.b.push([4,i,t,this.I,this.i,this.f,this.g,this.j,this.o,this.l,this.v,this.u,this.S,this.D,this.C]),vh(this,e)}},_h.prototype.oc=function(t,e){if(this.M){yh(this,e);var o=t.ga(),i=this.coordinates.length;t=fh(this,o,0,o.length,t.qa(),!1,!1),this.a.push([4,i,t,this.M,this.i,this.f,this.g,this.j,this.o,this.l,this.v,this.u,this.S,this.D,this.C]),this.b.push([4,i,t,this.I,this.i,this.f,this.g,this.j,this.o,this.l,this.v,this.u,this.S,this.D,this.C]),vh(this,e)}},_h.prototype.Te=function(){mh(this),this.f=this.i=void 0,this.M=this.I=null,this.C=this.D=this.u=this.v=this.l=this.o=this.j=this.S=this.g=void 0},_h.prototype.Ub=function(t){var e=t.Hc(),o=t.ic(),i=t.qg(1),n=t.Y(1),r=t.Oc();this.i=e[0],this.f=e[1],this.I=i,this.M=n,this.g=o[1],this.j=t.f,this.o=r[0],this.l=r[1],this.v=t.l,this.u=t.g,this.S=t.a,this.D=t.v,this.C=o[0]},u(bh,dh),cg=bh.prototype,cg.Sf=function(){return this.f||(this.f=L(this.Ua),0<this.c&&T(this.f,this.resolution*(this.c+1)/2,this.f)),this.f},cg.mc=function(t,e){var o=this.i,i=o.lineWidth;void 0!==o.strokeStyle&&void 0!==i&&(Sh(this),yh(this,e),this.b.push([10,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1],[1]),o=t.ga(),Eh(this,o,0,o.length,t.qa()),this.b.push([12]),vh(this,e))},cg.nc=function(t,e){var o=this.i,i=o.lineWidth;if(void 0!==o.strokeStyle&&void 0!==i){Sh(this),yh(this,e),this.b.push([10,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1],[1]),o=t.Bb(),i=t.ga(),t=t.qa();var n,r=0,s=0;for(n=o.length;s<n;++s)r=Eh(this,i,r,o[s],t);this.b.push([12]),vh(this,e)}},cg.Te=function(){this.i.eg!=this.coordinates.length&&this.a.push([12]),mh(this),this.i=null},cg.Ma=function(t,e){t=e.a,this.i.strokeStyle=Me(t||vm),t=e.f,this.i.lineCap=void 0!==t?t:"round",t=e.i,this.i.lineDash=t||mm,t=e.g,this.i.lineDashOffset=t||0,t=e.j,this.i.lineJoin=void 0!==t?t:"round",t=e.c,this.i.lineWidth=void 0!==t?t:1,e=e.o,this.i.miterLimit=void 0!==e?e:10,this.i.lineWidth>this.c&&(this.c=this.i.lineWidth,this.f=null)},u(wh,dh),cg=wh.prototype,cg.Zb=function(t,e){var o=this.i,i=o.strokeStyle;if(void 0!==o.fillStyle||void 0!==i){Ch(this,t),yh(this,e),this.b.push([9,Ce(gm)]),void 0!==o.strokeStyle&&this.b.push([10,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1]);var n=t.ga(),i=this.coordinates.length;fh(this,n,0,n.length,t.qa(),!1,!1),t=[1],i=[2,i],this.a.push(t,i),this.b.push(t,i),t=[7],this.b.push(t),void 0!==o.fillStyle&&this.a.push(t),void 0!==o.strokeStyle&&(o=[12],this.a.push(o),this.b.push(o)),vh(this,e)}},cg.rc=function(t,e){var o=this.i;Ch(this,t),yh(this,e),this.b.push([9,Ce(gm)]),void 0!==o.strokeStyle&&this.b.push([10,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1]);var o=t.Bb();Ph(this,t.ec(),0,o,t.qa()),vh(this,e)},cg.pc=function(t,e){var o=this.i,i=o.strokeStyle;if(void 0!==o.fillStyle||void 0!==i){Ch(this,t),yh(this,e),this.b.push([9,Ce(gm)]),void 0!==o.strokeStyle&&this.b.push([10,o.strokeStyle,o.lineWidth,o.lineCap,o.lineJoin,o.miterLimit,o.lineDash,o.lineDashOffset,!0,1]),o=t.c,i=Ol(t),t=t.qa();var n,r=0,s=0;for(n=o.length;s<n;++s)r=Ph(this,i,r,o[s],t);vh(this,e)}},cg.Te=function(){mh(this),this.i=null;var t=this.fb;if(t){var e,o=this.coordinates,i=0;for(e=o.length;i<e;++i)o[i]=t*Math.round(o[i]/t)}},cg.Sf=function(){return this.f||(this.f=L(this.Ua),0<this.c&&T(this.f,this.resolution*(this.c+1)/2,this.f)),this.f},cg.Ma=function(t,e){var o=this.i;t?(t=t.b,o.fillStyle=Me(t||gm)):o.fillStyle=void 0,e?(t=e.a,o.strokeStyle=Me(t||vm),t=e.f,o.lineCap=void 0!==t?t:"round",t=e.i,o.lineDash=t?t.slice():mm,t=e.g,o.lineDashOffset=t||0,t=e.j,o.lineJoin=void 0!==t?t:"round",t=e.c,o.lineWidth=void 0!==t?t:1,e=e.o,o.miterLimit=void 0!==e?e:10,o.lineWidth>this.c&&(this.c=o.lineWidth,this.f=null)):(o.strokeStyle=void 0,o.lineCap=void 0,o.lineDash=null,o.lineDashOffset=void 0,o.lineJoin=void 0,o.lineWidth=void 0,o.miterLimit=void 0)},u(Ah,dh),Ah.prototype.yc=function(t,e,o,i,n,r){if(""!==this.Ia&&this.g&&(this.i||this.f)){if(this.i){n=this.i;var s=this.S;if(!s||s.fillStyle!=n.fillStyle){var a=[9,n.fillStyle];this.a.push(a),this.b.push(a),s?s.fillStyle=n.fillStyle:this.S={fillStyle:n.fillStyle}}}this.f&&(n=this.f,(s=this.D)&&s.lineCap==n.lineCap&&s.lineDash==n.lineDash&&s.lineDashOffset==n.lineDashOffset&&s.lineJoin==n.lineJoin&&s.lineWidth==n.lineWidth&&s.miterLimit==n.miterLimit&&s.strokeStyle==n.strokeStyle||(a=[10,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,n.lineDash,n.lineDashOffset,!1,1],this.a.push(a),this.b.push(a),s?(s.lineCap=n.lineCap,s.lineDash=n.lineDash,s.lineDashOffset=n.lineDashOffset,s.lineJoin=n.lineJoin,s.lineWidth=n.lineWidth,s.miterLimit=n.miterLimit,s.strokeStyle=n.strokeStyle):this.D={lineCap:n.lineCap,lineDash:n.lineDash,lineDashOffset:n.lineDashOffset,lineJoin:n.lineJoin,lineWidth:n.lineWidth,miterLimit:n.miterLimit,strokeStyle:n.strokeStyle})),n=this.g,s=this.C,s&&s.font==n.font&&s.textAlign==n.textAlign&&s.textBaseline==n.textBaseline||(a=[11,n.font,n.textAlign,n.textBaseline],this.a.push(a),this.b.push(a),s?(s.font=n.font,s.textAlign=n.textAlign,s.textBaseline=n.textBaseline):this.C={font:n.font,textAlign:n.textAlign,textBaseline:n.textBaseline}),yh(this,r),n=this.coordinates.length,t=fh(this,t,e,o,i,!1,!1),t=[5,n,t,this.Ia,this.j,this.o,this.v,this.u,!!this.i,!!this.f,this.l],this.a.push(t),this.b.push(t),vh(this,r)}},Ah.prototype.Cb=function(t){if(t){var e=t.Fa();e?(e=e.b,e=Me(e||gm),this.i?this.i.fillStyle=e:this.i={fillStyle:e}):this.i=null;var o=t.Ga();if(o){var e=o.a,i=o.f,n=o.i,r=o.g,s=o.j,a=o.c,o=o.o,i=void 0!==i?i:"round",n=n?n.slice():mm,r=void 0!==r?r:0,s=void 0!==s?s:"round",a=void 0!==a?a:1,o=void 0!==o?o:10,e=Me(e||vm);if(this.f){var l=this.f;l.lineCap=i,l.lineDash=n,l.lineDashOffset=r,l.lineJoin=s,l.lineWidth=a,l.miterLimit=o,l.strokeStyle=e}else this.f={lineCap:i,lineDash:n,lineDashOffset:r,lineJoin:s,lineWidth:a,miterLimit:o,strokeStyle:e}}else this.f=null;var p=t.a,e=t.i,i=t.c,n=t.o,a=t.f,o=t.b,r=t.Na(),s=t.g,l=t.j;t=void 0!==p?p:"10px sans-serif",s=void 0!==s?s:"center",l=void 0!==l?l:"middle",this.g?(p=this.g,p.font=t,p.textAlign=s,p.textBaseline=l):this.g={font:t,textAlign:s,textBaseline:l},this.Ia=void 0!==r?r:"",
this.j=void 0!==e?e:0,this.o=void 0!==i?i:0,this.l=void 0!==n&&n,this.v=void 0!==a?a:0,this.u=void 0!==o?o:1}else this.Ia=""},u(Mh,jr);var OE={0:[[!0]]};Mh.prototype.Ea=function(t,e,o,i,n,r){i=Math.round(i);var s=2*i+1,a=vr(this.j,i+.5,i+.5,1/e,-1/e,-o,-t[0],-t[1]),l=this.g;if(l.canvas.width!==s||l.canvas.height!==s?(l.canvas.width=s,l.canvas.height=s):l.clearRect(0,0,s,s),void 0!==this.f){var p=j();q(p,t),T(p,e*(this.f+i),p)}var c=Rh(i);return Lh(this,l,a,o,n,function(t){for(var e=l.getImageData(0,0,s,s).data,o=0;o<s;o++)for(var i=0;i<s;i++)if(c[o][i]&&0<e[4*(i*s+o)+3])return(t=r(t))?t:void l.clearRect(0,0,s,s)},p)},Mh.prototype.b=function(t,e){var o=void 0!==t?t.toString():"0";return t=this.a[o],void 0===t&&(t={},this.a[o]=t),o=t[e],void 0===o&&(o=new NE[e](this.v,this.c,this.l,this.o),t[e]=o),o},Mh.prototype.i=function(){return ct(this.a)},Mh.prototype.La=function(t,o,i,n,r,s){var a=Object.keys(this.a).map(Number);a.sort(e);var l=Th(this,i);t.save(),t.beginPath(),t.moveTo(l[0],l[1]),t.lineTo(l[2],l[3]),t.lineTo(l[4],l[5]),t.lineTo(l[6],l[7]),t.clip(),s=s||_m;var p,c,l=0;for(p=a.length;l<p;++l){var u=this.a[a[l].toString()],h=0;for(c=s.length;h<c;++h){var d=u[s[h]];void 0!==d&&d.La(t,o,i,n,r)}}t.restore()};var NE={Circle:wh,Image:_h,LineString:bh,Polygon:wh,Text:Ah};u(Gh,ye),Gh.prototype.Ea=h,Gh.prototype.Ue=ii,Gh.prototype.Nf=function(t,e,o){return function(i,n){return sy(t,e,i,n,function(t){o[i]||(o[i]={}),o[i][t.ta.toString()]=t})}},Gh.prototype.na=function(t){2===t.target.getState()&&Nh(this)},u(Bh,Gh),Bh.prototype.u=function(t,e,o,i){if(this.Ea(t,e,0,oi,this))return o.call(i,this.a,null)},Bh.prototype.ef=function(t,e,o,i){Wh(this,"postcompose",t,e,i)};var kE={Point:function(t,e,o,i){var n=o.Y();if(n){if(2!=n.Ye())return;var r=t.b(o.Ba(),"Image");r.Ub(n),r.qc(e,i)}(n=o.Na())&&(t=t.b(o.Ba(),"Text"),t.Cb(n),t.yc(e.ga(),0,2,2,e,i))},LineString:function(t,e,o,i){var n=o.Ga();if(n){var r=t.b(o.Ba(),"LineString");r.Ma(null,n),r.mc(e,i)}(n=o.Na())&&(t=t.b(o.Ba(),"Text"),t.Cb(n),t.yc(Ml(e),0,2,2,e,i))},Polygon:function(t,e,o,i){var n=o.Fa(),r=o.Ga();if(n||r){var s=t.b(o.Ba(),"Polygon");s.Ma(n,r),s.rc(e,i)}(n=o.Na())&&(t=t.b(o.Ba(),"Text"),t.Cb(n),t.yc(Ui(e),0,2,2,e,i))},MultiPoint:function(t,e,o,i){var n=o.Y();if(n){if(2!=n.Ye())return;var r=t.b(o.Ba(),"Image");r.Ub(n),r.oc(e,i)}(n=o.Na())&&(t=t.b(o.Ba(),"Text"),t.Cb(n),o=e.ga(),t.yc(o,0,o.length,e.qa(),e,i))},MultiLineString:function(t,e,o,i){var n=o.Ga();if(n){var r=t.b(o.Ba(),"LineString");r.Ma(null,n),r.nc(e,i)}(n=o.Na())&&(t=t.b(o.Ba(),"Text"),t.Cb(n),o=Rl(e),t.yc(o,0,o.length,2,e,i))},MultiPolygon:function(t,e,o,i){var n=o.Fa(),r=o.Ga();if(r||n){var s=t.b(o.Ba(),"Polygon");s.Ma(n,r),s.pc(e,i)}(n=o.Na())&&(t=t.b(o.Ba(),"Text"),t.Cb(n),o=Gl(e),t.yc(o,0,o.length,2,e,i))},GeometryCollection:function(t,e,o,i){e=e.a;var n,r=0;for(n=e.length;r<n;++r)(0,kE[e[r].U()])(t,e[r],o,i)},Circle:function(t,e,o,i){var n=o.Fa(),r=o.Ga();if(n||r){var s=t.b(o.Ba(),"Circle");s.Ma(n,r),s.Zb(e,i)}(n=o.Na())&&(t=t.b(o.Ba(),"Text"),t.Cb(n),t.yc(e.wa(),0,2,2,e,i))}};u(Zh,Bh),Zh.prototype.S=function(t,e,o){var i=t.extent,n=t.pixelRatio,r=e.Je?t.skippedFeatureUids:{},s=t.viewState,a=s.projection,s=s.rotation,l=a.G(),p=this.a.ha(),c=zh(this,t,0);Wh(this,"precompose",o,t,c);var u=e.extent,h=void 0!==u;if(h&&Vh(o,t,u),(u=this.f)&&!u.i()){var d=0,f=0;if(fe(this.a,"render")){var y=o.canvas.width,g=o.canvas.height;if(s){var m=Math.round(Math.sqrt(y*y+g*g)),d=(m-y)/2,f=(m-g)/2;y=g=m}this.g.canvas.width=y,this.g.canvas.height=g,y=this.g}else y=o;g=y.globalAlpha,y.globalAlpha=e.opacity,y!=o&&y.translate(d,f);var m=t.size[0]*n,v=t.size[1]*n;if(Mr(y,-s,m/2,v/2),u.La(y,n,c,s,r),p.u&&a.i&&!N(l,i)){for(var a=i[0],p=it(l),_=0;a<l[0];)--_,c=p*_,c=zh(this,t,c),u.La(y,n,c,s,r),a+=p;for(_=0,a=i[2];a>l[2];)++_,c=p*_,c=zh(this,t,c),u.La(y,n,c,s,r),a-=p;c=zh(this,t,0)}Mr(y,s,m/2,v/2),y!=o&&(Wh(this,"render",y,t,c),o.drawImage(y.canvas,-d,-f),y.translate(-d,-f)),y.globalAlpha=g}h&&o.restore(),this.ef(o,t,e,c)},Zh.prototype.Ea=function(t,e,o,i,n){if(this.f){var r=this.a,s={};return this.f.Ea(t,e.viewState.resolution,e.viewState.rotation,o,{},function(t){var e=d(t).toString();if(!(e in s))return s[e]=!0,i.call(n,t,r)})}},Zh.prototype.D=function(){Nh(this)},Zh.prototype.sd=function(t){function e(t){var e=t.Lc();if(e)var i=e.call(t,p);else(e=o.f)&&(i=e(t,p));if(i){if(i){if(e=!1,Array.isArray(i))for(var n=0,r=i.length;n<r;++n)e=Yh(h,t,i[n],Hh(p,c),this.D,this)||e;else e=Yh(h,t,i,Hh(p,c),this.D,this)||e;t=e}else t=!1;this.c=this.c||t}}var o=this.a,i=o.ha();Dh(t.attributions,i.j),jh(t,i);var n=t.viewHints[0],r=t.viewHints[1],s=o.T,a=o.na;if(!this.c&&!s&&n||!a&&r)return!0;var l=t.extent,a=t.viewState,n=a.projection,p=a.resolution,c=t.pixelRatio,r=o.i,u=o.c,s=o.get(FE);if(void 0===s&&(s=qh),l=T(l,u*p),u=a.projection.G(),i.u&&a.projection.i&&!N(u,t.extent)&&(t=Math.max(it(l)/2,it(u)),l[0]=u[0]-t,l[2]=u[2]+t),!this.c&&this.l==p&&this.v==r&&this.o==s&&N(this.j,l))return!0;this.f=null,this.c=!1;var h=new Mh(.5*p/c,l,p,i.T,o.c);if(i.Yd(l,p,n),s){var d=[];i.$b(l,function(t){d.push(t)},this),d.sort(s),d.forEach(e,this)}else i.$b(l,e,this);return Ih(h),this.l=p,this.v=r,this.o=s,this.j=l,this.f=h,!0},u(Kh,Ur);var DE=new Kh;u(Xh,Br);var jE=new Xh;u(Qh,Gh),Qh.prototype.Gi=function(t,e,o){td(this,"precompose",o,t),is(o,34962,this.T);var i=o.b,n=as(o,DE,jE);if(this.u)var r=this.u;else this.u=r=new Jh(i,n);o.Qc(n)&&(i.enableVertexAttribArray(r.b),i.vertexAttribPointer(r.b,2,5126,!1,16,0),i.enableVertexAttribArray(r.a),i.vertexAttribPointer(r.a,2,5126,!1,16,8),i.uniform1i(r.f,0)),i.uniformMatrix4fv(r.g,!1,Hr(this.C,this.v)),i.uniformMatrix4fv(r.c,!1,Hr(this.C,this.S)),i.uniform1f(r.i,e.opacity),i.bindTexture(3553,this.Ib),i.drawArrays(5,0,4),td(this,"postcompose",o,t)},Qh.prototype.mg=function(){this.g=this.Ib=null,this.j=void 0},u(ed,Qh),cg=ed.prototype,cg.Gi=function(t,e,o){this.o=e;var i=t.viewState,n=this.f,r=t.size,s=t.pixelRatio,a=this.c.i;n&&!n.i()&&(a.enable(a.SCISSOR_TEST),a.scissor(0,0,r[0]*s,r[1]*s),n.La(o,i.center,i.resolution,i.rotation,r,s,e.opacity,e.Je?t.skippedFeatureUids:{}),a.disable(a.SCISSOR_TEST))},cg.ka=function(){var t=this.f;t&&(aa(t,this.c.f)(),this.f=null),Qh.prototype.ka.call(this)},cg.Ea=function(t,e,o,i,n){if(this.f&&this.o){o=e.viewState;var r=this.a,s={};return this.f.Ea(t,this.c.f,o.center,o.resolution,o.rotation,e.size,e.pixelRatio,this.o.opacity,{},function(t){var e=d(t).toString();if(!(e in s))return s[e]=!0,i.call(n,t,r)})}},cg.Ue=function(t,e){if(this.f&&this.o){var o=e.viewState;return ca(this.f,t,this.c.f,o.resolution,o.rotation,e.pixelRatio,this.o.opacity,e.skippedFeatureUids)}return!1},cg.lg=function(t,e,o,i){if(t=fr(e.pixelToCoordinateTransform,t.slice()),this.Ue(t,e))return o.call(i,this.a,null)},cg.Hi=function(){Nh(this)},cg.ng=function(t,e,o){function i(t){var e=t.Lc();if(e)var o=e.call(t,p);else(e=n.f)&&(o=e(t,p));if(o){if(o){if(e=!1,Array.isArray(o))for(var i=o.length-1;0<=i;--i)e=Yh(h,t,o[i],Hh(p,c),this.Hi,this)||e;else e=Yh(h,t,o,Hh(p,c),this.Hi,this)||e;t=e}else t=!1;this.l=this.l||t}}var n=this.a;e=n.ha(),Dh(t.attributions,e.j),jh(t,e);var r=t.viewHints[0],s=t.viewHints[1],a=n.T,l=n.na;if(!this.l&&!a&&r||!l&&s)return!0;var s=t.extent,a=t.viewState,r=a.projection,p=a.resolution,c=t.pixelRatio,a=n.i,u=n.c,l=n.get(FE);if(void 0===l&&(l=qh),s=T(s,u*p),!this.l&&this.I==p&&this.R==a&&this.B==l&&N(this.D,s))return!0;this.f&&t.postRenderFunctions.push(aa(this.f,o)),this.l=!1;var h=new sa(.5*p/c,s,n.c);if(e.Yd(s,p,r),l){var d=[];e.$b(s,function(t){d.push(t)},this),d.sort(l),d.forEach(i,this)}else e.$b(s,i,this);return la(h,o),this.I=p,this.R=a,this.B=l,this.D=s,this.f=h,!0},u(od,sr),od.prototype.Fd=function(t){var e=null,o=t.U();return"canvas"===o?e=new Zh(this):"webgl"===o&&(e=new ed(t,this)),e},od.prototype.D=function(){return this.u},od.prototype.C=function(){return this.f},od.prototype.g=function(t){this.u=void 0!==t?t:za,this.f=null===t?void 0:Wa(this.u),this.s()};var FE="renderOrder";u(nd,ge),cg=nd.prototype,cg.Ea=h,cg.ya=function(){return this.j},cg.xa=function(){return this.D},cg.za=function(){return this.c},cg.getState=function(){return this.na},cg.sa=function(){this.s()},cg.ua=function(t){this.j=rd(t),this.s()},u(ad,nd),cg=ad.prototype,cg.yb=function(t){var e=d(t).toString();if(pd(this,e,t)){ld(this,e,t);var o=t.V();o?(e=o.G(),this.a&&this.a.Ca(e,t)):this.g[e]=t,this.b(new fd("addfeature",t))}this.s()},cg.cd=function(t){cd(this,t),this.s()},cg.clear=function(t){if(t){for(var e in this.v)this.v[e].forEach(ae);this.f||(this.v={},this.o={},this.l={})}else if(this.a){this.a.forEach(this.Ig,this);for(var o in this.g)this.Ig(this.g[o])}this.f&&this.f.clear(),this.a&&this.a.clear(),this.R.clear(),this.g={},this.b(new fd("clear")),this.s()},cg.sh=function(t,e){return this.a?this.a.forEach(t,e):this.f?this.f.forEach(t,e):void 0},cg.$b=function(t,e,o){return this.a?Bs(this.a,t,e,o):this.f?this.f.forEach(e,o):void 0},cg.th=function(t,e,o){return this.$b(t,function(i){if(i.V().Xa(t)&&(i=e.call(o,i)))return i})},cg.Ah=function(){return this.f},cg.Xe=function(){if(this.f)var t=this.f.a;else this.a&&(t=Fs(this.a),ct(this.g)||n(t,pt(this.g)));return t},cg.zh=function(t){var e=[];return hd(this,t,function(t){e.push(t)}),e},cg.Uf=function(t){return Us(this.a,t)},cg.vh=function(t,e){var o=t[0],i=t[1],n=null,r=[NaN,NaN],s=1/0,a=[-1/0,-1/0,1/0,1/0],l=e||oi;return Bs(this.a,a,function(t){if(l(t)){var e=t.V(),p=s;s=e.Kb(o,i,r,s),s<p&&(n=t,t=Math.sqrt(s),a[0]=o-t,a[1]=i-t,a[2]=o+t,a[3]=i+t)}}),n},cg.G=function(t){return this.a.G(t)},cg.yh=function(t){return t=this.o[t.toString()],void 0!==t?t:null},cg.Mi=function(){return this.C},cg.Ni=function(){return this.I},cg.Oi=function(t){t=t.target;var e=d(t).toString(),o=t.V();o?(o=o.G(),e in this.g?(delete this.g[e],this.a&&this.a.Ca(o,t)):this.a&&js(this.a,o,t)):e in this.g||(this.a&&this.a.remove(t),this.g[e]=t),o=t.a,void 0!==o?(o=o.toString(),e in this.l?(delete this.l[e],this.o[o]=t):this.o[o]!==t&&(dd(this,t),this.o[o]=t)):e in this.l||(dd(this,t),this.l[e]=t),this.s(),this.b(new fd("changefeature",t))},cg.Yd=function(t,e,o){var i=this.R;t=this.fa(t,e);var n,r=0;for(n=t.length;r<n;++r){var s=t[r];Bs(i,s,function(t){return N(t.extent,s)})||(this.B.call(this,s,e,o),i.Ca(s,{extent:s.slice()}))}},cg.Gb=function(t){var e=d(t).toString();e in this.g?delete this.g[e]:this.a&&this.a.remove(t),this.Ig(t),this.s()},cg.Ig=function(t){var e=d(t).toString();this.v[e].forEach(ae),delete this.v[e];var o=t.a;void 0!==o?delete this.o[o.toString()]:delete this.l[e],this.b(new fd("removefeature",t))},u(fd,ue),u(yd,En),cg=yd.prototype,cg.setMap=function(t){En.prototype.setMap.call(this,t),this.ri()},cg.Op=function(){if(this.j){var t=this.j.V();if(this.g===BE){var e=this.a;e.splice(-2,1),this.Za(e,t),2<=e.length&&(this.l=e[e.length-2].slice())}else if(this.g===VE){e=this.a[0],e.splice(-2,1);var o=this.C.V();o.ma(e),this.Za(this.a,t)}0===e.length&&(this.l=null),Cd(this)}},cg.Pd=function(){var t=Pd(this),e=this.a,o=t.V();this.g===BE?(e.pop(),this.Za(e,o)):this.g===VE&&(e[0].pop(),this.Za(e,o),e=o.X()),"MultiPoint"===this.R?t.Ra(new Tl([e])):"MultiLineString"===this.R?t.Ra(new xl([e])):"MultiPolygon"===this.R&&t.Ra(new Ll([e])),this.b(new Md("drawend",t)),this.$a&&this.$a.push(t),this.Yb&&this.Yb.yb(t)},cg.vn=function(t){var e=t.V();this.j=t,this.a=e.X(),t=this.a[this.a.length-1],this.l=t.slice(),this.a.push(t.slice()),Cd(this),this.b(new Md("drawstart",this.j))},cg.Xc=ii,cg.ri=function(){var t=this.v,e=this.c();t&&e||Pd(this),this.pa.setMap(e?t:null)};var UE="Point",BE="LineString",VE="Polygon",WE="Circle";u(Md,ue),u(xd,En),xd.prototype.setMap=function(t){this.u.setMap(t),this.I.setMap(t),En.prototype.setMap.call(this,t)},xd.prototype.G=function(){return this.j},xd.prototype.g=function(t){this.j=t||null;var e=this.l;e?t?e.Ra(Vi(t)):e.Ra(void 0):(this.l=e=new Ya(t?Vi(t):{}),this.u.ha().yb(e)),this.b(new Fd(this.j))},u(Fd,ue);var zE="extentchanged";u(Ud,En),cg=Ud.prototype,cg.kg=function(t){var e=t.V();e&&e.U()in this.T&&this.T[e.U()].call(this,t,e),(e=this.v)&&e.c&&this.c()&&Xd(this,this.va,e),ne(t,"change",this.si,this)},cg.Ha=function(t){this.g&&!t&&(this.B.ha().Gb(this.g),this.g=null),En.prototype.Ha.call(this,t)},cg.setMap=function(t){this.B.setMap(t),En.prototype.setMap.call(this,t)},cg.wn=function(t){this.kg(t.element)},cg.si=function(t){this.l||(t=t.target,Vd(this,t),this.kg(t))},cg.xn=function(t){Vd(this,t.element)},cg.Dn=function(t,e){var o=e.X();t={feature:t,geometry:e,la:[o,o]},this.a.Ca(e.G(),t)},cg.Bn=function(t,e){var o,i=e.X(),n=0;for(o=i.length;n<o;++n){var r=i[n];r={feature:t,geometry:e,depth:[n],index:n,la:[r,r]},this.a.Ca(e.G(),r)}},cg.ti=function(t,e){var o,i=e.X(),n=0;for(o=i.length-1;n<o;++n){var r=i.slice(n,n+2),s={feature:t,geometry:e,index:n,la:r};this.a.Ca(I(r),s)}},cg.An=function(t,e){var o,i,n=e.X(),r=0;for(i=n.length;r<i;++r){var s=n[r],a=0;for(o=s.length-1;a<o;++a){var l=s.slice(a,a+2),p={feature:t,geometry:e,depth:[r],index:a,la:l};this.a.Ca(I(l),p)}}},cg.En=function(t,e){var o,i,n=e.X(),r=0;for(i=n.length;r<i;++r){var s=n[r],a=0;for(o=s.length-1;a<o;++a){var l=s.slice(a,a+2),p={feature:t,geometry:e,depth:[r],index:a,la:l};this.a.Ca(I(l),p)}}},cg.Cn=function(t,e){var o,i,n,r=e.X(),s=0;for(n=r.length;s<n;++s){var a=r[s],l=0;for(i=a.length;l<i;++l){var p=a[l],c=0;for(o=p.length-1;c<o;++c){var u=p.slice(c,c+2),h={feature:t,geometry:e,depth:[l,s],index:c,la:u};this.a.Ca(I(u),h)}}}},cg.yn=function(t,e){var o=e.wa(),i={feature:t,geometry:e,index:0,la:[o,o]};t={feature:t,geometry:e,index:1,la:[o,o]},i.Pf=t.Pf=[i,t],this.a.Ca(B(o),i),this.a.Ca(e.G(),t)},cg.zn=function(t,e){var o=e.a;for(e=0;e<o.length;++e)this.T[o[e].U()].call(this,t,o[e])},cg.bm=function(t,e){for(var o,i=t.la,n=t.feature,r=t.geometry,s=t.depth,a=t.index;e.length<r.qa();)e.push(0);switch(r.U()){case"MultiLineString":case"Polygon":o=r.X(),o[s[0]].splice(a+1,0,e);break;case"MultiPolygon":o=r.X(),o[s[1]][s[0]].splice(a+1,0,e);break;case"LineString":o=r.X(),o.splice(a+1,0,e);break;default:return}this.l=!0,r.ma(o),this.l=!1,o=this.a,o.remove(t),$d(this,r,a,s,1),t={la:[i[0],e],feature:n,geometry:r,depth:s,index:a},o.Ca(I(t.la),t),this.j.push([t,1]),e={la:[e,i[1]],feature:n,geometry:r,depth:s,index:a+1},o.Ca(I(e.la),e),this.j.push([e,0]),this.I=!0},cg.hj=function(){if(this.R&&"pointerdrag"!=this.R.type){var t=this.R;Bd(this,t);var e,o,i=this.j,n={};for(o=i.length-1;0<=o;--o){var r=i[o],s=r[0],a=d(s.feature);s.depth&&(a+="-"+s.depth.join("-")),a in n||(n[a]={}),0===r[1]?(n[a].right=s,n[a].index=s.index):1==r[1]&&(n[a].left=s,n[a].index=s.index+1)}for(a in n){var l=n[a].right,p=n[a].left;o=n[a].index;var c=o-1;s=void 0!==p?p:l,0>c&&(c=0),r=s.geometry;var u=e=r.X(),h=!1;switch(r.U()){case"MultiLineString":2<e[s.depth[0]].length&&(e[s.depth[0]].splice(o,1),h=!0);break;case"LineString":2<e.length&&(e.splice(o,1),h=!0);break;case"MultiPolygon":u=u[s.depth[1]];case"Polygon":u=u[s.depth[0]],4<u.length&&(o==u.length-1&&(o=0),u.splice(o,1),h=!0,0===o&&(u.pop(),u.push(u[0]),c=u.length-1))}h&&(h=r,this.l=!0,h.ma(e),this.l=!1,e=[],void 0!==p&&(this.a.remove(p),e.push(p.la[0])),void 0!==l&&(this.a.remove(l),e.push(l.la[1])),void 0!==p&&void 0!==l&&(p={depth:s.depth,feature:s.feature,geometry:s.geometry,index:c,la:e},this.a.Ca(I(p.la),p)),$d(this,r,o,s.depth,-1),this.g&&(this.B.ha().Gb(this.g),this.g=null),i.length=0)}return this.b(new ef("modifyend",this.u,t)),this.C=!1,!0}return!1},u(ef,ue),u(of,sn),cg=of.prototype,cg.Gn=function(){return this.g.ha().f},cg.Hn=function(){return this.j},cg.In=function(t){return t=d(t),this.a[t]},cg.Kn=function(t){this.j=t},cg.setMap=function(t){var e=this.v,o=this.g.ha().f;e&&o.forEach(e.Cj,e),sn.prototype.setMap.call(this,t),this.g.setMap(t),t&&o.forEach(t.xj,t)},cg.Fn=function(t){var e=this.v;e&&e.xj(t.element)},cg.Jn=function(t){var e=this.v;e&&e.Cj(t.element)},u(sf,ue);var qE="select";u(af,En),cg=af.prototype,cg.yb=function(t,e){e=void 0===e||e;var o=d(t),i=t.V();if(i){var n=this.fa[i.U()];n&&(this.T[o]=i.G(j()),n.call(this,t,i))}e&&(this.B[o]=ne(t,"change",this.Ln,this))},cg.Ak=function(t){this.yb(t)},cg.Bk=function(t){this.Gb(t)},cg.ui=function(t){if(t instanceof fd)var e=t.feature;else t instanceof we&&(e=t.element);this.yb(e)},cg.vi=function(t){if(t instanceof fd)var e=t.feature;else t instanceof we&&(e=t.element);this.Gb(e)},cg.Ln=function(t){if(t=t.target,this.D){var e=d(t);e in this.u||(this.u[e]=t)}else this.Dj(t)},cg.Gb=function(t,e){e=void 0===e||e;var o=d(t),i=this.T[o];if(i){var n=this.a,r=[];for(Bs(n,i,function(e){t===e.feature&&r.push(e)}),i=r.length-1;0<=i;--i)n.remove(r[i])}e&&(ae(this.B[o]),delete this.B[o])},cg.setMap=function(t){var e,o=this.v,i=this.pa;this.j?e=this.j:this.l&&(e=this.l.Xe()),o&&(i.forEach(ae),i.length=0,e.forEach(this.Bk,this)),En.prototype.setMap.call(this,t),t&&(this.j?i.push(ne(this.j,"add",this.ui,this),ne(this.j,"remove",this.vi,this)):this.l&&i.push(ne(this.l,"addfeature",this.ui,this),ne(this.l,"removefeature",this.vi,this)),e.forEach(this.Ak,this))},cg.Xc=ii,cg.Dj=function(t){this.Gb(t,!1),this.yb(t,!1)},cg.Mn=function(t,e){e=Wi(e).X()[0];var o,i=0;for(o=e.length-1;i<o;++i){var n=e.slice(i,i+2),r={feature:t,la:n};this.a.Ca(I(n),r)}},cg.Nn=function(t,e){var o=e.a;for(e=0;e<o.length;++e){var i=this.fa[o[e].U()];i&&i.call(this,t,o[e])}},cg.wi=function(t,e){e=e.X();var o,i=0;for(o=e.length-1;i<o;++i){var n=e.slice(i,i+2),r={feature:t,la:n};this.a.Ca(I(n),r)}},cg.On=function(t,e){e=e.X();var o,i,n=0;for(i=e.length;n<i;++n){var r=e[n],s=0;for(o=r.length-1;s<o;++s){var a=r.slice(s,s+2),l={feature:t,la:a};this.a.Ca(I(a),l)}}},cg.Pn=function(t,e){var o,i=e.X(),n=0;for(o=i.length;n<o;++n){var r=i[n];r={feature:t,la:[r,r]},this.a.Ca(e.G(),r)}},cg.Qn=function(t,e){e=e.X();var o,i,n,r=0;for(n=e.length;r<n;++r){var s=e[r],a=0;for(i=s.length;a<i;++a){var l=s[a],p=0;for(o=l.length-1;p<o;++p){var c=l.slice(p,p+2),u={feature:t,la:c};this.a.Ca(I(c),u)}}}},cg.Rn=function(t,e){var o=e.X();t={feature:t,la:[o,o]},this.a.Ca(e.G(),t)},cg.Sn=function(t,e){e=e.X();var o,i,n=0;for(i=e.length;n<i;++n){var r=e[n],s=0;for(o=r.length-1;s<o;++s){var a=r.slice(s,s+2),l={feature:t,la:a};this.a.Ca(I(a),l)}}},u(hf,En),hf.prototype.B=function(){return this.l},hf.prototype.I=function(t){this.l=t},hf.prototype.setMap=function(t){var e=this.v;En.prototype.setMap.call(this,t),vf(this,e)},hf.prototype.u=function(){vf(this,null)},u(_f,ue),u(bf,od);var HE=["#00f","#0ff","#0f0","#ff0","#f00"];cg=bf.prototype,cg.uh=function(){return this.get(YE)},cg.Bh=function(){return this.get(ZE)},cg.yi=function(){return this.get(KE)},cg.Bl=function(){for(var t=this.Bh(),e=xe(1,256),o=e.createLinearGradient(0,0,1,256),i=1/(t.length-1),n=0,r=t.length;n<r;++n)o.addColorStop(n*i,t[n]);e.fillStyle=o,e.fillRect(0,0,1,256),this.j=e.getImageData(0,0,1,256).data},cg.cg=function(){var t=this.yi(),e=this.uh(),o=t+e+1,i=2*o,i=xe(i,i);i.shadowOffsetX=i.shadowOffsetY=this.R,i.shadowBlur=e,i.shadowColor="#000",i.beginPath(),e=o-this.R,i.arc(e,e,t,0,2*Math.PI,!0),i.fill(),this.I=i.canvas.toDataURL(),this.B=Array(256),this.s()},cg.Sl=function(t){t=t.context;var e,o,i=t.canvas,i=t.getImageData(0,0,i.width,i.height),n=i.data,r=0;for(e=n.length;r<e;r+=4)(o=4*n[r+3])&&(n[r]=this.j[o],n[r+1]=this.j[o+1],n[r+2]=this.j[o+2]);t.putImageData(i,0,0)},cg.jj=function(t){this.set(YE,t)},cg.pj=function(t){this.set(ZE,t)},cg.Uc=function(t){this.set(KE,t)};var YE="blur",ZE="gradient",KE="radius";u(Ef,Bh),Ef.prototype.S=function(t,e,o){Wh(this,"precompose",o,t,void 0);var i=this.Y();if(i){var n=e.extent,r=void 0!==n&&!N(n,t.extent)&&nt(n,t.extent);r&&Vh(o,t,n);var n=this.C(),s=o.globalAlpha;o.globalAlpha=e.opacity,o.drawImage(i,0,0,+i.width,+i.height,Math.round(n[4]),Math.round(n[5]),Math.round(i.width*n[0]),Math.round(i.height*n[3])),o.globalAlpha=s,r&&o.restore()}this.ef(o,t,e)},Ef.prototype.Ea=function(t,e,o,i,n){var r=this.a;return r.ha().Ea(t,e.viewState.resolution,e.viewState.rotation,o,e.skippedFeatureUids,function(t){return i.call(n,t,r)})},Ef.prototype.u=function(t,e,o,i){if(this.Y()){if(this.a.ha().Ea!==h)return Bh.prototype.u.apply(this,arguments);var n=fr(this.v,t.slice());if(Jo(n,e.viewState.resolution/this.f),this.j||(this.j=xe(1,1)),this.j.clearRect(0,0,1,1),this.j.drawImage(this.Y(),n[0],n[1],1,1,0,0,1,1),n=this.j.getImageData(0,0,1,1).data,0<n[3])return o.call(i,this.a,n)}},u(Sf,Ef),Sf.prototype.Y=function(){return this.M?this.M.Y():null},Sf.prototype.C=function(){return this.c},Sf.prototype.sd=function(t,e){var o=t.pixelRatio,i=t.size,n=t.viewState,r=n.center,s=n.resolution,a=this.a.ha(),l=t.viewHints,p=t.extent;if(void 0!==e.extent&&(p=tt(p,e.extent)),l[0]||l[1]||rt(p)||(e=a.Y(p,s,o,n.projection))&&Oh(this,e)&&(this.M=e),this.M){e=this.M;var l=e.G(),p=e.resolution,n=e.a,c=o*p/(s*n),l=vr(this.c,o*i[0]/2,o*i[1]/2,c,c,0,n*(l[0]-r[0])/p,n*(r[1]-l[3])/p);vr(this.v,o*i[0]/2-l[4],o*i[1]/2-l[5],o/s,-o/s,0,-r[0],-r[1]),Dh(t.attributions,e.f),jh(t,a),this.f=s*o/n}return!!this.M},u(Rf,Ku),Rf.prototype.ka=function(){1==this.state&&(ae(this.ee),this.ee=null),Ku.prototype.ka.call(this)},Rf.prototype.Y=function(){return this.g},Rf.prototype.de=function(){var t=this.Hb.getState();2==t&&(this.g=Cf(it(this.i)/this.c,$(this.i)/this.c,this.o,this.Hb.resolution,0,this.c,this.i,this.j,[{extent:this.Hb.G(),image:this.Hb.Y()}],0)),this.state=t,this.s()},Rf.prototype.load=function(){if(0==this.state){this.state=1,this.s();var t=this.Hb.getState();2==t||3==t?this.de():(this.ee=ne(this.Hb,"change",function(){var t=this.Hb.getState();2!=t&&3!=t||(ae(this.ee),this.ee=null,this.de())},this),this.Hb.load())}},u(If,nd),If.prototype.Y=function(t,e,o,i){var n=this.c;if(n&&i&&!Mt(n,i)){if(this.a){if(this.fa==this.i&&Mt(this.a.v,i)&&this.a.resolution==e&&this.a.a==o&&W(this.a.G(),t))return this.a;ce(this.a),this.a=null}return this.a=new Rf(n,i,t,e,o,function(t,e,o){return this.Jc(t,e,o,n)}.bind(this)),this.fa=this.i,this.a}return n&&(i=n),this.Jc(t,e,o,i)},If.prototype.o=function(t){switch(t=t.target,t.getState()){case 1:this.b(new Gf(XE,t));break;case 2:this.b(new Gf(JE,t));break;case 3:this.b(new Gf(QE,t))}},u(Gf,ue);var XE="imageloadstart",JE="imageloadend",QE="imageloaderror";u(Of,If),Of.prototype.Jc=function(t,e,o,i){e=Tf(this,e);var n=this.R;return n&&this.T==this.i&&n.resolution==e&&n.a==o&&N(n.G(),t)?n:(t=t.slice(),st(t,this.va),(i=this.pa(t,e,o,[it(t)/e*o,$(t)/e*o],i))&&(n=new Ju(t,e,o,this.j,i)),this.R=n,this.T=this.i,n)},u(Nf,Of),cg=Nf.prototype,cg.tk=function(t,e,o,i,n){var r=new Mh(.5*e/o,t,e,this.f.T,this.Sa);this.f.Yd(t,e,n);var s=!1;return this.f.$b(t,function(t){var i;if(!(i=s)){var n;if((i=t.Lc())?n=i.call(t,e):this.v&&(n=this.v(t,e)),n){var a,l=!1;for(Array.isArray(n)||(n=[n]),i=0,a=n.length;i<a;++i)l=Yh(r,t,n[i],Hh(e,o),this.qo,this)||l;i=l}else i=!1}s=i},this),Ih(r),s?null:(this.l[0]!=i[0]||this.l[1]!=i[1]?(this.g.canvas.width=i[0],this.g.canvas.height=i[1],this.l[0]=i[0],this.l[1]=i[1]):this.g.clearRect(0,0,i[0],i[1]),t=kf(this,J(t),e,o,i),r.La(this.g,o,t,0,{}),this.B=r,this.g.canvas)},cg.Ea=function(t,e,o,i,n,r){if(this.B){var s={};return this.B.Ea(t,e,0,i,n,function(t){var e=d(t).toString();if(!(e in s))return s[e]=!0,r(t)})}},cg.no=function(){return this.f},cg.oo=function(){return this.I},cg.po=function(){return this.v},cg.qo=function(){this.s()},cg.ro=function(){sd(this,this.f.getState())},cg.Ii=function(t){this.I=void 0!==t?t:za,this.v=t?Wa(this.I):void 0,this.s()},u(Df,Qh),Df.prototype.Ea=function(t,e,o,i,n){var r=this.a;return r.ha().Ea(t,e.viewState.resolution,e.viewState.rotation,o,e.skippedFeatureUids,function(t){return i.call(n,t,r)})},Df.prototype.ng=function(t,e){var o=this.c.i,i=t.pixelRatio,n=t.viewState,r=n.center,s=n.resolution,a=n.rotation,l=this.M,p=this.Ib,c=this.a.ha(),u=t.viewHints,h=t.extent;return void 0!==e.extent&&(h=tt(h,e.extent)),u[0]||u[1]||rt(h)||(e=c.Y(h,s,i,n.projection))&&Oh(this,e)&&(l=e,p=jf(this,e),this.Ib&&t.postRenderFunctions.push(function(t,e){t.isContextLost()||t.deleteTexture(e)}.bind(null,o,this.Ib))),l&&(o=this.c.f.j,Ff(this,o.width,o.height,i,r,s,a,l.G()),this.o=null,i=this.v,cr(i),gr(i,1,-1),mr(i,0,-1),this.M=l,this.Ib=p,Dh(t.attributions,l.f),jh(t,c)),!!l},Df.prototype.Ue=function(t,e){return void 0!==this.Ea(t,e,0,oi,this)},Df.prototype.lg=function(t,e,o,i){if(this.M&&this.M.Y())if(this.a.ha()instanceof Nf){var n=fr(e.pixelToCoordinateTransform,t.slice());if(this.Ea(n,e,0,oi,this))return o.call(i,this.a,null)}else{if(n=[this.M.Y().width,this.M.Y().height],!this.o){var r=e.size;e=pr(),mr(e,-1,-1),gr(e,2/r[0],2/r[1]),mr(e,0,r[1]),gr(e,1,-1);var r=_r(this.S.slice()),s=pr();mr(s,0,n[1]),gr(s,1,-1),gr(s,n[0]/2,n[1]/2),mr(s,1,1),ur(s,r),ur(s,e),this.o=s}if(t=fr(this.o,t.slice()),!(0>t[0]||t[0]>n[0]||0>t[1]||t[1]>n[1])&&(this.f||(this.f=xe(1,1)),this.f.clearRect(0,0,1,1),this.f.drawImage(this.M.Y(),t[0],t[1],1,1,0,0,1,1),n=this.f.getImageData(0,0,1,1).data,0<n[3]))return o.call(i,this.a,n)}},u(Uf,sr),Uf.prototype.Fd=function(t){var e=null,o=t.U();return"canvas"===o?e=new Sf(this):"webgl"===o&&(e=new Df(t,this)),e},u(Bf,Ef),Bf.prototype.sd=function(t,o){var i=t.pixelRatio,n=t.size,r=t.viewState,s=r.projection,a=r.resolution,r=r.center,l=this.a,p=l.ha(),c=p.i,u=p.Ta(s),h=u.tc(a,this.T),d=u.Da(h),f=Math.round(a/d)||1,y=t.extent;if(void 0!==o.extent&&(y=tt(y,o.extent)),rt(y))return!1;var g=Ut(u,y,d),m=u.Pc(h),v=u.Da(h),_=R(u.gb(h),u.j);m=F(m[0]+g.ca*_[0]*v,m[1]+g.da*_[1]*v,m[0]+(g.$+1)*_[0]*v,m[1]+(g.ia+1)*_[1]*v,void 0),v=p.nb(i),_={},_[h]={};var b,E,S=this.Nf(p,s,_),w=this.l,P=this.va,C=!1;for(b=g.ca;b<=g.$;++b)for(E=g.da;E<=g.ia;++E){var A=p.Nc(h,b,E,i,s);3!=A.getState()||this.a.kd()||th(A,2),Vf(this,A)||(A=$u(A)),Vf(this,A)?2==A.getState()&&(_[h][A.ta.toString()]=A,C||-1!=this.g.indexOf(A)||(C=!0)):jt(u,A.ta,S,P,w)||(A=Ft(u,A.ta,P,w))&&S(h+1,A)}if(b=t.viewHints,b=b[0]||b[1],!(this.f&&16<Date.now()-t.time&&b||!C&&this.o&&N(this.o,y)&&this.mf==c&&f==this.R&&(b||d*i/v*f==this.f))){(b=this.c)&&(E=p.Xd(h,i,s),A=Math.round((g.$-g.ca+1)*E[0]/f),E=Math.round((g.ia-g.da+1)*E[1]/f),C=b.canvas,C.width!=A||C.height!=E?(this.R=f,C.width=A,C.height=E):(b.clearRect(0,0,A,E),f=this.R)),this.g.length=0,C=Object.keys(_).map(Number),C.sort(e);var M,P=0;for(M=C.length;P<M;++P){b=C[P],S=p.Xd(b,i,s),A=u.Da(b);var x=A/d,I=v*p.Wf(s),T=_[b];for(var L in T){A=T[L],E=u.Aa(A.ta,w),b=(E[0]-m[0])/d*v/f,E=(m[3]-E[3])/d*v/f;var G=S[0]*x/f,O=S[1]*x/f;this.Of(A,t,o,b,E,G,O,I),this.g.push(A)}}this.mf=c,this.f=d*i/v*f,this.o=m}return o=this.f/a,o=vr(this.B,i*n[0]/2,i*n[1]/2,o,o,0,(this.o[0]-r[0])/this.f*i,(r[1]-this.o[3])/this.f*i),vr(this.v,i*n[0]/2-o[4],i*n[1]/2-o[5],i/a,-i/a,0,-r[0],-r[1]),Fh(t.usedTiles,p,h,g),Uh(t,p,u,i,s,y,h,l.Ud()),kh(t,p),jh(t,p),0<this.g.length},Bf.prototype.Of=function(t,e,o,i,n,r,s,a){this.a.ha().Zf(e.viewState.projection)||this.c.clearRect(i,n,r,s),(t=t.Y())&&this.c.drawImage(t,a,a,t.width-2*a,t.height-2*a,i,n,r,s)},Bf.prototype.Y=function(){var t=this.c;return t?t.canvas:null},Bf.prototype.C=function(){return this.B},u(Wf,Ur);var $E=new Wf;u(zf,Br);var tS=new zf;u(Hf,Qh),cg=Hf.prototype,cg.ka=function(){ns(this.c.f,this.B),Qh.prototype.ka.call(this)},cg.Nf=function(t,e,o){var i=this.c;return function(n,r){return sy(t,e,n,r,function(t){var e=i.a.b.hasOwnProperty(t.bb());return e&&(o[n]||(o[n]={}),o[n][t.ta.toString()]=t),e})}},cg.mg=function(){Qh.prototype.mg.call(this),this.f=null},cg.ng=function(t,o,i){var n=this.c,r=i.b,s=t.viewState,a=s.projection,l=this.a,p=l.ha(),c=p.Ta(a),u=c.tc(s.resolution),h=c.Da(u),d=p.Xd(u,t.pixelRatio,a),f=d[0]/R(c.gb(u),this.R)[0],y=h/f,m=p.nb(f)*p.Wf(a),_=s.center,b=t.extent,S=Ut(c,b,h);if(this.o&&v(this.o,S)&&this.l==p.i)y=this.D;else{var w=[S.$-S.ca+1,S.ia-S.da+1],P=E(Math.max(w[0]*d[0],w[1]*d[1])),w=y*P,C=c.Pc(u),A=C[0]+S.ca*d[0]*y,y=C[1]+S.da*d[1]*y,y=[A,y,A+w,y+w];$h(this,t,P),r.viewport(0,0,P,P),r.clearColor(0,0,0,0),r.clear(16384),r.disable(3042),P=as(i,this.I,this.fa),i.Qc(P),this.f||(this.f=new qf(r,P)),is(i,34962,this.B),r.enableVertexAttribArray(this.f.b),r.vertexAttribPointer(this.f.b,2,5126,!1,16,0),r.enableVertexAttribArray(this.f.a),r.vertexAttribPointer(this.f.a,2,5126,!1,16,8),r.uniform1i(this.f.i,0),i={},i[u]={};var M,x,I=this.Nf(p,a,i),T=l.kd(),P=!0,A=j(),L=new g(0,0,0,0);for(M=S.ca;M<=S.$;++M)for(x=S.da;x<=S.ia;++x){if(C=p.Nc(u,M,x,f,a),void 0!==o.extent){var G=c.Aa(C.ta,A);if(!nt(G,o.extent))continue}if(G=C.getState(),(G=2==G||4==G||3==G&&!T)||(C=$u(C)),2==(G=C.getState())){if(n.a.b.hasOwnProperty(C.bb())){i[u][C.ta.toString()]=C;continue}}else if(4==G||3==G&&!T)continue;P=!1,G=jt(c,C.ta,I,L,A),G||(C=Ft(c,C.ta,L,A))&&I(u+1,C)}o=Object.keys(i).map(Number),o.sort(e);for(var O,I=new Float32Array(4),T=0,L=o.length;T<L;++T)for(O in M=i[o[T]])C=M[O],G=c.Aa(C.ta,A),I[0]=2*(G[2]-G[0])/w,I[1]=2*(G[3]-G[1])/w,I[2]=2*(G[0]-y[0])/w-1,I[3]=2*(G[1]-y[1])/w-1,r.uniform4fv(this.f.c,I),fa(n,C,d,m*f),r.drawArrays(5,0,4);P?(this.o=S,this.D=y,this.l=p.i):(this.D=this.o=null,this.l=-1,t.animate=!0)}Fh(t.usedTiles,p,u,S);var N=n.j;return Uh(t,p,c,f,a,b,u,l.Ud(),function(t){2!=t.getState()||n.a.b.hasOwnProperty(t.bb())||t.bb()in N.a||N.f([t,Vt(c,t.ta),c.Da(t.ta[0]),d,m*f])},this),kh(t,p),jh(t,p),r=this.v,cr(r),mr(r,(Math.round(_[0]/h)*h-y[0])/(y[2]-y[0]),(Math.round(_[1]/h)*h-y[1])/(y[3]-y[1])),s.rotation&&yr(r,s.rotation),gr(r,t.size[0]*s.resolution/(y[2]-y[0]),t.size[1]*s.resolution/(y[3]-y[1])),mr(r,-.5,-.5),!0},cg.lg=function(t,e,o,i){if(this.g){t=fr(this.v,[t[0]/e.size[0],(e.size[1]-t[1])/e.size[1]].slice()),t=[t[0]*this.j,t[1]*this.j],e=this.c.f.b,e.bindFramebuffer(e.FRAMEBUFFER,this.g);var n=new Uint8Array(4);if(e.readPixels(t[0],t[1],1,1,e.RGBA,e.UNSIGNED_BYTE,n),0<n[3])return o.call(i,this.a,n)}},u(Yf,sr),cg=Yf.prototype,cg.Fd=function(t){var e=null,o=t.U();return"canvas"===o?e=new Bf(this):"webgl"===o&&(e=new Hf(t,this)),e},cg.Ud=function(){return this.get("preload")},cg.zi=function(t){this.set("preload",t)},cg.kd=function(){return this.get("useInterimTilesOnError")},cg.Ai=function(t){this.set("useInterimTilesOnError",t)},u(Zf,Bf);var eS={image:_m,hybrid:["Polygon","LineString"]},oS={hybrid:["Image","Text"],vector:_m};cg=Zf.prototype,cg.sd=function(t,e){var o=this.a,i=o.i;return this.pa!=i&&(this.g.length=0,o=o.j,this.c||"vector"==o||(this.c=xe()),this.c&&"vector"==o&&(this.c=null)),this.pa=i,Bf.prototype.sd.apply(this,arguments)},cg.Of=function(t,e,o,i,n,r,s,a){var l=t,p=this.a,c=e.pixelRatio,u=e.viewState.projection,h=p.i,d=p.get(FE)||null,f=l.o;if(f.Nd||f.mf!=h||f.Kg!=d){for(var y=0,g=l.a.length;y<g;++y){var m=l.c[l.a[y]];m.S=null,f.Nd=!1;var v=p.ha(),_=v.tileGrid,b=m.ta,E=m.a,S=v.Ta(u),w=S.Da(l.ta[0]),P=_.Da(m.ta[0]),S=S.Aa(l.v),b=_.Aa(b),S=tt(S,b);if("tile-pixels"==E.a)var C=_=v.nb(),P=vr(this.D,0,0,1/P*C,-1/P*C,0,-b[0],-b[3]),P=fr(P,[S[0],S[3]]).concat(fr(P,[S[2],S[1]]));else if(_=w,P=S,!Mt(u,E)){var A=!0;m.ig(u)}for(f.Nd=!1,v=new Mh(0,P,_,v.l,p.c),P=Hh(_,c),_=m.g,d&&d!==f.Kg&&_.sort(d),b=0,S=_.length;b<S;++b){C=_[b],A&&C.V().tb(E,u);var M=void 0,x=C.Lc();if(x?M=x.call(C,w):(x=p.f)&&(M=x(C,w)),M){Array.isArray(M)||(M=[M]);var x=P,R=v;if(M){var I=!1;if(Array.isArray(M))for(var T=0,L=M.length;T<L;++T)I=Yh(R,C,M[T],x,this.Fi,this)||I;else I=Yh(R,C,M,x,this.Fi,this)||I;C=I}else C=!1;this.I=this.I||C,f.Nd=f.Nd||C}}Ih(v),m.c[l.ta.toString()]=v}f.mf=h,f.Kg=d}if(this.c){if(y=e,u=this.a,c=l.o,h=u.i,(p=eS[u.j])&&c.Lg!==h)for(c.Lg=h,g=l.v,m=g[0],c=y.pixelRatio,w=u.ha(),u=w.tileGrid,E=w.Ta(y.viewState.projection),h=E.Da(m),d=w.nb(),l.j||(l.j=xe()),f=l.j,y=w.Xd(m,c,y.viewState.projection),f.canvas.width=y[0],f.canvas.height=y[1],y=E.Aa(g),g=0,m=l.a.length;g<m;++g)E=l.c[l.a[g]],v=E.ta,A=c/h,w=cr(this.D),"tile-pixels"==E.a.a?(A=u.Aa(v,this.l),v=u.Da(v[0]),P=c/d*v/h,gr(w,P,P),mr(w,Math.round((A[0]-y[0])/v*d),Math.round((y[3]-A[3])/v*d))):(gr(w,A,-A),mr(w,-y[0],-y[3])),E.c[l.ta.toString()].La(f,c,w,0,{},p);Bf.prototype.Of.apply(this,arguments)}},cg.Ea=function(t,e,o,i,n){var r=e.viewState.resolution,s=e.viewState.rotation;o=void 0==o?0:o;var a=this.a,l={},p=this.g,c=a.ha();e=c.Ta(e.viewState.projection);var u,h=c.tileGrid,f=0;for(u=p.length;f<u;++f){var y=p[f],g=y.ta;g=e.Aa(g,this.l);var m=T(g,o*r,m);if(O(m,t)){g=0
;for(var v=y.a.length;g<v;++g){var _=y.c[y.a[g]];if("tile-pixels"===_.a.a){var b=_.ta;r=h.Aa(b,this.l);var E=et(r);r=c.nb(),b=h.Da(b[0])/r,E=[(t[0]-E[0])/b,(E[1]-t[1])/b]}else E=t;_=_.c[y.ta];var S=S||_.Ea(E,r,s,o,{},function(t){var e=d(t).toString();if(!(e in l))return l[e]=!0,i.call(n,t,a)})}}}return S},cg.Fi=function(){Nh(this)},cg.ef=function(t,e,o){var i=this.a,n=i.ha(),r=oS[i.j];if(r)for(var s=e.pixelRatio,a=e.viewState.rotation,l=e.size,p=Math.round(s*l[0]/2),l=Math.round(s*l[1]/2),c=this.g,i=i.ha().nb(),u=n.tileGrid,n=n.Ta(e.viewState.projection),h=[],d=[],f=c.length-1;0<=f;--f){var y=c[f];if(5!=y.getState())for(var g=y.ta,m=n.Aa(g)[0]-n.Aa(y.v)[0],v=0,_=y.a.length;v<_;++v){var b=y.c[y.a[v]],E=b.ta[0],S=u.Da(E),w=b,P=e;if("tile-pixels"==w.a.a){var C=this.a.ha(),A=C.tileGrid,M=w.ta,C=A.Da(M[0])/C.nb(),w=P.viewState,x=P.pixelRatio,R=w.resolution/x,M=A.Aa(M,this.l),A=w.center,M=et(M);P=P.size,P=vr(this.D,Math.round(x*P[0]/2),Math.round(x*P[1]/2),C/R,C/R,w.rotation,(M[0]-A[0])/C,(A[1]-M[1])/C)}else P=zh(this,P,0);for(mr(P,m*i/S,0),b=b.c[g.toString()],S=Th(b,P),t.save(),t.globalAlpha=o.opacity,Mr(t,-a,p,l),C=0,w=h.length;C<w;++C)x=h[C],E<d[C]&&(t.beginPath(),t.moveTo(S[0],S[1]),t.lineTo(S[2],S[3]),t.lineTo(S[4],S[5]),t.lineTo(S[6],S[7]),t.moveTo(x[6],x[7]),t.lineTo(x[4],x[5]),t.lineTo(x[2],x[3]),t.lineTo(x[0],x[1]),t.clip());b.La(t,s,P,a,{},r),t.restore(),h.push(S),d.push(E)}}Bf.prototype.ef.apply(this,arguments)},u(Kf,od),cg=Kf.prototype,cg.Fd=function(t){var e=null;return"canvas"===t.U()&&(e=new Zf(this)),e},cg.Ud=function(){return this.get("preload")},cg.kd=function(){return this.get("useInterimTilesOnError")},cg.Bi=function(t){this.set("preload",t)},cg.Ci=function(t){this.set("useInterimTilesOnError",t)},u(Jf,Qu),Jf.prototype.ka=function(){1==this.state&&(this.yd.forEach(ae),this.yd=null),Qu.prototype.ka.call(this)},Jf.prototype.Y=function(){return this.v},Jf.prototype.de=function(){var t=[];if(this.a.forEach(function(e){e&&2==e.getState()&&t.push({extent:this.c.Aa(e.ta),image:e.Y()})},this),this.a.length=0,t.length){var e=this.o[0],o=this.j.gb(e),i="number"==typeof o?o:o[0],o="number"==typeof o?o:o[1],e=this.j.Da(e),n=this.c.Da(this.g),r=this.j.Aa(this.o);this.v=Cf(i,o,this.S,n,this.c.G(),e,r,this.l,t,this.u,this.D),this.state=2}else this.state=3;this.s()},Jf.prototype.load=function(){if(0==this.state){this.state=1,this.s();var t=0;this.yd=[],this.a.forEach(function(e){var o=e.getState();if(0==o||1==o){t++;var i=ne(e,"change",function(){var o=e.getState();2!=o&&3!=o&&4!=o||(ae(i),--t||(this.yd.forEach(ae),this.yd=null,this.de()))},this);this.yd.push(i)}},this),this.a.forEach(function(t){0==t.getState()&&t.load()}),t||setTimeout(this.de.bind(this),0)}},u(iy,ha),iy.prototype.fd=function(t){for(var e,o;ny(this);){e=this.a.Yc,o=e.ta[0].toString();var i;if((i=o in t)&&(e=e.ta,i=m(t[o],e[1],e[2])),i)break;ce(this.pop())}},u(ry,nd),cg=ry.prototype,cg.Ki=function(){return ny(this.a)},cg.fd=function(t,e){(t=this.Wd(t))&&t.fd(e)},cg.Wf=function(){return 0},cg.Sb=function(t,e,o){return t+"/"+e+"/"+o},cg.Zf=function(){return this.va},cg.ab=function(){return this.tileGrid},cg.Ta=function(t){return this.tileGrid?this.tileGrid:qt(t)},cg.Wd=function(t){var e=this.c;return e&&!Mt(e,t)?null:this.a},cg.nb=function(){return this.$a},cg.Xd=function(t,e,o){return o=this.Ta(o),e=this.nb(e),t=R(o.gb(t),this.o),1==e?t:x(t,e,this.o)},cg.sa=function(){this.a.clear(),this.s()},cg.Ug=h,u(py,ue),u(cy,ry),cg=cy.prototype,cg.pb=function(){return this.tileLoadFunction},cg.qb=function(){return this.tileUrlFunction},cg.rb=function(){return this.urls},cg.Li=function(t){switch(t=t.target,t.getState()){case 1:this.b(new py("tileloadstart",t));break;case 2:this.b(new py("tileloadend",t));break;case 3:this.b(new py("tileloaderror",t))}},cg.vb=function(t){this.a.clear(),this.tileLoadFunction=t,this.s()},cg.cb=function(t,e){this.tileUrlFunction=t,void 0!==e?ay(this,e):this.s()},cg.jb=function(t){var e=this.urls=oy(t);this.cb(this.Fc?this.Fc.bind(this):$f(e,this.tileGrid),t)},cg.eb=function(t){this.urls=t;var e=t.join("\n");this.cb(this.Fc?this.Fc.bind(this):$f(t,this.tileGrid),e)},cg.Ug=function(t,e,o){t=this.Sb(t,e,o),this.a.b.hasOwnProperty(t)&&this.a.get(t)},u(uy,cy),cg=uy.prototype,cg.Ki=function(){if(ny(this.a))return!0;for(var t in this.g)if(ny(this.g[t]))return!0;return!1},cg.fd=function(t,e){t=this.Wd(t),this.a.fd(this.a==t?e:{});for(var o in this.g){var i=this.g[o];i.fd(i==t?e:{})}},cg.Wf=function(t){return this.c&&t&&!Mt(this.c,t)?0:this.Xf()},cg.Xf=function(){return 0},cg.Zf=function(t){return!(this.c&&t&&!Mt(this.c,t))&&cy.prototype.Zf.call(this,t)},cg.Ta=function(t){var e=this.c;return!this.tileGrid||e&&!Mt(e,t)?(e=d(t).toString(),e in this.v||(this.v[e]=qt(t)),this.v[e]):this.tileGrid},cg.Wd=function(t){var e=this.c;return!e||Mt(e,t)?this.a:(t=d(t).toString(),t in this.g||(this.g[t]=new iy(this.a.highWaterMark)),this.g[t])},cg.Nc=function(t,e,o,i,n){if(this.c&&n&&!Mt(this.c,n)){var r=this.Wd(n);o=[t,e,o];var s;if(t=this.Sb.apply(this,o),r.b.hasOwnProperty(t)&&(s=r.get(t)),e=this.uc,s&&s.key==e)return s;var a=this.c,l=this.Ta(a),p=this.Ta(n),c=ly(this,o,n);return i=new Jf(a,l,n,p,o,c,this.nb(i),this.Xf(),function(t,e,o,i){return dy(this,t,e,o,i,a)}.bind(this),this.Sa,this.I),i.key=e,s?(i.i=s,r.replace(t,i)):r.set(t,i),i}return dy(this,t,e,o,i,n)},cg.Pb=function(t){if(this.I!=t){this.I=t;for(var e in this.g)this.g[e].clear();this.s()}},cg.Qb=function(t,e){(t=At(t))&&((t=d(t).toString())in this.v||(this.v[t]=e))},u(yy,uy);var iS=new Xt({html:'<a class="ol-attribution-bing-tos" href="http://www.microsoft.com/maps/product/terms.html">Terms of Use</a>'});yy.prototype.T=function(){return this.f},yy.prototype.fa=function(){return this.l},yy.prototype.pa=function(t){if(200!=t.statusCode||"OK"!=t.statusDescription||"ValidCredentials"!=t.authenticationResultCode||1!=t.resourceSets.length||1!=t.resourceSets[0].resources.length)sd(this,"error");else{var e=t.brandLogoUri;-1==e.indexOf("https")&&(e=e.replace("http","https"));var o=t.resourceSets[0].resources[0],i=-1==this.C?o.zoomMax:this.C;t=Kt(this.c);var n=Ht({extent:t,minZoom:o.zoomMin,maxZoom:i,tileSize:(o.imageWidth==o.imageHeight?o.imageWidth:[o.imageWidth,o.imageHeight])/this.nb()});this.tileGrid=n;var r=this.R,s=this.B;if(this.tileUrlFunction=ty(o.imageUrlSubdomains.map(function(t){var e=[0,0,0],i=o.imageUrl.replace("{subdomain}",t).replace("{culture}",r);return function(t){if(t)return Nt(t[0],t[1],-t[2]-1,e),t=i,s&&(t+="&dpi=d1&device=mobile"),t.replace("{quadkey}",kt(e))}})),o.imageryProviders){var a=Rt(At("EPSG:4326"),this.c);t=o.imageryProviders.map(function(t){var e=t.attribution,o={};return t.coverageAreas.forEach(function(t){var e=t.zoomMin,r=Math.min(t.zoomMax,i);t=t.bbox,t=at([t[1],t[0],t[3],t[2]],a);var s;for(s=e;s<=r;++s){var l=s.toString();e=Bt(n,t,s),l in o?o[l].push(e):o[l]=[e]}}),new Xt({html:e,tileRanges:o})}),t.push(iS),this.ua(t)}this.D=e,sd(this,"ready")}},u(gy,uy),u(my,gy),cg=my.prototype,cg.Kk=function(){return this.f},cg.tq=function(t){mg(this.f,t),vy(this)},cg.Xp=function(t){this.f=t||{},vy(this)},cg.Dl=function(t,e){if(e=e.target,!e.status||200<=e.status&&300>e.status){try{var o=JSON.parse(e.responseText)}catch(t){return void sd(this,"error")}_y(this,o),this.l[t]=o,sd(this,"ready")}else sd(this,"error")},cg.Cl=function(){sd(this,"error")},u(by,ad),cg=by.prototype,cg.$n=function(){return this.distance},cg.ao=function(){return this.source},cg.Yd=function(t,e,o){this.source.Yd(t,e,o),e!==this.resolution&&(this.clear(),this.resolution=e,Ey(this),this.cd(this.features))},cg.Yp=function(t){this.distance=t,this.sa()},cg.sa=function(){this.clear(),Ey(this),this.cd(this.features),ad.prototype.sa.call(this)},u(Py,If),cg=Py.prototype,cg.co=function(){return this.v},cg.Jc=function(t,e,o,i){if(void 0===this.f)return null;e=Tf(this,e),o=this.T?o:1;var n=this.M;if(n&&this.I==this.i&&n.resolution==e&&n.a==o&&N(n.G(),t))return n;n={F:"image",FORMAT:"PNG32",TRANSPARENT:!0},mg(n,this.v),t=t.slice();var r=(t[0]+t[2])/2,s=(t[1]+t[3])/2;if(1!=this.B){var a=this.B*it(t)/2,l=this.B*$(t)/2;t[0]=r-a,t[1]=s-l,t[2]=r+a,t[3]=s+l}var a=e/o,l=Math.ceil(it(t)/a),p=Math.ceil($(t)/a);return t[0]=r-a*l/2,t[2]=r+a*l/2,t[1]=s-a*p/2,t[3]=s+a*p/2,this.l[0]=l,this.l[1]=p,r=t,s=this.l,a=o,i=i.mb.split(":").pop(),n.SIZE=s[0]+","+s[1],n.BBOX=r.join(","),n.BBOXSR=i,n.IMAGESR=i,n.DPI=Math.round(90*a),i=this.f,r=i.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),r==i&&y(!1,50),n=wy(r,n),this.M=new Xu(t,e,o,this.j,n,this.R,this.g),this.I=this.i,ne(this.M,"change",this.o,this),this.M},cg.bo=function(){return this.g},cg.eo=function(){return this.f},cg.fo=function(t){this.M=null,this.g=t,this.s()},cg.ho=function(t){t!=this.f&&(this.f=t,this.M=null,this.s())},cg.io=function(t){mg(this.v,t),this.M=null,this.s()},u(Cy,If),cg=Cy.prototype,cg.ko=function(){return this.g},cg.Jc=function(t,e,o){e=Tf(this,e),o=this.T?o:1;var i=this.M;if(i&&this.B==this.i&&i.resolution==e&&i.a==o&&N(i.G(),t))return i;1!=this.v&&(t=t.slice(),st(t,this.v));var n=[it(t)/e*o,$(t)/e*o];if(void 0!==this.I){var i=this.I,r=J(t),s=this.pa,a=it(t),l=$(t),p=n[0],c=n[1],u=.0254/this.l,n={OPERATION:this.va?"GETDYNAMICMAPOVERLAYIMAGE":"GETMAPIMAGE",VERSION:"2.0.0",LOCALE:"en",CLIENTAGENT:"ol.source.ImageMapGuide source",CLIP:"1",SETDISPLAYDPI:this.l,SETDISPLAYWIDTH:Math.round(n[0]),SETDISPLAYHEIGHT:Math.round(n[1]),SETVIEWSCALE:c*a>p*l?a*s/(p*u):l*s/(c*u),SETVIEWCENTERX:r[0],SETVIEWCENTERY:r[1]};mg(n,this.g),i=wy(i,n),i=new Xu(t,e,o,this.j,i,this.R,this.f),ne(i,"change",this.o,this)}else i=null;return this.M=i,this.B=this.i,i},cg.jo=function(){return this.f},cg.mo=function(t){mg(this.g,t),this.s()},cg.lo=function(t){this.M=null,this.f=t,this.s()},u(Ay,If),Ay.prototype.Jc=function(t){return nt(t,this.M.G())?this.M:null},Ay.prototype.o=function(t){if(2==this.M.getState()){var e=this.M.G(),o=this.M.Y();if(this.f)var i=this.f[0],n=this.f[1];else i=o.width,n=o.height;if((e=Math.ceil(it(e)/($(e)/n)))!=i){var e=xe(e,n),r=e.canvas;e.drawImage(o,0,0,i,n,0,0,r.width,r.height),this.M.Og(r)}}If.prototype.o.call(this,t)},u(My,If);var nS=[101,101];cg=My.prototype,cg.so=function(t,e,o,i){if(void 0!==this.g){var n=Q(t,e,0,nS),r={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.f.LAYERS};return mg(r,this.f,i),i=Math.floor((n[3]-t[1])/e),r[this.l?"I":"X"]=Math.floor((t[0]-n[0])/e),r[this.l?"J":"Y"]=i,xy(this,n,nS,1,At(o),r)}},cg.uo=function(){return this.f},cg.Jc=function(t,e,o,i){if(void 0===this.g)return null;e=Tf(this,e),1==o||this.va&&void 0!==this.T||(o=1);var n=e/o,r=J(t),s=Q(r,n,0,[Math.ceil(it(t)/n),Math.ceil($(t)/n)]);return t=Q(r,n,0,[Math.ceil(this.I*it(t)/n),Math.ceil(this.I*$(t)/n)]),(r=this.M)&&this.R==this.i&&r.resolution==e&&r.a==o&&N(r.G(),s)?r:(s={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0},mg(s,this.f),this.B[0]=Math.round(it(t)/n),this.B[1]=Math.round($(t)/n),i=xy(this,t,this.B,o,i,s),this.M=new Xu(t,e,o,this.j,i,this.pa,this.v),this.R=this.i,ne(this.M,"change",this.o,this),this.M)},cg.to=function(){return this.v},cg.vo=function(){return this.g},cg.wo=function(t){this.M=null,this.v=t,this.s()},cg.xo=function(t){t!=this.g&&(this.g=t,this.M=null,this.s())},cg.yo=function(t){mg(this.f,t),Ry(this),this.M=null,this.s()},u(Iy,gy);var rS=new Xt({html:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors.'});Bm.df={},Bm.df.Af=function(){},function(t){function e(t,e,o){return s?new ImageData(t,e,o):(e=a.createImageData(e,o),e.data.set(t),e)}function o(t){var e=!0;try{new ImageData(10,10)}catch(t){e=!1}return function(o){var i=o.buffers,n=o.meta,r=o.width,s=o.height,a=i.length,l=i[0].byteLength;if(o.imageOps){for(l=Array(a),o=0;o<a;++o){var p=o,c=new Uint8ClampedArray(i[o]),u=r,h=s;c=e?new ImageData(c,u,h):{data:c,width:u,height:h},l[p]=c}r=t(l,n).data}else{for(r=new Uint8ClampedArray(l),s=Array(a),p=Array(a),o=0;o<a;++o)s[o]=new Uint8ClampedArray(i[o]),p[o]=[0,0,0,0];for(i=0;i<l;i+=4){for(o=0;o<a;++o)c=s[o],p[o][0]=c[i],p[o][1]=c[i+1],p[o][2]=c[i+2],p[o][3]=c[i+3];o=t(p,n),r[i]=o[0],r[i+1]=o[1],r[i+2]=o[2],r[i+3]=o[3]}}return r.buffer}}function i(t,e){var i=Object.keys(t.lib||{}).map(function(e){return"var "+e+" = "+t.lib[e].toString()+";"}).concat(["var __minion__ = ("+o.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  var buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=URL.createObjectURL(new Blob(i,{type:"text/javascript"})),i=new Worker(i);return i.addEventListener("message",e),i}function n(t,e){var i=o(t.operation);return{postMessage:function(t){setTimeout(function(){e({data:{buffer:i(t),meta:t.meta}})},0)}}}function r(t){this.Ff=!!t.$l;var e;e=0===t.threads?0:this.Ff?1:t.threads||1;var o=[];if(e)for(var r=0;r<e;++r)o[r]=i(t,this.gh.bind(this,r));else o[0]=n(t,this.gh.bind(this,0));this.qe=o,this.Ed=[],this.fk=t.rp||1/0,this.oe=0,this.bd={},this.Gf=null}var s=!0;try{new ImageData(10,10)}catch(t){s=!1}var a=document.createElement("canvas").getContext("2d");r.prototype.pp=function(t,e,o){this.dk({inputs:t,Qh:e,callback:o}),this.dh()},r.prototype.dk=function(t){for(this.Ed.push(t);this.Ed.length>this.fk;)this.Ed.shift().callback(null,null)},r.prototype.dh=function(){if(0===this.oe&&0<this.Ed.length){var t=this.Gf=this.Ed.shift(),e=t.inputs[0].width,o=t.inputs[0].height,i=t.inputs.map(function(t){return t.data.buffer}),n=this.qe.length;if(this.oe=n,1===n)this.qe[0].postMessage({buffers:i,meta:t.Qh,imageOps:this.Ff,width:e,height:o},i);else for(var r=4*Math.ceil(t.inputs[0].data.length/4/n),s=0;s<n;++s){for(var a=s*r,l=[],p=0,c=i.length;p<c;++p)l.push(i[s].slice(a,a+r));this.qe[s].postMessage({buffers:l,meta:t.Qh,imageOps:this.Ff,width:e,height:o},l)}}},r.prototype.gh=function(t,e){this.Jq||(this.bd[t]=e.data,0===--this.oe&&this.gk())},r.prototype.gk=function(){var t=this.Gf,o=this.qe.length;if(1===o)var i=new Uint8ClampedArray(this.bd[0].buffer),n=this.bd[0].meta;else{var r=t.inputs[0].data.length;i=new Uint8ClampedArray(r),n=Array(r);for(var r=4*Math.ceil(r/4/o),s=0;s<o;++s){var a=s*r;i.set(new Uint8ClampedArray(this.bd[s].buffer),a),n[s]=this.bd[s].meta}}this.Gf=null,this.bd={},t.callback(null,e(i,t.inputs[0].width,t.inputs[0].height),n),this.dh()},t.default={Af:r},t.Af=r}(Bm.df=Bm.df||{}),u(Ty,If),Ty.prototype.v=function(t,e){this.B=new Bm.df.Af({operation:t,$l:"image"===this.va,rp:1,lib:e,threads:this.Sa}),this.s()},Ty.prototype.Y=function(t,e,o,i){o=!0;for(var n,r=0,s=this.g.length;r<s;++r)if(n=this.g[r].a.ha(),"ready"!==n.getState()){o=!1;break}if(!o)return null;if(o=mg({},this.I),o.viewState=mg({},o.viewState),n=J(t),o.extent=t.slice(),o.focus=n,o.size[0]=Math.round(it(t)/e),o.size[1]=Math.round($(t)/e),r=o.viewState,r.center=n,r.projection=i,r.resolution=e,this.l=o,No(o.tileQueue,16,16),this.f&&(i=this.f.resolution,o=this.f.G(),e===i&&W(t,o)||(this.f=null)),!this.f||this.i!==this.R)t:{for(t=this.l,i=this.g.length,e=Array(i),o=0;o<i;++o){if(n=this.g[o],r=t,s=t.layerStatesArray[o],n.sd(r,s)){var a=r.size[0],l=r.size[1];if(sS){var p=sS.canvas;p.width!==a||p.height!==l?sS=xe(a,l):sS.clearRect(0,0,a,l)}else sS=xe(a,l);n.S(r,s,sS),n=sS.getImageData(0,0,a,l)}else n=null;if(!n)break t;e[o]=n}i={},this.b(new Oy(aS,t,i)),this.B.pp(e,i,this.pa.bind(this,t))}return this.f},Ty.prototype.pa=function(t,e,o,i){if(!e&&o){e=t.extent;var n=t.viewState.resolution;if(n===this.l.viewState.resolution&&W(e,this.l.extent)){if(this.f)var r=this.f.Y().getContext("2d");else r=xe(Math.round(it(e)/n),Math.round($(e)/n)),this.f=new Ju(e,n,1,this.j,r.canvas);r.putImageData(o,0,0),this.s(),this.R=this.i,this.b(new Oy(lS,t,i))}}};var sS=null;u(Oy,ue),Ty.prototype.Jc=function(){return null};var aS="beforeoperations",lS="afteroperations";u(Ny,gy);var pS=[new Xt({html:'Map tiles by <a href="http://stamen.com/">Stamen Design</a>, under <a href="http://creativecommons.org/licenses/by/3.0/">CC BY 3.0</a>.'}),rS],cS={terrain:{Lb:"jpg",opaque:!0},"terrain-background":{Lb:"jpg",opaque:!0},"terrain-labels":{Lb:"png",opaque:!1},"terrain-lines":{Lb:"png",opaque:!1},"toner-background":{Lb:"png",opaque:!0},toner:{Lb:"png",opaque:!0},"toner-hybrid":{Lb:"png",opaque:!1},"toner-labels":{Lb:"png",opaque:!1},"toner-lines":{Lb:"png",opaque:!1},"toner-lite":{Lb:"png",opaque:!0},watercolor:{Lb:"jpg",opaque:!0}},uS={terrain:{minZoom:4,maxZoom:18},toner:{minZoom:0,maxZoom:20},watercolor:{minZoom:1,maxZoom:16}};u(ky,uy),ky.prototype.C=function(){return this.f},ky.prototype.nb=function(t){return t},ky.prototype.Fc=function(t,e,o){var i=this.tileGrid;if(i||(i=this.Ta(o)),!(i.b.length<=t[0])){var n=i.Aa(t,this.l),r=R(i.gb(t[0]),this.o);1!=e&&(r=x(r,e,this.o)),i={F:"image",FORMAT:"PNG32",TRANSPARENT:!0},mg(i,this.f);var s=this.urls;return s?(o=o.mb.split(":").pop(),i.SIZE=r[0]+","+r[1],i.BBOX=n.join(","),i.BBOXSR=o,i.IMAGESR=o,i.DPI=Math.round(i.DPI?i.DPI*e:90*e),t=(1==s.length?s[0]:s[C((t[1]<<t[0])+t[2],s.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),t=wy(t,i)):t=void 0,t}},ky.prototype.B=function(t){mg(this.f,t),ay(this,Dy(this))},u(jy,ry),jy.prototype.Nc=function(t,e,o){var i=this.Sb(t,e,o);if(this.a.b.hasOwnProperty(i))return this.a.get(i);var n=R(this.tileGrid.gb(t));return t=[t,e,o],e=(e=ly(this,t))?ly(this,e).toString():"",n=new Fy(t,n,e),this.a.set(i,n),n},u(Fy,Qu),Fy.prototype.Y=function(){if(this.a)return this.a;var t=this.c,e=xe(t[0],t[1]);return e.strokeStyle="black",e.strokeRect(.5,.5,t[0]+.5,t[1]+.5),e.fillStyle="black",e.textAlign="center",e.textBaseline="middle",e.font="24px sans-serif",e.fillText(this.Ia,t[0]/2,t[1]/2),this.a=e.canvas},Fy.prototype.load=function(){},u(Uy,uy),cg=Uy.prototype,cg.Ao=function(t){if(t=t.target,!t.status||200<=t.status&&300>t.status){try{var e=JSON.parse(t.responseText)}catch(t){return void this.Ve()}this.og(e)}else this.Ve()},cg.zo=function(){this.Ve()},cg.pl=function(){return this.f},cg.og=function(t){var e=At("EPSG:4326"),o=this.c;if(t.bounds)var i=Rt(e,o),n=at(t.bounds,i);var r=t.minzoom||0,i=t.maxzoom||22;if(this.tileGrid=o=Ht({extent:Kt(o),maxZoom:i,minZoom:r}),this.tileUrlFunction=$f(t.tiles,o),void 0!==t.attribution&&!this.j){e=void 0!==n?n:e.G(),n={};for(var s;r<=i;++r)s=r.toString(),n[s]=[Bt(o,e,r)];this.ua([new Xt({html:t.attribution,tileRanges:n})])}this.f=t,sd(this,"ready")},cg.Ve=function(){sd(this,"error")},u(By,ry),cg=By.prototype,cg.Eo=function(t){if(t=t.target,!t.status||200<=t.status&&300>t.status){try{var e=JSON.parse(t.responseText)}catch(t){return void this.We()}this.pg(e)}else this.We()},cg.Do=function(){this.We()},cg.ml=function(){return this.g},cg.zk=function(t,e,o,i,n){this.tileGrid?(e=this.tileGrid.Be(t,e),Wy(this.Nc(e[0],e[1],e[2],1,this.c),t,o,i,n)):!0===n?setTimeout(function(){o.call(i,null)},0):o.call(i,null)},cg.We=function(){sd(this,"error")},cg.pg=function(t){var e=At("EPSG:4326"),o=this.c;if(t.bounds)var i=Rt(e,o),n=at(t.bounds,i);var r=t.minzoom||0,i=t.maxzoom||22;this.tileGrid=o=Ht({extent:Kt(o),maxZoom:i,minZoom:r}),this.g=t.template;var s=t.grids;if(s){if(this.l=$f(s,o),void 0!==t.attribution){for(e=void 0!==n?n:e.G(),n={};r<=i;++r)s=r.toString(),n[s]=[Bt(o,e,r)];this.ua([new Xt({html:t.attribution,tileRanges:n})])}sd(this,"ready")}else sd(this,"error")},cg.Nc=function(t,e,o,i,n){var r=this.Sb(t,e,o);return this.a.b.hasOwnProperty(r)?this.a.get(r):(t=[t,e,o],e=ly(this,t,n),i=this.l(e,i,n),i=new Vy(t,void 0!==i?0:4,void 0!==i?i:"",this.tileGrid.Aa(t),this.v,this.f),this.a.set(r,i),i)},cg.Ug=function(t,e,o){t=this.Sb(t,e,o),this.a.b.hasOwnProperty(t)&&this.a.get(t)},u(Vy,Qu),cg=Vy.prototype,cg.Y=function(){return null},cg.getData=function(t){if(!this.g||!this.j)return null;var e=this.g[Math.floor((1-(t[1]-this.a[1])/(this.a[3]-this.a[1]))*this.g.length)];return"string"!=typeof e?null:(e=e.charCodeAt(Math.floor((t[0]-this.a[0])/(this.a[2]-this.a[0])*e.length)),93<=e&&e--,35<=e&&e--,e-=32,t=null,e in this.j&&(e=this.j[e],t=this.c&&e in this.c?this.c[e]:e),t)},cg.bb=function(){return this.o},cg.De=function(){this.state=3,this.s()},cg.Ji=function(t){this.g=t.grid,this.j=t.keys,this.c=t.data,this.state=4,this.s()},cg.Co=function(t){if(t=t.target,!t.status||200<=t.status&&300>t.status){try{var e=JSON.parse(t.responseText)}catch(t){return void this.De()}this.Ji(e)}else this.De()},cg.Bo=function(){this.De()},cg.load=function(){this.v&&zy(this)},u(qy,uy),cg=qy.prototype,cg.Fo=function(t,e,o,i){o=At(o);var n=this.tileGrid;if(n||(n=this.Ta(o)),e=n.Be(t,e),!(n.b.length<=e[0])){var r=n.Da(e[0]),s=n.Aa(e,this.fa),n=R(n.gb(e[0]),this.o),a=this.C;return a&&(n=M(n,a,this.o),s=T(s,r*a,s)),a={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetFeatureInfo",FORMAT:"image/png",TRANSPARENT:!0,QUERY_LAYERS:this.f.LAYERS},mg(a,this.f,i),i=Math.floor((s[3]-t[1])/r),a[this.l?"I":"X"]=Math.floor((t[0]-s[0])/r),a[this.l?"J":"Y"]=i,Hy(this,e,n,s,1,o,a)}},cg.Xf=function(){return this.C},cg.Sb=function(t,e,o){return this.R+uy.prototype.Sb.call(this,t,e,o)},cg.Go=function(){return this.f},cg.nb=function(t){return this.T&&void 0!==this.B?t:1},cg.Fc=function(t,e,o){var i=this.tileGrid;if(i||(i=this.Ta(o)),!(i.b.length<=t[0])){1==e||this.T&&void 0!==this.B||(e=1);var n=i.Da(t[0]),r=i.Aa(t,this.fa),i=R(i.gb(t[0]),this.o),s=this.C;return s&&(i=M(i,s,this.o),r=T(r,n*s,r)),1!=e&&(i=x(i,e,this.o)),n={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0},mg(n,this.f),Hy(this,t,i,r,e,o,n)}},cg.eb=function(t){uy.prototype.eb.call(this,t),Yy(this)},cg.Ho=function(t){mg(this.f,t),Yy(this),Ky(this),ay(this,Zy(this))},u(Xy,Qu),Xy.prototype.ka=function(){for(var t=0,e=this.a.length;t<e;++t){var o=this.a[t],i=this.c[o];i.j--,i.j||(delete this.c[o],ce(i))}this.a.length=0,this.c=null,1==this.state&&(this.g.forEach(ae),this.g.length=0),this.i&&ce(this.i),this.state=5,this.s(),this.l.forEach(ae),this.l.length=0,Qu.prototype.ka.call(this)},Xy.prototype.Y=function(){return-1==this.o.Lg?null:this.j.canvas},Xy.prototype.bb=function(){return this.a.join("/")+"/"+this.u},Xy.prototype.load=function(){var t=0,e=!1;0==this.state&&th(this,1),1==this.state&&this.a.forEach(function(o){var i=this.c[o];if(0==i.state?(i.Pg(this.S),i.load()):3==i.state?e=!0:4==i.state&&r(this.a,o),1==i.state){var n=ne(i,"change",function(){var s=i.getState();2!=s&&3!=s||(--t,ae(n),r(this.g,n),3==s&&(r(this.a,o),e=!0),t||th(this,0<this.a.length?2:3))}.bind(this));this.g.push(n),++t}}.bind(this)),t||setTimeout(function(){th(this,0<this.a.length?2:e?3:4)}.bind(this),0)},u(Qy,Qu),cg=Qy.prototype,cg.ka=function(){this.g=null,this.c={},this.state=5,this.s(),Qu.prototype.ka.call(this)},cg.Lm=function(){return this.o},cg.Km=function(){return this.g},cg.bb=function(){return this.l},cg.Mm=function(){return this.a},cg.load=function(){0==this.state&&(th(this,1),this.u(this,this.l),this.v(null,NaN,null))},cg.$o=function(t,e){this.ig(e),this.mj(t)},cg.Zo=function(){th(this,3)},cg.mj=function(t){this.g=t,th(this,2)},cg.ig=function(t){this.a=t},cg.Pg=function(t){this.v=t},u($y,cy),$y.prototype.Nc=function(t,e,o,i,n){var r=this.Sb(t,e,o);return this.a.b.hasOwnProperty(r)?this.a.get(r):(t=[t,e,o],o=(e=ly(this,t,n))?this.tileUrlFunction(e,i,n):void 0,i=new Xy(t,void 0!==o?0:4,void 0!==o?o:"",this.g,this.tileLoadFunction,e,this.tileUrlFunction,this.tileGrid,this.Ta(n),this.v,i,n,this.tileClass,this.Li.bind(this)),this.a.set(r,i),i)},$y.prototype.Ta=function(t){var e=t.mb,o=this.f[e];return o||(o=this.tileGrid,o=this.f[e]=Zt(t,void 0,o?o.gb(o.minZoom):void 0)),o},$y.prototype.nb=function(t){return void 0==t?cy.prototype.nb.call(this,t):t},$y.prototype.Xd=function(t,e,o){return t=R(this.Ta(o).gb(t)),[Math.round(t[0]*e),Math.round(t[1]*e)]},u(tg,Dt),tg.prototype.l=function(){return this.o},u(og,uy),cg=og.prototype,cg.Mk=function(){return this.f},cg.Io=function(){return this.C},cg.Jo=function(){return this.B},cg.$k=function(){return this.l},cg.kl=function(){return this.T},cg.Ko=function(){return this.R},cg.rl=function(){return this.fa},cg.uq=function(t){mg(this.f,t),ay(this,ig(this))},u(ng,uy),u(rg,eh),rg.prototype.Y=function(){if(this.a)return this.a;var t=eh.prototype.Y.call(this);if(2==this.state){if(256==t.width&&256==t.height)return this.a=t;var e=xe(256,256);return e.drawImage(t,0,0),this.a=e.canvas}return t};var hS="default",dS="truncated";sg.prototype.get=function(t){return this.c[t]||null},sg.prototype.add=function(t,e,o,i,n){var r,s=0;for(r=this.a.length;s<r;++s){var a=this.a[s];if(a.width>=e+this.b&&a.height>=o+this.b)return r={offsetX:a.x+this.b,offsetY:a.y+this.b,image:this.f},this.c[t]=r,i.call(n,this.i,a.x+this.b,a.y+this.b),t=s,e+=this.b,i=o+this.b,a.width-e>a.height-i?(o={x:a.x+e,y:a.y,width:a.width-e,height:a.height},e={x:a.x,y:a.y+i,width:e,height:a.height-i},ag(this,t,o,e)):(o={x:a.x+e,y:a.y,width:a.width-e,height:i},e={x:a.x,y:a.y+i,width:a.width,height:a.height-i},ag(this,t,o,e)),r}return null},lg.prototype.add=function(t,e,o,i,n,r){return e+this.b>this.i||o+this.b>this.i?null:(i=pg(this,!1,t,e,o,i,r))?(t=pg(this,!0,t,e,o,n||h,r),{offsetX:i.offsetX,offsetY:i.offsetY,image:i.image,Zl:t.image}):null},f.prototype.code=f.prototype.code,t("ol.Attribution",Xt),Xt.prototype.getHTML=Xt.prototype.i,t("ol.Collection",be),be.prototype.clear=be.prototype.clear,be.prototype.extend=be.prototype.fg,be.prototype.forEach=be.prototype.forEach,be.prototype.getArray=be.prototype.tm,be.prototype.item=be.prototype.item,be.prototype.getLength=be.prototype.dc,be.prototype.insertAt=be.prototype.He,be.prototype.pop=be.prototype.pop,be.prototype.push=be.prototype.push,be.prototype.remove=be.prototype.remove,be.prototype.removeAt=be.prototype.Hg,be.prototype.setAt=be.prototype.Wp,we.prototype.element=we.prototype.element,t("ol.color.asArray",Pe),t("ol.color.asString",Ce),t("ol.colorlike.asColorLike",Me),t("ol.control.defaults",Ve),t("ol.coordinate.add",zo),t("ol.coordinate.createStringXY",function(t){return function(e){return ei(e,t)}}),t("ol.coordinate.format",Zo),t("ol.coordinate.rotate",Xo),t("ol.coordinate.toStringHDMS",function(t,e){return t?Yo("NS",t[1],e)+" "+Yo("EW",t[0],e):""}),t("ol.coordinate.toStringXY",ei),t("ol.DeviceOrientation",ka),ka.prototype.getAlpha=ka.prototype.Fk,ka.prototype.getBeta=ka.prototype.Ik,ka.prototype.getGamma=ka.prototype.Ok,ka.prototype.getHeading=ka.prototype.um,ka.prototype.getTracking=ka.prototype.Th,ka.prototype.setTracking=ka.prototype.gg,t("ol.easing.easeIn",Ne),t("ol.easing.easeOut",ke),t("ol.easing.inAndOut",De),t("ol.easing.linear",je),t("ol.easing.upAndDown",function(t){return.5>t?De(2*t):1-De(2*(t-.5))}),t("ol.extent.boundingExtent",I),t("ol.extent.buffer",T),t("ol.extent.containsCoordinate",O),t("ol.extent.containsExtent",N),t("ol.extent.containsXY",k),t("ol.extent.createEmpty",j),t("ol.extent.equals",W),t("ol.extent.extend",z),t("ol.extent.getArea",Z),t("ol.extent.getBottomLeft",K),t("ol.extent.getBottomRight",X),t("ol.extent.getCenter",J),t("ol.extent.getHeight",$),t("ol.extent.getIntersection",tt),t("ol.extent.getSize",function(t){return[t[2]-t[0],t[3]-t[1]]}),t("ol.extent.getTopLeft",et),t("ol.extent.getTopRight",ot),t("ol.extent.getWidth",it),t("ol.extent.intersects",nt),t("ol.extent.isEmpty",rt),t("ol.extent.applyTransform",at),t("ol.Feature",Ya),Ya.prototype.clone=Ya.prototype.clone,Ya.prototype.getGeometry=Ya.prototype.V,Ya.prototype.getId=Ya.prototype.wm,Ya.prototype.getGeometryName=Ya.prototype.Qk,Ya.prototype.getStyle=Ya.prototype.xm,Ya.prototype.getStyleFunction=Ya.prototype.Lc,Ya.prototype.setGeometry=Ya.prototype.Ra,Ya.prototype.setStyle=Ya.prototype.hg,Ya.prototype.setId=Ya.prototype.jc,Ya.prototype.setGeometryName=Ya.prototype.Tc,t("ol.featureloader.xhr",gl),t("ol.Geolocation",Uu),Uu.prototype.getAccuracy=Uu.prototype.Dk,Uu.prototype.getAccuracyGeometry=Uu.prototype.Ek,Uu.prototype.getAltitude=Uu.prototype.Gk,Uu.prototype.getAltitudeAccuracy=Uu.prototype.Hk,Uu.prototype.getHeading=Uu.prototype.ym,Uu.prototype.getPosition=Uu.prototype.zm,Uu.prototype.getProjection=Uu.prototype.Uh,Uu.prototype.getSpeed=Uu.prototype.ll,Uu.prototype.getTracking=Uu.prototype.Vh,Uu.prototype.getTrackingOptions=Uu.prototype.Gh,Uu.prototype.setProjection=Uu.prototype.Wh,Uu.prototype.setTracking=Uu.prototype.Ke,Uu.prototype.setTrackingOptions=Uu.prototype.wj,t("ol.Graticule",Hu),Hu.prototype.getMap=Hu.prototype.Cm,Hu.prototype.getMeridians=Hu.prototype.al,Hu.prototype.getParallels=Hu.prototype.hl,Hu.prototype.setMap=Hu.prototype.setMap,t("ol.has.DEVICE_PIXEL_RATIO",Zg),t("ol.has.CANVAS",Xg),t("ol.has.DEVICE_ORIENTATION",Jg),t("ol.has.GEOLOCATION",Qg),t("ol.has.TOUCH",$g),t("ol.has.WEBGL",Ug),Xu.prototype.getImage=Xu.prototype.Y,Xu.prototype.load=Xu.prototype.load,eh.prototype.getImage=eh.prototype.Y,t("ol.inherits",u),t("ol.interaction.defaults",or),t("ol.Kinetic",on),t("ol.loadingstrategy.all",id),t("ol.loadingstrategy.bbox",function(t){return[t]}),t("ol.loadingstrategy.tile",function(t){return function(e,o){o=t.tc(o),e=Bt(t,e,o);var i=[];for(o=[o,0,0],o[1]=e.ca;o[1]<=e.$;++o[1])for(o[2]=e.da;o[2]<=e.ia;++o[2])i.push(t.Aa(o));return i}}),t("ol.Map",ma),ma.prototype.addControl=ma.prototype.kk,ma.prototype.addInteraction=ma.prototype.lk,ma.prototype.addLayer=ma.prototype.ih,ma.prototype.addOverlay=ma.prototype.jh,ma.prototype.forEachFeatureAtPixel=ma.prototype.we,ma.prototype.forEachLayerAtPixel=ma.prototype.Im,ma.prototype.hasFeatureAtPixel=ma.prototype.Yl,ma.prototype.getEventCoordinate=ma.prototype.Tf,ma.prototype.getEventPixel=ma.prototype.xe,ma.prototype.getTarget=ma.prototype.ag,ma.prototype.getTargetElement=ma.prototype.jd,ma.prototype.getCoordinateFromPixel=ma.prototype.Wa,ma.prototype.getControls=ma.prototype.Lk,ma.prototype.getOverlays=ma.prototype.fl,ma.prototype.getOverlayById=ma.prototype.el,ma.prototype.getInteractions=ma.prototype.Sk,ma.prototype.getLayerGroup=ma.prototype.Kc,ma.prototype.getLayers=ma.prototype.Xh,ma.prototype.getPixelFromCoordinate=ma.prototype.Ja,ma.prototype.getSize=ma.prototype.Ob,ma.prototype.getView=ma.prototype.Z,ma.prototype.getViewport=ma.prototype.sl,ma.prototype.renderSync=ma.prototype.Tp,ma.prototype.render=ma.prototype.render,ma.prototype.removeControl=ma.prototype.Mp,ma.prototype.removeInteraction=ma.prototype.Np,ma.prototype.removeLayer=ma.prototype.Pp,ma.prototype.removeOverlay=ma.prototype.Qp,ma.prototype.setLayerGroup=ma.prototype.qj,ma.prototype.setSize=ma.prototype.Qg,ma.prototype.setTarget=ma.prototype.Le,ma.prototype.setView=ma.prototype.iq,ma.prototype.updateSize=ma.prototype.Ad,Je.prototype.originalEvent=Je.prototype.originalEvent,Je.prototype.pixel=Je.prototype.pixel,Je.prototype.coordinate=Je.prototype.coordinate,Je.prototype.dragging=Je.prototype.dragging,Xe.prototype.map=Xe.prototype.map,Xe.prototype.frameState=Xe.prototype.frameState,t("ol.Object",ge),ge.prototype.get=ge.prototype.get,ge.prototype.getKeys=ge.prototype.O,ge.prototype.getProperties=ge.prototype.N,ge.prototype.set=ge.prototype.set,ge.prototype.setProperties=ge.prototype.H,ge.prototype.unset=ge.prototype.P,_e.prototype.key=_e.prototype.key,_e.prototype.oldValue=_e.prototype.oldValue,t("ol.Observable",ye),t("ol.Observable.unByKey",function(t){if(Array.isArray(t))for(var e=0,o=t.length;e<o;++e)ae(t[e]);else ae(t)}),ye.prototype.changed=ye.prototype.s,ye.prototype.dispatchEvent=ye.prototype.b,ye.prototype.getRevision=ye.prototype.L,ye.prototype.on=ye.prototype.J,ye.prototype.once=ye.prototype.once,ye.prototype.un=ye.prototype.K,t("ol.Overlay",_a),_a.prototype.getElement=_a.prototype.Rd,_a.prototype.getId=_a.prototype.Jm,_a.prototype.getMap=_a.prototype.Me,_a.prototype.getOffset=_a.prototype.Dh,_a.prototype.getPosition=_a.prototype.Yh,_a.prototype.getPositioning=_a.prototype.Eh,_a.prototype.setElement=_a.prototype.lj,_a.prototype.setMap=_a.prototype.setMap,_a.prototype.setOffset=_a.prototype.rj,_a.prototype.setPosition=_a.prototype.Ne,_a.prototype.setPositioning=_a.prototype.uj,t("ol.proj.METERS_PER_UNIT",_g),t("ol.proj.setProj4",function(t){bg=t}),t("ol.proj.getPointResolution",_t),
t("ol.proj.addEquivalentProjections",bt),t("ol.proj.addProjection",St),t("ol.proj.addCoordinateTransforms",Pt),t("ol.proj.fromLonLat",function(t,e){return Lt(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}),t("ol.proj.toLonLat",function(t,e){return Lt(t,void 0!==e?e:"EPSG:3857","EPSG:4326")}),t("ol.proj.get",At),t("ol.proj.equivalent",Mt),t("ol.proj.getTransform",xt),t("ol.proj.transform",Lt),t("ol.proj.transformExtent",Gt),t("ol.render.toContext",function(t,e){var o=t.canvas,i=e||{};return e=i.pixelRatio||Zg,(i=i.size)&&(o.width=i[0]*e,o.height=i[1]*e,o.style.width=i[0]+"px",o.style.height=i[1]+"px"),o=[0,0,o.width,o.height],i=gr(pr(),e,e),new Rr(t,e,o,i,0)}),t("ol.size.toSize",R),t("ol.Sphere",ut),ut.prototype.geodesicArea=ut.prototype.a,ut.prototype.haversineDistance=ut.prototype.b,Qu.prototype.getTileCoord=Qu.prototype.f,Qu.prototype.load=Qu.prototype.load,t("ol.tilegrid.createXYZ",Ht),Qy.prototype.getFormat=Qy.prototype.Lm;Qy.prototype.getFeatures=Qy.prototype.Km,Qy.prototype.getProjection=Qy.prototype.Mm,Qy.prototype.setFeatures=Qy.prototype.mj,Qy.prototype.setProjection=Qy.prototype.ig,Qy.prototype.setLoader=Qy.prototype.Pg,t("ol.View",qi),qi.prototype.animate=qi.prototype.animate,qi.prototype.getAnimating=qi.prototype.Ic,qi.prototype.getInteracting=qi.prototype.Rk,qi.prototype.cancelAnimations=qi.prototype.ed,qi.prototype.constrainCenter=qi.prototype.Ec,qi.prototype.constrainResolution=qi.prototype.constrainResolution,qi.prototype.constrainRotation=qi.prototype.constrainRotation,qi.prototype.getCenter=qi.prototype.wa,qi.prototype.calculateExtent=qi.prototype.dd,qi.prototype.getMaxResolution=qi.prototype.Nm,qi.prototype.getMinResolution=qi.prototype.Pm,qi.prototype.getMaxZoom=qi.prototype.Om,qi.prototype.setMaxZoom=qi.prototype.eq,qi.prototype.getMinZoom=qi.prototype.Qm,qi.prototype.setMinZoom=qi.prototype.fq,qi.prototype.getProjection=qi.prototype.Rm,qi.prototype.getResolution=qi.prototype.Pa,qi.prototype.getResolutions=qi.prototype.Sm,qi.prototype.getResolutionForExtent=qi.prototype.ze,qi.prototype.getRotation=qi.prototype.Qa,qi.prototype.getZoom=qi.prototype.Hh,qi.prototype.getZoomForResolution=qi.prototype.Ce,qi.prototype.fit=qi.prototype.Qf,qi.prototype.centerOn=qi.prototype.uk,qi.prototype.rotate=qi.prototype.rotate,qi.prototype.setCenter=qi.prototype.ob,qi.prototype.setResolution=qi.prototype.Vc,qi.prototype.setRotation=qi.prototype.Oe,qi.prototype.setZoom=qi.prototype.lq,t("ol.xml.getAllTextContent",Xa),t("ol.xml.parse",tl),os.prototype.getGL=os.prototype.Wo,os.prototype.useProgram=os.prototype.Qc,t("ol.tilegrid.TileGrid",Dt),Dt.prototype.forEachTileCoord=Dt.prototype.Rf,Dt.prototype.getMaxZoom=Dt.prototype.Ti,Dt.prototype.getMinZoom=Dt.prototype.Ui,Dt.prototype.getOrigin=Dt.prototype.Pc,Dt.prototype.getResolution=Dt.prototype.Da,Dt.prototype.getResolutions=Dt.prototype.Vi,Dt.prototype.getTileCoordExtent=Dt.prototype.Aa,Dt.prototype.getTileCoordForCoordAndResolution=Dt.prototype.Be,Dt.prototype.getTileCoordForCoordAndZ=Dt.prototype.bg,Dt.prototype.getTileSize=Dt.prototype.gb,Dt.prototype.getZForResolution=Dt.prototype.tc,t("ol.tilegrid.WMTS",tg),tg.prototype.getMatrixIds=tg.prototype.l,t("ol.tilegrid.WMTS.createFromCapabilitiesMatrixSet",eg),t("ol.style.AtlasManager",lg),t("ol.style.Circle",Ua),Ua.prototype.setRadius=Ua.prototype.Uc,t("ol.style.Fill",Ba),Ba.prototype.clone=Ba.prototype.clone,Ba.prototype.getColor=Ba.prototype.i,Ba.prototype.setColor=Ba.prototype.c,t("ol.style.Icon",ic),ic.prototype.clone=ic.prototype.clone,ic.prototype.getAnchor=ic.prototype.Hc,ic.prototype.getColor=ic.prototype.Lo,ic.prototype.getImage=ic.prototype.Y,ic.prototype.getOrigin=ic.prototype.Oc,ic.prototype.getSrc=ic.prototype.Mo,ic.prototype.getSize=ic.prototype.ic,ic.prototype.load=ic.prototype.load,t("ol.style.Image",Da),Da.prototype.getOpacity=Da.prototype.Ze,Da.prototype.getRotateWithView=Da.prototype.$e,Da.prototype.getRotation=Da.prototype.af,Da.prototype.getScale=Da.prototype.bf,Da.prototype.getSnapToPixel=Da.prototype.Ae,Da.prototype.setOpacity=Da.prototype.td,Da.prototype.setRotation=Da.prototype.cf,Da.prototype.setScale=Da.prototype.ud,t("ol.style.RegularShape",ja),ja.prototype.clone=ja.prototype.clone,ja.prototype.getAnchor=ja.prototype.Hc,ja.prototype.getAngle=ja.prototype.Pi,ja.prototype.getFill=ja.prototype.Fa,ja.prototype.getImage=ja.prototype.Y,ja.prototype.getOrigin=ja.prototype.Oc,ja.prototype.getPoints=ja.prototype.Qi,ja.prototype.getRadius=ja.prototype.Ri,ja.prototype.getRadius2=ja.prototype.Fh,ja.prototype.getSize=ja.prototype.ic,ja.prototype.getStroke=ja.prototype.Ga,t("ol.style.Stroke",xs),xs.prototype.clone=xs.prototype.clone,xs.prototype.getColor=xs.prototype.No,xs.prototype.getLineCap=xs.prototype.Vk,xs.prototype.getLineDash=xs.prototype.Oo,xs.prototype.getLineDashOffset=xs.prototype.Wk,xs.prototype.getLineJoin=xs.prototype.Xk,xs.prototype.getMiterLimit=xs.prototype.bl,xs.prototype.getWidth=xs.prototype.Po,xs.prototype.setColor=xs.prototype.Qo,xs.prototype.setLineCap=xs.prototype.aq,xs.prototype.setLineDash=xs.prototype.setLineDash,xs.prototype.setLineDashOffset=xs.prototype.bq,xs.prototype.setLineJoin=xs.prototype.cq,xs.prototype.setMiterLimit=xs.prototype.gq,xs.prototype.setWidth=xs.prototype.jq,t("ol.style.Style",Va),Va.prototype.clone=Va.prototype.clone,Va.prototype.getGeometry=Va.prototype.V,Va.prototype.getGeometryFunction=Va.prototype.Pk,Va.prototype.getFill=Va.prototype.Fa,Va.prototype.setFill=Va.prototype.pf,Va.prototype.getImage=Va.prototype.Y,Va.prototype.setImage=Va.prototype.Og,Va.prototype.getStroke=Va.prototype.Ga,Va.prototype.setStroke=Va.prototype.qf,Va.prototype.getText=Va.prototype.Na,Va.prototype.setText=Va.prototype.xd,Va.prototype.getZIndex=Va.prototype.Ba,Va.prototype.setGeometry=Va.prototype.Ra,Va.prototype.setZIndex=Va.prototype.Vb,t("ol.style.Text",nc),nc.prototype.clone=nc.prototype.clone,nc.prototype.getFont=nc.prototype.Nk,nc.prototype.getOffsetX=nc.prototype.cl,nc.prototype.getOffsetY=nc.prototype.dl,nc.prototype.getFill=nc.prototype.Fa,nc.prototype.getRotateWithView=nc.prototype.Ro,nc.prototype.getRotation=nc.prototype.So,nc.prototype.getScale=nc.prototype.To,nc.prototype.getStroke=nc.prototype.Ga,nc.prototype.getText=nc.prototype.Na,nc.prototype.getTextAlign=nc.prototype.nl,nc.prototype.getTextBaseline=nc.prototype.ol,nc.prototype.setFont=nc.prototype.nj,nc.prototype.setOffsetX=nc.prototype.sj,nc.prototype.setOffsetY=nc.prototype.tj,nc.prototype.setFill=nc.prototype.pf,nc.prototype.setRotation=nc.prototype.Uo,nc.prototype.setScale=nc.prototype.Si,nc.prototype.setStroke=nc.prototype.qf,nc.prototype.setText=nc.prototype.xd,nc.prototype.setTextAlign=nc.prototype.vj,nc.prototype.setTextBaseline=nc.prototype.hq,t("ol.source.BingMaps",yy),t("ol.source.BingMaps.TOS_ATTRIBUTION",iS),yy.prototype.getApiKey=yy.prototype.T,yy.prototype.getImagerySet=yy.prototype.fa,t("ol.source.CartoDB",my),my.prototype.getConfig=my.prototype.Kk,my.prototype.updateConfig=my.prototype.tq,my.prototype.setConfig=my.prototype.Xp,t("ol.source.Cluster",by),by.prototype.getDistance=by.prototype.$n,by.prototype.getSource=by.prototype.ao,by.prototype.setDistance=by.prototype.Yp,t("ol.source.Image",If),Gf.prototype.image=Gf.prototype.image,t("ol.source.ImageArcGISRest",Py),Py.prototype.getParams=Py.prototype.co,Py.prototype.getImageLoadFunction=Py.prototype.bo,Py.prototype.getUrl=Py.prototype.eo,Py.prototype.setImageLoadFunction=Py.prototype.fo,Py.prototype.setUrl=Py.prototype.ho,Py.prototype.updateParams=Py.prototype.io,t("ol.source.ImageCanvas",Of),t("ol.source.ImageMapGuide",Cy),Cy.prototype.getParams=Cy.prototype.ko,Cy.prototype.getImageLoadFunction=Cy.prototype.jo,Cy.prototype.updateParams=Cy.prototype.mo,Cy.prototype.setImageLoadFunction=Cy.prototype.lo,t("ol.source.ImageStatic",Ay),t("ol.source.ImageVector",Nf),Nf.prototype.getSource=Nf.prototype.no,Nf.prototype.getStyle=Nf.prototype.oo,Nf.prototype.getStyleFunction=Nf.prototype.po,Nf.prototype.setStyle=Nf.prototype.Ii,t("ol.source.ImageWMS",My),My.prototype.getGetFeatureInfoUrl=My.prototype.so,My.prototype.getParams=My.prototype.uo,My.prototype.getImageLoadFunction=My.prototype.to,My.prototype.getUrl=My.prototype.vo,My.prototype.setImageLoadFunction=My.prototype.wo,My.prototype.setUrl=My.prototype.xo,My.prototype.updateParams=My.prototype.yo,t("ol.source.OSM",Iy),t("ol.source.OSM.ATTRIBUTION",rS),t("ol.source.Raster",Ty),Ty.prototype.setOperation=Ty.prototype.v,Oy.prototype.extent=Oy.prototype.extent,Oy.prototype.resolution=Oy.prototype.resolution,Oy.prototype.data=Oy.prototype.data,t("ol.source.Source",nd),nd.prototype.getAttributions=nd.prototype.ya,nd.prototype.getLogo=nd.prototype.xa,nd.prototype.getProjection=nd.prototype.za,nd.prototype.getState=nd.prototype.getState,nd.prototype.refresh=nd.prototype.sa,nd.prototype.setAttributions=nd.prototype.ua;t("ol.source.Stamen",Ny),t("ol.source.Tile",ry),ry.prototype.getTileGrid=ry.prototype.ab,py.prototype.tile=py.prototype.tile,t("ol.source.TileArcGISRest",ky),ky.prototype.getParams=ky.prototype.C,ky.prototype.updateParams=ky.prototype.B,t("ol.source.TileDebug",jy),t("ol.source.TileImage",uy),uy.prototype.setRenderReprojectionEdges=uy.prototype.Pb,uy.prototype.setTileGridForProjection=uy.prototype.Qb,t("ol.source.TileJSON",Uy),Uy.prototype.getTileJSON=Uy.prototype.pl,t("ol.source.TileUTFGrid",By),By.prototype.getTemplate=By.prototype.ml,By.prototype.forDataAtCoordinateAndResolution=By.prototype.zk,t("ol.source.TileWMS",qy),qy.prototype.getGetFeatureInfoUrl=qy.prototype.Fo,qy.prototype.getParams=qy.prototype.Go,qy.prototype.updateParams=qy.prototype.Ho,cy.prototype.getTileLoadFunction=cy.prototype.pb,cy.prototype.getTileUrlFunction=cy.prototype.qb,cy.prototype.getUrls=cy.prototype.rb,cy.prototype.setTileLoadFunction=cy.prototype.vb,cy.prototype.setTileUrlFunction=cy.prototype.cb,cy.prototype.setUrl=cy.prototype.jb,cy.prototype.setUrls=cy.prototype.eb,t("ol.source.Vector",ad),ad.prototype.addFeature=ad.prototype.yb,ad.prototype.addFeatures=ad.prototype.cd,ad.prototype.clear=ad.prototype.clear,ad.prototype.forEachFeature=ad.prototype.sh,ad.prototype.forEachFeatureInExtent=ad.prototype.$b,ad.prototype.forEachFeatureIntersectingExtent=ad.prototype.th,ad.prototype.getFeaturesCollection=ad.prototype.Ah,ad.prototype.getFeatures=ad.prototype.Xe,ad.prototype.getFeaturesAtCoordinate=ad.prototype.zh,ad.prototype.getFeaturesInExtent=ad.prototype.Uf,ad.prototype.getClosestFeatureToCoordinate=ad.prototype.vh,ad.prototype.getExtent=ad.prototype.G,ad.prototype.getFeatureById=ad.prototype.yh,ad.prototype.getFormat=ad.prototype.Mi,ad.prototype.getUrl=ad.prototype.Ni,ad.prototype.removeFeature=ad.prototype.Gb,fd.prototype.feature=fd.prototype.feature,t("ol.source.VectorTile",$y),t("ol.source.WMTS",og),og.prototype.getDimensions=og.prototype.Mk,og.prototype.getFormat=og.prototype.Io,og.prototype.getLayer=og.prototype.Jo,og.prototype.getMatrixSet=og.prototype.$k,og.prototype.getRequestEncoding=og.prototype.kl,og.prototype.getStyle=og.prototype.Ko,og.prototype.getVersion=og.prototype.rl,og.prototype.updateDimensions=og.prototype.uq,t("ol.source.WMTS.optionsFromCapabilities",function(t,e){var i=s(t.Contents.Layer,function(t){return t.Identifier==e.layer});if(null===i)return null;var n=t.Contents.TileMatrixSet,r=1<i.TileMatrixSetLink.length?"projection"in e?p(i.TileMatrixSetLink,function(t){var o=s(n,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3"),i=At(o),r=At(e.projection);return i&&r?Mt(i,r):o==e.projection}):p(i.TileMatrixSetLink,function(t){return t.TileMatrixSet==e.matrixSet}):0;0>r&&(r=0);var a=i.TileMatrixSetLink[r].TileMatrixSet,l=i.TileMatrixSetLink[r].TileMatrixSetLimits,c=i.Format[0];"format"in e&&(c=e.format),r=p(i.Style,function(t){return"style"in e?t.Title==e.style:t.isDefault}),0>r&&(r=0),r=i.Style[r].Identifier;var u={};"Dimension"in i&&i.Dimension.forEach(function(t){var e=t.Identifier,o=t.Default;void 0===o&&(o=t.Value[0]),u[e]=o});var h=s(t.Contents.TileMatrixSet,function(t){return t.Identifier==a}),d=At("projection"in e?e.projection:h.SupportedCRS.replace(/urn:ogc:def:crs:(\w+):(.*:)?(\w+)$/,"$1:$3")),f=i.WGS84BoundingBox;if(void 0!==f){var y=At("EPSG:4326").G();y=f[0]==y[0]&&f[2]==y[2];var g=Gt(f,"EPSG:4326",d);(f=d.G())&&(N(f,g)||(g=void 0))}l=eg(h,g,l);var m=[],h=e.requestEncoding,h=void 0!==h?h:"";if("OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata)for(t=t.OperationsMetadata.GetTile.DCP.HTTP.Get,g=0,f=t.length;g<f;++g){var v=s(t[g].Constraint,function(t){return"GetEncoding"==t.name}).AllowedValues.Value;if(""===h&&(h=v[0]),"KVP"!==h)break;o(v,"KVP")&&m.push(t[g].href)}return m.length||(h="REST",i.ResourceURL.forEach(function(t){"tile"===t.resourceType&&(c=t.format,m.push(t.template))})),{urls:m,layer:e.layer,matrixSet:a,format:c,projection:d,requestEncoding:h,tileGrid:l,style:r,dimensions:u,wrapX:y,crossOrigin:e.crossOrigin}}),t("ol.source.XYZ",gy),t("ol.source.Zoomify",ng),Ar.prototype.vectorContext=Ar.prototype.vectorContext,Ar.prototype.frameState=Ar.prototype.frameState,Ar.prototype.context=Ar.prototype.context,Ar.prototype.glContext=Ar.prototype.glContext,Fc.prototype.get=Fc.prototype.get,Fc.prototype.getExtent=Fc.prototype.G,Fc.prototype.getId=Fc.prototype.Wn,Fc.prototype.getGeometry=Fc.prototype.V,Fc.prototype.getProperties=Fc.prototype.Xn,Fc.prototype.getType=Fc.prototype.U,t("ol.render.VectorContext",xr),ua.prototype.setStyle=ua.prototype.rd,ua.prototype.drawGeometry=ua.prototype.zb,ua.prototype.drawFeature=ua.prototype.te,Rr.prototype.drawCircle=Rr.prototype.Zb,Rr.prototype.setStyle=Rr.prototype.rd,Rr.prototype.drawGeometry=Rr.prototype.zb,Rr.prototype.drawFeature=Rr.prototype.te,t("ol.proj.common.add",Ot),t("ol.proj.Projection",ht),ht.prototype.getCode=ht.prototype.Jk,ht.prototype.getExtent=ht.prototype.G,ht.prototype.getUnits=ht.prototype.Un,ht.prototype.getMetersPerUnit=ht.prototype.sc,ht.prototype.getWorldExtent=ht.prototype.tl,ht.prototype.isGlobal=ht.prototype.dm,ht.prototype.setGlobal=ht.prototype.$p,ht.prototype.setExtent=ht.prototype.Vn,ht.prototype.setWorldExtent=ht.prototype.kq,ht.prototype.setGetPointResolution=ht.prototype.Zp,t("ol.proj.Units.METERS_PER_UNIT",_g),t("ol.layer.Base",ir),ir.prototype.getExtent=ir.prototype.G,ir.prototype.getMaxResolution=ir.prototype.fc,ir.prototype.getMinResolution=ir.prototype.gc,ir.prototype.getOpacity=ir.prototype.hc,ir.prototype.getVisible=ir.prototype.Mb,ir.prototype.getZIndex=ir.prototype.Ba,ir.prototype.setExtent=ir.prototype.vc,ir.prototype.setMaxResolution=ir.prototype.Ac,ir.prototype.setMinResolution=ir.prototype.Bc,ir.prototype.setOpacity=ir.prototype.wc,ir.prototype.setVisible=ir.prototype.xc,ir.prototype.setZIndex=ir.prototype.Vb,t("ol.layer.Group",rr),rr.prototype.getLayers=rr.prototype.qd,rr.prototype.setLayers=rr.prototype.xi,t("ol.layer.Heatmap",bf),bf.prototype.getBlur=bf.prototype.uh,bf.prototype.getGradient=bf.prototype.Bh,bf.prototype.getRadius=bf.prototype.yi,bf.prototype.setBlur=bf.prototype.jj,bf.prototype.setGradient=bf.prototype.pj,bf.prototype.setRadius=bf.prototype.Uc,t("ol.layer.Image",Uf),Uf.prototype.getSource=Uf.prototype.ha,t("ol.layer.Layer",sr),sr.prototype.getSource=sr.prototype.ha,sr.prototype.setMap=sr.prototype.setMap,sr.prototype.setSource=sr.prototype.Wc,t("ol.layer.Tile",Yf),Yf.prototype.getPreload=Yf.prototype.Ud,Yf.prototype.getSource=Yf.prototype.ha,Yf.prototype.setPreload=Yf.prototype.zi,Yf.prototype.getUseInterimTilesOnError=Yf.prototype.kd,Yf.prototype.setUseInterimTilesOnError=Yf.prototype.Ai,t("ol.layer.Vector",od),od.prototype.getSource=od.prototype.ha,od.prototype.getStyle=od.prototype.D,od.prototype.getStyleFunction=od.prototype.C,od.prototype.setStyle=od.prototype.g,t("ol.layer.VectorTile",Kf),Kf.prototype.getPreload=Kf.prototype.Ud,Kf.prototype.getUseInterimTilesOnError=Kf.prototype.kd,Kf.prototype.setPreload=Kf.prototype.Bi,Kf.prototype.setUseInterimTilesOnError=Kf.prototype.Ci,t("ol.interaction.DoubleClickZoom",cn),t("ol.interaction.DoubleClickZoom.handleEvent",un),t("ol.interaction.DragAndDrop",ih),t("ol.interaction.DragAndDrop.handleEvent",oi),lh.prototype.features=lh.prototype.features,lh.prototype.file=lh.prototype.file,lh.prototype.projection=lh.prototype.projection,t("ol.interaction.DragBox",Nn),Nn.prototype.getGeometry=Nn.prototype.V,Un.prototype.coordinate=Un.prototype.coordinate,Un.prototype.mapBrowserEvent=Un.prototype.mapBrowserEvent,t("ol.interaction.DragPan",Pn),t("ol.interaction.DragRotate",xn),t("ol.interaction.DragRotateAndZoom",ph),t("ol.interaction.DragZoom",Bn),t("ol.interaction.Draw",yd),t("ol.interaction.Draw.handleEvent",md),yd.prototype.removeLastPoint=yd.prototype.Op,yd.prototype.finishDrawing=yd.prototype.Pd,yd.prototype.extend=yd.prototype.vn,t("ol.interaction.Draw.createRegularPolygon",function(t,e){return function(o,i){var n=o[0];o=o[1];var r=Math.sqrt(Qo(n,o));return i=i||Wi(new Bu(n),t),zi(i,n,r,e||Math.atan((o[1]-n[1])/(o[0]-n[0]))),i}}),t("ol.interaction.Draw.createBox",function(){return function(t,e){return t=I(t),e=e||new Fi(null),e.ma([[K(t),X(t),ot(t),et(t),K(t)]]),e}}),Md.prototype.feature=Md.prototype.feature,t("ol.interaction.Extent",xd),xd.prototype.getExtent=xd.prototype.G,xd.prototype.setExtent=xd.prototype.g,Fd.prototype.extent_=Fd.prototype.b,t("ol.interaction.Interaction",sn),sn.prototype.getActive=sn.prototype.c,sn.prototype.getMap=sn.prototype.f,sn.prototype.setActive=sn.prototype.Ha,t("ol.interaction.KeyboardPan",Vn),t("ol.interaction.KeyboardPan.handleEvent",Wn),t("ol.interaction.KeyboardZoom",zn),t("ol.interaction.KeyboardZoom.handleEvent",qn),t("ol.interaction.Modify",Ud),t("ol.interaction.Modify.handleEvent",Kd),Ud.prototype.removePoint=Ud.prototype.hj,ef.prototype.features=ef.prototype.features,ef.prototype.mapBrowserEvent=ef.prototype.mapBrowserEvent,t("ol.interaction.MouseWheelZoom",Hn),t("ol.interaction.MouseWheelZoom.handleEvent",Yn),Hn.prototype.setMouseAnchor=Hn.prototype.T,t("ol.interaction.PinchRotate",Zn),t("ol.interaction.PinchZoom",Qn),t("ol.interaction.Pointer",En),t("ol.interaction.Pointer.handleEvent",wn),t("ol.interaction.Select",of),of.prototype.getFeatures=of.prototype.Gn,of.prototype.getHitTolerance=of.prototype.Hn,of.prototype.getLayer=of.prototype.In,t("ol.interaction.Select.handleEvent",nf),of.prototype.setHitTolerance=of.prototype.Kn,of.prototype.setMap=of.prototype.setMap,sf.prototype.selected=sf.prototype.selected,sf.prototype.deselected=sf.prototype.deselected,sf.prototype.mapBrowserEvent=sf.prototype.mapBrowserEvent,t("ol.interaction.Snap",af),af.prototype.addFeature=af.prototype.yb,af.prototype.removeFeature=af.prototype.Gb,t("ol.interaction.Translate",hf),hf.prototype.getHitTolerance=hf.prototype.B,hf.prototype.setHitTolerance=hf.prototype.I,_f.prototype.features=_f.prototype.features,_f.prototype.coordinate=_f.prototype.coordinate,t("ol.geom.Circle",Bu);return Bu.prototype.clone=Bu.prototype.clone,Bu.prototype.getCenter=Bu.prototype.wa,Bu.prototype.getRadius=Bu.prototype.pd,Bu.prototype.getType=Bu.prototype.U,Bu.prototype.intersectsExtent=Bu.prototype.Xa,Bu.prototype.setCenter=Bu.prototype.ob,Bu.prototype.setCenterAndRadius=Bu.prototype.Ng,Bu.prototype.setRadius=Bu.prototype.Uc,Bu.prototype.transform=Bu.prototype.tb,t("ol.geom.Geometry",ni),ni.prototype.getClosestPoint=ni.prototype.Ab,ni.prototype.intersectsCoordinate=ni.prototype.sb,ni.prototype.getExtent=ni.prototype.G,ni.prototype.rotate=ni.prototype.rotate,ni.prototype.scale=ni.prototype.scale,ni.prototype.simplify=ni.prototype.Rb,ni.prototype.transform=ni.prototype.tb,t("ol.geom.GeometryCollection",up),up.prototype.clone=up.prototype.clone,up.prototype.getGeometries=up.prototype.Vf,up.prototype.getType=up.prototype.U,up.prototype.intersectsExtent=up.prototype.Xa,up.prototype.setGeometries=up.prototype.oj,up.prototype.applyTransform=up.prototype.Dc,up.prototype.translate=up.prototype.translate,t("ol.geom.LinearRing",Ci),Ci.prototype.clone=Ci.prototype.clone,Ci.prototype.getArea=Ci.prototype.qn,Ci.prototype.getCoordinates=Ci.prototype.X,Ci.prototype.getType=Ci.prototype.U,Ci.prototype.setCoordinates=Ci.prototype.ma,t("ol.geom.LineString",Al),Al.prototype.appendCoordinate=Al.prototype.mk,Al.prototype.clone=Al.prototype.clone,Al.prototype.forEachSegment=Al.prototype.Ck,Al.prototype.getCoordinateAtM=Al.prototype.nn,Al.prototype.getCoordinates=Al.prototype.X,Al.prototype.getCoordinateAt=Al.prototype.wh,Al.prototype.getLength=Al.prototype.pn,Al.prototype.getType=Al.prototype.U,Al.prototype.intersectsExtent=Al.prototype.Xa,Al.prototype.setCoordinates=Al.prototype.ma,t("ol.geom.MultiLineString",xl),xl.prototype.appendLineString=xl.prototype.nk,xl.prototype.clone=xl.prototype.clone,xl.prototype.getCoordinateAtM=xl.prototype.rn,xl.prototype.getCoordinates=xl.prototype.X,xl.prototype.getLineString=xl.prototype.Yk,xl.prototype.getLineStrings=xl.prototype.gd,xl.prototype.getType=xl.prototype.U,xl.prototype.intersectsExtent=xl.prototype.Xa,xl.prototype.setCoordinates=xl.prototype.ma,t("ol.geom.MultiPoint",Tl),Tl.prototype.appendPoint=Tl.prototype.qk,Tl.prototype.clone=Tl.prototype.clone,Tl.prototype.getCoordinates=Tl.prototype.X,Tl.prototype.getPoint=Tl.prototype.il,Tl.prototype.getPoints=Tl.prototype.Zd,Tl.prototype.getType=Tl.prototype.U,Tl.prototype.intersectsExtent=Tl.prototype.Xa,Tl.prototype.setCoordinates=Tl.prototype.ma,t("ol.geom.MultiPolygon",Ll),Ll.prototype.appendPolygon=Ll.prototype.rk,Ll.prototype.clone=Ll.prototype.clone,Ll.prototype.getArea=Ll.prototype.sn,Ll.prototype.getCoordinates=Ll.prototype.X,Ll.prototype.getInteriorPoints=Ll.prototype.Uk,Ll.prototype.getPolygon=Ll.prototype.jl,Ll.prototype.getPolygons=Ll.prototype.Td,Ll.prototype.getType=Ll.prototype.U,Ll.prototype.intersectsExtent=Ll.prototype.Xa,Ll.prototype.setCoordinates=Ll.prototype.ma,t("ol.geom.Point",Mi),Mi.prototype.clone=Mi.prototype.clone,Mi.prototype.getCoordinates=Mi.prototype.X,Mi.prototype.getType=Mi.prototype.U,Mi.prototype.intersectsExtent=Mi.prototype.Xa,Mi.prototype.setCoordinates=Mi.prototype.ma,t("ol.geom.Polygon",Fi),Fi.prototype.appendLinearRing=Fi.prototype.pk,Fi.prototype.clone=Fi.prototype.clone,Fi.prototype.getArea=Fi.prototype.tn,Fi.prototype.getCoordinates=Fi.prototype.X,Fi.prototype.getInteriorPoint=Fi.prototype.Tk,Fi.prototype.getLinearRingCount=Fi.prototype.Zk,Fi.prototype.getLinearRing=Fi.prototype.Ch,Fi.prototype.getLinearRings=Fi.prototype.Sd,Fi.prototype.getType=Fi.prototype.U,Fi.prototype.intersectsExtent=Fi.prototype.Xa,Fi.prototype.setCoordinates=Fi.prototype.ma,t("ol.geom.Polygon.circular",Bi),t("ol.geom.Polygon.fromExtent",Vi),t("ol.geom.Polygon.fromCircle",Wi),t("ol.geom.SimpleGeometry",ai),ai.prototype.getFirstCoordinate=ai.prototype.ac,ai.prototype.getLastCoordinate=ai.prototype.bc,ai.prototype.getLayout=ai.prototype.cc,ai.prototype.applyTransform=ai.prototype.Dc,ai.prototype.translate=ai.prototype.translate,t("ol.format.EsriJSON",Dl),Dl.prototype.readFeature=Dl.prototype.Tb,Dl.prototype.readFeatures=Dl.prototype.Oa,Dl.prototype.readGeometry=Dl.prototype.Sc,Dl.prototype.readProjection=Dl.prototype.kb,Dl.prototype.writeGeometry=Dl.prototype.$c,Dl.prototype.writeGeometryObject=Dl.prototype.je,Dl.prototype.writeFeature=Dl.prototype.Bd,Dl.prototype.writeFeatureObject=Dl.prototype.Zc,Dl.prototype.writeFeatures=Dl.prototype.Wb,Dl.prototype.writeFeaturesObject=Dl.prototype.he,t("ol.format.Feature",ml),t("ol.format.filter.and",pp),t("ol.format.filter.or",function(t){var e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(ap,e))}),t("ol.format.filter.not",function(t){return new rp(t)}),t("ol.format.filter.bbox",cp),t("ol.format.filter.intersects",function(t,e,o){return new $l(t,e,o)}),t("ol.format.filter.within",function(t,e,o){return new lp(t,e,o)}),t("ol.format.filter.equalTo",function(t,e,o){return new Kl(t,e,o)}),t("ol.format.filter.notEqualTo",function(t,e,o){return new sp(t,e,o)}),t("ol.format.filter.lessThan",function(t,e){return new ip(t,e)}),t("ol.format.filter.lessThanOrEqualTo",function(t,e){return new np(t,e)}),t("ol.format.filter.greaterThan",function(t,e){return new Xl(t,e)}),t("ol.format.filter.greaterThanOrEqualTo",function(t,e){return new Jl(t,e)}),t("ol.format.filter.isNull",function(t){return new op(t)}),t("ol.format.filter.between",function(t,e,o){return new tp(t,e,o)}),t("ol.format.filter.like",function(t,e,o,i,n,r){return new ep(t,e,o,i,n,r)}),t("ol.format.filter.during",function(t,e,o){return new Yl(t,e,o)}),t("ol.format.GeoJSON",yp),yp.prototype.readFeature=yp.prototype.Tb,yp.prototype.readFeatures=yp.prototype.Oa,yp.prototype.readGeometry=yp.prototype.Sc,yp.prototype.readProjection=yp.prototype.kb,yp.prototype.writeFeature=yp.prototype.Bd,yp.prototype.writeFeatureObject=yp.prototype.Zc,yp.prototype.writeFeatures=yp.prototype.Wb,yp.prototype.writeFeaturesObject=yp.prototype.he,yp.prototype.writeGeometry=yp.prototype.$c,yp.prototype.writeGeometryObject=yp.prototype.je,t("ol.format.GML",Op),Op.prototype.writeFeatures=Op.prototype.Wb,Op.prototype.writeFeaturesNode=Op.prototype.Xb,t("ol.format.GML2",kp),t("ol.format.GML3",Op),Op.prototype.writeGeometryNode=Op.prototype.ie,Op.prototype.writeFeatures=Op.prototype.Wb,Op.prototype.writeFeaturesNode=Op.prototype.Xb,Ep.prototype.readFeatures=Ep.prototype.Oa,t("ol.format.GPX",Up),Up.prototype.readFeature=Up.prototype.Tb,Up.prototype.readFeatures=Up.prototype.Oa,Up.prototype.readProjection=Up.prototype.kb,Up.prototype.writeFeatures=Up.prototype.Wb,Up.prototype.writeFeaturesNode=Up.prototype.Xb,t("ol.format.IGC",tc),tc.prototype.readFeature=tc.prototype.Tb,tc.prototype.readFeatures=tc.prototype.Oa,tc.prototype.readProjection=tc.prototype.kb,t("ol.format.KML",rc),rc.prototype.readFeature=rc.prototype.Tb,rc.prototype.readFeatures=rc.prototype.Oa,rc.prototype.readName=rc.prototype.Cp,rc.prototype.readNetworkLinks=rc.prototype.Dp,rc.prototype.readRegion=rc.prototype.Gp,rc.prototype.readRegionFromNode=rc.prototype.lf,rc.prototype.readProjection=rc.prototype.kb,rc.prototype.writeFeatures=rc.prototype.Wb,rc.prototype.writeFeaturesNode=rc.prototype.Xb,t("ol.format.MVT",Uc),Uc.prototype.readFeatures=Uc.prototype.Oa,Uc.prototype.readProjection=Uc.prototype.kb,Uc.prototype.setLayers=Uc.prototype.mn,t("ol.format.OSMXML",Vc),Vc.prototype.readFeatures=Vc.prototype.Oa,Vc.prototype.readProjection=Vc.prototype.kb,t("ol.format.Polyline",Zc),t("ol.format.Polyline.encodeDeltas",Kc),t("ol.format.Polyline.decodeDeltas",Xc),t("ol.format.Polyline.encodeFloats",Jc),t("ol.format.Polyline.decodeFloats",Qc),Zc.prototype.readFeature=Zc.prototype.Tb,Zc.prototype.readFeatures=Zc.prototype.Oa,Zc.prototype.readGeometry=Zc.prototype.Sc,Zc.prototype.readProjection=Zc.prototype.kb,Zc.prototype.writeGeometry=Zc.prototype.$c,t("ol.format.TopoJSON",$c),$c.prototype.readFeatures=$c.prototype.Oa,$c.prototype.readProjection=$c.prototype.kb,t("ol.format.WFS",nu),nu.prototype.readFeatures=nu.prototype.Oa,nu.prototype.readTransactionResponse=nu.prototype.j,nu.prototype.readFeatureCollectionMetadata=nu.prototype.g,t("ol.format.WFS.writeFilter",function(t){var e=Ka("http://www.opengis.net/ogc","Filter");return fl({node:e},Kb,ll(t.kc),[t],[]),e}),nu.prototype.writeGetFeature=nu.prototype.l,nu.prototype.writeTransaction=nu.prototype.v,nu.prototype.readProjection=nu.prototype.kb,t("ol.format.WKT",gu),gu.prototype.readFeature=gu.prototype.Tb,gu.prototype.readFeatures=gu.prototype.Oa,gu.prototype.readGeometry=gu.prototype.Sc,gu.prototype.writeFeature=gu.prototype.Bd,gu.prototype.writeFeatures=gu.prototype.Wb,gu.prototype.writeGeometry=gu.prototype.$c,t("ol.format.WMSCapabilities",Lu),Lu.prototype.read=Lu.prototype.read,t("ol.format.WMSGetFeatureInfo",Du),Du.prototype.readFeatures=Du.prototype.Oa,t("ol.format.WMTSCapabilities",ju),ju.prototype.read=ju.prototype.read,t("ol.format.filter.And",zl),t("ol.format.filter.Bbox",ql),t("ol.format.filter.Comparison",Hl),t("ol.format.filter.ComparisonBinary",Zl),t("ol.format.filter.During",Yl),t("ol.format.filter.EqualTo",Kl),t("ol.format.filter.Filter",Vl),t("ol.format.filter.GreaterThan",Xl),t("ol.format.filter.GreaterThanOrEqualTo",Jl),t("ol.format.filter.Intersects",$l),t("ol.format.filter.IsBetween",tp),t("ol.format.filter.IsLike",ep),t("ol.format.filter.IsNull",op),t("ol.format.filter.LessThan",ip),t("ol.format.filter.LessThanOrEqualTo",np),t("ol.format.filter.Not",rp),t("ol.format.filter.NotEqualTo",sp),t("ol.format.filter.Or",ap),t("ol.format.filter.Spatial",Ql),t("ol.format.filter.Within",lp),t("ol.events.condition.altKeyOnly",function(t){return t=t.originalEvent,t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey}),t("ol.events.condition.altShiftKeysOnly",hn),t("ol.events.condition.always",oi),t("ol.events.condition.click",function(t){return"click"==t.type}),t("ol.events.condition.never",ii),t("ol.events.condition.pointerMove",fn),t("ol.events.condition.singleClick",yn),t("ol.events.condition.doubleClick",function(t){return"dblclick"==t.type}),t("ol.events.condition.noModifierKeys",gn),t("ol.events.condition.platformModifierKeyOnly",function(t){return t=t.originalEvent,!t.altKey&&(Yg?t.metaKey:t.ctrlKey)&&!t.shiftKey}),t("ol.events.condition.shiftKeyOnly",mn),t("ol.events.condition.targetNotEditable",vn),t("ol.events.condition.mouseOnly",_n),t("ol.events.condition.primaryAction",bn),ue.prototype.type=ue.prototype.type,ue.prototype.target=ue.prototype.target,ue.prototype.preventDefault=ue.prototype.preventDefault,ue.prototype.stopPropagation=ue.prototype.stopPropagation,t("ol.control.Attribution",Le),t("ol.control.Attribution.render",Ge),Le.prototype.getCollapsible=Le.prototype.Um,Le.prototype.setCollapsible=Le.prototype.Xm,Le.prototype.setCollapsed=Le.prototype.Wm,Le.prototype.getCollapsed=Le.prototype.Tm,t("ol.control.Control",Te),Te.prototype.getMap=Te.prototype.g,Te.prototype.setMap=Te.prototype.setMap,Te.prototype.setTarget=Te.prototype.f,t("ol.control.FullScreen",We),t("ol.control.MousePosition",Ye),t("ol.control.MousePosition.render",Ze),Ye.prototype.getCoordinateFormat=Ye.prototype.xh,Ye.prototype.getProjection=Ye.prototype.Zh,Ye.prototype.setCoordinateFormat=Ye.prototype.kj,Ye.prototype.setProjection=Ye.prototype.$h,t("ol.control.OverviewMap",wa),t("ol.control.OverviewMap.render",Pa),wa.prototype.getCollapsible=wa.prototype.$m,wa.prototype.setCollapsible=wa.prototype.cn,wa.prototype.setCollapsed=wa.prototype.bn,wa.prototype.getCollapsed=wa.prototype.Zm,wa.prototype.getOverviewMap=wa.prototype.gl,t("ol.control.Rotate",Fe),t("ol.control.Rotate.render",Ue),t("ol.control.ScaleLine",xa),xa.prototype.getUnits=xa.prototype.C,t("ol.control.ScaleLine.render",Ra),xa.prototype.setUnits=xa.prototype.I,t("ol.control.Zoom",Be),t("ol.control.ZoomSlider",Ta),t("ol.control.ZoomSlider.render",La),t("ol.control.ZoomToExtent",Na),ge.prototype.changed=ge.prototype.s,ge.prototype.dispatchEvent=ge.prototype.b,ge.prototype.getRevision=ge.prototype.L,ge.prototype.on=ge.prototype.J,ge.prototype.once=ge.prototype.once,ge.prototype.un=ge.prototype.K,be.prototype.get=be.prototype.get,be.prototype.getKeys=be.prototype.O,be.prototype.getProperties=be.prototype.N,be.prototype.set=be.prototype.set,be.prototype.setProperties=be.prototype.H,be.prototype.unset=be.prototype.P,be.prototype.changed=be.prototype.s,be.prototype.dispatchEvent=be.prototype.b,be.prototype.getRevision=be.prototype.L,be.prototype.on=be.prototype.J,be.prototype.once=be.prototype.once,be.prototype.un=be.prototype.K,we.prototype.type=we.prototype.type,we.prototype.target=we.prototype.target,we.prototype.preventDefault=we.prototype.preventDefault,we.prototype.stopPropagation=we.prototype.stopPropagation,ka.prototype.get=ka.prototype.get,ka.prototype.getKeys=ka.prototype.O,ka.prototype.getProperties=ka.prototype.N,ka.prototype.set=ka.prototype.set,ka.prototype.setProperties=ka.prototype.H,ka.prototype.unset=ka.prototype.P,ka.prototype.changed=ka.prototype.s,ka.prototype.dispatchEvent=ka.prototype.b,ka.prototype.getRevision=ka.prototype.L,ka.prototype.on=ka.prototype.J,ka.prototype.once=ka.prototype.once,ka.prototype.un=ka.prototype.K,Ya.prototype.get=Ya.prototype.get,Ya.prototype.getKeys=Ya.prototype.O,
Ya.prototype.getProperties=Ya.prototype.N,Ya.prototype.set=Ya.prototype.set,Ya.prototype.setProperties=Ya.prototype.H,Ya.prototype.unset=Ya.prototype.P,Ya.prototype.changed=Ya.prototype.s,Ya.prototype.dispatchEvent=Ya.prototype.b,Ya.prototype.getRevision=Ya.prototype.L,Ya.prototype.on=Ya.prototype.J,Ya.prototype.once=Ya.prototype.once,Ya.prototype.un=Ya.prototype.K,Uu.prototype.get=Uu.prototype.get,Uu.prototype.getKeys=Uu.prototype.O,Uu.prototype.getProperties=Uu.prototype.N,Uu.prototype.set=Uu.prototype.set,Uu.prototype.setProperties=Uu.prototype.H,Uu.prototype.unset=Uu.prototype.P,Uu.prototype.changed=Uu.prototype.s,Uu.prototype.dispatchEvent=Uu.prototype.b,Uu.prototype.getRevision=Uu.prototype.L,Uu.prototype.on=Uu.prototype.J,Uu.prototype.once=Uu.prototype.once,Uu.prototype.un=Uu.prototype.K,eh.prototype.getTileCoord=eh.prototype.f,eh.prototype.load=eh.prototype.load,ma.prototype.get=ma.prototype.get,ma.prototype.getKeys=ma.prototype.O,ma.prototype.getProperties=ma.prototype.N,ma.prototype.set=ma.prototype.set,ma.prototype.setProperties=ma.prototype.H,ma.prototype.unset=ma.prototype.P,ma.prototype.changed=ma.prototype.s,ma.prototype.dispatchEvent=ma.prototype.b,ma.prototype.getRevision=ma.prototype.L,ma.prototype.on=ma.prototype.J,ma.prototype.once=ma.prototype.once,ma.prototype.un=ma.prototype.K,Xe.prototype.type=Xe.prototype.type,Xe.prototype.target=Xe.prototype.target,Xe.prototype.preventDefault=Xe.prototype.preventDefault,Xe.prototype.stopPropagation=Xe.prototype.stopPropagation,Je.prototype.map=Je.prototype.map,Je.prototype.frameState=Je.prototype.frameState,Je.prototype.type=Je.prototype.type,Je.prototype.target=Je.prototype.target,Je.prototype.preventDefault=Je.prototype.preventDefault,Je.prototype.stopPropagation=Je.prototype.stopPropagation,$e.prototype.originalEvent=$e.prototype.originalEvent,$e.prototype.pixel=$e.prototype.pixel,$e.prototype.coordinate=$e.prototype.coordinate,$e.prototype.dragging=$e.prototype.dragging,$e.prototype.preventDefault=$e.prototype.preventDefault,$e.prototype.stopPropagation=$e.prototype.stopPropagation,$e.prototype.map=$e.prototype.map,$e.prototype.frameState=$e.prototype.frameState,$e.prototype.type=$e.prototype.type,$e.prototype.target=$e.prototype.target,_e.prototype.type=_e.prototype.type,_e.prototype.target=_e.prototype.target,_e.prototype.preventDefault=_e.prototype.preventDefault,_e.prototype.stopPropagation=_e.prototype.stopPropagation,_a.prototype.get=_a.prototype.get,_a.prototype.getKeys=_a.prototype.O,_a.prototype.getProperties=_a.prototype.N,_a.prototype.set=_a.prototype.set,_a.prototype.setProperties=_a.prototype.H,_a.prototype.unset=_a.prototype.P,_a.prototype.changed=_a.prototype.s,_a.prototype.dispatchEvent=_a.prototype.b,_a.prototype.getRevision=_a.prototype.L,_a.prototype.on=_a.prototype.J,_a.prototype.once=_a.prototype.once,_a.prototype.un=_a.prototype.K,Xy.prototype.getTileCoord=Xy.prototype.f,Xy.prototype.load=Xy.prototype.load,Qy.prototype.getTileCoord=Qy.prototype.f,Qy.prototype.load=Qy.prototype.load,qi.prototype.get=qi.prototype.get,qi.prototype.getKeys=qi.prototype.O,qi.prototype.getProperties=qi.prototype.N,qi.prototype.set=qi.prototype.set,qi.prototype.setProperties=qi.prototype.H,qi.prototype.unset=qi.prototype.P,qi.prototype.changed=qi.prototype.s,qi.prototype.dispatchEvent=qi.prototype.b,qi.prototype.getRevision=qi.prototype.L,qi.prototype.on=qi.prototype.J,qi.prototype.once=qi.prototype.once,qi.prototype.un=qi.prototype.K,tg.prototype.forEachTileCoord=tg.prototype.Rf,tg.prototype.getMaxZoom=tg.prototype.Ti,tg.prototype.getMinZoom=tg.prototype.Ui,tg.prototype.getOrigin=tg.prototype.Pc,tg.prototype.getResolution=tg.prototype.Da,tg.prototype.getResolutions=tg.prototype.Vi,tg.prototype.getTileCoordExtent=tg.prototype.Aa,tg.prototype.getTileCoordForCoordAndResolution=tg.prototype.Be,tg.prototype.getTileCoordForCoordAndZ=tg.prototype.bg,tg.prototype.getTileSize=tg.prototype.gb,tg.prototype.getZForResolution=tg.prototype.tc,ja.prototype.getOpacity=ja.prototype.Ze,ja.prototype.getRotateWithView=ja.prototype.$e,ja.prototype.getRotation=ja.prototype.af,ja.prototype.getScale=ja.prototype.bf,ja.prototype.getSnapToPixel=ja.prototype.Ae,ja.prototype.setOpacity=ja.prototype.td,ja.prototype.setRotation=ja.prototype.cf,ja.prototype.setScale=ja.prototype.ud,Ua.prototype.clone=Ua.prototype.clone,Ua.prototype.getAngle=Ua.prototype.Pi,Ua.prototype.getFill=Ua.prototype.Fa,Ua.prototype.getPoints=Ua.prototype.Qi,Ua.prototype.getRadius=Ua.prototype.Ri,Ua.prototype.getRadius2=Ua.prototype.Fh,Ua.prototype.getStroke=Ua.prototype.Ga,Ua.prototype.getOpacity=Ua.prototype.Ze,Ua.prototype.getRotateWithView=Ua.prototype.$e,Ua.prototype.getRotation=Ua.prototype.af,Ua.prototype.getScale=Ua.prototype.bf,Ua.prototype.getSnapToPixel=Ua.prototype.Ae,Ua.prototype.setOpacity=Ua.prototype.td,Ua.prototype.setRotation=Ua.prototype.cf,Ua.prototype.setScale=Ua.prototype.ud,ic.prototype.getOpacity=ic.prototype.Ze,ic.prototype.getRotateWithView=ic.prototype.$e,ic.prototype.getRotation=ic.prototype.af,ic.prototype.getScale=ic.prototype.bf,ic.prototype.getSnapToPixel=ic.prototype.Ae,ic.prototype.setOpacity=ic.prototype.td,ic.prototype.setRotation=ic.prototype.cf,ic.prototype.setScale=ic.prototype.ud,nd.prototype.get=nd.prototype.get,nd.prototype.getKeys=nd.prototype.O,nd.prototype.getProperties=nd.prototype.N,nd.prototype.set=nd.prototype.set,nd.prototype.setProperties=nd.prototype.H,nd.prototype.unset=nd.prototype.P,nd.prototype.changed=nd.prototype.s,nd.prototype.dispatchEvent=nd.prototype.b,nd.prototype.getRevision=nd.prototype.L,nd.prototype.on=nd.prototype.J,nd.prototype.once=nd.prototype.once,nd.prototype.un=nd.prototype.K,ry.prototype.getAttributions=ry.prototype.ya,ry.prototype.getLogo=ry.prototype.xa,ry.prototype.getProjection=ry.prototype.za,ry.prototype.getState=ry.prototype.getState,ry.prototype.refresh=ry.prototype.sa,ry.prototype.setAttributions=ry.prototype.ua,ry.prototype.get=ry.prototype.get,ry.prototype.getKeys=ry.prototype.O,ry.prototype.getProperties=ry.prototype.N,ry.prototype.set=ry.prototype.set,ry.prototype.setProperties=ry.prototype.H,ry.prototype.unset=ry.prototype.P,ry.prototype.changed=ry.prototype.s,ry.prototype.dispatchEvent=ry.prototype.b,ry.prototype.getRevision=ry.prototype.L,ry.prototype.on=ry.prototype.J,ry.prototype.once=ry.prototype.once,ry.prototype.un=ry.prototype.K,cy.prototype.getTileGrid=cy.prototype.ab,cy.prototype.refresh=cy.prototype.sa,cy.prototype.getAttributions=cy.prototype.ya,cy.prototype.getLogo=cy.prototype.xa,cy.prototype.getProjection=cy.prototype.za,cy.prototype.getState=cy.prototype.getState,cy.prototype.setAttributions=cy.prototype.ua,cy.prototype.get=cy.prototype.get,cy.prototype.getKeys=cy.prototype.O,cy.prototype.getProperties=cy.prototype.N,cy.prototype.set=cy.prototype.set,cy.prototype.setProperties=cy.prototype.H,cy.prototype.unset=cy.prototype.P,cy.prototype.changed=cy.prototype.s,cy.prototype.dispatchEvent=cy.prototype.b,cy.prototype.getRevision=cy.prototype.L,cy.prototype.on=cy.prototype.J,cy.prototype.once=cy.prototype.once,cy.prototype.un=cy.prototype.K,uy.prototype.getTileLoadFunction=uy.prototype.pb,uy.prototype.getTileUrlFunction=uy.prototype.qb,uy.prototype.getUrls=uy.prototype.rb,uy.prototype.setTileLoadFunction=uy.prototype.vb,uy.prototype.setTileUrlFunction=uy.prototype.cb,uy.prototype.setUrl=uy.prototype.jb,uy.prototype.setUrls=uy.prototype.eb,uy.prototype.getTileGrid=uy.prototype.ab,uy.prototype.refresh=uy.prototype.sa,uy.prototype.getAttributions=uy.prototype.ya,uy.prototype.getLogo=uy.prototype.xa,uy.prototype.getProjection=uy.prototype.za,uy.prototype.getState=uy.prototype.getState,uy.prototype.setAttributions=uy.prototype.ua,uy.prototype.get=uy.prototype.get,uy.prototype.getKeys=uy.prototype.O,uy.prototype.getProperties=uy.prototype.N,uy.prototype.set=uy.prototype.set,uy.prototype.setProperties=uy.prototype.H,uy.prototype.unset=uy.prototype.P,uy.prototype.changed=uy.prototype.s,uy.prototype.dispatchEvent=uy.prototype.b,uy.prototype.getRevision=uy.prototype.L,uy.prototype.on=uy.prototype.J,uy.prototype.once=uy.prototype.once,uy.prototype.un=uy.prototype.K,yy.prototype.setRenderReprojectionEdges=yy.prototype.Pb,yy.prototype.setTileGridForProjection=yy.prototype.Qb,yy.prototype.getTileLoadFunction=yy.prototype.pb,yy.prototype.getTileUrlFunction=yy.prototype.qb,yy.prototype.getUrls=yy.prototype.rb,yy.prototype.setTileLoadFunction=yy.prototype.vb,yy.prototype.setTileUrlFunction=yy.prototype.cb,yy.prototype.setUrl=yy.prototype.jb,yy.prototype.setUrls=yy.prototype.eb,yy.prototype.getTileGrid=yy.prototype.ab,yy.prototype.refresh=yy.prototype.sa,yy.prototype.getAttributions=yy.prototype.ya,yy.prototype.getLogo=yy.prototype.xa,yy.prototype.getProjection=yy.prototype.za,yy.prototype.getState=yy.prototype.getState,yy.prototype.setAttributions=yy.prototype.ua,yy.prototype.get=yy.prototype.get,yy.prototype.getKeys=yy.prototype.O,yy.prototype.getProperties=yy.prototype.N,yy.prototype.set=yy.prototype.set,yy.prototype.setProperties=yy.prototype.H,yy.prototype.unset=yy.prototype.P,yy.prototype.changed=yy.prototype.s,yy.prototype.dispatchEvent=yy.prototype.b,yy.prototype.getRevision=yy.prototype.L,yy.prototype.on=yy.prototype.J,yy.prototype.once=yy.prototype.once,yy.prototype.un=yy.prototype.K,gy.prototype.setRenderReprojectionEdges=gy.prototype.Pb,gy.prototype.setTileGridForProjection=gy.prototype.Qb,gy.prototype.getTileLoadFunction=gy.prototype.pb,gy.prototype.getTileUrlFunction=gy.prototype.qb,gy.prototype.getUrls=gy.prototype.rb,gy.prototype.setTileLoadFunction=gy.prototype.vb,gy.prototype.setTileUrlFunction=gy.prototype.cb,gy.prototype.setUrl=gy.prototype.jb,gy.prototype.setUrls=gy.prototype.eb,gy.prototype.getTileGrid=gy.prototype.ab,gy.prototype.refresh=gy.prototype.sa,gy.prototype.getAttributions=gy.prototype.ya,gy.prototype.getLogo=gy.prototype.xa,gy.prototype.getProjection=gy.prototype.za,gy.prototype.getState=gy.prototype.getState,gy.prototype.setAttributions=gy.prototype.ua,gy.prototype.get=gy.prototype.get,gy.prototype.getKeys=gy.prototype.O,gy.prototype.getProperties=gy.prototype.N,gy.prototype.set=gy.prototype.set,gy.prototype.setProperties=gy.prototype.H,gy.prototype.unset=gy.prototype.P,gy.prototype.changed=gy.prototype.s,gy.prototype.dispatchEvent=gy.prototype.b,gy.prototype.getRevision=gy.prototype.L,gy.prototype.on=gy.prototype.J,gy.prototype.once=gy.prototype.once,gy.prototype.un=gy.prototype.K,my.prototype.setRenderReprojectionEdges=my.prototype.Pb,my.prototype.setTileGridForProjection=my.prototype.Qb,my.prototype.getTileLoadFunction=my.prototype.pb,my.prototype.getTileUrlFunction=my.prototype.qb,my.prototype.getUrls=my.prototype.rb,my.prototype.setTileLoadFunction=my.prototype.vb,my.prototype.setTileUrlFunction=my.prototype.cb,my.prototype.setUrl=my.prototype.jb,my.prototype.setUrls=my.prototype.eb,my.prototype.getTileGrid=my.prototype.ab,my.prototype.refresh=my.prototype.sa,my.prototype.getAttributions=my.prototype.ya,my.prototype.getLogo=my.prototype.xa,my.prototype.getProjection=my.prototype.za,my.prototype.getState=my.prototype.getState,my.prototype.setAttributions=my.prototype.ua,my.prototype.get=my.prototype.get,my.prototype.getKeys=my.prototype.O,my.prototype.getProperties=my.prototype.N,my.prototype.set=my.prototype.set,my.prototype.setProperties=my.prototype.H,my.prototype.unset=my.prototype.P,my.prototype.changed=my.prototype.s,my.prototype.dispatchEvent=my.prototype.b,my.prototype.getRevision=my.prototype.L,my.prototype.on=my.prototype.J,my.prototype.once=my.prototype.once,my.prototype.un=my.prototype.K,ad.prototype.getAttributions=ad.prototype.ya,ad.prototype.getLogo=ad.prototype.xa,ad.prototype.getProjection=ad.prototype.za,ad.prototype.getState=ad.prototype.getState,ad.prototype.refresh=ad.prototype.sa,ad.prototype.setAttributions=ad.prototype.ua,ad.prototype.get=ad.prototype.get,ad.prototype.getKeys=ad.prototype.O,ad.prototype.getProperties=ad.prototype.N,ad.prototype.set=ad.prototype.set,ad.prototype.setProperties=ad.prototype.H,ad.prototype.unset=ad.prototype.P,ad.prototype.changed=ad.prototype.s,ad.prototype.dispatchEvent=ad.prototype.b,ad.prototype.getRevision=ad.prototype.L,ad.prototype.on=ad.prototype.J,ad.prototype.once=ad.prototype.once,ad.prototype.un=ad.prototype.K,by.prototype.addFeature=by.prototype.yb,by.prototype.addFeatures=by.prototype.cd,by.prototype.clear=by.prototype.clear,by.prototype.forEachFeature=by.prototype.sh,by.prototype.forEachFeatureInExtent=by.prototype.$b,by.prototype.forEachFeatureIntersectingExtent=by.prototype.th,by.prototype.getFeaturesCollection=by.prototype.Ah,by.prototype.getFeatures=by.prototype.Xe,by.prototype.getFeaturesAtCoordinate=by.prototype.zh,by.prototype.getFeaturesInExtent=by.prototype.Uf,by.prototype.getClosestFeatureToCoordinate=by.prototype.vh,by.prototype.getExtent=by.prototype.G,by.prototype.getFeatureById=by.prototype.yh,by.prototype.getFormat=by.prototype.Mi,by.prototype.getUrl=by.prototype.Ni,by.prototype.removeFeature=by.prototype.Gb,by.prototype.getAttributions=by.prototype.ya,by.prototype.getLogo=by.prototype.xa,by.prototype.getProjection=by.prototype.za,by.prototype.getState=by.prototype.getState,by.prototype.refresh=by.prototype.sa,by.prototype.setAttributions=by.prototype.ua,by.prototype.get=by.prototype.get,by.prototype.getKeys=by.prototype.O,by.prototype.getProperties=by.prototype.N,by.prototype.set=by.prototype.set,by.prototype.setProperties=by.prototype.H,by.prototype.unset=by.prototype.P,by.prototype.changed=by.prototype.s,by.prototype.dispatchEvent=by.prototype.b,by.prototype.getRevision=by.prototype.L,by.prototype.on=by.prototype.J,by.prototype.once=by.prototype.once,by.prototype.un=by.prototype.K,If.prototype.getAttributions=If.prototype.ya,If.prototype.getLogo=If.prototype.xa,If.prototype.getProjection=If.prototype.za,If.prototype.getState=If.prototype.getState,If.prototype.refresh=If.prototype.sa,If.prototype.setAttributions=If.prototype.ua,If.prototype.get=If.prototype.get,If.prototype.getKeys=If.prototype.O,If.prototype.getProperties=If.prototype.N,If.prototype.set=If.prototype.set,If.prototype.setProperties=If.prototype.H,If.prototype.unset=If.prototype.P,If.prototype.changed=If.prototype.s,If.prototype.dispatchEvent=If.prototype.b,If.prototype.getRevision=If.prototype.L,If.prototype.on=If.prototype.J,If.prototype.once=If.prototype.once,If.prototype.un=If.prototype.K,Gf.prototype.type=Gf.prototype.type,Gf.prototype.target=Gf.prototype.target,Gf.prototype.preventDefault=Gf.prototype.preventDefault,Gf.prototype.stopPropagation=Gf.prototype.stopPropagation,Py.prototype.getAttributions=Py.prototype.ya,Py.prototype.getLogo=Py.prototype.xa,Py.prototype.getProjection=Py.prototype.za,Py.prototype.getState=Py.prototype.getState,Py.prototype.refresh=Py.prototype.sa,Py.prototype.setAttributions=Py.prototype.ua,Py.prototype.get=Py.prototype.get,Py.prototype.getKeys=Py.prototype.O,Py.prototype.getProperties=Py.prototype.N,Py.prototype.set=Py.prototype.set,Py.prototype.setProperties=Py.prototype.H,Py.prototype.unset=Py.prototype.P,Py.prototype.changed=Py.prototype.s,Py.prototype.dispatchEvent=Py.prototype.b,Py.prototype.getRevision=Py.prototype.L,Py.prototype.on=Py.prototype.J,Py.prototype.once=Py.prototype.once,Py.prototype.un=Py.prototype.K,Of.prototype.getAttributions=Of.prototype.ya,Of.prototype.getLogo=Of.prototype.xa,Of.prototype.getProjection=Of.prototype.za,Of.prototype.getState=Of.prototype.getState,Of.prototype.refresh=Of.prototype.sa,Of.prototype.setAttributions=Of.prototype.ua,Of.prototype.get=Of.prototype.get,Of.prototype.getKeys=Of.prototype.O,Of.prototype.getProperties=Of.prototype.N,Of.prototype.set=Of.prototype.set,Of.prototype.setProperties=Of.prototype.H,Of.prototype.unset=Of.prototype.P,Of.prototype.changed=Of.prototype.s,Of.prototype.dispatchEvent=Of.prototype.b,Of.prototype.getRevision=Of.prototype.L,Of.prototype.on=Of.prototype.J,Of.prototype.once=Of.prototype.once,Of.prototype.un=Of.prototype.K,Cy.prototype.getAttributions=Cy.prototype.ya,Cy.prototype.getLogo=Cy.prototype.xa,Cy.prototype.getProjection=Cy.prototype.za,Cy.prototype.getState=Cy.prototype.getState,Cy.prototype.refresh=Cy.prototype.sa,Cy.prototype.setAttributions=Cy.prototype.ua,Cy.prototype.get=Cy.prototype.get,Cy.prototype.getKeys=Cy.prototype.O,Cy.prototype.getProperties=Cy.prototype.N,Cy.prototype.set=Cy.prototype.set,Cy.prototype.setProperties=Cy.prototype.H,Cy.prototype.unset=Cy.prototype.P,Cy.prototype.changed=Cy.prototype.s,Cy.prototype.dispatchEvent=Cy.prototype.b,Cy.prototype.getRevision=Cy.prototype.L,Cy.prototype.on=Cy.prototype.J,Cy.prototype.once=Cy.prototype.once,Cy.prototype.un=Cy.prototype.K,Ay.prototype.getAttributions=Ay.prototype.ya,Ay.prototype.getLogo=Ay.prototype.xa,Ay.prototype.getProjection=Ay.prototype.za,Ay.prototype.getState=Ay.prototype.getState,Ay.prototype.refresh=Ay.prototype.sa,Ay.prototype.setAttributions=Ay.prototype.ua,Ay.prototype.get=Ay.prototype.get,Ay.prototype.getKeys=Ay.prototype.O,Ay.prototype.getProperties=Ay.prototype.N,Ay.prototype.set=Ay.prototype.set,Ay.prototype.setProperties=Ay.prototype.H,Ay.prototype.unset=Ay.prototype.P,Ay.prototype.changed=Ay.prototype.s,Ay.prototype.dispatchEvent=Ay.prototype.b,Ay.prototype.getRevision=Ay.prototype.L,Ay.prototype.on=Ay.prototype.J,Ay.prototype.once=Ay.prototype.once,Ay.prototype.un=Ay.prototype.K,Nf.prototype.getAttributions=Nf.prototype.ya,Nf.prototype.getLogo=Nf.prototype.xa,Nf.prototype.getProjection=Nf.prototype.za,Nf.prototype.getState=Nf.prototype.getState,Nf.prototype.refresh=Nf.prototype.sa,Nf.prototype.setAttributions=Nf.prototype.ua,Nf.prototype.get=Nf.prototype.get,Nf.prototype.getKeys=Nf.prototype.O,Nf.prototype.getProperties=Nf.prototype.N,Nf.prototype.set=Nf.prototype.set,Nf.prototype.setProperties=Nf.prototype.H,Nf.prototype.unset=Nf.prototype.P,Nf.prototype.changed=Nf.prototype.s,Nf.prototype.dispatchEvent=Nf.prototype.b,Nf.prototype.getRevision=Nf.prototype.L,Nf.prototype.on=Nf.prototype.J,Nf.prototype.once=Nf.prototype.once,Nf.prototype.un=Nf.prototype.K,My.prototype.getAttributions=My.prototype.ya,My.prototype.getLogo=My.prototype.xa,My.prototype.getProjection=My.prototype.za,My.prototype.getState=My.prototype.getState,My.prototype.refresh=My.prototype.sa,My.prototype.setAttributions=My.prototype.ua,My.prototype.get=My.prototype.get,My.prototype.getKeys=My.prototype.O,My.prototype.getProperties=My.prototype.N,My.prototype.set=My.prototype.set,My.prototype.setProperties=My.prototype.H,My.prototype.unset=My.prototype.P,My.prototype.changed=My.prototype.s,My.prototype.dispatchEvent=My.prototype.b,My.prototype.getRevision=My.prototype.L,My.prototype.on=My.prototype.J,My.prototype.once=My.prototype.once,My.prototype.un=My.prototype.K,Iy.prototype.setRenderReprojectionEdges=Iy.prototype.Pb,Iy.prototype.setTileGridForProjection=Iy.prototype.Qb,Iy.prototype.getTileLoadFunction=Iy.prototype.pb,Iy.prototype.getTileUrlFunction=Iy.prototype.qb,Iy.prototype.getUrls=Iy.prototype.rb,Iy.prototype.setTileLoadFunction=Iy.prototype.vb,Iy.prototype.setTileUrlFunction=Iy.prototype.cb,Iy.prototype.setUrl=Iy.prototype.jb,Iy.prototype.setUrls=Iy.prototype.eb,Iy.prototype.getTileGrid=Iy.prototype.ab,Iy.prototype.refresh=Iy.prototype.sa,Iy.prototype.getAttributions=Iy.prototype.ya,Iy.prototype.getLogo=Iy.prototype.xa,Iy.prototype.getProjection=Iy.prototype.za,Iy.prototype.getState=Iy.prototype.getState,Iy.prototype.setAttributions=Iy.prototype.ua,Iy.prototype.get=Iy.prototype.get,Iy.prototype.getKeys=Iy.prototype.O,Iy.prototype.getProperties=Iy.prototype.N,Iy.prototype.set=Iy.prototype.set,Iy.prototype.setProperties=Iy.prototype.H,Iy.prototype.unset=Iy.prototype.P,Iy.prototype.changed=Iy.prototype.s,Iy.prototype.dispatchEvent=Iy.prototype.b,Iy.prototype.getRevision=Iy.prototype.L,Iy.prototype.on=Iy.prototype.J,Iy.prototype.once=Iy.prototype.once,Iy.prototype.un=Iy.prototype.K,Ty.prototype.getAttributions=Ty.prototype.ya,Ty.prototype.getLogo=Ty.prototype.xa,Ty.prototype.getProjection=Ty.prototype.za,Ty.prototype.getState=Ty.prototype.getState,Ty.prototype.refresh=Ty.prototype.sa,Ty.prototype.setAttributions=Ty.prototype.ua,Ty.prototype.get=Ty.prototype.get,Ty.prototype.getKeys=Ty.prototype.O,Ty.prototype.getProperties=Ty.prototype.N,Ty.prototype.set=Ty.prototype.set,Ty.prototype.setProperties=Ty.prototype.H,Ty.prototype.unset=Ty.prototype.P,Ty.prototype.changed=Ty.prototype.s,Ty.prototype.dispatchEvent=Ty.prototype.b,Ty.prototype.getRevision=Ty.prototype.L,Ty.prototype.on=Ty.prototype.J,Ty.prototype.once=Ty.prototype.once,Ty.prototype.un=Ty.prototype.K,Oy.prototype.type=Oy.prototype.type,Oy.prototype.target=Oy.prototype.target,Oy.prototype.preventDefault=Oy.prototype.preventDefault,Oy.prototype.stopPropagation=Oy.prototype.stopPropagation,Ny.prototype.setRenderReprojectionEdges=Ny.prototype.Pb,Ny.prototype.setTileGridForProjection=Ny.prototype.Qb,Ny.prototype.getTileLoadFunction=Ny.prototype.pb,Ny.prototype.getTileUrlFunction=Ny.prototype.qb,Ny.prototype.getUrls=Ny.prototype.rb,Ny.prototype.setTileLoadFunction=Ny.prototype.vb,Ny.prototype.setTileUrlFunction=Ny.prototype.cb,Ny.prototype.setUrl=Ny.prototype.jb,Ny.prototype.setUrls=Ny.prototype.eb,Ny.prototype.getTileGrid=Ny.prototype.ab,Ny.prototype.refresh=Ny.prototype.sa,Ny.prototype.getAttributions=Ny.prototype.ya,Ny.prototype.getLogo=Ny.prototype.xa,Ny.prototype.getProjection=Ny.prototype.za,Ny.prototype.getState=Ny.prototype.getState,Ny.prototype.setAttributions=Ny.prototype.ua,Ny.prototype.get=Ny.prototype.get,Ny.prototype.getKeys=Ny.prototype.O,Ny.prototype.getProperties=Ny.prototype.N,Ny.prototype.set=Ny.prototype.set,Ny.prototype.setProperties=Ny.prototype.H,Ny.prototype.unset=Ny.prototype.P,Ny.prototype.changed=Ny.prototype.s,Ny.prototype.dispatchEvent=Ny.prototype.b,Ny.prototype.getRevision=Ny.prototype.L,Ny.prototype.on=Ny.prototype.J,Ny.prototype.once=Ny.prototype.once,Ny.prototype.un=Ny.prototype.K,py.prototype.type=py.prototype.type,py.prototype.target=py.prototype.target,py.prototype.preventDefault=py.prototype.preventDefault,py.prototype.stopPropagation=py.prototype.stopPropagation,ky.prototype.setRenderReprojectionEdges=ky.prototype.Pb,ky.prototype.setTileGridForProjection=ky.prototype.Qb,ky.prototype.getTileLoadFunction=ky.prototype.pb,ky.prototype.getTileUrlFunction=ky.prototype.qb,ky.prototype.getUrls=ky.prototype.rb,ky.prototype.setTileLoadFunction=ky.prototype.vb,ky.prototype.setTileUrlFunction=ky.prototype.cb,ky.prototype.setUrl=ky.prototype.jb,ky.prototype.setUrls=ky.prototype.eb,ky.prototype.getTileGrid=ky.prototype.ab,ky.prototype.refresh=ky.prototype.sa,ky.prototype.getAttributions=ky.prototype.ya,ky.prototype.getLogo=ky.prototype.xa,ky.prototype.getProjection=ky.prototype.za,ky.prototype.getState=ky.prototype.getState,ky.prototype.setAttributions=ky.prototype.ua,ky.prototype.get=ky.prototype.get,ky.prototype.getKeys=ky.prototype.O,ky.prototype.getProperties=ky.prototype.N,ky.prototype.set=ky.prototype.set,ky.prototype.setProperties=ky.prototype.H,ky.prototype.unset=ky.prototype.P,ky.prototype.changed=ky.prototype.s,ky.prototype.dispatchEvent=ky.prototype.b,ky.prototype.getRevision=ky.prototype.L,ky.prototype.on=ky.prototype.J,ky.prototype.once=ky.prototype.once,ky.prototype.un=ky.prototype.K,jy.prototype.getTileGrid=jy.prototype.ab,jy.prototype.refresh=jy.prototype.sa,jy.prototype.getAttributions=jy.prototype.ya,jy.prototype.getLogo=jy.prototype.xa,jy.prototype.getProjection=jy.prototype.za,jy.prototype.getState=jy.prototype.getState,jy.prototype.setAttributions=jy.prototype.ua,jy.prototype.get=jy.prototype.get,jy.prototype.getKeys=jy.prototype.O,jy.prototype.getProperties=jy.prototype.N,jy.prototype.set=jy.prototype.set,jy.prototype.setProperties=jy.prototype.H,jy.prototype.unset=jy.prototype.P,jy.prototype.changed=jy.prototype.s,jy.prototype.dispatchEvent=jy.prototype.b,jy.prototype.getRevision=jy.prototype.L,jy.prototype.on=jy.prototype.J,jy.prototype.once=jy.prototype.once,jy.prototype.un=jy.prototype.K,Uy.prototype.setRenderReprojectionEdges=Uy.prototype.Pb,Uy.prototype.setTileGridForProjection=Uy.prototype.Qb,Uy.prototype.getTileLoadFunction=Uy.prototype.pb,Uy.prototype.getTileUrlFunction=Uy.prototype.qb,Uy.prototype.getUrls=Uy.prototype.rb,Uy.prototype.setTileLoadFunction=Uy.prototype.vb,Uy.prototype.setTileUrlFunction=Uy.prototype.cb,Uy.prototype.setUrl=Uy.prototype.jb,Uy.prototype.setUrls=Uy.prototype.eb,Uy.prototype.getTileGrid=Uy.prototype.ab,Uy.prototype.refresh=Uy.prototype.sa,Uy.prototype.getAttributions=Uy.prototype.ya,Uy.prototype.getLogo=Uy.prototype.xa,Uy.prototype.getProjection=Uy.prototype.za,Uy.prototype.getState=Uy.prototype.getState,Uy.prototype.setAttributions=Uy.prototype.ua,Uy.prototype.get=Uy.prototype.get,Uy.prototype.getKeys=Uy.prototype.O,Uy.prototype.getProperties=Uy.prototype.N,Uy.prototype.set=Uy.prototype.set,Uy.prototype.setProperties=Uy.prototype.H,Uy.prototype.unset=Uy.prototype.P,Uy.prototype.changed=Uy.prototype.s,Uy.prototype.dispatchEvent=Uy.prototype.b,Uy.prototype.getRevision=Uy.prototype.L,Uy.prototype.on=Uy.prototype.J,Uy.prototype.once=Uy.prototype.once,Uy.prototype.un=Uy.prototype.K,By.prototype.getTileGrid=By.prototype.ab,By.prototype.refresh=By.prototype.sa,By.prototype.getAttributions=By.prototype.ya,By.prototype.getLogo=By.prototype.xa,By.prototype.getProjection=By.prototype.za,By.prototype.getState=By.prototype.getState,By.prototype.setAttributions=By.prototype.ua,By.prototype.get=By.prototype.get,By.prototype.getKeys=By.prototype.O,By.prototype.getProperties=By.prototype.N,By.prototype.set=By.prototype.set,By.prototype.setProperties=By.prototype.H,By.prototype.unset=By.prototype.P,By.prototype.changed=By.prototype.s,By.prototype.dispatchEvent=By.prototype.b,By.prototype.getRevision=By.prototype.L,By.prototype.on=By.prototype.J,By.prototype.once=By.prototype.once,By.prototype.un=By.prototype.K,qy.prototype.setRenderReprojectionEdges=qy.prototype.Pb,qy.prototype.setTileGridForProjection=qy.prototype.Qb,qy.prototype.getTileLoadFunction=qy.prototype.pb,qy.prototype.getTileUrlFunction=qy.prototype.qb,qy.prototype.getUrls=qy.prototype.rb,qy.prototype.setTileLoadFunction=qy.prototype.vb,qy.prototype.setTileUrlFunction=qy.prototype.cb,qy.prototype.setUrl=qy.prototype.jb,qy.prototype.setUrls=qy.prototype.eb,qy.prototype.getTileGrid=qy.prototype.ab,qy.prototype.refresh=qy.prototype.sa,qy.prototype.getAttributions=qy.prototype.ya,qy.prototype.getLogo=qy.prototype.xa,qy.prototype.getProjection=qy.prototype.za,qy.prototype.getState=qy.prototype.getState,qy.prototype.setAttributions=qy.prototype.ua,qy.prototype.get=qy.prototype.get,qy.prototype.getKeys=qy.prototype.O,qy.prototype.getProperties=qy.prototype.N,qy.prototype.set=qy.prototype.set,qy.prototype.setProperties=qy.prototype.H,qy.prototype.unset=qy.prototype.P,qy.prototype.changed=qy.prototype.s,qy.prototype.dispatchEvent=qy.prototype.b,qy.prototype.getRevision=qy.prototype.L,qy.prototype.on=qy.prototype.J,qy.prototype.once=qy.prototype.once,qy.prototype.un=qy.prototype.K,fd.prototype.type=fd.prototype.type,fd.prototype.target=fd.prototype.target,fd.prototype.preventDefault=fd.prototype.preventDefault,fd.prototype.stopPropagation=fd.prototype.stopPropagation,$y.prototype.getTileLoadFunction=$y.prototype.pb,$y.prototype.getTileUrlFunction=$y.prototype.qb,$y.prototype.getUrls=$y.prototype.rb,$y.prototype.setTileLoadFunction=$y.prototype.vb,$y.prototype.setTileUrlFunction=$y.prototype.cb,$y.prototype.setUrl=$y.prototype.jb,$y.prototype.setUrls=$y.prototype.eb,$y.prototype.getTileGrid=$y.prototype.ab,$y.prototype.refresh=$y.prototype.sa,$y.prototype.getAttributions=$y.prototype.ya,$y.prototype.getLogo=$y.prototype.xa,$y.prototype.getProjection=$y.prototype.za,$y.prototype.getState=$y.prototype.getState,$y.prototype.setAttributions=$y.prototype.ua,$y.prototype.get=$y.prototype.get,$y.prototype.getKeys=$y.prototype.O,$y.prototype.getProperties=$y.prototype.N,$y.prototype.set=$y.prototype.set,$y.prototype.setProperties=$y.prototype.H,$y.prototype.unset=$y.prototype.P,$y.prototype.changed=$y.prototype.s,$y.prototype.dispatchEvent=$y.prototype.b,$y.prototype.getRevision=$y.prototype.L,$y.prototype.on=$y.prototype.J,$y.prototype.once=$y.prototype.once,$y.prototype.un=$y.prototype.K,og.prototype.setRenderReprojectionEdges=og.prototype.Pb,og.prototype.setTileGridForProjection=og.prototype.Qb,og.prototype.getTileLoadFunction=og.prototype.pb,og.prototype.getTileUrlFunction=og.prototype.qb,og.prototype.getUrls=og.prototype.rb,og.prototype.setTileLoadFunction=og.prototype.vb,og.prototype.setTileUrlFunction=og.prototype.cb,og.prototype.setUrl=og.prototype.jb,og.prototype.setUrls=og.prototype.eb,og.prototype.getTileGrid=og.prototype.ab,og.prototype.refresh=og.prototype.sa,og.prototype.getAttributions=og.prototype.ya,og.prototype.getLogo=og.prototype.xa,og.prototype.getProjection=og.prototype.za,og.prototype.getState=og.prototype.getState,og.prototype.setAttributions=og.prototype.ua,og.prototype.get=og.prototype.get,og.prototype.getKeys=og.prototype.O,og.prototype.getProperties=og.prototype.N,og.prototype.set=og.prototype.set,og.prototype.setProperties=og.prototype.H,og.prototype.unset=og.prototype.P,og.prototype.changed=og.prototype.s,og.prototype.dispatchEvent=og.prototype.b,og.prototype.getRevision=og.prototype.L,og.prototype.on=og.prototype.J,og.prototype.once=og.prototype.once,og.prototype.un=og.prototype.K,ng.prototype.setRenderReprojectionEdges=ng.prototype.Pb,ng.prototype.setTileGridForProjection=ng.prototype.Qb,ng.prototype.getTileLoadFunction=ng.prototype.pb,ng.prototype.getTileUrlFunction=ng.prototype.qb,ng.prototype.getUrls=ng.prototype.rb,ng.prototype.setTileLoadFunction=ng.prototype.vb,ng.prototype.setTileUrlFunction=ng.prototype.cb,ng.prototype.setUrl=ng.prototype.jb,ng.prototype.setUrls=ng.prototype.eb,ng.prototype.getTileGrid=ng.prototype.ab,ng.prototype.refresh=ng.prototype.sa,ng.prototype.getAttributions=ng.prototype.ya,ng.prototype.getLogo=ng.prototype.xa,ng.prototype.getProjection=ng.prototype.za,ng.prototype.getState=ng.prototype.getState,ng.prototype.setAttributions=ng.prototype.ua,ng.prototype.get=ng.prototype.get,ng.prototype.getKeys=ng.prototype.O,ng.prototype.getProperties=ng.prototype.N,ng.prototype.set=ng.prototype.set,ng.prototype.setProperties=ng.prototype.H,ng.prototype.unset=ng.prototype.P,ng.prototype.changed=ng.prototype.s,ng.prototype.dispatchEvent=ng.prototype.b,ng.prototype.getRevision=ng.prototype.L,ng.prototype.on=ng.prototype.J,ng.prototype.once=ng.prototype.once,ng.prototype.un=ng.prototype.K,Jf.prototype.getTileCoord=Jf.prototype.f,Jf.prototype.load=Jf.prototype.load,Gh.prototype.changed=Gh.prototype.s,Gh.prototype.dispatchEvent=Gh.prototype.b,Gh.prototype.getRevision=Gh.prototype.L,Gh.prototype.on=Gh.prototype.J,Gh.prototype.once=Gh.prototype.once,Gh.prototype.un=Gh.prototype.K,Qh.prototype.changed=Qh.prototype.s,Qh.prototype.dispatchEvent=Qh.prototype.b,Qh.prototype.getRevision=Qh.prototype.L,Qh.prototype.on=Qh.prototype.J,Qh.prototype.once=Qh.prototype.once,Qh.prototype.un=Qh.prototype.K,Df.prototype.changed=Df.prototype.s,Df.prototype.dispatchEvent=Df.prototype.b,Df.prototype.getRevision=Df.prototype.L,Df.prototype.on=Df.prototype.J,Df.prototype.once=Df.prototype.once,Df.prototype.un=Df.prototype.K,Hf.prototype.changed=Hf.prototype.s,Hf.prototype.dispatchEvent=Hf.prototype.b,Hf.prototype.getRevision=Hf.prototype.L,Hf.prototype.on=Hf.prototype.J,Hf.prototype.once=Hf.prototype.once,Hf.prototype.un=Hf.prototype.K,ed.prototype.changed=ed.prototype.s,ed.prototype.dispatchEvent=ed.prototype.b,ed.prototype.getRevision=ed.prototype.L,ed.prototype.on=ed.prototype.J,ed.prototype.once=ed.prototype.once,ed.prototype.un=ed.prototype.K,Bh.prototype.changed=Bh.prototype.s,Bh.prototype.dispatchEvent=Bh.prototype.b,Bh.prototype.getRevision=Bh.prototype.L,Bh.prototype.on=Bh.prototype.J,Bh.prototype.once=Bh.prototype.once,Bh.prototype.un=Bh.prototype.K,Ef.prototype.changed=Ef.prototype.s,Ef.prototype.dispatchEvent=Ef.prototype.b,Ef.prototype.getRevision=Ef.prototype.L,Ef.prototype.on=Ef.prototype.J,Ef.prototype.once=Ef.prototype.once,
Ef.prototype.un=Ef.prototype.K,Sf.prototype.changed=Sf.prototype.s,Sf.prototype.dispatchEvent=Sf.prototype.b,Sf.prototype.getRevision=Sf.prototype.L,Sf.prototype.on=Sf.prototype.J,Sf.prototype.once=Sf.prototype.once,Sf.prototype.un=Sf.prototype.K,Bf.prototype.changed=Bf.prototype.s,Bf.prototype.dispatchEvent=Bf.prototype.b,Bf.prototype.getRevision=Bf.prototype.L,Bf.prototype.on=Bf.prototype.J,Bf.prototype.once=Bf.prototype.once,Bf.prototype.un=Bf.prototype.K,Zh.prototype.changed=Zh.prototype.s,Zh.prototype.dispatchEvent=Zh.prototype.b,Zh.prototype.getRevision=Zh.prototype.L,Zh.prototype.on=Zh.prototype.J,Zh.prototype.once=Zh.prototype.once,Zh.prototype.un=Zh.prototype.K,Zf.prototype.changed=Zf.prototype.s,Zf.prototype.dispatchEvent=Zf.prototype.b,Zf.prototype.getRevision=Zf.prototype.L,Zf.prototype.on=Zf.prototype.J,Zf.prototype.once=Zf.prototype.once,Zf.prototype.un=Zf.prototype.K,Ar.prototype.type=Ar.prototype.type,Ar.prototype.target=Ar.prototype.target,Ar.prototype.preventDefault=Ar.prototype.preventDefault,Ar.prototype.stopPropagation=Ar.prototype.stopPropagation,ao.prototype.type=ao.prototype.type,ao.prototype.target=ao.prototype.target,ao.prototype.preventDefault=ao.prototype.preventDefault,ao.prototype.stopPropagation=ao.prototype.stopPropagation,ir.prototype.get=ir.prototype.get,ir.prototype.getKeys=ir.prototype.O,ir.prototype.getProperties=ir.prototype.N,ir.prototype.set=ir.prototype.set,ir.prototype.setProperties=ir.prototype.H,ir.prototype.unset=ir.prototype.P,ir.prototype.changed=ir.prototype.s,ir.prototype.dispatchEvent=ir.prototype.b,ir.prototype.getRevision=ir.prototype.L,ir.prototype.on=ir.prototype.J,ir.prototype.once=ir.prototype.once,ir.prototype.un=ir.prototype.K,rr.prototype.getExtent=rr.prototype.G,rr.prototype.getMaxResolution=rr.prototype.fc,rr.prototype.getMinResolution=rr.prototype.gc,rr.prototype.getOpacity=rr.prototype.hc,rr.prototype.getVisible=rr.prototype.Mb,rr.prototype.getZIndex=rr.prototype.Ba,rr.prototype.setExtent=rr.prototype.vc,rr.prototype.setMaxResolution=rr.prototype.Ac,rr.prototype.setMinResolution=rr.prototype.Bc,rr.prototype.setOpacity=rr.prototype.wc,rr.prototype.setVisible=rr.prototype.xc,rr.prototype.setZIndex=rr.prototype.Vb,rr.prototype.get=rr.prototype.get,rr.prototype.getKeys=rr.prototype.O,rr.prototype.getProperties=rr.prototype.N,rr.prototype.set=rr.prototype.set,rr.prototype.setProperties=rr.prototype.H,rr.prototype.unset=rr.prototype.P,rr.prototype.changed=rr.prototype.s,rr.prototype.dispatchEvent=rr.prototype.b,rr.prototype.getRevision=rr.prototype.L,rr.prototype.on=rr.prototype.J,rr.prototype.once=rr.prototype.once,rr.prototype.un=rr.prototype.K,sr.prototype.getExtent=sr.prototype.G,sr.prototype.getMaxResolution=sr.prototype.fc,sr.prototype.getMinResolution=sr.prototype.gc,sr.prototype.getOpacity=sr.prototype.hc,sr.prototype.getVisible=sr.prototype.Mb,sr.prototype.getZIndex=sr.prototype.Ba,sr.prototype.setExtent=sr.prototype.vc,sr.prototype.setMaxResolution=sr.prototype.Ac,sr.prototype.setMinResolution=sr.prototype.Bc,sr.prototype.setOpacity=sr.prototype.wc,sr.prototype.setVisible=sr.prototype.xc,sr.prototype.setZIndex=sr.prototype.Vb,sr.prototype.get=sr.prototype.get,sr.prototype.getKeys=sr.prototype.O,sr.prototype.getProperties=sr.prototype.N,sr.prototype.set=sr.prototype.set,sr.prototype.setProperties=sr.prototype.H,sr.prototype.unset=sr.prototype.P,sr.prototype.changed=sr.prototype.s,sr.prototype.dispatchEvent=sr.prototype.b,sr.prototype.getRevision=sr.prototype.L,sr.prototype.on=sr.prototype.J,sr.prototype.once=sr.prototype.once,sr.prototype.un=sr.prototype.K,od.prototype.setMap=od.prototype.setMap,od.prototype.setSource=od.prototype.Wc,od.prototype.getExtent=od.prototype.G,od.prototype.getMaxResolution=od.prototype.fc,od.prototype.getMinResolution=od.prototype.gc,od.prototype.getOpacity=od.prototype.hc,od.prototype.getVisible=od.prototype.Mb,od.prototype.getZIndex=od.prototype.Ba,od.prototype.setExtent=od.prototype.vc,od.prototype.setMaxResolution=od.prototype.Ac,od.prototype.setMinResolution=od.prototype.Bc,od.prototype.setOpacity=od.prototype.wc,od.prototype.setVisible=od.prototype.xc,od.prototype.setZIndex=od.prototype.Vb,od.prototype.get=od.prototype.get,od.prototype.getKeys=od.prototype.O,od.prototype.getProperties=od.prototype.N,od.prototype.set=od.prototype.set,od.prototype.setProperties=od.prototype.H,od.prototype.unset=od.prototype.P,od.prototype.changed=od.prototype.s,od.prototype.dispatchEvent=od.prototype.b,od.prototype.getRevision=od.prototype.L,od.prototype.on=od.prototype.J,od.prototype.once=od.prototype.once,od.prototype.un=od.prototype.K,bf.prototype.getSource=bf.prototype.ha,bf.prototype.getStyle=bf.prototype.D,bf.prototype.getStyleFunction=bf.prototype.C,bf.prototype.setStyle=bf.prototype.g,bf.prototype.setMap=bf.prototype.setMap,bf.prototype.setSource=bf.prototype.Wc,bf.prototype.getExtent=bf.prototype.G,bf.prototype.getMaxResolution=bf.prototype.fc,bf.prototype.getMinResolution=bf.prototype.gc,bf.prototype.getOpacity=bf.prototype.hc,bf.prototype.getVisible=bf.prototype.Mb,bf.prototype.getZIndex=bf.prototype.Ba,bf.prototype.setExtent=bf.prototype.vc,bf.prototype.setMaxResolution=bf.prototype.Ac,bf.prototype.setMinResolution=bf.prototype.Bc,bf.prototype.setOpacity=bf.prototype.wc,bf.prototype.setVisible=bf.prototype.xc,bf.prototype.setZIndex=bf.prototype.Vb,bf.prototype.get=bf.prototype.get,bf.prototype.getKeys=bf.prototype.O,bf.prototype.getProperties=bf.prototype.N,bf.prototype.set=bf.prototype.set,bf.prototype.setProperties=bf.prototype.H,bf.prototype.unset=bf.prototype.P,bf.prototype.changed=bf.prototype.s,bf.prototype.dispatchEvent=bf.prototype.b,bf.prototype.getRevision=bf.prototype.L,bf.prototype.on=bf.prototype.J,bf.prototype.once=bf.prototype.once,bf.prototype.un=bf.prototype.K,Uf.prototype.setMap=Uf.prototype.setMap,Uf.prototype.setSource=Uf.prototype.Wc,Uf.prototype.getExtent=Uf.prototype.G,Uf.prototype.getMaxResolution=Uf.prototype.fc,Uf.prototype.getMinResolution=Uf.prototype.gc,Uf.prototype.getOpacity=Uf.prototype.hc,Uf.prototype.getVisible=Uf.prototype.Mb,Uf.prototype.getZIndex=Uf.prototype.Ba,Uf.prototype.setExtent=Uf.prototype.vc,Uf.prototype.setMaxResolution=Uf.prototype.Ac,Uf.prototype.setMinResolution=Uf.prototype.Bc,Uf.prototype.setOpacity=Uf.prototype.wc,Uf.prototype.setVisible=Uf.prototype.xc,Uf.prototype.setZIndex=Uf.prototype.Vb,Uf.prototype.get=Uf.prototype.get,Uf.prototype.getKeys=Uf.prototype.O,Uf.prototype.getProperties=Uf.prototype.N,Uf.prototype.set=Uf.prototype.set,Uf.prototype.setProperties=Uf.prototype.H,Uf.prototype.unset=Uf.prototype.P,Uf.prototype.changed=Uf.prototype.s,Uf.prototype.dispatchEvent=Uf.prototype.b,Uf.prototype.getRevision=Uf.prototype.L,Uf.prototype.on=Uf.prototype.J,Uf.prototype.once=Uf.prototype.once,Uf.prototype.un=Uf.prototype.K,Yf.prototype.setMap=Yf.prototype.setMap,Yf.prototype.setSource=Yf.prototype.Wc,Yf.prototype.getExtent=Yf.prototype.G,Yf.prototype.getMaxResolution=Yf.prototype.fc,Yf.prototype.getMinResolution=Yf.prototype.gc,Yf.prototype.getOpacity=Yf.prototype.hc,Yf.prototype.getVisible=Yf.prototype.Mb,Yf.prototype.getZIndex=Yf.prototype.Ba,Yf.prototype.setExtent=Yf.prototype.vc,Yf.prototype.setMaxResolution=Yf.prototype.Ac,Yf.prototype.setMinResolution=Yf.prototype.Bc,Yf.prototype.setOpacity=Yf.prototype.wc,Yf.prototype.setVisible=Yf.prototype.xc,Yf.prototype.setZIndex=Yf.prototype.Vb,Yf.prototype.get=Yf.prototype.get,Yf.prototype.getKeys=Yf.prototype.O,Yf.prototype.getProperties=Yf.prototype.N,Yf.prototype.set=Yf.prototype.set,Yf.prototype.setProperties=Yf.prototype.H,Yf.prototype.unset=Yf.prototype.P,Yf.prototype.changed=Yf.prototype.s,Yf.prototype.dispatchEvent=Yf.prototype.b,Yf.prototype.getRevision=Yf.prototype.L,Yf.prototype.on=Yf.prototype.J,Yf.prototype.once=Yf.prototype.once,Yf.prototype.un=Yf.prototype.K,Kf.prototype.getSource=Kf.prototype.ha,Kf.prototype.getStyle=Kf.prototype.D,Kf.prototype.getStyleFunction=Kf.prototype.C,Kf.prototype.setStyle=Kf.prototype.g,Kf.prototype.setMap=Kf.prototype.setMap,Kf.prototype.setSource=Kf.prototype.Wc,Kf.prototype.getExtent=Kf.prototype.G,Kf.prototype.getMaxResolution=Kf.prototype.fc,Kf.prototype.getMinResolution=Kf.prototype.gc,Kf.prototype.getOpacity=Kf.prototype.hc,Kf.prototype.getVisible=Kf.prototype.Mb,Kf.prototype.getZIndex=Kf.prototype.Ba,Kf.prototype.setExtent=Kf.prototype.vc,Kf.prototype.setMaxResolution=Kf.prototype.Ac,Kf.prototype.setMinResolution=Kf.prototype.Bc,Kf.prototype.setOpacity=Kf.prototype.wc,Kf.prototype.setVisible=Kf.prototype.xc,Kf.prototype.setZIndex=Kf.prototype.Vb,Kf.prototype.get=Kf.prototype.get,Kf.prototype.getKeys=Kf.prototype.O,Kf.prototype.getProperties=Kf.prototype.N,Kf.prototype.set=Kf.prototype.set,Kf.prototype.setProperties=Kf.prototype.H,Kf.prototype.unset=Kf.prototype.P,Kf.prototype.changed=Kf.prototype.s,Kf.prototype.dispatchEvent=Kf.prototype.b,Kf.prototype.getRevision=Kf.prototype.L,Kf.prototype.on=Kf.prototype.J,Kf.prototype.once=Kf.prototype.once,Kf.prototype.un=Kf.prototype.K,sn.prototype.get=sn.prototype.get,sn.prototype.getKeys=sn.prototype.O,sn.prototype.getProperties=sn.prototype.N,sn.prototype.set=sn.prototype.set,sn.prototype.setProperties=sn.prototype.H,sn.prototype.unset=sn.prototype.P,sn.prototype.changed=sn.prototype.s,sn.prototype.dispatchEvent=sn.prototype.b,sn.prototype.getRevision=sn.prototype.L,sn.prototype.on=sn.prototype.J,sn.prototype.once=sn.prototype.once,sn.prototype.un=sn.prototype.K,cn.prototype.getActive=cn.prototype.c,cn.prototype.getMap=cn.prototype.f,cn.prototype.setActive=cn.prototype.Ha,cn.prototype.get=cn.prototype.get,cn.prototype.getKeys=cn.prototype.O,cn.prototype.getProperties=cn.prototype.N,cn.prototype.set=cn.prototype.set,cn.prototype.setProperties=cn.prototype.H,cn.prototype.unset=cn.prototype.P,cn.prototype.changed=cn.prototype.s,cn.prototype.dispatchEvent=cn.prototype.b,cn.prototype.getRevision=cn.prototype.L,cn.prototype.on=cn.prototype.J,cn.prototype.once=cn.prototype.once,cn.prototype.un=cn.prototype.K,ih.prototype.getActive=ih.prototype.c,ih.prototype.getMap=ih.prototype.f,ih.prototype.setActive=ih.prototype.Ha,ih.prototype.get=ih.prototype.get,ih.prototype.getKeys=ih.prototype.O,ih.prototype.getProperties=ih.prototype.N,ih.prototype.set=ih.prototype.set,ih.prototype.setProperties=ih.prototype.H,ih.prototype.unset=ih.prototype.P,ih.prototype.changed=ih.prototype.s,ih.prototype.dispatchEvent=ih.prototype.b,ih.prototype.getRevision=ih.prototype.L,ih.prototype.on=ih.prototype.J,ih.prototype.once=ih.prototype.once,ih.prototype.un=ih.prototype.K,lh.prototype.type=lh.prototype.type,lh.prototype.target=lh.prototype.target,lh.prototype.preventDefault=lh.prototype.preventDefault,lh.prototype.stopPropagation=lh.prototype.stopPropagation,En.prototype.getActive=En.prototype.c,En.prototype.getMap=En.prototype.f,En.prototype.setActive=En.prototype.Ha,En.prototype.get=En.prototype.get,En.prototype.getKeys=En.prototype.O,En.prototype.getProperties=En.prototype.N,En.prototype.set=En.prototype.set,En.prototype.setProperties=En.prototype.H,En.prototype.unset=En.prototype.P,En.prototype.changed=En.prototype.s,En.prototype.dispatchEvent=En.prototype.b,En.prototype.getRevision=En.prototype.L,En.prototype.on=En.prototype.J,En.prototype.once=En.prototype.once,En.prototype.un=En.prototype.K,Nn.prototype.getActive=Nn.prototype.c,Nn.prototype.getMap=Nn.prototype.f,Nn.prototype.setActive=Nn.prototype.Ha,Nn.prototype.get=Nn.prototype.get,Nn.prototype.getKeys=Nn.prototype.O,Nn.prototype.getProperties=Nn.prototype.N,Nn.prototype.set=Nn.prototype.set,Nn.prototype.setProperties=Nn.prototype.H,Nn.prototype.unset=Nn.prototype.P,Nn.prototype.changed=Nn.prototype.s,Nn.prototype.dispatchEvent=Nn.prototype.b,Nn.prototype.getRevision=Nn.prototype.L,Nn.prototype.on=Nn.prototype.J,Nn.prototype.once=Nn.prototype.once,Nn.prototype.un=Nn.prototype.K,Un.prototype.type=Un.prototype.type,Un.prototype.target=Un.prototype.target,Un.prototype.preventDefault=Un.prototype.preventDefault,Un.prototype.stopPropagation=Un.prototype.stopPropagation,Pn.prototype.getActive=Pn.prototype.c,Pn.prototype.getMap=Pn.prototype.f,Pn.prototype.setActive=Pn.prototype.Ha,Pn.prototype.get=Pn.prototype.get,Pn.prototype.getKeys=Pn.prototype.O,Pn.prototype.getProperties=Pn.prototype.N,Pn.prototype.set=Pn.prototype.set,Pn.prototype.setProperties=Pn.prototype.H,Pn.prototype.unset=Pn.prototype.P,Pn.prototype.changed=Pn.prototype.s,Pn.prototype.dispatchEvent=Pn.prototype.b,Pn.prototype.getRevision=Pn.prototype.L,Pn.prototype.on=Pn.prototype.J,Pn.prototype.once=Pn.prototype.once,Pn.prototype.un=Pn.prototype.K,xn.prototype.getActive=xn.prototype.c,xn.prototype.getMap=xn.prototype.f,xn.prototype.setActive=xn.prototype.Ha,xn.prototype.get=xn.prototype.get,xn.prototype.getKeys=xn.prototype.O,xn.prototype.getProperties=xn.prototype.N,xn.prototype.set=xn.prototype.set,xn.prototype.setProperties=xn.prototype.H,xn.prototype.unset=xn.prototype.P,xn.prototype.changed=xn.prototype.s,xn.prototype.dispatchEvent=xn.prototype.b,xn.prototype.getRevision=xn.prototype.L,xn.prototype.on=xn.prototype.J,xn.prototype.once=xn.prototype.once,xn.prototype.un=xn.prototype.K,ph.prototype.getActive=ph.prototype.c,ph.prototype.getMap=ph.prototype.f,ph.prototype.setActive=ph.prototype.Ha,ph.prototype.get=ph.prototype.get,ph.prototype.getKeys=ph.prototype.O,ph.prototype.getProperties=ph.prototype.N,ph.prototype.set=ph.prototype.set,ph.prototype.setProperties=ph.prototype.H,ph.prototype.unset=ph.prototype.P,ph.prototype.changed=ph.prototype.s,ph.prototype.dispatchEvent=ph.prototype.b,ph.prototype.getRevision=ph.prototype.L,ph.prototype.on=ph.prototype.J,ph.prototype.once=ph.prototype.once,ph.prototype.un=ph.prototype.K,Bn.prototype.getGeometry=Bn.prototype.V,Bn.prototype.getActive=Bn.prototype.c,Bn.prototype.getMap=Bn.prototype.f,Bn.prototype.setActive=Bn.prototype.Ha,Bn.prototype.get=Bn.prototype.get,Bn.prototype.getKeys=Bn.prototype.O,Bn.prototype.getProperties=Bn.prototype.N,Bn.prototype.set=Bn.prototype.set,Bn.prototype.setProperties=Bn.prototype.H,Bn.prototype.unset=Bn.prototype.P,Bn.prototype.changed=Bn.prototype.s,Bn.prototype.dispatchEvent=Bn.prototype.b,Bn.prototype.getRevision=Bn.prototype.L,Bn.prototype.on=Bn.prototype.J,Bn.prototype.once=Bn.prototype.once,Bn.prototype.un=Bn.prototype.K,yd.prototype.getActive=yd.prototype.c,yd.prototype.getMap=yd.prototype.f,yd.prototype.setActive=yd.prototype.Ha,yd.prototype.get=yd.prototype.get,yd.prototype.getKeys=yd.prototype.O,yd.prototype.getProperties=yd.prototype.N,yd.prototype.set=yd.prototype.set,yd.prototype.setProperties=yd.prototype.H,yd.prototype.unset=yd.prototype.P,yd.prototype.changed=yd.prototype.s,yd.prototype.dispatchEvent=yd.prototype.b,yd.prototype.getRevision=yd.prototype.L,yd.prototype.on=yd.prototype.J,yd.prototype.once=yd.prototype.once,yd.prototype.un=yd.prototype.K,Md.prototype.type=Md.prototype.type,Md.prototype.target=Md.prototype.target,Md.prototype.preventDefault=Md.prototype.preventDefault,Md.prototype.stopPropagation=Md.prototype.stopPropagation,xd.prototype.getActive=xd.prototype.c,xd.prototype.getMap=xd.prototype.f,xd.prototype.setActive=xd.prototype.Ha,xd.prototype.get=xd.prototype.get,xd.prototype.getKeys=xd.prototype.O,xd.prototype.getProperties=xd.prototype.N,xd.prototype.set=xd.prototype.set,xd.prototype.setProperties=xd.prototype.H,xd.prototype.unset=xd.prototype.P,xd.prototype.changed=xd.prototype.s,xd.prototype.dispatchEvent=xd.prototype.b,xd.prototype.getRevision=xd.prototype.L,xd.prototype.on=xd.prototype.J,xd.prototype.once=xd.prototype.once,xd.prototype.un=xd.prototype.K,Fd.prototype.type=Fd.prototype.type,Fd.prototype.target=Fd.prototype.target,Fd.prototype.preventDefault=Fd.prototype.preventDefault,Fd.prototype.stopPropagation=Fd.prototype.stopPropagation,Vn.prototype.getActive=Vn.prototype.c,Vn.prototype.getMap=Vn.prototype.f,Vn.prototype.setActive=Vn.prototype.Ha,Vn.prototype.get=Vn.prototype.get,Vn.prototype.getKeys=Vn.prototype.O,Vn.prototype.getProperties=Vn.prototype.N,Vn.prototype.set=Vn.prototype.set,Vn.prototype.setProperties=Vn.prototype.H,Vn.prototype.unset=Vn.prototype.P,Vn.prototype.changed=Vn.prototype.s,Vn.prototype.dispatchEvent=Vn.prototype.b,Vn.prototype.getRevision=Vn.prototype.L,Vn.prototype.on=Vn.prototype.J,Vn.prototype.once=Vn.prototype.once,Vn.prototype.un=Vn.prototype.K,zn.prototype.getActive=zn.prototype.c,zn.prototype.getMap=zn.prototype.f,zn.prototype.setActive=zn.prototype.Ha,zn.prototype.get=zn.prototype.get,zn.prototype.getKeys=zn.prototype.O,zn.prototype.getProperties=zn.prototype.N,zn.prototype.set=zn.prototype.set,zn.prototype.setProperties=zn.prototype.H,zn.prototype.unset=zn.prototype.P,zn.prototype.changed=zn.prototype.s,zn.prototype.dispatchEvent=zn.prototype.b,zn.prototype.getRevision=zn.prototype.L,zn.prototype.on=zn.prototype.J,zn.prototype.once=zn.prototype.once,zn.prototype.un=zn.prototype.K,Ud.prototype.getActive=Ud.prototype.c,Ud.prototype.getMap=Ud.prototype.f,Ud.prototype.setActive=Ud.prototype.Ha,Ud.prototype.get=Ud.prototype.get,Ud.prototype.getKeys=Ud.prototype.O,Ud.prototype.getProperties=Ud.prototype.N,Ud.prototype.set=Ud.prototype.set,Ud.prototype.setProperties=Ud.prototype.H,Ud.prototype.unset=Ud.prototype.P,Ud.prototype.changed=Ud.prototype.s,Ud.prototype.dispatchEvent=Ud.prototype.b,Ud.prototype.getRevision=Ud.prototype.L,Ud.prototype.on=Ud.prototype.J,Ud.prototype.once=Ud.prototype.once,Ud.prototype.un=Ud.prototype.K,ef.prototype.type=ef.prototype.type,ef.prototype.target=ef.prototype.target,ef.prototype.preventDefault=ef.prototype.preventDefault,ef.prototype.stopPropagation=ef.prototype.stopPropagation,Hn.prototype.getActive=Hn.prototype.c,Hn.prototype.getMap=Hn.prototype.f,Hn.prototype.setActive=Hn.prototype.Ha,Hn.prototype.get=Hn.prototype.get,Hn.prototype.getKeys=Hn.prototype.O,Hn.prototype.getProperties=Hn.prototype.N,Hn.prototype.set=Hn.prototype.set,Hn.prototype.setProperties=Hn.prototype.H,Hn.prototype.unset=Hn.prototype.P,Hn.prototype.changed=Hn.prototype.s,Hn.prototype.dispatchEvent=Hn.prototype.b,Hn.prototype.getRevision=Hn.prototype.L,Hn.prototype.on=Hn.prototype.J,Hn.prototype.once=Hn.prototype.once,Hn.prototype.un=Hn.prototype.K,Zn.prototype.getActive=Zn.prototype.c,Zn.prototype.getMap=Zn.prototype.f,Zn.prototype.setActive=Zn.prototype.Ha,Zn.prototype.get=Zn.prototype.get,Zn.prototype.getKeys=Zn.prototype.O,Zn.prototype.getProperties=Zn.prototype.N,Zn.prototype.set=Zn.prototype.set,Zn.prototype.setProperties=Zn.prototype.H,Zn.prototype.unset=Zn.prototype.P,Zn.prototype.changed=Zn.prototype.s,Zn.prototype.dispatchEvent=Zn.prototype.b,Zn.prototype.getRevision=Zn.prototype.L,Zn.prototype.on=Zn.prototype.J,Zn.prototype.once=Zn.prototype.once,Zn.prototype.un=Zn.prototype.K,Qn.prototype.getActive=Qn.prototype.c,Qn.prototype.getMap=Qn.prototype.f,Qn.prototype.setActive=Qn.prototype.Ha,Qn.prototype.get=Qn.prototype.get,Qn.prototype.getKeys=Qn.prototype.O,Qn.prototype.getProperties=Qn.prototype.N,Qn.prototype.set=Qn.prototype.set,Qn.prototype.setProperties=Qn.prototype.H,Qn.prototype.unset=Qn.prototype.P,Qn.prototype.changed=Qn.prototype.s,Qn.prototype.dispatchEvent=Qn.prototype.b,Qn.prototype.getRevision=Qn.prototype.L,Qn.prototype.on=Qn.prototype.J,Qn.prototype.once=Qn.prototype.once,Qn.prototype.un=Qn.prototype.K,of.prototype.getActive=of.prototype.c,of.prototype.getMap=of.prototype.f,of.prototype.setActive=of.prototype.Ha,of.prototype.get=of.prototype.get,of.prototype.getKeys=of.prototype.O,of.prototype.getProperties=of.prototype.N,of.prototype.set=of.prototype.set,of.prototype.setProperties=of.prototype.H,of.prototype.unset=of.prototype.P,of.prototype.changed=of.prototype.s,of.prototype.dispatchEvent=of.prototype.b,of.prototype.getRevision=of.prototype.L,of.prototype.on=of.prototype.J,of.prototype.once=of.prototype.once,of.prototype.un=of.prototype.K,sf.prototype.type=sf.prototype.type,sf.prototype.target=sf.prototype.target,sf.prototype.preventDefault=sf.prototype.preventDefault,sf.prototype.stopPropagation=sf.prototype.stopPropagation,af.prototype.getActive=af.prototype.c,af.prototype.getMap=af.prototype.f,af.prototype.setActive=af.prototype.Ha,af.prototype.get=af.prototype.get,af.prototype.getKeys=af.prototype.O,af.prototype.getProperties=af.prototype.N,af.prototype.set=af.prototype.set,af.prototype.setProperties=af.prototype.H,af.prototype.unset=af.prototype.P,af.prototype.changed=af.prototype.s,af.prototype.dispatchEvent=af.prototype.b,af.prototype.getRevision=af.prototype.L,af.prototype.on=af.prototype.J,af.prototype.once=af.prototype.once,af.prototype.un=af.prototype.K,hf.prototype.getActive=hf.prototype.c,hf.prototype.getMap=hf.prototype.f,hf.prototype.setActive=hf.prototype.Ha,hf.prototype.get=hf.prototype.get,hf.prototype.getKeys=hf.prototype.O,hf.prototype.getProperties=hf.prototype.N,hf.prototype.set=hf.prototype.set,hf.prototype.setProperties=hf.prototype.H,hf.prototype.unset=hf.prototype.P,hf.prototype.changed=hf.prototype.s,hf.prototype.dispatchEvent=hf.prototype.b,hf.prototype.getRevision=hf.prototype.L,hf.prototype.on=hf.prototype.J,hf.prototype.once=hf.prototype.once,hf.prototype.un=hf.prototype.K,_f.prototype.type=_f.prototype.type,_f.prototype.target=_f.prototype.target,_f.prototype.preventDefault=_f.prototype.preventDefault,_f.prototype.stopPropagation=_f.prototype.stopPropagation,ni.prototype.get=ni.prototype.get,ni.prototype.getKeys=ni.prototype.O,ni.prototype.getProperties=ni.prototype.N,ni.prototype.set=ni.prototype.set,ni.prototype.setProperties=ni.prototype.H,ni.prototype.unset=ni.prototype.P,ni.prototype.changed=ni.prototype.s,ni.prototype.dispatchEvent=ni.prototype.b,ni.prototype.getRevision=ni.prototype.L,ni.prototype.on=ni.prototype.J,ni.prototype.once=ni.prototype.once,ni.prototype.un=ni.prototype.K,ai.prototype.getClosestPoint=ai.prototype.Ab,ai.prototype.intersectsCoordinate=ai.prototype.sb,ai.prototype.getExtent=ai.prototype.G,ai.prototype.rotate=ai.prototype.rotate,ai.prototype.scale=ai.prototype.scale,ai.prototype.simplify=ai.prototype.Rb,ai.prototype.transform=ai.prototype.tb,ai.prototype.get=ai.prototype.get,ai.prototype.getKeys=ai.prototype.O,ai.prototype.getProperties=ai.prototype.N,ai.prototype.set=ai.prototype.set,ai.prototype.setProperties=ai.prototype.H,ai.prototype.unset=ai.prototype.P,ai.prototype.changed=ai.prototype.s,ai.prototype.dispatchEvent=ai.prototype.b,ai.prototype.getRevision=ai.prototype.L,ai.prototype.on=ai.prototype.J,ai.prototype.once=ai.prototype.once,ai.prototype.un=ai.prototype.K,Bu.prototype.getFirstCoordinate=Bu.prototype.ac,Bu.prototype.getLastCoordinate=Bu.prototype.bc,Bu.prototype.getLayout=Bu.prototype.cc,Bu.prototype.rotate=Bu.prototype.rotate,Bu.prototype.scale=Bu.prototype.scale,Bu.prototype.getClosestPoint=Bu.prototype.Ab,Bu.prototype.intersectsCoordinate=Bu.prototype.sb,Bu.prototype.getExtent=Bu.prototype.G,Bu.prototype.simplify=Bu.prototype.Rb,Bu.prototype.get=Bu.prototype.get,Bu.prototype.getKeys=Bu.prototype.O,Bu.prototype.getProperties=Bu.prototype.N,Bu.prototype.set=Bu.prototype.set,Bu.prototype.setProperties=Bu.prototype.H,Bu.prototype.unset=Bu.prototype.P,Bu.prototype.changed=Bu.prototype.s,Bu.prototype.dispatchEvent=Bu.prototype.b,Bu.prototype.getRevision=Bu.prototype.L,Bu.prototype.on=Bu.prototype.J,Bu.prototype.once=Bu.prototype.once,Bu.prototype.un=Bu.prototype.K,up.prototype.getClosestPoint=up.prototype.Ab,up.prototype.intersectsCoordinate=up.prototype.sb,up.prototype.getExtent=up.prototype.G,up.prototype.rotate=up.prototype.rotate,up.prototype.scale=up.prototype.scale,up.prototype.simplify=up.prototype.Rb,up.prototype.transform=up.prototype.tb,up.prototype.get=up.prototype.get,up.prototype.getKeys=up.prototype.O,up.prototype.getProperties=up.prototype.N,up.prototype.set=up.prototype.set,up.prototype.setProperties=up.prototype.H,up.prototype.unset=up.prototype.P,up.prototype.changed=up.prototype.s,up.prototype.dispatchEvent=up.prototype.b,up.prototype.getRevision=up.prototype.L,up.prototype.on=up.prototype.J,up.prototype.once=up.prototype.once,up.prototype.un=up.prototype.K,Ci.prototype.getFirstCoordinate=Ci.prototype.ac,Ci.prototype.getLastCoordinate=Ci.prototype.bc,Ci.prototype.getLayout=Ci.prototype.cc,Ci.prototype.rotate=Ci.prototype.rotate,Ci.prototype.scale=Ci.prototype.scale,Ci.prototype.getClosestPoint=Ci.prototype.Ab,Ci.prototype.intersectsCoordinate=Ci.prototype.sb,Ci.prototype.getExtent=Ci.prototype.G,Ci.prototype.simplify=Ci.prototype.Rb,Ci.prototype.transform=Ci.prototype.tb,Ci.prototype.get=Ci.prototype.get,Ci.prototype.getKeys=Ci.prototype.O,Ci.prototype.getProperties=Ci.prototype.N,Ci.prototype.set=Ci.prototype.set,Ci.prototype.setProperties=Ci.prototype.H,Ci.prototype.unset=Ci.prototype.P,Ci.prototype.changed=Ci.prototype.s,Ci.prototype.dispatchEvent=Ci.prototype.b,Ci.prototype.getRevision=Ci.prototype.L,Ci.prototype.on=Ci.prototype.J,Ci.prototype.once=Ci.prototype.once,Ci.prototype.un=Ci.prototype.K,Al.prototype.getFirstCoordinate=Al.prototype.ac,Al.prototype.getLastCoordinate=Al.prototype.bc,Al.prototype.getLayout=Al.prototype.cc,Al.prototype.rotate=Al.prototype.rotate,Al.prototype.scale=Al.prototype.scale,Al.prototype.getClosestPoint=Al.prototype.Ab,Al.prototype.intersectsCoordinate=Al.prototype.sb,Al.prototype.getExtent=Al.prototype.G,Al.prototype.simplify=Al.prototype.Rb,Al.prototype.transform=Al.prototype.tb,Al.prototype.get=Al.prototype.get,Al.prototype.getKeys=Al.prototype.O,Al.prototype.getProperties=Al.prototype.N,Al.prototype.set=Al.prototype.set,Al.prototype.setProperties=Al.prototype.H,Al.prototype.unset=Al.prototype.P,Al.prototype.changed=Al.prototype.s,Al.prototype.dispatchEvent=Al.prototype.b,Al.prototype.getRevision=Al.prototype.L,Al.prototype.on=Al.prototype.J,Al.prototype.once=Al.prototype.once,Al.prototype.un=Al.prototype.K,xl.prototype.getFirstCoordinate=xl.prototype.ac,xl.prototype.getLastCoordinate=xl.prototype.bc,xl.prototype.getLayout=xl.prototype.cc,xl.prototype.rotate=xl.prototype.rotate,xl.prototype.scale=xl.prototype.scale,xl.prototype.getClosestPoint=xl.prototype.Ab,xl.prototype.intersectsCoordinate=xl.prototype.sb,xl.prototype.getExtent=xl.prototype.G,xl.prototype.simplify=xl.prototype.Rb,xl.prototype.transform=xl.prototype.tb,xl.prototype.get=xl.prototype.get,xl.prototype.getKeys=xl.prototype.O,xl.prototype.getProperties=xl.prototype.N,xl.prototype.set=xl.prototype.set,xl.prototype.setProperties=xl.prototype.H,xl.prototype.unset=xl.prototype.P,xl.prototype.changed=xl.prototype.s,xl.prototype.dispatchEvent=xl.prototype.b,xl.prototype.getRevision=xl.prototype.L,xl.prototype.on=xl.prototype.J,xl.prototype.once=xl.prototype.once,xl.prototype.un=xl.prototype.K,Tl.prototype.getFirstCoordinate=Tl.prototype.ac,Tl.prototype.getLastCoordinate=Tl.prototype.bc,Tl.prototype.getLayout=Tl.prototype.cc,Tl.prototype.rotate=Tl.prototype.rotate,Tl.prototype.scale=Tl.prototype.scale,Tl.prototype.getClosestPoint=Tl.prototype.Ab,Tl.prototype.intersectsCoordinate=Tl.prototype.sb,Tl.prototype.getExtent=Tl.prototype.G,Tl.prototype.simplify=Tl.prototype.Rb,Tl.prototype.transform=Tl.prototype.tb,Tl.prototype.get=Tl.prototype.get,Tl.prototype.getKeys=Tl.prototype.O,Tl.prototype.getProperties=Tl.prototype.N,Tl.prototype.set=Tl.prototype.set,Tl.prototype.setProperties=Tl.prototype.H,Tl.prototype.unset=Tl.prototype.P,Tl.prototype.changed=Tl.prototype.s,Tl.prototype.dispatchEvent=Tl.prototype.b,Tl.prototype.getRevision=Tl.prototype.L,Tl.prototype.on=Tl.prototype.J,Tl.prototype.once=Tl.prototype.once,Tl.prototype.un=Tl.prototype.K,Ll.prototype.getFirstCoordinate=Ll.prototype.ac,Ll.prototype.getLastCoordinate=Ll.prototype.bc,Ll.prototype.getLayout=Ll.prototype.cc,Ll.prototype.rotate=Ll.prototype.rotate,Ll.prototype.scale=Ll.prototype.scale,Ll.prototype.getClosestPoint=Ll.prototype.Ab,Ll.prototype.intersectsCoordinate=Ll.prototype.sb,Ll.prototype.getExtent=Ll.prototype.G,Ll.prototype.simplify=Ll.prototype.Rb,Ll.prototype.transform=Ll.prototype.tb,Ll.prototype.get=Ll.prototype.get,Ll.prototype.getKeys=Ll.prototype.O,Ll.prototype.getProperties=Ll.prototype.N,Ll.prototype.set=Ll.prototype.set,Ll.prototype.setProperties=Ll.prototype.H,Ll.prototype.unset=Ll.prototype.P,Ll.prototype.changed=Ll.prototype.s,Ll.prototype.dispatchEvent=Ll.prototype.b,Ll.prototype.getRevision=Ll.prototype.L,Ll.prototype.on=Ll.prototype.J,Ll.prototype.once=Ll.prototype.once,Ll.prototype.un=Ll.prototype.K,Mi.prototype.getFirstCoordinate=Mi.prototype.ac,Mi.prototype.getLastCoordinate=Mi.prototype.bc,Mi.prototype.getLayout=Mi.prototype.cc,Mi.prototype.rotate=Mi.prototype.rotate,Mi.prototype.scale=Mi.prototype.scale,Mi.prototype.getClosestPoint=Mi.prototype.Ab,Mi.prototype.intersectsCoordinate=Mi.prototype.sb,Mi.prototype.getExtent=Mi.prototype.G,Mi.prototype.simplify=Mi.prototype.Rb,Mi.prototype.transform=Mi.prototype.tb,Mi.prototype.get=Mi.prototype.get,Mi.prototype.getKeys=Mi.prototype.O,Mi.prototype.getProperties=Mi.prototype.N,Mi.prototype.set=Mi.prototype.set,Mi.prototype.setProperties=Mi.prototype.H,Mi.prototype.unset=Mi.prototype.P,Mi.prototype.changed=Mi.prototype.s,Mi.prototype.dispatchEvent=Mi.prototype.b,Mi.prototype.getRevision=Mi.prototype.L,Mi.prototype.on=Mi.prototype.J,Mi.prototype.once=Mi.prototype.once,Mi.prototype.un=Mi.prototype.K,Fi.prototype.getFirstCoordinate=Fi.prototype.ac,Fi.prototype.getLastCoordinate=Fi.prototype.bc,Fi.prototype.getLayout=Fi.prototype.cc,Fi.prototype.rotate=Fi.prototype.rotate,Fi.prototype.scale=Fi.prototype.scale,Fi.prototype.getClosestPoint=Fi.prototype.Ab,Fi.prototype.intersectsCoordinate=Fi.prototype.sb,Fi.prototype.getExtent=Fi.prototype.G,Fi.prototype.simplify=Fi.prototype.Rb,Fi.prototype.transform=Fi.prototype.tb,Fi.prototype.get=Fi.prototype.get,Fi.prototype.getKeys=Fi.prototype.O,Fi.prototype.getProperties=Fi.prototype.N,Fi.prototype.set=Fi.prototype.set,Fi.prototype.setProperties=Fi.prototype.H,Fi.prototype.unset=Fi.prototype.P,Fi.prototype.changed=Fi.prototype.s,Fi.prototype.dispatchEvent=Fi.prototype.b,Fi.prototype.getRevision=Fi.prototype.L,Fi.prototype.on=Fi.prototype.J,Fi.prototype.once=Fi.prototype.once,Fi.prototype.un=Fi.prototype.K,Op.prototype.readFeatures=Op.prototype.Oa,kp.prototype.readFeatures=kp.prototype.Oa,Op.prototype.readFeatures=Op.prototype.Oa,Te.prototype.get=Te.prototype.get,Te.prototype.getKeys=Te.prototype.O,Te.prototype.getProperties=Te.prototype.N,Te.prototype.set=Te.prototype.set,Te.prototype.setProperties=Te.prototype.H,Te.prototype.unset=Te.prototype.P,Te.prototype.changed=Te.prototype.s,Te.prototype.dispatchEvent=Te.prototype.b,Te.prototype.getRevision=Te.prototype.L,Te.prototype.on=Te.prototype.J,Te.prototype.once=Te.prototype.once,Te.prototype.un=Te.prototype.K,Le.prototype.getMap=Le.prototype.g,Le.prototype.setMap=Le.prototype.setMap,Le.prototype.setTarget=Le.prototype.f,Le.prototype.get=Le.prototype.get,Le.prototype.getKeys=Le.prototype.O,Le.prototype.getProperties=Le.prototype.N,Le.prototype.set=Le.prototype.set,Le.prototype.setProperties=Le.prototype.H,Le.prototype.unset=Le.prototype.P,Le.prototype.changed=Le.prototype.s,Le.prototype.dispatchEvent=Le.prototype.b,Le.prototype.getRevision=Le.prototype.L,Le.prototype.on=Le.prototype.J,Le.prototype.once=Le.prototype.once,Le.prototype.un=Le.prototype.K,We.prototype.getMap=We.prototype.g,We.prototype.setMap=We.prototype.setMap,We.prototype.setTarget=We.prototype.f,We.prototype.get=We.prototype.get,We.prototype.getKeys=We.prototype.O,We.prototype.getProperties=We.prototype.N,We.prototype.set=We.prototype.set,We.prototype.setProperties=We.prototype.H,We.prototype.unset=We.prototype.P,We.prototype.changed=We.prototype.s,We.prototype.dispatchEvent=We.prototype.b,We.prototype.getRevision=We.prototype.L,We.prototype.on=We.prototype.J,We.prototype.once=We.prototype.once,We.prototype.un=We.prototype.K,Ye.prototype.getMap=Ye.prototype.g,Ye.prototype.setMap=Ye.prototype.setMap,Ye.prototype.setTarget=Ye.prototype.f,Ye.prototype.get=Ye.prototype.get,Ye.prototype.getKeys=Ye.prototype.O,Ye.prototype.getProperties=Ye.prototype.N,Ye.prototype.set=Ye.prototype.set,Ye.prototype.setProperties=Ye.prototype.H,Ye.prototype.unset=Ye.prototype.P,
Ye.prototype.changed=Ye.prototype.s,Ye.prototype.dispatchEvent=Ye.prototype.b,Ye.prototype.getRevision=Ye.prototype.L,Ye.prototype.on=Ye.prototype.J,Ye.prototype.once=Ye.prototype.once,Ye.prototype.un=Ye.prototype.K,wa.prototype.getMap=wa.prototype.g,wa.prototype.setMap=wa.prototype.setMap,wa.prototype.setTarget=wa.prototype.f,wa.prototype.get=wa.prototype.get,wa.prototype.getKeys=wa.prototype.O,wa.prototype.getProperties=wa.prototype.N,wa.prototype.set=wa.prototype.set,wa.prototype.setProperties=wa.prototype.H,wa.prototype.unset=wa.prototype.P,wa.prototype.changed=wa.prototype.s,wa.prototype.dispatchEvent=wa.prototype.b,wa.prototype.getRevision=wa.prototype.L,wa.prototype.on=wa.prototype.J,wa.prototype.once=wa.prototype.once,wa.prototype.un=wa.prototype.K,Fe.prototype.getMap=Fe.prototype.g,Fe.prototype.setMap=Fe.prototype.setMap,Fe.prototype.setTarget=Fe.prototype.f,Fe.prototype.get=Fe.prototype.get,Fe.prototype.getKeys=Fe.prototype.O,Fe.prototype.getProperties=Fe.prototype.N,Fe.prototype.set=Fe.prototype.set,Fe.prototype.setProperties=Fe.prototype.H,Fe.prototype.unset=Fe.prototype.P,Fe.prototype.changed=Fe.prototype.s,Fe.prototype.dispatchEvent=Fe.prototype.b,Fe.prototype.getRevision=Fe.prototype.L,Fe.prototype.on=Fe.prototype.J,Fe.prototype.once=Fe.prototype.once,Fe.prototype.un=Fe.prototype.K,xa.prototype.getMap=xa.prototype.g,xa.prototype.setMap=xa.prototype.setMap,xa.prototype.setTarget=xa.prototype.f,xa.prototype.get=xa.prototype.get,xa.prototype.getKeys=xa.prototype.O,xa.prototype.getProperties=xa.prototype.N,xa.prototype.set=xa.prototype.set,xa.prototype.setProperties=xa.prototype.H,xa.prototype.unset=xa.prototype.P,xa.prototype.changed=xa.prototype.s,xa.prototype.dispatchEvent=xa.prototype.b,xa.prototype.getRevision=xa.prototype.L,xa.prototype.on=xa.prototype.J,xa.prototype.once=xa.prototype.once,xa.prototype.un=xa.prototype.K,Be.prototype.getMap=Be.prototype.g,Be.prototype.setMap=Be.prototype.setMap,Be.prototype.setTarget=Be.prototype.f,Be.prototype.get=Be.prototype.get,Be.prototype.getKeys=Be.prototype.O,Be.prototype.getProperties=Be.prototype.N,Be.prototype.set=Be.prototype.set,Be.prototype.setProperties=Be.prototype.H,Be.prototype.unset=Be.prototype.P,Be.prototype.changed=Be.prototype.s,Be.prototype.dispatchEvent=Be.prototype.b,Be.prototype.getRevision=Be.prototype.L,Be.prototype.on=Be.prototype.J,Be.prototype.once=Be.prototype.once,Be.prototype.un=Be.prototype.K,Ta.prototype.getMap=Ta.prototype.g,Ta.prototype.setMap=Ta.prototype.setMap,Ta.prototype.setTarget=Ta.prototype.f,Ta.prototype.get=Ta.prototype.get,Ta.prototype.getKeys=Ta.prototype.O,Ta.prototype.getProperties=Ta.prototype.N,Ta.prototype.set=Ta.prototype.set,Ta.prototype.setProperties=Ta.prototype.H,Ta.prototype.unset=Ta.prototype.P,Ta.prototype.changed=Ta.prototype.s,Ta.prototype.dispatchEvent=Ta.prototype.b,Ta.prototype.getRevision=Ta.prototype.L,Ta.prototype.on=Ta.prototype.J,Ta.prototype.once=Ta.prototype.once,Ta.prototype.un=Ta.prototype.K,Na.prototype.getMap=Na.prototype.g,Na.prototype.setMap=Na.prototype.setMap,Na.prototype.setTarget=Na.prototype.f,Na.prototype.get=Na.prototype.get,Na.prototype.getKeys=Na.prototype.O,Na.prototype.getProperties=Na.prototype.N,Na.prototype.set=Na.prototype.set,Na.prototype.setProperties=Na.prototype.H,Na.prototype.unset=Na.prototype.P,Na.prototype.changed=Na.prototype.s,Na.prototype.dispatchEvent=Na.prototype.b,Na.prototype.getRevision=Na.prototype.L,Na.prototype.on=Na.prototype.J,Na.prototype.once=Na.prototype.once,Na.prototype.un=Na.prototype.K,dg.ol}),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(openlayers,xmldom,request,itowns):"function"==typeof define&&define.amd?define("Gp",["ol","require","require","itowns"],e):"object"==typeof exports?exports.Gp=e(openlayers,xmldom,request,itowns):t.Gp=e(t.ol,t[void 0],t[void 0],t.itowns)}("undefined"!=typeof self?self:this,function(t,e,o,i){return function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,i){return e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i}),t},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=43)}([function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n={detectSupport:function(){var t=!0,e=window.navigator.userAgent.toLowerCase();return-1===e.indexOf("iphone")&&-1===e.indexOf("ipod")&&-1===e.indexOf("ipad")&&-1===e.indexOf("android")&&-1===e.indexOf("mobile")&&-1===e.indexOf("blackberry")&&-1===e.indexOf("tablet")&&-1===e.indexOf("phone")&&-1===e.indexOf("touch")||(t=!1),-1===e.indexOf("msie")&&-1===e.indexOf("trident")||(t=!0),t},assign:function(t,e){t=t||{};for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t},mergeParams:function(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&("object"===i(e[o])&&t.hasOwnProperty(o)?this.mergeParams(t[o],e[o]):t[o]=e[o])}};return e.default=n,e},function(e,o){return e.exports=t,o},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={generate:function(){var t=Math.floor(Date.now());return function(){return t++}}(),name:function(t){var e=null,o=t.lastIndexOf("-");return e=-1===o?t:t.substring(0,o),e},index:function(t){var e=null,o=this.name(t),i=o.lastIndexOf("_");return-1!==i&&(e=o.substring(i+1)),e},uuid:function(t){var e=null,o=t.lastIndexOf("-");return-1!==o&&(e=parseInt(t.substring(o+1),10)),e}};return e.default=i,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(74),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}(i),r={getLogger:function(t){n.enableAll();var e=t||"default";return n.getLogger(e)}};return e.default=r,e},function(t,e,o){return function(e,i){t.exports=i(o(15),o(45))}("undefined"!=typeof self&&self,function(t,e){return function(t){function e(i){if(o[i])return o[i].exports;var n=o[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};return e.m=t,e.c=o,e.d=function(t,o,i){return e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:i}),t},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=43)}([function(t,e,o){"use strict";var i=o(47),n=(o.n(i),{getLogger:function(t){i.enableAll();var e=t||"default";return i.getLogger(e)}});e.a=n},function(t,e,o){"use strict";var i={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(t,e){if(0===Object.keys(arguments).length)return"Message indefined !";var o=Array.prototype.slice.call(arguments),i=o.shift(),n=o,r=this[i];try{r=Array.isArray(n)&&n.length>0?r.replace("%var%",n.join(" - ")):r.replace("%var%","%var% (not specified)")}catch(t){}return r}};e.a=i},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=t;"string"==typeof t||t instanceof String?(this.message=t,this.status=-1,this.type=i.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=(new Error).stack}i.TYPE_SRVERR="SERVICE_ERROR",i.TYPE_USEERR="USAGE_ERROR",i.TYPE_UNKERR="UNKNOWN_ERROR",i.prototype=Object.create(Error.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),e.a=i},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError(s.a.getMessage("CLASS_CONSTRUCTOR"));this.logger=n.a.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!1,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(t){console.log("onSuccess - la reponse est la suivante : ",t)},onFailure:function(t){200!==t.status&&t.status?console.log("onFailure - Erreur (",t.status,") : ",t.message):console.log("onFailure : ",t.message)}};for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);if(!this.options.apiKey&&!this.options.serverUrl)throw new Error(s.a.getMessage("PARAM_MISSING","apiKey","serverUrl"));if(this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(t){console.log("onSuccess - la réponse brute du service est la suivante : ",t)}),!!(null===this.options.onSuccess||"function"!=typeof this.options.onSuccess))throw new Error(s.a.getMessage("PARAM_MISSING","onSuccess()"));if(!this.options.serverUrl){p.a.ssl=this.options.ssl;var o=p.a[this.CLASSNAME].url(this.options.apiKey);"string"==typeof o?this.options.serverUrl=o:this.logger.trace("URL par defaut à determiner au niveau du composant...")}switch(this.options.httpMethod="string"==typeof t.httpMethod?t.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(s.a.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(s.a.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol="string"==typeof t.protocol?t.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(s.a.getMessage("PARAM_UNKNOWN","protocol"))}if("undefined"==typeof window&&"JSONP"===this.options.protocol)throw new Error(s.a.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));"JSONP"===this.options.protocol&&(this.options.httpMethod="GET"),this.options.nocache=t.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}var n=o(0),r=o(4),s=o(1),a=o(48),l=o(2),p=o(5);i.prototype={constructor:i,call:function(){function t(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(r,n,e)}function e(t){this.logger.trace("CommonService::onBuildRequest : ",t),this.callService.call(r,n,o)}function o(t){this.logger.trace("CommonService::onCallService : ",t),this.analyzeResponse.call(r,n,i)}function i(t){if(this.logger.trace("CommonService::onAnalyzeResponse : ",t),!t)return n.call(this,new l.a("Analyse de la reponse en échec !?"));this.options.onSuccess.call(this,t)}function n(t){this.logger.trace("CommonService::onError()");var e=t;e instanceof l.a||(e=new l.a(t.message)),this.options.onFailure.call(this,e)}this.logger.trace("CommonService::call ()");var r=this;t.call(r)},buildRequest:function(t,e){this.logger.error("overwritten method !"),t&&t.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(t,e){var o=null,i=this.request,n=!(!this.options.proxyURL||"XHR"!==this.options.protocol);this.options.serverUrl=r.a.normalyzeUrl(this.options.serverUrl,{"gp-access-lib":"2.0.0"},!1),n&&("GET"===this.options.httpMethod&&(o=this.options.proxyURL+r.a.normalyzeUrl(this.options.serverUrl,this.request,!0),i=null),"POST"===this.options.httpMethod&&(o=this.options.proxyURL+r.a.normalyzeUrl(this.options.serverUrl,null,!0),i=this.request));var s=this,p={url:o||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:"XHR"!==this.options.protocol,callbackSuffix:this.options.callbackSuffix,data:i,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(o){s.logger.trace("callService::onResponse()");var i=null;if("XHR"===s.options.protocol&&(i=o),"JSONP"===s.options.protocol){if(s.logger.trace("Response JSON",o),!o)return void t.call(s,new l.a("Le contenu de la reponse est vide !?"));if(o.http){if(200!==o.http.status)return void t.call(s,new l.a({status:o.http.status,message:o.http.error,type:l.a.TYPE_SRVERR}));if(i=o.xml,s.options.rawResponse&&(i=o),"function"==typeof s.options.onBeforeParse){var n=s.options.onBeforeParse(i);"string"==typeof n&&(i=n)}}else i=o}s.response=i,e.call(s,i)},onFailure:function(e){s.logger.trace("callService::onFailure()"),e.type=l.a.TYPE_SRVERR,t.call(s,new l.a(e))},onTimeOut:function(){s.logger.trace("callService::onTimeOut()"),t.call(s,new l.a("TimeOut!"))}};a.a.send(p)},analyzeResponse:function(t,e){this.logger.error("overwritten method !"),t&&t.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}},e.a=i},function(t,e,o){"use strict";var i={normalyzeParameters:function(t){var e=null;if(t){var o=[];for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];n||(n=""),o.push(i+"="+n)}e=o.join("&")}return e},normalyzeUrl:function(t,e,o){var i=t;if(t){var n=t.indexOf("?");-1===n&&(i+="?"),-1!==n&&n!==t.length-1&&(i+="&")}return e&&(i+="string"==typeof e?e:this.normalyzeParameters(e)),o&&(i=encodeURIComponent(i)),i},indent:function(t,e){var o=t||0;return new Array(o+1).join("\t")+e}};e.a=i},function(t,e,o){"use strict";var i="undefined"!=typeof window?1:0,n="wxs.ign.fr",r={ssl:!1,url:function(t,e){return(i?location&&location.protocol&&0===location.protocol.indexOf("https:")?"https://":"http://":r.ssl?"https://":"http://")+n.concat("/",t,e)},Alti:{_key:{"elevation-json":"/alti/rest/elevation.json","elevation-xml":"/alti/rest/elevation.xml","profil-json":"/alti/rest/elevationLine.json","profil-xml":"/alti/rest/elevationLine.xml",wps:"/alti/wps"},url:function(t){return{"elevation-json":r.url(t,this._key["elevation-json"]),"elevation-xml":r.url(t,this._key["elevation-xml"]),"profil-json":r.url(t,this._key["profil-json"]),"profil-xml":r.url(t,this._key["profil-xml"]),wps:r.url(t,this._key.wps)}}},ProcessIsoCurve:{_key:{"iso-json":"/isochrone/isochrone.json","iso-xml":"/isochrone/isochrone.xml"},url:function(t){return{"iso-json":r.url(t,this._key["iso-json"]),"iso-xml":r.url(t,this._key["iso-xml"])}}},AutoComplete:{_key:"/ols/apis/completion",url:function(t){return r.url(t,this._key)}},ReverseGeocode:{_key:"/geoportail/ols",url:function(t){return r.url(t,this._key)}},AutoConf:{_key:{apiKey:"/autoconf",apiKeys:"/autoconf?keys=%KEYS%",aggregate:"/autoconf/id/"},url:function(t){var e="";if(Array.isArray(t)&&t.length>0){e=t[0];for(var o=1;o<t.length;o++)e+=","+t[o]}return{apiKey:r.url(t,this._key.apiKey),apiKeys:r.url(t[0],this._key.apiKeys).replace("%KEYS%",e),aggregate:r.url(t,this._key.aggregate)}}},Geocode:{_key:"/geoportail/ols",url:function(t){return r.url(t,this._key)}},Route:{_key:{ols:"/itineraire/ols","route-json":"/itineraire/rest/route.json","route-xml":"/itineraire/rest/route.xml"},url:function(t){return{ols:r.url(t,this._key.ols),"route-json":r.url(t,this._key["route-json"]),"route-xml":r.url(t,this._key["route-xml"])}}}};e.a=r},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError("XML constructor cannot be called as a function.");this.logger=l.a.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,t&&(t.xmlString&&"string"==typeof t.xmlString&&(this.xmlString=t.xmlString,this.xmlDoc=n(t.xmlString)),t.reader&&this.setReader(t.reader))}function n(t){if("undefined"==typeof window){return(new(0,o(20).DOMParser)).parseFromString(t,"text/xml")}var e,i,n="Erreur lors du parsing de la réponse du service : XML non conforme";if(window.ActiveXObject){i=new window.ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(t);var r=i.parseError;if(r.errorCode)throw r.line&&r.linepos&&(n+="( ligne "+r.line+", colonne "+r.linepos),r.reason&&(n+=":  "+r.reason+")"),new Error(n);return i}if(window.DOMParser){e=new window.DOMParser;try{i=e.parseFromString(t,"text/xml")}catch(t){throw"SyntaxError"===t.message?new Error(n):new Error("Erreur lors du parsing de la réponse du service : "+t.message)}if(i.getElementsByTagName("parsererror").length>0)for(var s=i.getElementsByTagName("parsererror"),a=0;a<s.length;a++){var l=s[a].innerHTML;if(-1===l.indexOf("Huge input lookup"))throw n+="("+l+")",new Error(n)}else if(!i.documentElement)throw new Error(n);return i}throw new Error("Incompatible DOM Parser pour ce navigateur !")}function r(t){var e;return 9===t.nodeType?e=t.documentElement:1===t.nodeType&&(e=t),e}function s(t){var e={};if(t.attributes.length>0){var o=a(t);e.attributes=o}if(t.hasChildNodes())for(var i,n={},r=t.childNodes,l=0;l<r.length;l++)if(i=r[l],3===i.nodeType)e.textContent=i.nodeValue;else if(1===i.nodeType)if(n=s(i),e[i.nodeName]){if(!Array.isArray(e[i.nodeName])){var p=e[i.nodeName];e[i.nodeName]=[],e[i.nodeName].push(p)}e[i.nodeName].push(n)}else e[i.nodeName]=n;return e}function a(t){if(t.attributes.length>0){for(var e={},o=t.attributes,i=0;i<o.length;i++){var n=o[i];e[n.nodeName]=n.nodeValue}return e}}var l=o(0);i.prototype={constructor:i,getXMLString:function(){return this.xmlString},setXMLString:function(t){t&&"string"==typeof t&&(this.xmlString=t,this.xmlDoc=n(t))},getReader:function(){return this.reader},setReader:function(t){t&&t.read&&"function"==typeof t.read&&(this.reader=t)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(t){this.xmlDoc=t},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=n(this.xmlString)),this.xmlDoc){var t=r(this.xmlDoc);if(t){var e;return this.reader&&this.reader.read?e=this.reader.read(t):(e={},e[t.nodeName]=s(t)),e}return{}}}},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("GeocodeLocation constructor cannot be called as a function.");this.placeAttributes={},this.attributesList=[],this.serviceAttributes=[]}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";var i=o(0),n={toJson:function(t,e,o){var n=i.a.getLogger(),r=null;try{if(!t)throw new Error("La chaine WKT n'est pas renseignée !");e||(e=function(t){console.log(t)}),o||(o=function(t){console.log(t)});var s,a;if(s=/(-?\d+\.?[0-9]*)\s(-?\d+\.?[0-9]+)/g,a="[$1,$2]",t=t.replace(s,a),s=/^(\w+)/,s.exec(t),"POLYGON"===RegExp.$1?(a='{"type" : "Polygon",',t=t.replace(RegExp.$1,a),s=/(\({2}?)/,a='"coordinates" : [[',t=t.replace(s,a),s=/(\){2}?)/,a="]]}",t=t.replace(s,a),s=/(\()/g,a="[",t=t.replace(s,a),s=/(\))/g,a="]",t=t.replace(s,a)):"LINESTRING"===RegExp.$1&&(a='{"type" : "LineString",',t=t.replace(RegExp.$1,a),s=/(\(\(?)/,a='"coordinates" : [',t=t.replace(s,a),s=/(\)\)?)/,a="]}",t=t.replace(s,a)),n.trace(t),!(r=JSON.parse(t)))throw new Error("Le JSON est vide !");if(!r.type)throw new Error("Le type de geometrie n'est pas connu !");if(!r.coordinates)throw new Error("La liste des points est vide !");e.call(this,r)}catch(t){if("SyntaxError"===t.name)return void o.call(this,"Erreur de parsing JSON !");o.call(this,t)}}};e.a=n},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger(),this.logger.trace("[Constructeur XLS()]"),!(this instanceof i))throw new TypeError("XLS constructor cannot be called as a function.");this.options={srsName:"EPSG:4326",maximumResponses:25};for(var e in t)t.hasOwnProperty(e)&&t[e]&&(this.options[e]=t[e])}var n=o(0),r=o(65),s=o(66),a=o(12);i.VERSION="1.2",i.prototype={requestString:null,namespace:!1,oService:null,constructor:i,template:'<?xml version="1.0" encoding="UTF-8"?>\n<XLS version="__VERSION__"\n__NAMESPACE__ \n__SCHEMALOCATION__>\n__REQUESTHEADER__\n__REQUEST__\n</XLS>\n',namespaceByDefault:function(){return['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns:xls="http://www.opengis.net/xls"','xmlns:gml="http://www.opengis.net/gml"'].join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd"'},setService:function(t){if(!t)return void this.logger.trace("L'objet de type Service XSL n'est pas encore defini !?");t instanceof a.a?this.oService=t:this.logger.error("L'objet n'est pas du type 'LocationUtilityService' ou 'RouteService' !?")},getService:function(){return this.oService}},i.prototype.addNamespace=function(t,e){for(var o=t.key,i=!1,n=this.namespaceByDefault().split(" "),r=0;r<n.length;r++){if(n[r].split("=")[0]==="xmlns:"+o){i=!0;break}}if(!i)return this.logger.warn("L'ajout d'un nouvel namespace n'est pas encore implémenté !"),e;var s,a;return s=/<(\w+[\s>])/g,a="<"+o+":$1",e=e.replace(s,a),s=/<\/(\w+[\s>])/g,a="</"+o+":$1",e=e.replace(s,a),this.logger.trace("namespace",e),e},i.prototype.build=function(){var t=!!this.getService(),e="";e=this.template,e=e.replace(/__VERSION__/g,i.VERSION),e=e.replace(/__NAMESPACE__/g,this.namespaceByDefault),e=e.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault);var o=new r.a({srsName:this.options.srsName});e=e.replace(/__REQUESTHEADER__/g,o.toString());var n=new s.a({maximumResponses:this.options.maximumResponses,version:i.VERSION,methodName:t?this.getService().CLASSTYPE:null});return e=e.replace(/__REQUEST__/g,n.toString()),t&&(e=e.replace(/<!-- __REQUESTSERVICE__ -->/g,this.getService().toString())),e?(this.namespace&&(e=this.addNamespace({key:"xls",url:"http://www.opengis.net/xls"},e)),this.requestString=e,this.logger.trace("traduction tmpl",e),this.requestString):void this.logger.warn("traduction tmpl : empty request !?")},e.a=i},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger(),this.logger.trace("[Constructeur AbstractService ()]"),!(this instanceof i))throw new TypeError("AbstractService constructor cannot be called as a function.");this.options=t||{};for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e])}var n=o(0);i.prototype={strRequest:null,oRequest:null,oFilter:null,constructor:i,addRequest:function(t){this.logger.error("overwritten method !")},addFilter:function(t){this.logger.error("overwritten method !")},toString:function(){this.logger.error("overwritten method !")}},e.a=i},function(t,e,o){"use strict";function i(){if(this.logger=n.a.getLogger("GeocodeFilterExtension"),this.logger.trace("[Constructeur GeocodeFilterExtension ()]"),!(this instanceof i))throw new TypeError("GeocodeFilterExtension constructor cannot be called as a function.");this.filters=[]}var n=o(0);i.prototype={constructor:i,addFilterExtensions:function(t){t&&this.filters.push(t)},getNames:function(){var t=[];for(var e in this.filters)t.push(this.filters[e].CLASSNAME);return this.logger.trace(t),t},getFilter:function(t){var e=null;for(var o in this.filters)this.filters[o].CLASSNAME===t&&(e=this.filters[o]);return this.logger.trace(e),e},getFilters:function(){return this.logger.trace(this.filters),this.filters},getAttributs:function(t){var e=[];for(var o in this.filters)this.filters[o].CLASSNAME===t&&(e=this.filters[o].attributesList);return this.logger.trace(e),e},setPlaceAttributs:function(t,e){var o=this.getFilter(t),i=this.getAttributs(t);for(var n in i){var r=i[n];e[r]&&(o.placeAttributes[r]=e[r])}},getPlaceAttributs:function(t){var e={};for(var o in this.filters)this.filters[o].CLASSNAME===t&&(e=this.filters[o].placeAttributes);return this.logger.trace(e),e}},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position={x:null,y:null},this.matchType=null,this.placeAttributes={},this.type=null}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";var i=o(0),n=o(4),r=o(49),s=o.n(r),a={call:function(t){var e=i.a.getLogger("XHR");if(e.trace("[XHR::call()]"),s.a.polyfill(),!t.url)throw new Error("missing parameter : url is not defined !");if(!t.method)throw new Error("missing parameter : method is not defined !");t.format||(t.format="text");var o={};switch(o.url=t.url,o.data=t.data?t.data:null,o.method=t.method,o.timeOut=t.timeOut||0,o.scope=t.scope||this,o.proxy=t.proxy||null,o.content=t.content||null,o.headers=t.headers||{referer:"http://localhost"},t.method){case"DELETE":case"GET":break;case"PUT":case"POST":o.content=t.content?t.content:"application/x-www-form-urlencoded",o.headers=t.headers?t.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(t.format){case"text":this.__call(o).then(function(o){e.trace(o),t.onResponse.call(this,o)}).catch(function(e){t.onFailure.call(this,e)});break;case"json":this.__callJSON(o).then(function(o){e.trace(o),t.onResponse.call(this,o)}).catch(function(e){t.onFailure.call(this,e)});break;case"xml":this.__callXML(o).then(function(o){e.trace(o),t.onResponse.call(this,o)}).catch(function(e){t.onFailure.call(this,e)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(t){var e=i.a.getLogger("XHR");return e.trace("[XHR::__call()]"),new Promise(function(i,r){var s="POST"===t.method||"PUT"===t.method?1:0;t.data&&("object"==typeof t.data&&Object.keys(t.data).length||"string"==typeof t.data&&t.data.length)&&!s&&(t.url=n.a.normalyzeUrl(t.url,t.data)),e.trace("URL = ",t.url);var a=null;if("undefined"==typeof window){var l=o(52);t.data&&"string"==typeof t.data&&s&&(t.body=t.data),t.rejectUnauthorized=!1,l(t,function(t,e,o){!t&&200===e.statusCode&&o?i(o):r("Errors Occured on Http Request (nodejs) : "+t)})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),a=new XMLHttpRequest,a.open(t.method,t.url,!0),a.overrideMimeType=t.content;var p=null;t.timeOut>0&&(e.trace("XHR - TimeOut actif !"),p=window.setTimeout(function(){r({message:"TimeOut Occured on Http Request with XMLHttpRequest !",status:-1})},t.timeOut)),s&&(e.trace("data = ",t.data),a.setRequestHeader("Content-type",t.content)),a.onerror=function(t){console.log(t),r(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},a.ontimeout=function(){r(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},a.onreadystatechange=function(){if(4===a.readyState)if(200===a.status)window.clearTimeout(p),i(a.response);else{var t="Errors Occured on Http Request (status : '"+a.status+"' | response : '"+a.response+"')",e=a.status;r({message:t,status:e})}};var c=t.data&&s?t.data:null;a.send(c)}else{if(!window.XDomainRequest)throw new Error("CORS not supported");e.trace("XDomainRequest"),a=new XDomainRequest,a.open(t.method,t.url),a.overrideMimeType=t.content,t.timeOut>0&&(a.timeout=t.timeout,e.trace("XHR - TimeOut actif !")),s&&a.setRequestHeader("Content-type",t.content),a.onerror=function(){r(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},a.ontimeout=function(){r(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},a.onload=function(){if(200===a.status)i(a.responseText);else{var t="Errors Occured on Http Request (status : '"+a.status+"' | response : '"+a.responseText+"')",e=a.status;r({message:t,status:e})}};var u=t.data&&s?t.data:null;a.send(u)}})},__callJSON:function(t){return this.__call(t).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",t.url,e)})},__callXML:function(t){return this.__call(t).then(function(t){var e;if("undefined"==typeof window){e=(new(0,o(20).DOMParser)).parseFromString(t,"text/xml")}else if(window.DOMParser){var i=new window.DOMParser;e=i.parseFromString(t,"text/xml")}else e=new window.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(t);return e}).catch(function(e){console.log("__callXML failed on : ",t.url,e)})}};e.a=a},function(e,o){return e.exports=t,o},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",r.a.apply(this,arguments),this.logger=n.a.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}var n=o(0),r=o(22);i.prototype=Object.create(r.a.prototype,{zonly:{get:function(){return this._zonly},set:function(t){this._zonly=t}}}),i.prototype.constructor=i,i.prototype.getData=function(){var t=[];return t.push({k:"lon",v:this.getLon()}),t.push({k:"lat",v:this.getLat()}),t.push({k:"indent",v:this.indent}),t.push({k:"crs",v:this.crs}),t.push({k:"zonly",v:this.zonly}),t.push({k:"format",v:this.format}),t},e.a=i},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=n.a.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=t||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json"}var n=o(0);i.CLASSNAME="AltiRequest",i.prototype={constructor:i,setPositions:function(t){for(var e=[],o=0;o<t.length;o++){var i=t[o];i.lon&&i.lat&&e.push(i)}this.positions=e},getPositions:function(t){if(!t)return this.positions;var e=this.positions.length-1;return t>e||t<e?(this.logger.warn("index out of range !"),this.positions):this.positions[t]},addPositions:function(t){for(var e=0;e<t.length;e++){var o=t[e]
;o.lon&&o.lat&&this.positions.push(t[e])}},getLon:function(){for(var t=[],e=0;e<this.positions.length;e++)t.push(this.positions[e].lon);return this.logger.trace(t),t.join(this.delimiter)},getLat:function(){for(var t=[],e=0;e<this.positions.length;e++)t.push(this.positions[e].lat);return this.logger.trace(t),t.join(this.delimiter)}},i.prototype.getData=function(){var t=[];return t.push({k:"lon",v:this.getLon()}),t.push({k:"lat",v:this.getLat()}),t.push({k:"delimiter",v:this.delimiter}),t.push({k:"indent",v:this.indent}),t.push({k:"crs",v:this.crs}),t.push({k:"format",v:this.format}),t},e.a=i},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",r.a.apply(this,arguments),this.logger=n.a.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}var n=o(0),r=o(22);i.prototype=Object.create(r.a.prototype,{sampling:{get:function(){return this._sampling},set:function(t){this._sampling=t}}}),i.prototype.constructor=i,i.prototype.getData=function(){var t=[];return t.push({k:"lon",v:this.getLon()}),t.push({k:"lat",v:this.getLat()}),t.push({k:"indent",v:this.indent}),t.push({k:"crs",v:this.crs}),t.push({k:"sampling",v:this.sampling}),t.push({k:"format",v:this.format}),t},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("AutoConfResponse constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.territories={},this.tileMatrixSets={},this.services={}}i.prototype={constructor:i,isConfLoaded:function(t){if(t)return!!this.generalOptions.apiKeys[t]},getLayersId:function(t){return this.generalOptions.apiKeys[t]},getLayersConf:function(t){var e={},o=this.getLayersId(t);if(o)for(var i=0;i<o.length;i++){var n=o[i];e[n]=this.layers[n]}return e},getLayerConf:function(t){if(this.layers)return this.layers[t]},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(t){if(this.tileMatrixSets)return this.tileMatrixSets[t]},getTerritories:function(){return this.territories},getTerritoryConf:function(t){if(this.territories)return this.territories[t]},getServices:function(){return this.services},getServiceConf:function(t){if(this.services)return this.services[t]}},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("Constraint constructor cannot be called as a function.");this.crs=null,this.bbox={left:null,right:null,top:null,bottom:null},this.minScaleDenominator=null,this.maxScaleDenominator=null,this.temporalExtent=[null,null]}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("Format constructor cannot be called as a function.");this.current=null,this.name=null}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("Layer constructor cannot be called as a function.")}i.prototype={constructor:i,getName:function(){return this.name},getTitle:function(){return this.title},getDescription:function(){return this.description},getLayerId:function(){return this.layerId},getQuicklookUrl:function(){return this.quicklookUrl},getDefaultProjection:function(){return this.defaultProjection},getProjections:function(){var t=[];return t.push(this.defaultProjection),t.concat(this.additionalProjections)},getBBOX:function(){if(this.globalConstraint)return this.globalConstraint.bbox},getMinScaleDenominator:function(){if(this.globalConstraint)return this.globalConstraint.minScaleDenominator},getMaxScaleDenominator:function(){if(this.globalConstraint)return this.globalConstraint.maxScaleDenominator},getTMSID:function(){if(this.wmtsOptions)return this.wmtsOptions.tileMatrixSetLink},getServiceParams:function(){return this.serviceParams},getServerUrl:function(t){if(t&&this.serviceParams&&this.serviceParams.serverUrl)return this.serviceParams.serverUrl[t]},getLegends:function(){return this.legends},getMetadata:function(){return this.metadata},getStyles:function(){return this.styles},getDefaultStyle:function(){if(this.styles){for(var t,e=this.styles,o=0;o<e.length;o++)if(!0===e[o].current){t=e[o].name;break}return t}},getThematics:function(){return this.thematics},getDefaultFormat:function(){if(this.formats){for(var t,e=this.formats,o=0;o<e.length;o++)if(!0===e[o].current){t=e[o].name;break}return t}},getConstraints:function(){return this.constraints},getOriginators:function(){return this.originators},getDimensions:function(){return this.dimensions},getAggregatedLayers:function(){if(this.isAggregate)return this.aggregatedLayers}},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("Legend constructor cannot be called as a function.");this.format=null,this.url=null,this.minScaleDenominator=null}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("Metadata constructor cannot be called as a function.");this.format=null,this.url=null}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("Originator constructor cannot be called as a function.");this.name=null,this.attribution=null,this.logo=null,this.url=null,this.constraints=[]}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("Service constructor cannot be called as a function.");this.title=null,this.serverUrl=null,this.version=null}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("Style constructor cannot be called as a function.");this.name=null,this.title=null,this.current=null}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("Territory constructor cannot be called as a function.");this.isDefault=null,this.defaultCRS=null,this.additionalCRS=[],this.geoBBOX={left:null,right:null,top:null,bottom:null},this.geoCenter={lon:null,lat:null},this.defaultOptions={resolution:null,minScaleDenominator:null,maxScaleDenominator:null},this.defaultLayers=[]}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("Thematic constructor cannot be called as a function.");this.inspire=null,this.name=null}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("TileMatrixSet constructor cannot be called as a function.");this.projection=null,this.nativeResolutions=[],this.matrixIds=[],this.tileMatrices={}}i.prototype={constructor:i,getResolutions:function(){return this.nativeResolutions},getMatrixIds:function(){return this.matrixIds},getProjection:function(){return this.projection},getTileMatrices:function(){return this.tileMatrices},getTopLeftCorner:function(){var t,e=this.getTileMatrices();if(e)for(var o in e)if(e.hasOwnProperty(o)){t=e[o].topLeftCorner;break}return t}},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("TileMatrix constructor cannot be called as a function.");this.matrixId=null,this.matrixHeight=null,this.matrixWidth=null,this.scaleDenominator=null,this.tileHeight=null,this.tileWidth=null,this.topLeftCorner=null}i.prototype={constructor:i,getTopLeftCorner:function(){return this.topLeftCorner},getScaleDenominator:function(){return this.scaleDenominator},getTileHeight:function(){return this.tileHeight},getTileWidth:function(){return this.tileWidth},getMatrixHeight:function(){return this.matrixHeight},getMatrixWidth:function(){return this.matrixWidth}},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("TileMatrixLimit constructor cannot be called as a function.");this.minTileRow=null,this.maxTileRow=null,this.minTileCol=null,this.maxTileCol=null}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger(),this.logger.trace("[Constructeur LocationUtilityService ()]"),!(this instanceof i))throw new TypeError("LocationUtilityService constructor cannot be called as a function.");this.CLASSNAME="LocationUtilityService",this.CLASSTYPE=null,r.a.apply(this,arguments),this.options&&(this.CLASSTYPE=this.options.location?"GeocodeRequest":this.options.position?"ReverseGeocodeRequest":null)}var n=o(0),r=o(12),s=o(67),a=o(69),l=o(13);i.prototype=Object.create(r.a.prototype,{}),i.prototype.constructor=i,i.prototype.addRequest=function(t){switch(this.CLASSTYPE=t.CLASSNAME,this.CLASSTYPE){case"GeocodeRequest":case"ReverseGeocodeRequest":this.oRequest=t;break;default:throw new Error("Ce n'est pas un objet de type 'LUS Request' !?")}},i.prototype.addFilter=function(t){t instanceof l.a&&(this.oFilter=t)},i.prototype.toString=function(){if(!this.oRequest){if(!this.options)throw new Error("Les options ne sont pas renseignées, impossible de construire la requête !");if("GeocodeRequest"===this.CLASSTYPE){var t={location:this.options.location,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions||{}};this.oRequest=new s.a(t),this.oFilter&&this.oRequest.addFilter(this.oFilter)}else if("ReverseGeocodeRequest"===this.CLASSTYPE){var e={position:this.options.position,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions||{}};this.oRequest=new a.a(e)}else this.logger.error("impossible de determiner le type de geocodage : Direct ou Inverse !?")}if(!this.oRequest)throw new Error("Type de Geocodage indefini !");return this.strRequest=this.oRequest.toString(),this.strRequest},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("DirectGeocodedLocation constructor cannot be called as a function.");n.a.apply(this,arguments),this.CLASSNAME="DirectGeocodedLocation",this.accuracy=null}var n=o(15);i.prototype=Object.create(n.a.prototype),i.prototype.constructor=i,e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("ReverseGeocodedLocation constructor cannot be called as a function.");n.a.apply(this,arguments),this.CLASSNAME="ReverseGeocodedLocation",this.searchCenterDistance=null}var n=o(15);i.prototype=Object.create(n.a.prototype),i.prototype.constructor=i,e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}i.prototype={constructor:i},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}i.prototype={constructor:i},e.a=i},function(t,e,o){return t.exports=o(44),e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(45),n=o(5),r=o(9),s=o(10),a=o(41),l=o(42),p=o(24),c=o(25),u=o(26),h=o(27),d=o(28),f=o(29),y=o(30),g=o(31),m=o(32),v=o(33),_=o(34),b=o(36),E=o(37),S=o(35),w=o(14),P=o(15),C=o(39),A=o(40),M=o(18),x=o(16),R=o(17),I=o(19),T=o(2),L=o(4),G={servicesVersion:"2.0.0",servicesDate:"2018-04-05",extend:function(t,e){var o,i=t.split("."),n=this;o=i.length;for(var r=0;r<o;r++){void 0===n[i[r]]&&(n[i[r]]={});r===o-1&&(n[i[r]]=e),n=n[i[r]]}return this}};G.extend("Protocols",{}),G.extend("Protocols.XHR",I.a),G.extend("Services",i.a),G.extend("Services.AltiResponse",r.a),G.extend("Services.Alti.Elevation",s.a),G.extend("Services.AutoCompleteResponse",a.a),G.extend("Services.AutoComplete.SuggestedLocation",l.a),G.extend("Services.GetConfigResponse",p.a),G.extend("Services.Config.Constraint",c.a),G.extend("Services.Config.Format",u.a),G.extend("Services.Config.Layer",h.a),G.extend("Services.Config.Legend",d.a),G.extend("Services.Config.Metadata",f.a),G.extend("Services.Config.Originator",y.a),G.extend("Services.Config.Service",g.a),G.extend("Services.Config.Style",m.a),G.extend("Services.Config.Territory",v.a),G.extend("Services.Config.Thematic",_.a),G.extend("Services.Config.TileMatrix",b.a),G.extend("Services.Config.TileMatrixLimit",E.a),G.extend("Services.Config.TileMatrixSet",S.a),G.extend("Services.GeocodeResponse",w.a),G.extend("Services.Geocode.GeocodedLocation",P.a),G.extend("Services.Geocode.DirectGeocodedLocation",C.a),G.extend("Services.Geocode.ReverseGeocodedLocation",A.a),G.extend("Services.IsoCurveResponse",M.a),G.extend("Services.RouteResponse",x.a),G.extend("Services.Route.RouteInstruction",R.a),G.extend("Error",T.a),G.extend("Helper",L.a),G.extend("Services.DefaultUrl",n.a),e.default=G},function(t,e,o){"use strict";var i=o(46),n=o(60),r=o(63),s=o(78),a=o(82),l=o(84),p=o(96),c={getConfig:function(t){new n.a(t).call()},getAltitude:function(t){new i.a(t).call()},geocode:function(t){new r.a(t).call()},reverseGeocode:function(t){new s.a(t).call()},autoComplete:function(t){new a.a(t).call()},route:function(t){new l.a(t).call()},isoCurve:function(t){new p.a(t).call()}};e.a=c},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError(r.a.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",a.a.apply(this,arguments),this.logger=n.a.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!t.positions)throw new Error(r.a.getMessage("PARAM_MISSING","positions"));if(0===t.positions.length)throw new Error(r.a.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=t.positions,this.options.outputFormat="string"==typeof t.outputFormat?t.outputFormat.toLowerCase():"xml",this.options.sampling=t.sampling||null,this.options.api="string"==typeof t.api?t.api.toUpperCase():"REST","REST"===this.options.api&&(this.options.httpMethod="GET"),this.options.zonly=t.zonly||!1,!this.options.serverUrl){var e=l.a.Alti.url(this.options.apiKey),o=null;switch(this.options.api){case"WPS":o=e.wps;break;case"REST":o=e[(t.sampling?"profil":"elevation")+"-"+this.options.outputFormat];break;default:throw new Error(r.a.getMessage("PARAM_UNKNOWN","api"))}if(!o)throw new Error("Url by default not found !");this.options.serverUrl=o,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var s=this.options.serverUrl.lastIndexOf(".");if(-1!==s){var p=this.options.serverUrl.substring(s+1);if(p&&p.length<5)switch(this.logger.trace("Server Extension URL : "+p),p.toLowerCase()){case"json":case"xml":this.options.outputFormat=p.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}var n=o(0),r=o(1),s=o(2),a=o(3),l=o(5),p=o(54),c=o(58);i.prototype=Object.create(a.a.prototype,{}),i.prototype.constructor=i,i.prototype.buildRequest=function(t,e){var o={httpMethod:this.options.httpMethod,onSuccess:function(t){this.request=t,e.call(this,this.request)},onError:t,scope:this,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly};p.a.build(o)},i.prototype.analyzeResponse=function(t,e){if(this.response){var o={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:t,onSuccess:e,scope:this};c.a.build(o)}else t.call(this,new s.a(r.a.getMessage("SERVICE_RESPONSE_EMPTY")))},e.a=i},function(t,e,o){var i,n;return function(r,s){"use strict";i=s,void 0!==(n="function"==typeof i?i.call(e,o,e,t):i)&&(t.exports=n)}(0,function(){"use strict";function t(t,e){var o=t[e];if("function"==typeof o.bind)return o.bind(t);try{return Function.prototype.bind.call(o,t)}catch(e){return function(){return Function.prototype.apply.apply(o,[t,arguments])}}}function e(e){return"debug"===e&&(e="log"),typeof console!==a&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):s)}function o(t,e){for(var o=0;o<l.length;o++){var i=l[o];this[i]=o<t?s:this.methodFactory(i,t,e)}this.log=this.debug}function i(t,e,i){return function(){typeof console!==a&&(o.call(this,e,i),this[t].apply(this,arguments))}}function n(t,o,n){return e(t)||i.apply(this,arguments)}function r(t,e,i){function r(t){var e=(l[t]||"silent").toUpperCase();if(typeof window!==a){try{return void(window.localStorage[u]=e)}catch(t){}try{window.document.cookie=encodeURIComponent(u)+"="+e+";"}catch(t){}}}function s(){var t;if(typeof window!==a){try{t=window.localStorage[u]}catch(t){}if(typeof t===a)try{var e=window.document.cookie,o=e.indexOf(encodeURIComponent(u)+"=");-1!==o&&(t=/^([^;]+)/.exec(e.slice(o))[1])}catch(t){}return void 0===c.levels[t]&&(t=void 0),t}}var p,c=this,u="loglevel";t&&(u+=":"+t),c.name=t,c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=i||n,c.getLevel=function(){return p},c.setLevel=function(e,i){if("string"==typeof e&&void 0!==c.levels[e.toUpperCase()]&&(e=c.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=c.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(p=e,!1!==i&&r(e),o.call(c,e,t),typeof console===a&&e<c.levels.SILENT)return"No console available for logging"},c.setDefaultLevel=function(t){s()||c.setLevel(t,!1)},c.enableAll=function(t){c.setLevel(c.levels.TRACE,t)},c.disableAll=function(t){c.setLevel(c.levels.SILENT,t)};var h=s();null==h&&(h=null==e?"WARN":e),c.setLevel(h,!1)}var s=function(){},a="undefined",l=["trace","debug","info","warn","error"],p=new r,c={};p.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=c[t];return e||(e=c[t]=new r(t,p.getLevel(),p.methodFactory)),e};var u=typeof window!==a?window.log:void 0;return p.noConflict=function(){return typeof window!==a&&window.log===p&&(window.log=u),p},p.getLoggers=function(){return c},p}),e},function(t,e,o){"use strict";var i=o(4),n=o(19),r=o(53),s={send:function(t){var e=t||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if("undefined"==typeof window&&"JSONP"===t.protocol)return void console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");if("XHR"===t.protocol||"json"===t.format?e.wrap=!1:"JSONP"===t.protocol&&"xml"===t.format&&(e.wrap=!0),e.callback=(t.protocol,null),e.output=e.wrap?"json":null,e.wrap){var o={};o.output=e.output,o.callback=e.callback,delete o.callback,e.url=i.a.normalyzeUrl(t.url,o)}switch(e.protocol){case"XHR":"GET"===t.method&&t.nocache&&(e.url=i.a.normalyzeUrl(e.url,{t:(new Date).getTime()})),n.a.call(e);break;case"JSONP":e.data&&(e.url=i.a.normalyzeUrl(e.url,e.data)),r.a.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};e.a=s},function(t,e,o){return function(e,o){!function(e,o){t.exports=o()}(0,function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function i(t){return"function"==typeof t}function n(t){B=t}function r(t){V=t}function s(){return void 0!==U?function(){U(l)}:a()}function a(){var t=setTimeout;return function(){return t(l,1)}}function l(){for(var t=0;t<F;t+=2){(0,Z[t])(Z[t+1]),Z[t]=void 0,Z[t+1]=void 0}F=0}function p(t,e){var o=this,i=new this.constructor(u);void 0===i[X]&&R(i);var n=o._state;if(n){var r=arguments[n-1];V(function(){return A(n,i,r,o._result)})}else w(o,i,t,e);return i}function c(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var o=new e(u);return _(o,t),o}function u(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function d(){return new TypeError("A promises callback cannot return that same promise.")}function f(t){try{return t.then}catch(t){return tt.error=t,tt}}function y(t,e,o,i){try{t.call(e,o,i)}catch(t){return t}}function g(t,e,o){V(function(t){var i=!1,n=y(o,e,function(o){i||(i=!0,e!==o?_(t,o):E(t,o))},function(e){i||(i=!0,S(t,e))},"Settle: "+(t._label||" unknown promise"));!i&&n&&(i=!0,S(t,n))},t)}function m(t,e){e._state===Q?E(t,e._result):e._state===$?S(t,e._result):w(e,void 0,function(e){return _(t,e)},function(e){return S(t,e)})}function v(t,e,o){e.constructor===t.constructor&&o===p&&e.constructor.resolve===c?m(t,e):o===tt?(S(t,tt.error),tt.error=null):void 0===o?E(t,e):i(o)?g(t,e,o):E(t,e)}function _(e,o){e===o?S(e,h()):t(o)?v(e,o,f(o)):E(e,o)}function b(t){t._onerror&&t._onerror(t._result),P(t)}function E(t,e){t._state===J&&(t._result=e,t._state=Q,0!==t._subscribers.length&&V(P,t))}function S(t,e){t._state===J&&(t._state=$,t._result=e,V(b,t))}function w(t,e,o,i){var n=t._subscribers,r=n.length;t._onerror=null,n[r]=e,n[r+Q]=o,n[r+$]=i,0===r&&t._state&&V(P,t)}function P(t){var e=t._subscribers,o=t._state;if(0!==e.length){for(var i=void 0,n=void 0,r=t._result,s=0;s<e.length;s+=3)i=e[s],n=e[s+o],i?A(o,i,n,r):n(r);t._subscribers.length=0}}function C(t,e){try{return t(e)}catch(t){return tt.error=t,tt}}function A(t,e,o,n){var r=i(o),s=void 0,a=void 0,l=void 0,p=void 0;if(r){if(s=C(o,n),s===tt?(p=!0,a=s.error,s.error=null):l=!0,e===s)return void S(e,d())}else s=n,l=!0;e._state!==J||(r&&l?_(e,s):p?S(e,a):t===Q?E(e,s):t===$&&S(e,s))}function M(t,e){try{e(function(e){_(t,e)},function(e){S(t,e)})}catch(e){S(t,e)}}function x(){return et++}function R(t){t[X]=et++,t._state=void 0,t._result=void 0,t._subscribers=[]}function I(){return new Error("Array Methods must be provided an Array")}function T(t){return new ot(this,t).promise}function L(t){var e=this;return new e(j(t)?function(o,i){for(var n=t.length,r=0;r<n;r++)e.resolve(t[r]).then(o,i)}:function(t,e){return e(new TypeError("You must pass an array to race."))})}function G(t){var e=this,o=new e(u);return S(o,t),o}function O(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function N(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function k(){var t=void 0;if(void 0!==o)t=o;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var i=null;try{i=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===i&&!e.cast)return}t.Promise=it}var D=void 0;D=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)};var j=D,F=0,U=void 0,B=void 0,V=function(t,e){Z[F]=t,Z[F+1]=e,2===(F+=2)&&(B?B(l):K())},W="undefined"!=typeof window?window:void 0,z=W||{},q=z.MutationObserver||z.WebKitMutationObserver,H="undefined"==typeof self&&void 0!==e&&"[object process]"==={}.toString.call(e),Y="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3),K=void 0;K=H?function(){return function(){return e.nextTick(l)}}():q?function(){var t=0,e=new q(l),o=document.createTextNode("");return e.observe(o,{characterData:!0}),function(){o.data=t=++t%2}}():Y?function(){var t=new MessageChannel;return t.port1.onmessage=l,function(){return t.port2.postMessage(0)}}():void 0===W?function(){try{var t=Function("return this")().require("vertx");return U=t.runOnLoop||t.runOnContext,s()}catch(t){return a()}}():a();var X=Math.random().toString(36).substring(2),J=void 0,Q=1,$=2,tt={error:null},et=0,ot=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(u),this.promise[X]||R(this.promise),j(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&E(this.promise,this._result))):S(this.promise,I())}return t.prototype._enumerate=function(t){for(var e=0;this._state===J&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var o=this._instanceConstructor,i=o.resolve;if(i===c){var n=f(t);if(n===p&&t._state!==J)this._settledAt(t._state,e,t._result);else if("function"!=typeof n)this._remaining--,this._result[e]=t;else if(o===it){var r=new o(u);v(r,t,n),this._willSettleAt(r,e)}else this._willSettleAt(new o(function(e){return e(t)}),e)}else this._willSettleAt(i(t),e)},t.prototype._settledAt=function(t,e,o){var i=this.promise;i._state===J&&(this._remaining--,t===$?S(i,o):this._result[e]=o),0===this._remaining&&E(i,this._result)},t.prototype._willSettleAt=function(t,e){var o=this;w(t,void 0,function(t){return o._settledAt(Q,e,t)},function(t){return o._settledAt($,e,t)})},t}(),it=function(){function t(e){this[X]=x(),this._result=this._state=void 0,this._subscribers=[],u!==e&&("function"!=typeof e&&O(),this instanceof t?M(this,e):N())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var e=this,o=e.constructor;return e.then(function(e){return o.resolve(t()).then(function(){return e})},function(e){return o.resolve(t()).then(function(){throw e})})},t}();return it.prototype.then=p,it.all=T,it.race=L,it.resolve=c,it.reject=G,it._setScheduler=n,it._setAsap=r,it._asap=V,it.polyfill=k,it.Promise=it,it})}.call(e,o(50),o(51)),e},function(t,e){function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function n(t){if(c===setTimeout)return setTimeout(t,0);if((c===o||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function r(t){if(u===clearTimeout)return clearTimeout(t);if((u===i||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(t);try{return u(t)}catch(e){try{return u.call(null,t)}catch(e){return u.call(this,t)}}}function s(){y&&d&&(y=!1,d.length?f=d.concat(f):g=-1,f.length&&a())}function a(){if(!y){var t=n(s);y=!0;for(var e=f.length;e;){for(d=f,f=[];++g<e;)d&&d[g].run();g=-1,e=f.length}d=null,y=!1,r(t)}}function l(t,e){this.fun=t,this.array=e}function p(){}var c,u,h=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:o}catch(t){c=o}try{u="function"==typeof clearTimeout?clearTimeout:i}catch(t){u=i}}();var d,f=[],y=!1,g=-1;return h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var o=1;o<arguments.length;o++)e[o-1]=arguments[o];f.push(new l(t,e)),1!==f.length||y||n(a)},l.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=p,h.addListener=p,h.once=p,h.off=p,h.removeListener=p,h.removeAllListeners=p,h.emit=p,h.prependListener=p,h.prependOnceListener=p,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0},e},function(t,e){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(o=window)}return t.exports=o,e},function(t,o){return t.exports=e,o},function(t,e,o){"use strict";var i=o(0),n={uuid:function(){var t=Math.floor(Date.now());return function(){return t++}}(),call:function(t){var e=i.a.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!t)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!t.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(t.timeOut||(e.info("setting 'options.timeOut' default value"),t.timeOut=0),!t.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var o="string"==typeof t.callbackSuffix?t.callbackSuffix:this.uuid(),n=!1,r=!1,s=t.url.indexOf("callback=");if(-1!==s){n=!0;var a=t.url.indexOf("&",s);-1===a&&(a=t.url.length);var l=t.url.substring(s+9,a);l&&(r=!0,t.callbackName=l,e.info("setting 'options.callbackName' value ("+t.callbackName+") from 'options.url' parameter"))}if(!n){var p=t.url.indexOf("?");-1===p?t.url=t.url+"?callback=":p===t.url.length?t.url=t.url+"callback=":t.url=t.url+"&callback=",e.info("setting callback default key in 'options.url' : "+t.url)}var c=!!t.callbackName||r;if(r||(t.callbackName||(e.info("setting 'options.callbackName' default value"),t.callbackName="callback",(o||""===o)&&(t.callbackName+=o)),t.url=t.url.replace("callback=","callback="+t.callbackName),e.info("setting callback function name in 'options.url' : "+t.url)),t.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),t.onTimeOut=function(){console.log("TimeOut while invoking url : "+t.url)}),!c){var u=this,h=null;t.timeOut>0&&(h=window.setTimeout(function(){window[t.callbackName]=function(){},t.onTimeOut(),u._deleteScript(o)},t.timeOut)),window[t.callbackName]=function(e){window.clearTimeout(h),t.onResponse(e),u._deleteScript(o)}}this._createScript(o,t.url)},_createScript:function(t,e){var o,i=document.getElementById("results"+t);o=document.createElement("script"),o.setAttribute("type","text/javascript"),o.setAttribute("src",e),o.setAttribute("charset","UTF-8"),o.setAttribute("id","results"+t),o.setAttribute("async","true");var n=document.documentElement||document.getElementsByTagName("head")[0];null===i?n.appendChild(o):n.replaceChild(o,i)},_deleteScript:function(t){var e=document.getElementById("results"+t);if(e){var o=e.parentNode||document.documentElement;if(!o)return;o.removeChild(e)}}};e.a=n},function(t,e,o){"use strict";var i=o(0),n=o(2),r=o(55),s=o(56),a={build:function(t){i.a.getLogger("AltiRequestFactory").trace(["AltiRequestFactory::build()"]);var e=null,o={type:t.sampling?"Profil":"Elevation",method:t.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null}};o.param.positions=t.positions,o.param.format=t.outputFormat,o.param.sampling=t.sampling,o.param.zonly=t.zonly;var a=!(null===t.onError||"function"!=typeof t.onError),l=!(null===t.onSuccess||"function"!=typeof t.onSuccess),p=null;switch(t.api){case"REST":var c=new r.a(o);if(!c.processRequestString()){if(p="Error in process request (rest) !",a)return void t.onError.call(t.scope,new n.a(p));throw new Error(p)}e=c.requestString;break;case"WPS":if(o.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},!(e=s.a.build(o))){if(p="Error in process request (wps) !",a)return void t.onError.call(t.scope,new n.a(p));throw new Error(p)}break;default:if(p="Type of API is not supported by service (REST or WPS) !",a)return void t.onError.call(t.scope,new n.a(p));throw new Error(p)}return l&&t.onSuccess.call(t.scope,e),e}};e.a=a},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof i))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=t||{},!this.options)throw new Error(r.a.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(r.a.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new s.a(this.options.param);break;case"Profil":this.DataObject=new a.a(this.options.param);break;default:throw new Error(r.a.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}var n=o(0),r=o(1),s=o(21),a=o(23);i.prototype={requestString:null,constructor:i,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:"lon=__LON__\nlat=__LAT__\nindent=__INDENT__\ncrs='__CRS__'\n",input:{point:"zonly=__ZONLY__",profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var t=""
;return"POST"===this.method?t=this.template.post.value:"GET"===this.method&&(t=this.template.get.value),t=t.replace(/__LON__/g,this.DataObject.getLon()),t=t.replace(/__LAT__/g,this.DataObject.getLat()),t=t.replace(/__INDENT__/g,this.DataObject.indent),t=t.replace(/__CRS__/g,this.DataObject.crs),t+=this.__addDataInputs(),this.logger.trace("traduction tmpl",t),this.requestString=t,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var t;if("POST"===this.method)t=this.template.post;else{if("GET"!==this.method)throw new Error("No other HTTP method supported by the service !");t=this.template.get}var e=null;if("AltiElevationRequest"===this.DataObject.CLASSNAME)return e=t.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly);if("AltiProfilRequest"===this.DataObject.CLASSNAME)return e=t.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}},e.a=i},function(t,e,o){"use strict";var i=o(0),n=o(1),r=o(57),s=o(21),a=o(23),l={build:function(t){if(i.a.getLogger("AltiRequestWPS").trace(["AltiRequestWPS::build()"]),!t)throw new Error(n.a.getMessage("PARAM_EMPTY","options"));if(!t.type)throw new Error(n.a.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var e=null;switch(t.type){case"Elevation":t.wps.identifier="gs:WPSElevation",e=new s.a(t.param);break;case"Profil":t.wps.identifier="gs:WPSLineElevation",e=new a.a(t.param);break;default:throw new Error(n.a.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var o={data:e,method:t.method,param:t.wps},l=new r.a(o);if(!l.processRequestString())throw new Error("Enable to process request !");return l.requestString}};e.a=l},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof i))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=t||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}var n=o(0);i.prototype={requestString:null,constructor:i,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=\x3c!-- __DATAINPUTS__ --\x3e",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs>\x3c!-- __DATAINPUTS__ --\x3e</wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){return['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'].join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var t="";if("POST"===this.method)t=this.template.post.value;else{if("GET"!==this.method)return this.logger.error("No other method supported by the service !"),!1;t=this.template.get.value}return t=t.replace(/__SERVICE__/g,this.paramservice),t=t.replace(/__VERSION__/g,this.paramversion),t=t.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),t=t.replace(/__IDENTIFIER__/g,this.paramidentifier),t=t.replace(/__REQUEST__/g,this.paramrequest),"POST"===this.method&&(t=t.replace(/__NAMESPACE__/g,this.namespaceByDefault),t=t.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),(t=t.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()))?(this.requestString=t,this.logger.trace("traduction tmpl",t),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var t="GET"===this.method?this.template.get.input:this.template.post.input,e="GET"===this.method?";":"",o="",i=this,n=this.DataObject.getData(),r=0;r<n.length;r++)!function(r){e&&(e=r===n.length-1?"":";"),o=o.concat(i.__addDataInput(t,n[r].k,n[r].v),e)}(r);return o},__addDataInput:function(t,e,o){var i=t;return i=i.replace(/__KEY__/g,e),i=i.replace(/__DATA__/g,o)},setMethod:function(t){"GET"===t||"POST"===t?this.method=t:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}},e.a=i},function(t,e,o){"use strict";var i=o(0),n=o(1),r=o(2),s=o(6),a=o(59),l=o(9),p=o(10),c={build:function(t){var e=i.a.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var o=null;if(!t.response)return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_EMPTY")));if(t.rawResponse)e.trace("analyze response : raw"),o=t.response;else{switch(t.outputFormat){case"xml":e.trace("analyze response : xml");try{var c=new s.a({reader:a.a});if("string"==typeof t.response?c.setXMLString(t.response):c.setXMLDoc(t.response),!(o=c.parse()))throw new Error(n.a.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(e){var u=e.message;return void t.onError.call(t.scope,new r.a({message:n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",u),status:200,type:r.a.TYPE_SRVERR}))}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof t.response);var h;if(h="string"==typeof t.response?JSON.parse(t.response):t.response,h.error)return void t.onError.call(t.scope,new r.a({message:n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",h.error.description),status:200,type:r.a.TYPE_SRVERR}));if(h){var d,f=h.elevations,y=new l.a;if(Array.isArray(f)&&f.length)for(var g=0;g<f.length;g++)d=new p.a,"object"==typeof f[g]?(f[g].lon&&(d.lon=f[g].lon),f[g].lat&&(d.lat=f[g].lat),f[g].z&&(d.z=f[g].z),f[g].acc&&(d.acc=f[g].acc)):"number"==typeof f[g]&&(d.z=f[g]),Array.isArray(y.elevations)&&y.elevations.push(d);o=y}if(!o)return void t.onError.call(t.scope,new r.a({message:n.a.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:r.a.TYPE_UNKERR,status:-1}));break;default:return void t.onError.call(t.scope,new r.a({message:n.a.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:r.a.TYPE_UNKERR,status:-1}))}if(o.exceptionReport)return void t.onError.call(t.scope,new r.a({message:n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",o.exceptionReport),type:r.a.TYPE_SRVERR,status:200}));if(o.error){var m=o.error.description;return void t.onError.call(t.scope,new r.a({message:n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",m),type:r.a.TYPE_SRVERR,status:200}))}}t.onSuccess.call(t.scope,o)}};e.a=c},function(t,e,o){"use strict";var i=o(9),n=o(10),r={};r.READERS={elevations:function(t){var e=new i.a;if(t.hasChildNodes())for(var o,n,s=t.childNodes,a=0;a<s.length;a++)o=s[a],r.READERS[o.nodeName]&&(n=r.READERS[o.nodeName](o),e.elevations.push(n));return e},elevation:function(t){var e=new n.a;if(t.hasChildNodes())for(var o,i=t.childNodes,s=0;s<i.length;s++)o=i[s],r.READERS[o.nodeName]&&r.READERS[o.nodeName](o,e);return e},lat:function(t,e){var o=t.firstChild;if(!o||3!==o.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : latitude attendue mais absente");e.lat=parseFloat(o.nodeValue)},lon:function(t,e){var o=t.firstChild;if(!o||3!==o.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : longitude attendue mais absente");e.lon=parseFloat(o.nodeValue)},z:function(t,e){var o=t.firstChild;if(!o||3!==o.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : altitude attendue mais absente");if(!e)return e=new n.a,e.z=parseFloat(o.nodeValue),e;e.z=parseFloat(o.nodeValue)},acc:function(t,e){var o=t.firstChild;if(!o||3!==o.nodeType)throw new Error("Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente");e.acc=parseFloat(o.nodeValue)},exceptionreport:function(t){var e={};if(t.hasChildNodes())for(var o,i=t.childNodes,n=0;n<i.length;n++)o=i[n],"Exception"===o.nodeName&&(e.exceptionReport=r.READERS.exception(o));return e},exception:function(t){var e={},o=t.getAttribute("exceptionCode");o&&(e.exceptionCode=o);var i=t.firstChild;return i&&3===i.nodeType&&(e.exception=i.nodeValue),e},error:function(t){var e={error:{}};if(t.hasChildNodes())for(var o,i=t.childNodes,n=0;n<i.length;n++){o=i[n];var r;1===o.nodeType&&"code"===o.nodeName&&(r=o.firstChild)&&3===r.nodeType&&(e.error.code=r.nodeValue),1===o.nodeType&&"description"===o.nodeName&&(r=o.firstChild)&&3===r.nodeType&&(e.error.description=r.nodeValue)}return e}},r.read=function(t){if("elevations"===t.nodeName){return r.READERS.elevations(t)}if("ExceptionReport"===t.nodeName){return r.READERS.exceptionreport(t)}if("error"===t.nodeName){return r.READERS.error(t)}throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")},e.a=r},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError(r.a.getMessage("CLASS_CONSTRUCTOR","AutoConf"));if(this.CLASSNAME="AutoConf",t||(t={}),t.protocol=t.protocol||"JSONP",p.a.apply(this,arguments),this.logger=n.a.getLogger("Gp.Services.AutoConf"),this.logger.trace("[Constructeur AutoConf (options)]"),!this.options.serverUrl&&!this.options.serverUrl){var e=l.a.AutoConf.url(this.options.apiKey);this.options.layerId?this.options.serverUrl=e.aggregate+this.options.layerId:Array.isArray(this.options.apiKey)&&this.options.apiKey.length>0?this.options.serverUrl=e.apiKeys:this.options.serverUrl=e.apiKey}"XHR"===this.options.protocol&&"POST"===this.options.httpMethod&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"xml"}var n=o(0),r=o(1),s=o(4),a=o(2),l=o(5),p=o(3),c=o(61);i.prototype=Object.create(p.a.prototype,{}),i.prototype.constructor=i,i.prototype.buildRequest=function(t,e){var o="undefined"!=typeof window?window:{};if(o.Gp&&o.Gp.Config&&o.Gp.Config.generalOptions&&o.Gp.Config.layers&&o.Gp.Config.generalOptions.apiKeys[this.options.apiKey]){if(!this.options.layerId)return this.logger.warn("Gp.Config existe déjà pour cette clé"),void this.options.onSuccess.call(this,o.Gp.Config);if(o.Gp.Config.layers[this.options.layerId]&&o.Gp.Config.layers[this.options.layerId].aggregatedLayers)return this.logger.warn("Gp.Config existe déjà pour cette clé et cette couche"),void this.options.onSuccess.call(this,o.Gp.Config)}this.request="";var i;i=-1===this.options.serverUrl.indexOf("http://"),!i&&this.layerId&&(this.request=s.a.normalyzeParameters({layerId:this.layerId})),this.request||""===this.request?e.call(this,this.request):t.call(this,new a.a(r.a.getMessage("SERVICE_REQUEST_BUILD")))},i.prototype.analyzeResponse=function(t,e){if(this.response){var o={layerId:this.options.layerId,response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:t,scope:this};c.a.build(o)}else t.call(this,new a.a(r.a.getMessage("SERVICE_RESPONSE_EMPTY")))},e.a=i},function(t,e,o){"use strict";var i=o(0),n=o(1),r=o(2),s=o(6),a=o(62),l={build:function(t){i.a.getLogger("AutoConfResponseFactory").trace(["AutoConfResponseFactory::build()"]);var e=null;if(!t.response)return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_EMPTY")));if(t.rawResponse)e=t.response;else{try{var o=new s.a({reader:a.a});"string"==typeof t.response?o.setXMLString(t.response):o.setXMLDoc(t.response),e=o.parse()}catch(e){var l=e.message;return"string"==typeof t.response?l+="\n (raw response service'"+t.response+"')":l+="\n (raw response service'"+t.response.documentElement.innerHTML+"')",void t.onError.call(t.scope,new r.a({message:n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",l),status:200,type:r.a.TYPE_SRVERR}))}var p=!0;for(var c in e)e.hasOwnProperty(c)&&(p=!1);if(p)return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_EMPTY_2")));if(e.exceptionReport)return void t.onError.call(t.scope,new r.a({message:n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:r.a.TYPE_SRVERR,status:200}))}var u="undefined"!=typeof window?window:{};u.Gp||(u.Gp={}),u.Gp.Config?this.mergeConfig(u.Gp.Config,e,t.layerId):u.Gp.Config=e,t.onSuccess.call(t.scope,u.Gp.Config)},mergeConfig:function(t,e,o){if(e&&t){for(var i in e)if(e.hasOwnProperty(i))if("generalOptions"===i)for(var n in e[i].apiKeys)e[i].apiKeys.hasOwnProperty(n)&&!t.generalOptions.apiKeys[n]&&(t.generalOptions.apiKeys[n]=e[i].apiKeys[n]);else if(t[i])for(var r in e[i])e[i].hasOwnProperty(r)&&!t[i][r]&&(t[i][r]=e[i][r]);if(o){var s=[];for(var a in e.layers)e.layers.hasOwnProperty(a)&&s.push(a);t.layers[o]&&(t.layers[o].aggregatedLayers=s)}}}};e.a=l},function(t,e,o){"use strict";function i(t){if(t.attributes.length>0){for(var e={},o=t.attributes,i=0;i<o.length;i++){var n=o[i];e[n.nodeName]=n.nodeValue}return e}}function n(t,e){if(t.hasChildNodes())for(var o,i,r,s=t.childNodes,a=0;a<s.length;a++)if(o=s[a],1===o.nodeType)if(i=o.localName||o.baseName||o.nodeName,r=o.prefix||E.DEFAULTPREFIX,E.READERS[r][i]){var l=E.READERS[r][i];l(o,e)}else n(o,e)}function r(t){var e,o="";return t.hasChildNodes()&&(e=t.firstChild,3!==e.nodeType&&4!==e.nodeType||(o=e.nodeValue)),o}function s(t){if(t.attributes.length>0){var e=i(t);for(var o in e)if(e.hasOwnProperty(o)){if("version"===o&&e.version!==E.VERSION)return void console.log("[AutoConfResponseReader] autoconf version is not the expected one : there may be errors in parsing");if("xmlns"===o){if(e[o]!==E.NAMESPACES.xmlns)return void console.log("[AutoConfResponseReader] autoconf response default namespace is not the expected one");continue}var n=o.split(":")[0],r=o.split(":")[1];if("xmlns"===n&&r&&E.NAMESPACES[r]&&E.NAMESPACES[r]!==e[o])return void console.log("[AutoConfResponseReader] autoconf response "+o+" namespace is not the expected one");if("schemaLocation"===r&&e[o]!==E.SCHEMALOCATION[0]&&e[o]!==E.SCHEMALOCATION[1])return void console.log("[AutoConfResponseReader] autoconf response schema location is not the expected one")}}}var a=o(24),l=o(25),p=o(26),c=o(27),u=o(28),h=o(29),d=o(30),f=o(31),y=o(32),g=o(33),m=o(34),v=o(35),_=o(36),b=o(37),E={};E.VERSION="1.1.0",E.NAMESPACES={xmlns:"http://www.opengis.net/context",gpp:"http://api.ign.fr/geoportail",ows:"http://www.opengis.net/ows/1.1",sld:"http://www.opengis.net/sld",wmts:"http://www.opengis.net/wmts/1.0",xlink:"http://www.w3.org/1999/xlink",xsi:"http://www.w3.org/2001/XMLSchema-instance"},E.SCHEMALOCATION=["http://www.opengis.net/context http://gpp3-wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://wxs.ign.fr/schemas/autoconf/autoconf.xsd","http://www.opengis.net/context http://gpp3-wxs.ign.fr/schemas/extContext.xsd http://api.ign.fr/geoportail http://gpp3-wxs.ign.fr/schemas/autoconf.xsd"],E.DEFAULTPREFIX="context",E.READERS={context:{ViewContext:function(t){s(t);var e=new a.a;return n(t,e),e},Title:function(t,e){e&&e.generalOptions?e.generalOptions.title=r(t):e&&e.lyr&&(e.lyr.title=r(t))},Abstract:function(t,e){e&&e.lyr&&(e.lyr.description=r(t))},Server:function(t,e){var o=t.getAttribute("service"),i=t.getAttribute("title"),r=t.getAttribute("version");if(o)if(e&&e.services&&"object"==typeof e.services&&!e.services[o]){var s=new f.a;s.title=i,s.version=r,n(t,s),e.services[o]=s}else e&&e.lyr&&(e.lyr.serviceParams||(e.lyr.serviceParams={}),e.lyr.serviceParams.id=o,e.lyr.serviceParams.version=r)},OnlineResource:function(t,e){e&&e.hasOwnProperty("serverUrl")&&(e.serverUrl=t.getAttribute("xlink:href"))},LayerList:function(t,e){if(n(t,e),e&&e.layers&&e.generalOptions&&e.services)for(var o in e.layers)if(e.layers.hasOwnProperty(o)){var i=e.layers[o],r=i.apiKeys;if(r&&Array.isArray(r))for(var s=0;s<r.length;s++){var a=r[s];e.generalOptions.apiKeys&&(e.generalOptions.apiKeys[a]&&Array.isArray(e.generalOptions.apiKeys[a])||(e.generalOptions.apiKeys[a]=[]),e.generalOptions.apiKeys[a].push(o))}var l=i.serviceParams;if(l&&l.id&&!e.services[l.id]){var p=new f.a;l.serverUrl&&(p.serverUrl=l.serverUrl),l.version&&(p.version=l.version),e.services[l.id]=p}if(i.wmtsOptions&&i.wmtsOptions.tileMatrixSetLink&&e.tileMatrixSets){var c=i.wmtsOptions.tileMatrixSetLink,u=e.tileMatrixSets;for(var h in u)u.hasOwnProperty(h)&&h===c&&(i.defaultProjection=u[h].projection)}}},Layer:function(t,e){if(e&&e.layers){var o={lyr:new c.a,lyrId:null},i=t.getAttribute("hidden");o.lyr.hidden="1"===i;var r=t.getAttribute("queryable");if(o.lyr.queryable="1"===r,n(t,o),o.lyrId){if(o.lyr.serviceParams&&o.lyr.serviceParams.id){var s=o.lyr.serviceParams.id;if(-1!==s.toUpperCase().indexOf("OPENLS")||-1!==s.toUpperCase().indexOf("ELEVATION")){var a=o.lyrId.split("$")[0];o.lyrId=a+"$"+s}}o.lyr.layerId=o.lyrId,e.layers[o.lyrId]=o.lyr}}},Name:function(t,e){e&&e.lyr&&(e.lyr.name=r(t))},SRS:function(t,e){e&&e.lyr&&(e.lyr.defaultProjection=r(t))},Format:function(t,e){if(e&&e.lyr){var o=new p.a,i=t.getAttribute("current");o.current="1"===i,o.name=r(t),e.lyr.formats&&Array.isArray(e.lyr.formats)||(e.lyr.formats=[]),e.lyr.formats.push(o)}},Style:function(t,e){if(e&&e.lyr){var o=new y.a,i=t.getAttribute("current");if(o.current="1"===i||1===i,t.hasChildNodes)for(var n,s,a=t.childNodes,l=0;l<a.length;l++)n=a[l],1===n.nodeType&&(s=n.localName||n.baseName||n.nodeName,"Name"===s?o.name=r(n):"Title"===s&&(o.title=r(n)));e.lyr.styles&&Array.isArray(e.lyr.styles)||(e.lyr.styles=[]),e.lyr.styles.push(o)}},Dimension:function(t,e){var o=t.getAttribute("name"),i=r(t);e&&e.lyr&&(e.lyr.dimensions||(e.lyr.dimensions={}),"Type"===o?e.lyr.dimensions.type=i:"VisibilityRange"===o?e.lyr.dimensions.visibilityRange=i:"VisibilityMode "===o?e.lyr.dimensions.visibilityMode=i:"GeometricType"===o?e.lyr.dimensions.geometricType=i:"NoDataValue"===o&&(e.lyr.dimensions.noDataValue=i))}},gpp:{Theme:function(t,e){e&&e.generalOptions&&e.generalOptions.hasOwnProperty("theme")&&(e.generalOptions.theme=r(t))},defaultGMLGFIStyleUrl:function(t,e){e&&e.generalOptions&&e.generalOptions.hasOwnProperty("defaultGMLGFIStyle")&&(e.generalOptions.defaultGMLGFIStyle=r(t))},Territory:function(t,e){var o=t.getAttribute("id");if(o){var i=new g.a,r=t.getAttribute("default");i.isDefault="1"===r,n(t,i),e&&e.territories&&"object"==typeof e.territories&&(e.territories[o]=i)}},defaultCRS:function(t,e){e&&e.hasOwnProperty("defaultCRS")&&(e.defaultCRS=r(t))},AdditionalCRS:function(t,e){var o=r(t);o&&e&&(Array.isArray(e.additionalCRS)?e.additionalCRS.push(o):(e.additionalProjections&&Array.isArray(e.additionalProjections)||(e.additionalProjections=[]),e.additionalProjections.push(o)))},DefaultLayer:function(t,e){var o=t.getAttribute("layerId");o&&e&&Array.isArray(e.defaultLayers)&&e.defaultLayers.push(o)},BoundingBox:function(t,e){if(e){var o=r(t).split(",");if(4===o.length){var i={left:parseFloat(o[0]),right:parseFloat(o[2]),top:parseFloat(o[3]),bottom:parseFloat(o[1])},n=t.getAttribute("minT"),s=t.getAttribute("maxT");if(e.hasOwnProperty("geoBBOX"))e.geoBBOX=i;else if(e.hasOwnProperty("bbox"))if(e.bbox.left||e.bbox.right||e.bbox.top||e.bbox.bottom){e.multiConstraints||(e.multiConstraints=[]);var a=new l.a;a.bbox=i,a.temporalExtent=[n,s],e.multiConstraints.push(a)}else e.bbox=i,e.temporalExtent=[n,s];else e.globalConstraint||(e.globalConstraint=new l.a),e.globalConstraint.bbox=i,e.globalConstraint.temporalExtent=[n,s]}}},Resolution:function(t,e){var o=r(t);o&&e&&e.defaultOptions&&e.defaultOptions.hasOwnProperty("resolution")&&(e.defaultOptions.resolution=parseFloat(o))},x:function(t,e){var o=r(t);o&&e&&e.geoCenter&&e.geoCenter.hasOwnProperty("lon")&&(e.geoCenter.lon=parseFloat(o))},y:function(t,e){var o=r(t);o&&e&&e.geoCenter&&e.geoCenter.hasOwnProperty("lat")&&(e.geoCenter.lat=parseFloat(o))},Resolutions:function(t,e){e&&e.generalOptions&&e.generalOptions.hasOwnProperty("wgs84Resolutions")&&(e.generalOptions.wgs84Resolutions=r(t).split(","))},Layer:function(t,e){if(e&&e.hasOwnProperty("lyrId")&&e.lyr){e.lyrId=t.getAttribute("id");var o=t.getAttribute("aggregate"),i=t.getAttribute("more");(o||i)&&(e.lyr.isAggregate=!0),n(t,e.lyr)}},Constraint:function(t,e){var o=new l.a;if(n(t,o),e)if(e.constraints&&Array.isArray(e.constraints)||(e.constraints=[]),o.multiConstraints&&Array.isArray(o.multiConstraints)){var i=new l.a;i.crs=o.crs,i.bbox=o.bbox,i.minScaleDenominator=o.minScaleDenominator,i.maxScaleDenominator=o.maxScaleDenominator,i.temporalExtent=o.temporalExtent,e.constraints.push(i);for(var r=0;r<o.multiConstraints.length;r++)i=new l.a,i.crs=o.crs,i.minScaleDenominator=o.minScaleDenominator,i.maxScaleDenominator=o.maxScaleDenominator,i.bbox=o.multiConstraints[r].bbox,i.temporalExtent=o.multiConstraints[r].temporalExtent,e.constraints.push(i)}else e.constraints.push(o)},CRS:function(t,e){e&&e.hasOwnProperty("crs")&&(e.crs=r(t))},Thematic:function(t,e){if(e){var o=new m.a;o.inspire=!1,o.name=r(t),e.thematics&&Array.isArray(e.thematics)||(e.thematics=[]),e.thematics.push(o)}},InspireThematic:function(t,e){if(e){var o=new m.a;o.inspire=!0,o.name=r(t),e.thematics&&Array.isArray(e.thematics)||(e.thematics=[]),e.thematics.push(o)}},Originator:function(t,e){if(e){var o=new d.a;o.name=t.getAttribute("name"),n(t,o),e.originators&&Array.isArray(e.originators)||(e.originators=[]),e.originators.push(o)}},Attribution:function(t,e){e&&e.hasOwnProperty("attribution")&&(e.attribution=r(t))},Logo:function(t,e){e&&e.hasOwnProperty("logo")&&(e.logo=r(t))},URL:function(t,e){e&&e.hasOwnProperty("url")&&(e.url=r(t))},Legend:function(t,e){var o=new u.a;n(t,o),e&&(e.legends&&Array.isArray(e.legends)||(e.legends=[]),e.legends.push(o))},LegendURL:function(t,e){if(e&&e.hasOwnProperty("format")&&(e.format=t.getAttribute("format"),t.hasChildNodes)){var o=t.childNodes[0];"OnlineResource"===(o.localName||o.baseName||o.nodeName)&&e.hasOwnProperty("url")&&(e.url=o.getAttribute("xlink:href"))}},QuickLook:function(t,e){if(t.hasChildNodes){var o=t.childNodes[0];"OnlineResource"===(o.localName||o.baseName||o.nodeName)&&e&&(e.quicklookUrl=o.getAttribute("xlink:href"))}},MetadataURL:function(t,e){if(e){var o=new h.a;if(o.format=t.getAttribute("format"),t.hasChildNodes){var i=t.childNodes[0];"OnlineResource"===(i.localName||i.baseName||i.nodeName)&&(o.url=i.getAttribute("xlink:href"))}e.metadata||Array.isArray(e.metadata)||(e.metadata=[]),e.metadata.push(o)}},Key:function(t,e){if(e){var o=t.getAttribute("id");e.apiKeys&&Array.isArray(e.apiKeys)||(e.apiKeys=[]),e.apiKeys.push(o);var i=r(t);e.serviceParams||(e.serviceParams={}),e.serviceParams.serverUrl||(e.serviceParams.serverUrl={}),e.serviceParams.serverUrl[o]||(e.serviceParams.serverUrl[o]=i)}}},ows:{Identifier:function(t,e){e&&e.hasOwnProperty("TMS")?e.identifier=r(t):e&&e.hasOwnProperty("matrixId")&&(e.matrixId=r(t))},SupportedCRS:function(t,e){e&&e.TMS&&e.TMS.hasOwnProperty("projection")&&(e.TMS.projection=r(t))}},sld:{MinScaleDenominator:function(t,e){var o=r(t);o&&e&&(e.hasOwnProperty("defaultOptions")?e.defaultOptions.minScaleDenominator=parseFloat(o):e.lyr?(e.lyr.globalConstraint||(e.lyr.globalConstraint=new l.a),e.lyr.globalConstraint.minScaleDenominator=parseFloat(o)):e.hasOwnProperty("minScaleDenominator")&&(e.minScaleDenominator=parseFloat(o)))},MaxScaleDenominator:function(t,e){var o=r(t);o&&e&&(e.hasOwnProperty("defaultOptions")?e.defaultOptions.maxScaleDenominator=parseFloat(o):e.lyr?(e.lyr.globalConstraint||(e.lyr.globalConstraint=new l.a),e.lyr.globalConstraint.maxScaleDenominator=parseFloat(o)):e.hasOwnProperty("maxScaleDenominator")&&(e.maxScaleDenominator=parseFloat(o)))}},wmts:{TileMatrixSetLimits:function(t,e){if(e){var o={};n(t,o),e.wmtsOptions||(e.wmtsOptions={}),e.wmtsOptions.tileMatrixSetLimits=o}},TileMatrixLimits:function(t,e){var o,i=new b.a;if(t.hasChildNodes){for(var n=t.childNodes,s=0;s<n.length;s++){var a=n[s],l=a.localName||a.baseName||a.nodeName;"TileMatrix"===l?o=r(a):"MinTileRow"===l?i.minTileRow=r(a):"MaxTileRow"===l?i.maxTileRow=r(a):"MinTileCol"===l?i.minTileCol=r(a):"MaxTileCol"===l&&(i.maxTileCol=r(a))}o&&e&&!e[o]&&(e[o]=i)}},TileMatrixSet:function(t,e){if(e&&e.tileMatrixSets){var o={};o.TMS=new v.a,o.resolutions=[],n(t,o);var i=o.TMS.tileMatrices;for(var s in i)i.hasOwnProperty(s)&&o.TMS.matrixIds.push(s);if(("IGNF:WGS84G"===o.TMS.getProjection()||"EPSG:4326"===o.TMS.getProjection())&&e.generalOptions&&Array.isArray(e.generalOptions.wgs84Resolutions))for(var a=e.generalOptions.wgs84Resolutions,l=0;l<a.length;l++)o.resolutions[l]=parseFloat(a[l]);Array.isArray(o.resolutions)&&void 0!==o.resolutions.sort&&o.resolutions.sort(function(t,e){return e-t}),o.TMS.nativeResolutions=o.resolutions,e.tileMatrixSets[o.identifier]=o.TMS}else e&&!e.wmtsOptions&&(e.wmtsOptions={}),e.wmtsOptions.tileMatrixSetLink=r(t)},TileMatrix:function(t,e){if(e){var o=new _.a;if(n(t,o),e.TMS&&e.TMS.getProjection()){var i=e.TMS.getProjection();if("EPSG:3857"===i||"EPSG:2154"===i){var r=28e-5*o.scaleDenominator;e.resolutions&&Array.isArray(e.resolutions)&&e.resolutions.push(r)}}e.TMS&&e.TMS.tileMatrices&&(e.TMS.tileMatrices[o.matrixId]=o)}},ScaleDenominator:function(t,e){var o=r(t);o&&e&&e.hasOwnProperty("scaleDenominator")&&(e.scaleDenominator=parseFloat(o))},TopLeftCorner:function(t,e){var o=r(t).split(" ");o&&e&&(e.topLeftCorner={},e.topLeftCorner.x=parseFloat(o[0]),e.topLeftCorner.y=parseFloat(o[1]))},TileWidth:function(t,e){var o=r(t);o&&e&&e.hasOwnProperty("tileWidth")&&(e.tileWidth=parseInt(o,10))},TileHeight:function(t,e){var o=r(t);o&&e&&e.hasOwnProperty("tileHeight")&&(e.tileHeight=parseInt(o,10))},MatrixWidth:function(t,e){var o=r(t);o&&e&&e.hasOwnProperty("matrixWidth")&&(e.matrixWidth=parseInt(o,10))},MatrixHeight:function(t,e){var o=r(t);o&&e&&e.hasOwnProperty("matrixHeight")&&(e.matrixHeight=parseInt(o,10))}},serviceException:function(t){var e={};if(t.hasChildNodes())for(var o,i=t.childNodes,n=0;n<i.length;n++)o=i[n],"exception"===o.nodeName&&(e.exceptionReport=E.READERS.exception(o));return e},exception:function(t){var e={},o=t.getAttribute("code");o&&(e.exceptionCode=o);var i=t.firstChild;return i&&3===i.nodeType&&(e.exception=i.nodeValue),e}},E.read=function(t){if("ViewContext"===t.nodeName){var e=t.prefix||E.DEFAULTPREFIX;return E.READERS[e][t.nodeName](t)}if("serviceException"===t.nodeName){return E.READERS[t.nodeName](t)}throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")},e.a=E},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError(r.a.getMessage("CLASS_CONSTRUCTOR","Geocode"));if(this.CLASSNAME="Geocode",a.a.apply(this,arguments),this.logger=n.a.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]"),!t.location)throw new Error(r.a.getMessage("PARAM_MISSING","location"));if("object"==typeof t.location&&0===Object.keys(t.location).length)throw new Error(r.a.getMessage("PARAM_EMPTY","location"));if("string"==typeof t.location&&0===t.location.length)throw new Error(r.a.getMessage("PARAM_EMPTY","location"));this.options.location=t.location,t.filterOptions&&"object"==typeof t.filterOptions||(this.options.filterOptions=t.filterOptions={type:["StreetAddress"]}),0===Object.keys(t.filterOptions).length&&(this.options.filterOptions={type:["StreetAddress"]});for(var e=Object.keys(t.filterOptions),o=0;o<e.length;o++){var s=e[o];-1!==["department","number","postalCode","insee","importance","ID","IDTR","absorbedCity","sheet","section","inseeRegion","inseeDepartment"].indexOf(s)&&"string"!=typeof t.filterOptions[s]&&(t.filterOptions[s]=t.filterOptions[s].toString()),t.filterOptions[s]||delete this.options.filterOptions[s]}this.options.filterOptions.type=t.filterOptions.type||["StreetAddress"],this.options.maximumResponses=t.maximumResponses||25,this.options.returnFreeForm=t.returnFreeForm||!1,this.options.srs=t.srs||"EPSG:4326",this.options.outputFormat=this.options.rawResponse?"":"xml"}var n=o(0),r=o(1),s=o(2),a=o(3),l=o(64),p=o(76);i.prototype=Object.create(a.a.prototype,{}),i.prototype.constructor=i,i.prototype.buildRequest=function(t,e){var o={httpMethod:this.options.httpMethod,location:this.options.location,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions,srs:this.options.srs,maximumResponses:this.options.maximumResponses};this.request=l.a.build(o),this.request?e.call(this,this.request):t.call(this,new s.a(r.a.getMessage("SERVICE_REQUEST_BUILD")))},i.prototype.analyzeResponse=function(t,e){if(this.response){var o={response:this.response,rawResponse:this.options.rawResponse,onError:t,onSuccess:e,scope:this};p.a.build(o)}else t.call(this,new s.a(r.a.getMessage("SERVICE_RESPONSE_EMPTY")))},e.a=i},function(t,e,o){"use strict";var i=o(0),n=o(11),r=o(38),s=o(13),a=o(72),l=o(73),p=o(74),c=o(75),u={build:function(t){var e=i.a.getLogger("DirectGeocodeRequestFactory");e.trace(["DirectGeocodeRequestFactory::build()"]);var o=null,u=new s.a;u.addFilterExtensions(new c.a),u.addFilterExtensions(new a.a),u.addFilterExtensions(new l.a),u.addFilterExtensions(new p.a);var h=new r.a({location:t.location,returnFreeForm:t.returnFreeForm,filterOptions:t.filterOptions});h.addFilter(u);var d=new n.a({srsName:t.srs,maximumResponses:t.maximumResponses});if(d.namespace=!0,d.setService(h),o=d.build(),"GET"===t.httpMethod){o="qxml="+encodeURIComponent(o).replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\./g,"%2E").replace(/!/g,"%21").replace(/~/g,"%7E").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}return e.trace(o),o}};e.a=u},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger(),this.logger.trace("[Constructeur RequestHeader ()]"),!(this instanceof i))throw new TypeError("RequestHeader constructor cannot be called as a function.");this.options=t||{srsName:"EPSG:4326"};for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e])}var n=o(0);i.prototype={requestString:null,template:'<RequestHeader srsName="__SRSNAME__"/>',constructor:i,toString:function(){var t=null;return t=this.template,t=t.replace(/__SRSNAME__/g,this.options.srsName),this.requestString=t,this.requestString}},e.a=i},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger(),this.logger.trace("[Constructeur Request ()]"),!(this instanceof i))throw new TypeError("Request constructor cannot be called as a function.");this.options=t||{maximumResponses:25,methodName:null,version:"1.2"};for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e])}var n=o(0);i.prototype={requestString:null,template:'<Request maximumResponses="__MAXRESPONSES__" methodName="__METHODNAME__" requestID="__UUID__" version="__VERSION__">\x3c!-- __REQUESTSERVICE__ --\x3e</Request>',constructor:i,guid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})},toString:function(){var t=null;return t=this.template,t=t.replace(/__MAXRESPONSES__/g,this.options.maximumResponses),t=t.replace(/__METHODNAME__/g,this.options.methodName),t=t.replace(/__UUID__/g,this.guid()),t=t.replace(/__VERSION__/g,this.options.version),this.requestString=t,this.requestString}},e.a=i},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger(),this.logger.trace("[Constructeur GeocodeRequest ()]"),!(this instanceof i))throw new TypeError("GeocodeRequest constructor cannot be called as a function.");this.options=t||{}
;for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.CLASSNAME="GeocodeRequest"}var n=o(0),r=o(68),s=o(13);i.prototype={strRequest:null,oAddress:null,oFilter:null,template:'<GeocodeRequest returnFreeForm="__RETURNFREEFORM__">__ADDRESS__</GeocodeRequest>',addAddress:function(t){t instanceof r.a&&(this.oAddress=t)},addFilter:function(t){t instanceof s.a&&(this.oFilter=t)},constructor:i,toString:function(){var t="";if(t=this.template,!this.oAddress){var e={};if(e.location=this.options.location,e.type=this.options.filterOptions.type||["StreetAddress"],e.filter=this.options.filterOptions,delete e.filter.type,this.oFilter){e.filter={};for(var o in e.type){var i=e.type[o],n=this.oFilter.getFilter(i);if(n){for(var s=this.options.filterOptions,a=n.attributesList,l=0;l<a.length;l++){var p=a[l];if(s[p]){var c=n.serviceAttributes[l];n.placeAttributes[c]=s[p],this.logger.trace("Selection du filtre '"+p+"' sur le type '"+i+"'.")}}var u=n.placeAttributes;for(var h in u)u.hasOwnProperty(h)&&(e.filter[h]=u[h])}else this.logger.warn("Le filtre '"+i+"' n'existe pas !?")}}if(this.oAddress=new r.a(e),!this.oAddress)throw new Error("La construction de l'adresse n'est pas correctement definie !?")}return t=t.replace(/__ADDRESS__/g,this.oAddress.toString()),t=t.replace(/__RETURNFREEFORM__/g,this.options.returnFreeForm?"true":"false"),this.strRequest=t,this.strRequest}},e.a=i},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger("Address"),this.logger.trace("[Constructeur Address ()]"),!(this instanceof i))throw new TypeError("Address constructor cannot be called as a function.");if(this.options=t||{location:{},type:["StreetAddress"],filter:{}},!t.location)throw new Error("l'option 'location' n'est pas renseignée !");for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e])}var n=o(0);i.prototype={constructor:i,requestString:null,template:{address:'<Address countryCode="__COUNTRYCODE__">__LOCATION____PLACE____POSTALCODE____ENVELOPE__</Address>',location:{freeFormAddress:"<freeFormAddress>__FREEFORMADDRESSVALUE__</freeFormAddress>",streetAddress:{container:"<StreetAddress>__STREET____BUILDING__</StreetAddress>",building:'<Building number="__BUILDINGVALUE__"/>',street:"<Street>__STREETVALUE__</Street>"}},place:'<Place type="__PLACETYPE__">__PLACEVALUE__</Place>',postalCode:"<PostalCode>__POSTALCODEVALUE__</PostalCode>",envelope:"<gml:Envelope><gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner><gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner></gml:Envelope>"}},i.prototype.toString=function(){var t=null;if(t=this.template.address,t=t.replace(/__COUNTRYCODE__/g,this.options.type),"string"==typeof this.options.location){var e=this.template.location.freeFormAddress;e=e.replace(/__FREEFORMADDRESSVALUE__/g,this.options.location),t=t.replace(/__LOCATION__/g,e)}else{var o="",i="";this.options.location.number&&(o=this.template.location.streetAddress.building,o=o.replace(/__BUILDINGVALUE__/g,this.options.location.number)),this.options.location.street&&(i=this.template.location.streetAddress.street,i=i.replace(/__STREETVALUE__/g,this.options.location.street));var n=this.template.location.streetAddress.container;n=n.replace(/__STREET__/g,i),n=n.replace(/__BUILDING__/g,o),t=t.replace(/__LOCATION__/g,n)}var r="";this.options.location.postalCode&&(r=this.template.postalCode,r=r.replace(/__POSTALCODEVALUE__/g,this.options.location.postalCode));var s="";if(this.options.filter){var a=this.options.filter.bbox;a&&(s=this.template.envelope,s=s.replace(/__LEFT__/g,a.left),s=s.replace(/__BOTTOM__/g,a.bottom),s=s.replace(/__RIGHT__/g,a.right),s=s.replace(/__TOP__/g,a.top))}var l=[],p="";if(this.options.filter){var c=this.options.filter;for(var u in c)"bbox"!==u&&(p=this.template.place,p=p.replace(/__PLACETYPE__/g,u),p=p.replace(/__PLACEVALUE__/g,c[u]),l.push(p))}var h="";return this.options.location.city&&(h=this.template.place,h=h.replace(/__PLACETYPE__/g,"Municipality"),h=h.replace(/__PLACEVALUE__/g,this.options.location.city),l.push(h)),t=t.replace(/__POSTALCODE__/g,r),t=t.replace(/__PLACE__/g,l.join("\n")),t=t.replace(/__ENVELOPE__/g,s),this.requestString=t,this.requestString},e.a=i},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger(),this.logger.trace("[Constructeur ReverseGeocodeRequest ()]"),!(this instanceof i))throw new TypeError("ReverseGeocodeRequest constructor cannot be called as a function.");this.options=t||{};for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.CLASSNAME="ReverseGeocodeRequest"}var n=o(0),r=o(70),s=o(71);i.prototype={strRequest:null,oPosition:null,oPreference:null,constructor:i,template:'<ReverseGeocodeRequest returnFreeForm="__RETURNFREEFORM__">__POSITION____PREFERENCE__</ReverseGeocodeRequest>',addPosition:function(t){t instanceof r.a&&(this.oPosition=t)},addPreferences:function(t){t instanceof s.a&&(this.oPreference=t)},toString:function(){var t="";if(t=this.template,!this.oPreference&&(this.oPreference=new s.a(this.options.filterOptions.type||["StreetAddress"]),!this.oPreference))throw new Error("Les preferences ne sont pas definies !?");if(t=t.replace(/__PREFERENCE__/g,this.oPreference.toString()),!this.oPosition){var e={position:this.options.position,filter:{}};if(this.options.filterOptions&&(e.filter=this.options.filterOptions,delete e.filter.type),this.oPosition=new r.a(e),!this.oPosition)throw new Error("La position et ses filtres ne sont pas definis !?")}return t=t.replace(/__POSITION__/g,this.oPosition.toString()),t=t.replace(/__RETURNFREEFORM__/g,this.options.returnFreeForm?"true":"false"),this.strRequest=t,this.strRequest}},e.a=i},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger("Position"),this.logger.trace("[Constructeur Position ()]"),!(this instanceof i))throw new TypeError("Position constructor cannot be called as a function.");if(this.options=t||{},!t.position)throw new Error("l'option 'position' n'est pas renseignée !");for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e])}var n=o(0);i.prototype={constructor:i,requestString:null,template:{position:"<Position>__GMLPOINT____GMLFILTER__</Position>",gml:{point:'<gml:Point xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos></gml:Point>',pos:null,filter:{bbox:'<gml:Envelope xmlns:gml="http://www.opengis.net/gml"><gml:lowerCorner>__LEFT__ __BOTTOM__</gml:lowerCorner><gml:upperCorner>__RIGHT__ __TOP__</gml:upperCorner></gml:Envelope>',circle:'<gml:CircleByCenterPoint xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos><gml:radius>__RADIUS__</gml:radius></gml:CircleByCenterPoint>',polygon:'<gml:Polygon xmlns:gml="http://www.opengis.net/gml"><gml:exterior><gml:LinearRing><gml:posList>__XY__</gml:posList></gml:LinearRing></gml:exterior></gml:Polygon>',multipolygon:null}}}},i.prototype.toString=function(){var t=this.template.position,e=this.template.gml.point;e=e.replace(/__X__/g,this.options.position.x),e=e.replace(/__Y__/g,this.options.position.y);var o="";if(this.options.filter){var i=this.options.filter;for(var n in i)switch(n){case"circle":o=this.template.gml.filter[n],o=o.replace(/__X__/g,i[n].x),o=o.replace(/__Y__/g,i[n].y),o=o.replace(/__RADIUS__/g,i[n].radius);break;case"bbox":o=this.template.gml.filter[n],o=o.replace(/__LEFT__/g,i[n].left),o=o.replace(/__BOTTOM__/g,i[n].bottom),o=o.replace(/__RIGHT__/g,i[n].right),o=o.replace(/__TOP__/g,i[n].top);break;case"polygon":o=this.template.gml.filter[n];for(var r="",s=i[n],a=0;a<s.length;a++){var l=s[a];if(Array.isArray(l)){this.logger.error("Holes are not implemented !");break}(l.x&&l.y||0===l.x||0===l.y)&&(r+=l.x+" "+l.y),s.length!==a+1&&(r+=" ")}o=o.replace(/__XY__/g,r);break;case"multipolygon":this.logger.warn("Filter '"+n+"' is not yet implemented !");break;default:this.logger.error("This filter '"+n+"' is not useful !")}}return t=t.replace(/__GMLPOINT__/g,e),t=t.replace(/__GMLFILTER__/g,o),this.requestString=t,this.requestString},e.a=i},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger("Preference"),this.logger.trace("[Constructeur Preference ()]"),!(this instanceof i))throw new TypeError("Preference constructor cannot be called as a function.");this.type=t}var n=o(0);i.prototype={constructor:i,requestString:null,template:"<ReverseGeocodePreference>__TYPE__</ReverseGeocodePreference>"},i.prototype.toString=function(){for(var t=[],e="",o=0;o<this.type.length;o++)e=this.template,e=e.replace(/__TYPE__/g,this.type[o]),t.push(e);return this.strRequest=t.join("\n"),this.strRequest},e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("StreetAddress constructor cannot be called as a function.");n.a.apply(this,arguments),this.CLASSNAME="StreetAddress",this.attributesList=["bbox","ID","IDTR","quality","territory","commune","department","insee","municipality"],this.serviceAttributes=["bbox","ID","IDTR","Qualite","Territoire","Commune","Departement","INSEE","Municipality"]}var n=o(7);i.prototype=Object.create(n.a.prototype),i.prototype.constructor=i,e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("PositionOfInterest constructor cannot be called as a function.");n.a.apply(this,arguments),this.CLASSNAME="PositionOfInterest",this.attributesList=["bbox","importance","nature","territory","commune","department","insee","municipality"],this.serviceAttributes=["bbox","Importance","Nature","Territoire","Commune","Departement","INSEE","Municipality"]}var n=o(7);i.prototype=Object.create(n.a.prototype),i.prototype.constructor=i,e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("CadastralParcel constructor cannot be called as a function.");n.a.apply(this,arguments),this.CLASSNAME="CadastralParcel",this.attributesList=["absorbedCity","sheet","number","section","commune","department","insee","municipality","origin"],this.serviceAttributes=["CommuneAbsorbee","Feuille","Numero","Section","Commune","Departement","INSEE","Municipality","Type"]}var n=o(7);i.prototype=Object.create(n.a.prototype),i.prototype.constructor=i,e.a=i},function(t,e,o){"use strict";function i(){if(!(this instanceof i))throw new TypeError("Administratif constructor cannot be called as a function.");n.a.apply(this,arguments),this.CLASSNAME="Administratif",this.attributesList=["bbox","prefecture","inseeRegion","inseeDepartment","municipality"],this.serviceAttributes=["bbox","Prefecture","InseeRegion","InseeDepartement","Municipality"]}var n=o(7);i.prototype=Object.create(n.a.prototype),i.prototype.constructor=i,e.a=i},function(t,e,o){"use strict";var i=o(2),n=o(1),r=o(6),s=o(77),a={build:function(t){var e=null;if(!t.response)return void t.onError.call(t.scope,new i.a({message:n.a.getMessage("SERVICE_RESPONSE_EMPTY"),type:i.a.TYPE_SRVERR,status:-1}));if(t.rawResponse)e=t.response;else{try{var o=new r.a({reader:s.a});if("string"==typeof t.response?o.setXMLString(t.response):o.setXMLDoc(t.response),!(e=o.parse()))throw new Error("L'analyse de la réponse du service !?")}catch(e){var a=e.message;return"string"==typeof t.response?a+="('"+t.response+"')":a+="('"+t.response.documentElement.innerHTML+"')",void t.onError.call(t.scope,new i.a({message:n.a.getMessage("SERVICE_RESPONSE_ANALYSE",a),type:i.a.TYPE_UNKERR,status:-1}))}if(e.exceptionReport)return void t.onError.call(t.scope,new i.a({message:n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:i.a.TYPE_SRVERR,status:200}))}t.onSuccess.call(t.scope,e)}};e.a=a},function(t,e,o){"use strict";function i(t){if(t.attributes.length>0){for(var e={},o=t.attributes,i=0;i<o.length;i++){var n=o[i];e[n.nodeName]=n.nodeValue}return e}}function n(t,e){if(t.hasChildNodes())for(var o,i,r,s=t.childNodes,a=0;a<s.length;a++)if(o=s[a],1===o.nodeType)if(i=o.localName||o.baseName||o.nodeName,r=o.prefix||u.DEFAULTPREFIX,u.READERS[r][i]){var l=u.READERS[r][i];l(o,e)}else n(o,e)}function r(t){var e,o="";return t.hasChildNodes()&&(e=t.firstChild,3===e.nodeType&&(o=e.nodeValue)),o}function s(t){if(t.attributes.length>0){var e=i(t);for(var o in e)if(e.hasOwnProperty(o)){if("version"===o&&e.version!==u.VERSION)return void console.log("[DirectGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing");if("xmlns"===o){if(e[o]!==u.NAMESPACES[u.DEFAULTPREFIX])return void console.log("[DirectGeocodeResponseReader] geocode response default namespace is not the expected one");continue}var n=o.split(":")[0],r=o.split(":")[1];if("xmlns"===n&&r&&u.NAMESPACES[r]&&u.NAMESPACES[r]!==e[o])return void console.log("[DirectGeocodeResponseReader] geocode response "+o+" namespace is not the expected one");if("schemaLocation"===r&&u.SCHEMALOCATION!==e[o])return void console.log("[DirectGeocodeResponseReader] geocode response schema location is not the expected one")}}}var a=o(1),l=o(2),p=o(14),c=o(39),u={};u.VERSION="1.2",u.NAMESPACES={xmlns:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xls:"http://www.opengis.net/xls",xlsext:"http://www.opengis.net/xlsext",xsi:"http://www.w3.org/2001/XMLSchema-instance"},u.SCHEMALOCATION="http://wxs.ign.fr/schemas/olsAll.xsd",u.DEFAULTPREFIX="xls",u.READERS={xls:{XLS:function(t){var e=new p.a;return s(t),n(t,e),e},GeocodedAddress:function(t,e){var o=new c.a;n(t,o),e&&Array.isArray(e.locations)&&e.locations.push(o)},GeocodeMatchCode:function(t,e){var o=t.getAttribute("accuracy");o&&e&&(e.accuracy=parseFloat(o));var i=t.getAttribute("matchType");i&&e&&(e.matchType=i)},Address:function(t,e){var o=t.getAttribute("countryCode");e&&o&&(e.type=o),n(t,e)},freeFormAddress:function(t,e){e&&e.hasOwnProperty("placeAttributes")&&(e.placeAttributes.freeform=r(t))},Building:function(t,e){var o=t.getAttribute("number");e&&e.hasOwnProperty("placeAttributes")&&(o?e.placeAttributes.number=o:t.getAttribute("buildingName")?e.placeAttributes.number=t.getAttribute("buildingName"):t.getAttribute("subdivision")&&(e.placeAttributes.number=t.getAttribute("subdivision")))},Street:function(t,e){e&&e.hasOwnProperty("placeAttributes")&&("StreetAddress"===e.type?e.placeAttributes.street=r(t):"CadastralParcel"===e.type&&(e.placeAttributes.cadastralParcel=r(t)))},Place:function(t,e){var o=t.getAttribute("type"),i=r(t);if(e&&e.hasOwnProperty("placeAttributes"))if("Municipality"===o)e.placeAttributes.municipality=i;else if("Bbox"===o){var n=i.split(";");4===n.length&&(e.placeAttributes.bbox={left:parseFloat(n[0]),right:parseFloat(n[2]),top:parseFloat(n[1]),bottom:parseFloat(n[3])})}else"Commune"===o?e.placeAttributes.commune=i:"Departement"===o?e.placeAttributes.department=i:"INSEE"===o?e.placeAttributes.insee=i:"Qualite"===o?e.placeAttributes.quality=i:"Territoire"===o?e.placeAttributes.territory=i:"ID"===o?e.placeAttributes.ID=i:"ID_TR"===o?e.placeAttributes.IDTR=i:"Importance"===o?e.placeAttributes.importance=parseInt(i,10):"Nature"===o?e.placeAttributes.nature=i:"Numero"===o?e.placeAttributes.number=i:"Feuille"===o?e.placeAttributes.sheet=i:"Section"===o?e.placeAttributes.section=i:"CommuneAbsorbee"===o?e.placeAttributes.absorbedCity=i:"Arrondissement"===o?i&&(e.placeAttributes.arrondissement=i):"Type"===o?e.placeAttributes.origin=i:"Prefecture"===o?e.placeAttributes.prefecture=i:"InseeRegion"===o?e.placeAttributes.inseeRegion=i:"InseeDepartment"===o&&(e.placeAttributes.inseeDepartment=i)},PostalCode:function(t,e){e&&e.hasOwnProperty("placeAttributes")&&(e.placeAttributes.postalCode=r(t))},Error:function(t){var e=t.getAttribute("message"),o=t.getAttribute("errorCode"),i=a.a.getMessage("SERVICE_RESPONSE_EXCEPTION","("+o+") : "+e);throw new l.a({message:i,type:l.a.TYPE_SRVERR})}},gml:{pos:function(t,e){var o=r(t);e&&o&&(e.position={x:parseFloat(o.split(" ")[0]),y:parseFloat(o.split(" ")[1])})}},ExceptionReport:function(t){var e={};if(t.hasChildNodes())for(var o,i=t.childNodes,n=0;n<i.length;n++)o=i[n],"Exception"===o.nodeName&&(e.exceptionReport=u.READERS.Exception(o));return e},Exception:function(t){var e={},o=t.getAttribute("exceptionCode");o&&(e.exceptionCode=o);var i=t.firstChild;return i&&3===i.nodeType&&(e.exception=i.nodeValue),e}},u.read=function(t){if("XLS"===t.nodeName){var e=t.prefix;e||(e=u.DEFAULTPREFIX);return u.READERS[e][t.nodeName](t)}if("ExceptionReport"===t.nodeName){return u.READERS[t.nodeName](t)}var o=a.a.getMessage("SERVICE_RESPONSE_ANALYSE",t.nodeName);throw new l.a({message:o,type:l.a.TYPE_UNKERR,status:200})},e.a=u},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError(r.a.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));if(this.CLASSNAME="ReverseGeocode",a.a.apply(this,arguments),this.logger=n.a.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]"),!t.position)throw new Error(r.a.getMessage("PARAM_MISSING","position"));if(null===t.position.x)throw new Error(r.a.getMessage("PARAM_MISSING","position.x"));if(null===t.position.y)throw new Error(r.a.getMessage("PARAM_MISSING","position.y"));this.options.position=t.position,t.filterOptions&&"object"==typeof t.filterOptions||(this.options.filterOptions=t.filterOptions={type:["StreetAddress"]}),0===Object.keys(t.filterOptions).length&&(this.options.filterOptions={type:["StreetAddress"]});for(var e=Object.keys(t.filterOptions),o=0;o<e.length;o++){var s=e[o];t.filterOptions[s]&&0!==Object.keys(t.filterOptions[s]).length||delete this.options.filterOptions[s]}if(this.options.filterOptions.type=t.filterOptions.type||["StreetAddress"],!Array.isArray(this.options.filterOptions.type))throw new Error(r.a.getMessage("PARAM_TYPE","filterOptions.type"));if(this.options.maximumResponses=t.maximumResponses||25,this.options.returnFreeForm=t.returnFreeForm||!1,this.options.srs=t.srs||"CRS:84",-1===i.geoEPSG.indexOf(this.options.srs)){if(this.options.position={x:this.options.position.y,y:this.options.position.x},this.options.filterOptions&&this.options.filterOptions.circle){var l=this.options.filterOptions.circle;this.options.filterOptions.circle={x:l.y,y:l.x,radius:l.radius}}if(this.options.filterOptions&&this.options.filterOptions.polygon){var p=this.options.filterOptions.polygon;for(o=0;o<p.length;o++){var c=p[o];this.options.filterOptions.polygon[o]={x:c.y,y:c.x}}}}this.options.outputFormat=this.options.rawResponse?"":"xml"}var n=o(0),r=o(1),s=o(2),a=o(3),l=o(79),p=o(80);i.prototype=Object.create(a.a.prototype,{}),i.prototype.constructor=i,i.prototype.buildRequest=function(t,e){var o={httpMethod:this.options.httpMethod,position:this.options.position,returnFreeForm:this.options.returnFreeForm,filterOptions:this.options.filterOptions,srs:"EPSG:4326",maximumResponses:this.options.maximumResponses};this.request=l.a.build(o),this.request?e.call(this,this.request):t.call(this,new s.a(r.a.getMessage("SERVICE_REQUEST_BUILD")))},i.prototype.analyzeResponse=function(t,e){if(this.response){var o={response:this.response,rawResponse:this.options.rawResponse,onError:t,onSuccess:e,scope:this};p.a.build(o)}else t.call(this,new s.a(r.a.getMessage("SERVICE_RESPONSE_EMPTY")))},i.geoEPSG=["EPSG:4326"],e.a=i},function(t,e,o){"use strict";var i=o(0),n=o(11),r=o(38),s={build:function(t){var e=i.a.getLogger("ReverseGeocodeRequestFactory");e.trace(["ReverseGeocodeRequestFactory::build()"]);var o=t||{},s=null,a=new r.a({position:o.position,returnFreeForm:o.returnFreeForm,filterOptions:o.filterOptions}),l=new n.a({srsName:o.srs,maximumResponses:o.maximumResponses});if(l.namespace=!0,l.setService(a),s=l.build(),"GET"===o.httpMethod){s="qxml="+encodeURIComponent(s).replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\./g,"%2E").replace(/!/g,"%21").replace(/~/g,"%7E").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}return e.trace(s),s}};e.a=s},function(t,e,o){"use strict";var i=o(1),n=o(2),r=o(6),s=o(81),a={build:function(t){var e=null;if(!t.response)return void t.onError.call(t.scope,new n.a({message:i.a.getMessage("SERVICE_RESPONSE_EMPTY"),type:n.a.TYPE_SRVERR,status:-1}));if(t.rawResponse)e=t.response;else{try{var o=new r.a({reader:s.a});if("string"==typeof t.response?o.setXMLString(t.response):o.setXMLDoc(t.response),!(e=o.parse()))throw new Error("L'analyse de la réponse du service !?")}catch(e){return e.status=200,void t.onError.call(t.scope,e)}if(e.exceptionReport)return void t.onError.call(t.scope,new n.a({message:i.a.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:n.a.TYPE_SRVERR,status:200}));if(t.scope&&t.scope.options&&t.scope.options.srs&&"EPSG:4326"!==t.scope.options.srs){var a,l;if(e||e.locations||e.locations.length)for(var p=0;p<e.locations.length;p++)(a=e.locations[p])&&(l=a.position)&&(a.position={x:l.y,y:l.x})}}t.onSuccess.call(t.scope,e)}};e.a=a},function(t,e,o){"use strict";function i(t){if(t.attributes.length>0){for(var e={},o=t.attributes,i=0;i<o.length;i++){var n=o[i];e[n.nodeName]=n.nodeValue}return e}}function n(t,e){if(t.hasChildNodes())for(var o,i,r,s=t.childNodes,a=0;a<s.length;a++)if(o=s[a],1===o.nodeType)if(i=o.localName||o.baseName||o.nodeName,r=o.prefix||u.DEFAULTPREFIX,u.READERS[r][i]){var l=u.READERS[r][i];l(o,e)}else n(o,e)}function r(t){var e,o="";return t.hasChildNodes()&&(e=t.firstChild,3===e.nodeType&&(o=e.nodeValue)),o}function s(t){if(t.attributes.length>0){var e=i(t);for(var o in e)if(e.hasOwnProperty(o)){if("version"===o&&e.version!==u.VERSION)return void console.log("[ReverseGeocodeResponseReader] geocode version is not the expected one : there may be errors in parsing");if("xmlns"===o){if(e[o]!==u.NAMESPACES[u.DEFAULTPREFIX])return void console.log("[ReverseGeocodeResponseReader] geocode response default namespace is not the expected one");continue}var n=o.split(":")[0],r=o.split(":")[1];if("xmlns"===n&&r&&u.NAMESPACES[r]&&u.NAMESPACES[r]!==e[o])return void console.log("[ReverseGeocodeResponseReader] geocode response "+o+" namespace is not the expected one");if("schemaLocation"===r&&u.SCHEMALOCATION!==e[o])return void console.log("[ReverseGeocodeResponseReader] geocode response schema location is not the expected one")}}}var a=o(1),l=o(2),p=o(14),c=o(40),u={};u.VERSION="1.2",u.NAMESPACES={xmlns:"http://www.opengis.net/xls",gml:"http://www.opengis.net/gml",xls:"http://www.opengis.net/xls",xlsext:"http://www.opengis.net/xlsext",xsi:"http://www.w3.org/2001/XMLSchema-instance"},u.SCHEMALOCATION="http://wxs.ign.fr/schemas/olsAll.xsd",u.DEFAULTPREFIX="xls",u.READERS={xls:{XLS:function(t){var e=new p.a;return s(t),n(t,e),e},ReverseGeocodedLocation:function(t,e){var o=new c.a;n(t,o),e&&Array.isArray(e.locations)&&e.locations.push(o)},Address:function(t,e){var o=t.getAttribute("countryCode");e&&o&&(e.type=o),n(t,e)},Building:function(t,e){var o=t.getAttribute("number");e&&e.hasOwnProperty("placeAttributes")&&(o?e.placeAttributes.number=o:t.getAttribute("buildingName")?e.placeAttributes.number=t.getAttribute("buildingName"):t.getAttribute("subdivision")&&(e.placeAttributes.number=t.getAttribute("subdivision")))},Street:function(t,e){"StreetAddress"===e.type?e.placeAttributes.street=r(t):"CadastralParcel"===e.type&&(e.placeAttributes.cadastralParcel=r(t))},Place:function(t,e){var o=t.getAttribute("type"),i=r(t);if(e&&e.hasOwnProperty("placeAttributes"))if("Municipality"===o)e.placeAttributes.municipality=i;else if("Bbox"===o){var n=i.split(";");4===n.length&&(e.placeAttributes.bbox={left:parseFloat(n[0]),right:parseFloat(n[2]),top:parseFloat(n[1]),bottom:parseFloat(n[3])})}else"Commune"===o?e.placeAttributes.commune=i:"Departement"===o?e.placeAttributes.department=i:"INSEE"===o?e.placeAttributes.insee=i:"Qualite"===o?e.placeAttributes.quality=i:"Territoire"===o?e.placeAttributes.territory=i:"ID"===o?e.placeAttributes.ID=i:"ID_TR"===o?e.placeAttributes.IDTR=i:"Importance"===o?e.placeAttributes.importance=parseInt(i,10):"Nature"===o?e.placeAttributes.nature=i:"Numero"===o?e.placeAttributes.number=i:"Feuille"===o?e.placeAttributes.sheet=i:"Section"===o?e.placeAttributes.section=i:"CommuneAbsorbee"===o?e.placeAttributes.absorbedCity=i:"Arrondissement"===o?i&&(e.placeAttributes.arrondissement=i):"Type"===o?e.placeAttributes.origin=i:"Prefecture"===o?e.placeAttributes.prefecture=i:"InseeRegion"===o?e.placeAttributes.inseeRegion=i:"InseeDepartment"===o&&(e.placeAttributes.inseeDepartment=i)},PostalCode:function(t,e){e&&e.hasOwnProperty("placeAttributes")&&(e.placeAttributes.postalCode=r(t))},SearchCentreDistance:function(t,e){e&&(e.searchCenterDistance=parseFloat(t.getAttribute("value")))},Error:function(t){var e=t.getAttribute("message"),o=t.getAttribute("errorCode"),i=a.a.getMessage("SERVICE_RESPONSE_EXCEPTION","("+o+") : "+e);throw new l.a({message:i,type:l.a.TYPE_SRVERR})}},gml:{pos:function(t,e){var o=r(t);e&&o&&(e.position={x:parseFloat(o.split(" ")[0]),y:parseFloat(o.split(" ")[1])})}},xlsext:{ExtendedGeocodeMatchCode:function(t,e){e&&(e.matchType=r(t))}},ExceptionReport:function(t){var e={};if(t.hasChildNodes())for(var o,i=t.childNodes,n=0;n<i.length;n++)o=i[n],"Exception"===o.nodeName&&(e.exceptionReport=u.READERS.Exception(o));return e},Exception:function(t){var e={},o=t.getAttribute("exceptionCode");o&&(e.exceptionCode=o);var i=t.firstChild;return i&&3===i.nodeType&&(e.exception=i.nodeValue),e}},u.read=function(t){if("XLS"===t.nodeName){var e=t.prefix;e||(e=u.DEFAULTPREFIX);return u.READERS[e][t.nodeName](t)}if("ExceptionReport"===t.nodeName){return u.READERS[t.nodeName](t)}throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")},e.a=u},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError(a.a.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));if(this.CLASSNAME="AutoComplete",n.a.apply(this,arguments),this.logger=s.a.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]"),!t.text)throw new Error(a.a.getMessage("PARAM_MISSING","text"));this.options.text=t.text,t.filterOptions&&"object"==typeof t.filterOptions||(this.options.filterOptions=t.filterOptions={territory:[],type:["StreetAddress"]}),0===Object.keys(t.filterOptions).length&&(this.options.filterOptions={territory:[],type:["StreetAddress"]}),this.options.filterOptions.type=t.filterOptions.type||["StreetAddress"],this.options.filterOptions.territory=t.filterOptions.territory||[],this.options.maximumResponses=t.maximumResponses||10,"XHR"===this.options.protocol&&"POST"===this.options.httpMethod&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}var n=o(3),r=o(83),s=o(0),a=o(1),l=o(4),p=o(2);i.prototype=Object.create(n.a.prototype,{}),i.prototype.constructor=i,i.prototype.buildRequest=function(t,e){var o="";this.options.filterOptions.territory&&(o=this.options.filterOptions.territory.join(";"));var i="";this.options.filterOptions.type&&(i=this.options.filterOptions.type.join(",")),this.request=l.a.normalyzeParameters({text:encodeURIComponent(this.options.text),type:i,terr:o,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):t.call(this,new p.a(a.a.getMessage("SERVICE_REQUEST_BUILD")))},i.prototype.analyzeResponse=function(t,e){if(this.response){var o={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:t,scope:this};r.a.build(o)}else t.call(this,new p.a(a.a.getMessage("SERVICE_RESPONSE_EMPTY")))},e.a=i},function(t,e,o){"use strict";var i=o(0),n=o(1),r=o(2),s=o(41),a=o(42),l={build:function(t){var e=i.a.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var o=null;if(!t.response)return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_EMPTY")));if(t.rawResponse)e.trace("analyze response : raw"),o=t.response;else{var l;if(l="string"==typeof t.response?JSON.parse(t.response):t.response){if(l.error)return void t.onError.call(t.scope,new r.a({message:n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",l.error.description),status:l.error.code,type:r.a.TYPE_SRVERR}));if(o=new s.a,!l.results||!Array.isArray(l.results))return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_FORMAT_3")));for(var p,c=0;c<l.results.length;c++){var u=l.results[c];p=new a.a,p&&(u&&"StreetAddress"===u.country?(p.street=u.street,p.type="StreetAddress"):u&&"PositionOfInterest"===u.country&&(p.poi=u.street,p.kind=u.kind,p.type="PositionOfInterest"),p.position&&(p.position.x=u.x,p.position.y=u.y),p.commune=u.city,p.fullText=u.fulltext,p.postalCode=u.zipcode,p.classification=u.classification),o.suggestedLocations.push(p)}if(!o.suggestedLocations.length)return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_FORMAT_3")))}if(!o)return void t.onError.call(t.scope,new r.a({message:n.a.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:r.a.TYPE_UNKERR,status:-1}));if(o.exceptionReport)return void t.onError.call(t.scope,new r.a({message:n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",o.exceptionReport),type:r.a.TYPE_SRVERR,status:200}))}t.onSuccess.call(t.scope,o)}};e.a=l},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError(r.a.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",a.a.apply(this,arguments),this.logger=n.a.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!t.startPoint)throw new Error(r.a.getMessage("PARAM_MISSING","startPoint"));if(null===t.startPoint.x)throw new Error(r.a.getMessage("PARAM_MISSING","startPoint.x"));if(null===t.startPoint.y)throw new Error(r.a.getMessage("PARAM_MISSING","startPoint.y"));if(!t.endPoint)throw new Error(r.a.getMessage("PARAM_MISSING","endPoint"));if(null===t.endPoint.x)throw new Error(r.a.getMessage("PARAM_MISSING","endPoint.x"));if(null===t.endPoint.y)throw new Error(r.a.getMessage("PARAM_MISSING","endPoint.y"));if(this.options.api="string"==typeof t.api?t.api.toUpperCase():"REST",this.options.outputFormat="string"==typeof t.outputFormat?t.outputFormat.toLowerCase():"json",this.options.startPoint=t.startPoint,this.options.endPoint=t.endPoint,this.options.viaPoints=t.viaPoints||null,this.options.exclusions=t.exclusions||null,this.options.routePreference=t.routePreference||"fastest",this.options.graph=t.graph||"Voiture",this.options.geometryInInstructions=t.geometryInInstructions||!1,this.options.provideBbox=t.provideBbox||!0,this.options.distanceUnit=t.distanceUnit||"km",this.options.expectedStartTime=null,this.options.srs=t.srs||"EPSG:4326",this.options.api="REST",this.logger.warn("FIXME : Surcharge option 'api' : REST"),"XHR"===this.options.protocol&&(this.options.httpMethod="GET",this.logger.trace("Surcharge option 'HttpMethod' : "+this.options.httpMethod)),!this.options.serverUrl){var e=l.a.Route.url(this.options.apiKey),o=null;switch(this.options.api){case"OLS":o=e.ols;break;case"REST":o=e["route-"+this.options.outputFormat];break;default:throw new Error(r.a.getMessage("PARAM_UNKNOWN","api"))}if(!o)throw new Error("Url by default not found !");this.options.serverUrl=o,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}var s=this.options.serverUrl.lastIndexOf(".");if(-1!==s){var p=this.options.serverUrl.substring(s+1);if(p&&p.length<5)switch(this.logger.trace("Serveur Extension URL : "+p),p.toLowerCase()){case"json":case"xml":this.options.outputFormat=p.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}var n=o(0),r=o(1),s=o(2),a=o(3),l=o(5),p=o(85),c=o(93);i.prototype=Object.create(a.a.prototype,{}),i.prototype.constructor=i,i.prototype.buildRequest=function(t,e){var o={api:this.options.api,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,exclusions:this.options.exclusions,distanceUnit:this.options.distanceUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs};this.request=p.a.build(o),this.request?e.call(this,this.request):t.call(this,new s.a(r.a.getMessage("SERVICE_REQUEST_BUILD")))},
i.prototype.analyzeResponse=function(t,e){if(this.response){var o={distanceUnit:this.options.distanceUnit,response:this.response,outputFormat:this.options.outputFormat,api:this.options.api,rawResponse:this.options.rawResponse,onError:t,onSuccess:e,scope:this};c.a.build(o)}else t.call(this,new s.a(r.a.getMessage("SERVICE_RESPONSE_EMPTY")))},e.a=i},function(t,e,o){"use strict";var i=o(0),n=o(2),r=o(86),s=o(91),a={build:function(t){i.a.getLogger("RouteRequestFactory").trace(["RouteRequestFactory::build()"]);var e=null,o=t||{},a=!(null===t.onError||"function"!=typeof t.onError),l=null;switch(t.api){case"REST":var p=new s.a(o);if(!p.processRequestString()){if(l="Error process request (rest) !",a)return void t.onError.call(t.scope,new n.a(l));throw new Error(l)}e=p.requestString;break;case"OLS":if(!(e=r.a.build(o))){if(l="Error process request (ols) !",a)return void t.onError.call(t.scope,new n.a(l));throw new Error(l)}break;default:if(l="Type of API is not supported by service (REST or OLS) !",a)return void t.onError.call(t.scope,new n.a(l));throw new Error(l)}return e}};e.a=a},function(t,e,o){"use strict";var i=o(0),n=o(11),r=o(87),s={build:function(t){i.a.getLogger("RouteRequestOLS").trace(["RouteRequestOLS::build()"]);var e=null,o={startPoint:t.startPoint,endPoint:t.endPoint,viaPoint:t.viaPoints,provideBoundingBox:t.provideBbox,avoidFeature:t.exclusions,expectedStartTime:t.expectedStartTime,distanceUnit:t.distanceUnit,graph:t.graph,provideGeometry:t.geometryInInstructions,routePreference:t.routePreference},s=new r.a(o),a=new n.a({srsName:t.srs,maximumResponses:t.maximumResponses});if(a.namespace=!0,a.setService(s),e=a.build(),"GET"===t.httpMethod){e="qxml="+encodeURIComponent(e).replace(/-/g,"%2D").replace(/_/g,"%5F").replace(/\./g,"%2E").replace(/!/g,"%21").replace(/~/g,"%7E").replace(/\*/g,"%2A").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29")}return e}};e.a=s},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger(),this.logger.trace("[Constructeur RouteService ()]"),!(this instanceof i))throw new TypeError("RouteService constructor cannot be called as a function.");this.CLASSNAME="RouteService",this.CLASSTYPE="RouteRequest",r.a.apply(this,arguments)}var n=o(0),r=o(12),s=o(88),a=o(90),l=o.n(a);i.prototype=Object.create(r.a.prototype,{}),i.prototype.constructor=i,i.prototype.addRequest=function(t){if("DetermineRouteRequest"!==t.CLASSNAME)throw new Error("Ce n'est pas un objet de type 'Route Request' !?");this.oRequest=t},i.prototype.addFilter=function(t){t instanceof l.a&&(this.oFilter=t)},i.prototype.toString=function(){if(!this.oRequest){if(!this.options)throw new Error("Les options ne sont pas renseignées, impossible de construire la requête !");if("RouteRequest"===this.CLASSTYPE){var t={distanceUnit:this.options.distanceUnit||null,provideGeometry:this.options.provideGeometry||null,provideBoundingBox:this.options.provideBoundingBox||null,route:{routePreference:this.options.routePreference||null,startPoint:this.options.startPoint,viaPoint:this.options.viaPoint||null,endPoint:this.options.endPoint,avoidFeature:this.options.avoidFeature||null,graph:this.options.graph||null,expectedStartTime:this.options.expectedStartTime||null}};this.oRequest=new s.a(t),this.oFilter&&this.oRequest.addFilter(this.oFilter)}}if(!this.oRequest)throw new Error("Type de requête indefini !");return this.strRequest=this.oRequest.toString(),this.strRequest},e.a=i},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger(),this.logger.trace("[Constructeur DetermineRouteRequest ()]"),!(this instanceof i))throw new TypeError("DetermineRouteRequest constructor cannot be called as a function.");this.options=t||{};for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e]);this.CLASSNAME="DetermineRouteRequest"}var n=o(0),r=o(89);i.prototype={strRequest:null,oRoutePlan:null,template:{determineRouteRequest:'<DetermineRouteRequest distanceUnit="__DISTANCEUNIT__">__ROUTEPLAN____ROUTEINSTRUCTIONREQUEST____ROUTEGEOMETRYREQUEST____ROUTEMAPREQUEST__</DetermineRouteRequest>',routeInstructionRequest:'<RouteInstructionsRequest provideGeometry="__PROVIDEGEOMETRY__" provideBoundingBox="__PROVIDEBBOX__" />',routeGeometryRequest:"<RouteGeometryRequest />",routeMapRequest:""},addRoute:function(t){t instanceof r.a&&(this.oRoutePlan=t)},constructor:i,toString:function(){var t="";if(t=this.template.determineRouteRequest,t=t.replace(/__DISTANCEUNIT__/g,this.options.distanceUnit||"KM"),!this.oRoutePlan){var e=this.options.route;if(this.oRoutePlan=new r.a(e),!this.oRoutePlan)throw new Error("La construction du calcul d'initineraire n'est pas correctement definie !?")}t=t.replace(/__ROUTEPLAN__/g,this.oRoutePlan.toString());var o=this.template.routeInstructionRequest;o=o.replace(/__PROVIDEGEOMETRY__/g,this.options.provideGeometry||!1),o=o.replace(/__PROVIDEBBOX__/g,this.options.provideBoundingBox||!1),t=t.replace(/__ROUTEINSTRUCTIONREQUEST__/g,o);var i=this.template.routeGeometryRequest;t=t.replace(/__ROUTEGEOMETRYREQUEST__/g,i);var n=this.template.routeMapRequest;return t=t.replace(/__ROUTEMAPREQUEST__/g,n),this.strRequest=t,this.strRequest}},e.a=i},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger("RoutePlan"),this.logger.trace("[Constructeur RoutePlan ()]"),!(this instanceof i))throw new TypeError("RoutePlan constructor cannot be called as a function.");if(this.options=t||{},!t.startPoint)throw new Error("l'option 'startPoint' n'est pas renseignée !");if(!t.endPoint)throw new Error("l'option 'endPoint' n'est pas renseignée !");for(var e in t)t.hasOwnProperty(e)&&(this.options[e]=t[e])}var n=o(0);i.prototype={constructor:i,requestString:null,template:{routePlan:"<RoutePlan>__ROUTEPREFERENCE____GRAPH____WAYPOINTLIST____AVOIDLIST__</RoutePlan>",routePreference:"<RoutePreference>__VALUEROUTEPREFERENCE__</RoutePreference>",graph:'<xlsext:graphName xmlns:xlsext="http://www.opengis.net/xlsext" name="__VALUEGRAPH__"/>',wayPointList:{container:"<WayPointList>__STARTPOINT____VIAPOINT____ENDPOINT__</WayPointList>",point:'<Position><gml:Point xmlns:gml="http://www.opengis.net/gml"><gml:pos>__X__ __Y__</gml:pos></gml:Point></Position>',startPoint:"<StartPoint>__POINT__</StartPoint>",endPoint:"<EndPoint>__POINT__</EndPoint>",viaPoint:"<ViaPoint>__POINT__</ViaPoint>"},avoidList:{container:"<AvoidList>__AVOIDFEATURE__</AvoidList>",avoidFeature:"<AvoidFeature>__VALUEAVOIDFEATURE__</AvoidFeature>"}},toString:function(){var t="";if(t=this.template.routePlan,this.options.routePreference){var e=this.template.routePreference;e=e.replace(/__VALUEROUTEPREFERENCE__/,this.options.routePreference),t=t.replace(/__ROUTEPREFERENCE__/g,e)}if(t=t.replace(/__ROUTEPREFERENCE__/g,""),this.options.avoidFeature){for(var o=this.template.avoidList.container,i=[],n=0;n<this.options.avoidFeature.length;n++){var r=this.template.avoidList.avoidFeature;r=r.replace(/__VALUEAVOIDFEATURE__/,this.options.avoidFeature[n]),i.push(r)}o=o.replace(/__AVOIDFEATURE__/,i.join("\n")),t=t.replace(/__AVOIDLIST__/g,o)}if(t=t.replace(/__AVOIDLIST__/g,""),this.options.graph){var s=this.template.graph;s=s.replace(/__VALUEGRAPH__/,this.options.graph),t=t.replace(/__GRAPH__/g,s)}t=t.replace(/__GRAPH__/g,"");var a=this.template.wayPointList.container,l="";if(l=this.template.wayPointList.point,l=l.replace(/__X__/,this.options.startPoint.x),l=l.replace(/__Y__/,this.options.startPoint.y),a=a.replace(/__STARTPOINT__/,this.template.wayPointList.startPoint.replace(/__POINT__/,l)),l=this.template.wayPointList.point,l=l.replace(/__X__/,this.options.endPoint.x),l=l.replace(/__Y__/,this.options.endPoint.y),a=a.replace(/__ENDPOINT__/,this.template.wayPointList.endPoint.replace(/__POINT__/,l)),this.options.viaPoint){for(var p=[],c=0;c<this.options.viaPoint.length;c++){var u=this.options.viaPoint[c];l=this.template.wayPointList.point,l=l.replace(/__X__/,u.x),l=l.replace(/__Y__/,u.y),p.push(l)}a=a.replace(/__VIAPOINT__/,this.template.wayPointList.viaPoint.replace(/__POINT__/,p.join("\n")))}else a=a.replace(/__VIAPOINT__/,"");return t=t.replace(/__WAYPOINTLIST__/g,a),this.requestString=t,this.requestString}},e.a=i},function(t,e){return e},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof i))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!t)throw new Error(r.a.getMessage("PARAM_EMPTY","options"));this.settings=t}var n=o(0),r=o(1),s=o(92);i.prototype={requestString:null,constructor:i,processRequestString:function(){this.logger.warn("FIXME : PROTOTYPE !");for(var t=new s.a(this.settings),e=t.getParams(),o="",i=0;i<e.length;i++){var n=e[i];o&&(o+="&"),o+=n.k+"="+n.v}return this.logger.trace(o),this.requestString=o,this.requestString}},e.a=i},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError("RouteParamREST constructor cannot be called as a function.");if(this.logger=n.a.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=t||{},this.origin=this.options.startPoint.x+","+this.options.startPoint.y,this.destination=this.options.endPoint.x+","+this.options.endPoint.y,this.waypoints=this.options.viaPoints||null,this.startDateTime=this.options.expectedStartTime||null,this.graphName=this.options.graph,this.srs=this.options.srs,this.exclusions=this.options.exclusions,this.method="TIME",this.options.routePreference){switch(this.options.routePreference){case"fastest":this.method="TIME";break;case"shortest":this.method="DISTANCE";break;default:this.logger.warn("Par defaut, on prend l'itinéraire le plus rapide !"),this.method="TIME"}}this.format=this.options.geometryInInstructions?"STANDARDEXT":"STANDARD",this.tolerance=10,this.profileId=null,this.profileName=null}var n=o(0);i.CLASSNAME="RouteParamREST",i.prototype={constructor:i,getWaypoints:function(){if(this.waypoints){for(var t=[],e=0;e<this.waypoints.length;e++){var o=this.waypoints[e];t.push(o.x+","+o.y)}return t.join(";")}},getExclusions:function(){return this.exclusions.join(";")}},i.prototype.getParams=function(){var t=[];return t.push({k:"origin",v:this.origin}),t.push({k:"destination",v:this.destination}),t.push({k:"method",v:this.method}),this.waypoints&&t.push({k:"waypoints",v:this.getWaypoints()}),this.startDateTime&&t.push({k:"startDateTime",v:this.startDateTime}),this.graphName&&t.push({k:"graphName",v:this.graphName}),this.exclusions&&t.push({k:"exclusions",v:this.getExclusions()}),this.srs&&t.push({k:"srs",v:this.srs}),this.format&&t.push({k:"format",v:this.format}),t},e.a=i},function(t,e,o){"use strict";var i=o(0),n=o(1),r=o(2),s=o(6),a=o(8),l=o(94),p=o(95),c=o(16),u=o(17),h={build:function(t){var e=i.a.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var o=null;if(!t.response)return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_EMPTY")));if(t.rawResponse)e.trace("analyze response : raw"),o=t.response;else{switch(t.outputFormat){case"xml":e.trace("analyze response : xml");var h="REST"===t.api?l.a:p.a;try{var d=new s.a({reader:h});if("string"==typeof t.response?d.setXMLString(t.response):d.setXMLDoc(t.response),!(o=d.parse()))throw new r.a(n.a.getMessage("SERVICE_RESPONSE_FORMAT","xml"))}catch(e){return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_ANALYSE",t.response)))}break;case"json":e.trace("analyze response : json");var f;if(f="string"==typeof t.response?JSON.parse(t.response):t.response,f.message)return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",f.message)));if(f){var y=[],g=[],m=[];if(o=new c.a,o.hasOwnProperty("totalTime")&&(o.totalTime=parseFloat(f.durationSeconds)),o.hasOwnProperty("totalDistance")&&(o.totalDistance="m"===t.distanceUnit?f.distanceMeters:f.distance),o.hasOwnProperty("bbox")){var v=f.bounds.split(/[,;]/);o.bbox.left=parseFloat(v[0]),o.bbox.bottom=parseFloat(v[1]),o.bbox.right=parseFloat(v[2]),o.bbox.top=parseFloat(v[3])}var _=function(t){o.routeGeometry=t},b=function(e){console.log(e),t.onError.call(t.scope,new r.a(n.a.getMessage("PARAM_FORMAT",["geometryWkt"])))};if(o.hasOwnProperty("routeGeometry")){var E=f.geometryWkt||f.simplifiedWkt;if(E&&(a.a.toJson(E,_,b),!o.routeGeometry))return}if(o.hasOwnProperty("routeInstructions")){var S,w=f.legs;if(Array.isArray(w)&&w.length)for(S=0;S<w.length;S++)y.push(w[S]);if(Array.isArray(y)&&y.length)for(S=0;S<y.length;S++)g.push(y[S].steps);if(Array.isArray(g)&&g.length)for(S=0;S<g.length;S++)m=m.concat(g[S]);m.forEach(function(e){o.routeInstructions.push(new u.a),o.routeInstructions[o.routeInstructions.length-1].duration=e.durationSeconds,o.routeInstructions[o.routeInstructions.length-1].distance="m"===t.distanceUnit?e.distanceMeters:e.distance,o.routeInstructions[o.routeInstructions.length-1].code=e.navInstruction;for(var i=[],n=0;n<e.points.length;n++){var r=e.points[n].split(",");r&&i.push(r)}switch(i&&0!==i.length?o.routeInstructions[o.routeInstructions.length-1].geometry={coordinates:i,type:"LineString"}:o.routeInstructions[o.routeInstructions.length-1].geometry=null,"Valeur non renseignée"===e.name&&(e.name=""),e.navInstruction){case"F":e.name?o.routeInstructions[o.routeInstructions.length-1].instruction="Tout droit "+e.name:o.routeInstructions[o.routeInstructions.length-1].instruction="Continuer tout droit ";break;case"B":o.routeInstructions[o.routeInstructions.length-1].instruction="Demi-tour "+e.name;break;case"L":o.routeInstructions[o.routeInstructions.length-1].instruction="Tourner à gauche "+e.name;break;case"R":o.routeInstructions[o.routeInstructions.length-1].instruction="Tourner à droite "+e.name;break;case"BL":o.routeInstructions[o.routeInstructions.length-1].instruction="Tourner très à gauche "+e.name;break;case"BR":o.routeInstructions[o.routeInstructions.length-1].instruction="Tourner très à droite "+e.name;break;case"FL":o.routeInstructions[o.routeInstructions.length-1].instruction="Tourner légèrement à gauche "+e.name;break;case"FR":o.routeInstructions[o.routeInstructions.length-1].instruction="Tourner légèrement à droite "+e.name;break;case"round_about_entry":o.routeInstructions[o.routeInstructions.length-1].instruction="Entrée rond-point "+e.name;break;case"round_about_exit":o.routeInstructions[o.routeInstructions.length-1].instruction="Sortie rond-point "+e.name;break;case null:o.routeInstructions[o.routeInstructions.length-1].instruction="Prendre tout droit "+e.name;break;default:o.routeInstructions[o.routeInstructions.length-1].instruction="?"+e.navInstruction+"? "+e.name}})}}if(!o)return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_ANALYSE","json")));break;default:return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_FORMAT","json","xml")))}if(o&&o.exceptionReport)return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_EXCEPTION_2")))}t.onSuccess.call(t.scope,o)}};e.a=h},function(t,e,o){"use strict";function i(t){var e,o="";return t.hasChildNodes()&&(e=t.firstChild)&&3===e.nodeType&&(o=e.nodeValue),o}function n(t,e){if(t.hasChildNodes())for(var o,i,r=t.childNodes,s=0;s<r.length;s++)if(o=r[s],1===o.nodeType)if(i=o.localName||o.baseName||o.nodeName,c.READERS[i]){var a=c.READERS[i];a(o,e)}else n(o,e)}var r=o(1),s=o(8),a=o(2),l=o(16),p=o(17),c={};c.READERS={routeResult:function(t){var e=new l.a;if(n(t,e),"error"===e.status){var o=r.a.getMessage("SERVICE_RESPONSE_EXCEPTION",e.message);throw new a.a({message:o,type:a.a.TYPE_SRVERR})}return e},status:function(t,e){var o=i(t);"ERROR"!==o&&"error"!==o||e&&(e.status="error")},message:function(t,e){e&&(e.message=i(t))},distance:function(t,e){e&&(e.totalDistance=i(t))},durationSeconds:function(t,e){e&&(e.totalTime=parseFloat(i(t)))},bounds:function(t,e){if(e&&e.bbox){var o=i(t).split(/[,;]/);e.bbox.left=parseFloat(o[0]),e.bbox.bottom=parseFloat(o[1]),e.bbox.right=parseFloat(o[2]),e.bbox.top=parseFloat(o[3])}},geometryWkt:function(t,e){if(e){var o=t.innerHTML,i=function(t){e.routeGeometry=t},n=function(){var t=r.a.getMessage("PARAM_FORMAT",["geometryWkt"]);throw new Error(t)};s.a.toJson(o,i,n)}},step:function(t,e){var o,n=new p.a;if(t.hasChildNodes)for(var r,s,a=t.childNodes,l=0;l<a.length;l++)r=a[l],1===r.nodeType&&(s=r.localName||r.baseName||r.nodeName,"durationSeconds"===s?n.duration=i(r):"distance"===s?n.distance=i(r):"navInstruction"===s?n.code=i(r):"name"===s&&(o=i(r)));if(n.code)switch(n.code){case"F":n.instruction="Valeur non renseignée"!==o?"Tout droit "+o:"Continuer tout droit ";break;case"B":n.instruction="Demi-tour "+o;break;case"L":n.instruction="Tourner à gauche "+o;break;case"R":n.instruction="Tourner à droite "+o;break;case"BL":n.instruction="Tourner très à gauche "+o;break;case"BR":n.instruction="Tourner très à droite "+o;break;case"FL":n.instruction="Tourner légèrement à gauche "+o;break;case"FR":n.instruction="Tourner légèrement à droite "+o;break;case"round_about_entry":n.instruction="Entrée rond-point "+o;break;case"round_about_exit":n.instruction="Sortie rond-point "+o;break;case null:n.instruction="Prendre "+o;break;default:n.instruction="?"+n.code+"? "+o}Array.isArray(e.routeInstructions)&&e.routeInstructions.push(n)}},c.read=function(t){if("routeResult"===t.nodeName)return c.READERS.routeResult(t);throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")},e.a=c},function(t,e,o){"use strict";var i=o(0),n={};n.READERS={},n.read=function(t){i.a.getLogger("RouteResponseOLSReader").error("not yet implemented !")},e.a=n},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError(r.a.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",a.a.apply(this,arguments),this.logger=n.a.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!t.position)throw new Error(r.a.getMessage("PARAM_MISSING","position"));if(null===t.position.x)throw new Error(r.a.getMessage("PARAM_MISSING","position.x"));if(null===t.position.y)throw new Error(r.a.getMessage("PARAM_MISSING","position.y"));if(!t.time&&!t.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!t.time&&t.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),t.time&&!t.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.exclusions=t.exclusions||null,this.options.graph=t.graph||"Voiture",this.options.reverse=t.reverse||!1,this.options.smoothing=t.smoothing||!1,this.options.holes=t.holes||!1,this.options.srs=t.srs||"EPSG:4326",this.options.outputFormat="string"==typeof t.outputFormat?t.outputFormat.toLowerCase():"json",!this.options.serverUrl){var e=l.a.ProcessIsoCurve.url(this.options.apiKey),o=e["iso-"+this.options.outputFormat];if(!o)throw new Error("Url by default not found !");this.options.serverUrl=o,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}var s=this.options.serverUrl.lastIndexOf(".");if(-1!==s){var p=this.options.serverUrl.substring(s+1);if(p&&p.length<5)switch(this.logger.trace("Serveur Extension URL : "+p),p.toLowerCase()){case"json":case"xml":this.options.outputFormat=p.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}var n=o(0),r=o(1),s=o(2),a=o(3),l=o(5),p=o(97),c=o(99);i.prototype=Object.create(a.a.prototype,{}),i.prototype.constructor=i,i.prototype.buildRequest=function(t,e){try{var o=new p.a(this.options);if(!o.processRequestString())throw new Error(r.a.getMessage("SERVICE_REQUEST_BUILD"));this.request=o.requestString}catch(e){return void t.call(this,new s.a(e.message))}e.call(this,this.request)},i.prototype.analyzeResponse=function(t,e){if(this.response){var o={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:t,scope:this};c.a.build(o)}else t.call(this,new s.a(r.a.getMessage("SERVICE_RESPONSE_EMPTY")))},e.a=i},function(t,e,o){"use strict";function i(t){if(this.logger=n.a.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof i))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!t)throw new Error(r.a.getMessage("PARAM_EMPTY","options"));this.settings=t,this.mode=this.settings.httpMethod||"GET"}var n=o(0),r=o(1),s=o(98);i.prototype={requestString:null,constructor:i,template:{container:'<?xml version="1.0" encoding="UTF-8"?>\n<isochroneRequest>\n__ID__\t<location>\n\t\t<x>__X__</x>\n\t\t<y>__Y__</y>\n\t</location>\n\t<srs>__SRS__</srs>\n\t<graphName>__GRAPHNAME__</graphName>\n__PROFIL____EXCLUSIONS__\t<method>__METHOD__</method>\n__TIME____DISTANCE__\t<reverse>__REVERSE__</reverse>\n\t<smoothing>__SMOOTHING__</smoothing>\n\t<holes>__HOLES__</holes>\n</isochroneRequest>',id:"\t<id>__IDVALUE__</id>\n",profil:"\t<profileId>__PROFILID__</profileId>\n\t<profileName>__PROFILNAME__</profileName>\n",exclusions:{container:"\t<exclusions>\n__EXCLUSIONFEATURE__\n\t</exclusions>\n",feature:"\t\t<exclusion>__EXCLUSIONVALUE__</exclusion>"},time:"\t<time>__TIMEVALUE__</time>\n",distance:"\t<distance>__DISTANCEVALUE__</distance>\n"},processRequestString:function(){var t="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var o=new s.a(this.settings),i=o.getParams();for(e=0;e<i.length;e++){var n=i[e];t&&(t+="&"),t+=n.k+"="+n.v}break;case"POST":if(this.logger.trace("Process POST Request"),t=this.template.container,t=t.replace(/__ID__/g,""),t=t.replace(/__PROFIL__/g,""),t=t.replace(/__X__/g,this.settings.position.x),t=t.replace(/__Y__/g,this.settings.position.y),t=t.replace(/__GRAPHNAME__/g,this.settings.graph),t=t.replace(/__SRS__/g,this.settings.srs),t=t.replace(/__SMOOTHING__/g,this.settings.smoothing),t=t.replace(/__HOLES__/g,this.settings.holes),t=t.replace(/__REVERSE__/g,this.settings.reverse),this.settings.exclusions){var r=this.template.exclusions.container,a=[];for(e=0;e<this.settings.exclusions.length;e++){var l=this.template.exclusions.feature;l=l.replace(/__EXCLUSIONVALUE__/,this.settings.exclusions[e]),a.push(l)}r=r.replace(/__EXCLUSIONFEATURE__/,a.join("\n")),t=t.replace(/__EXCLUSIONS__/g,r)}if(t=t.replace(/__EXCLUSIONS__/g,""),this.settings.distance){var p=this.template.distance;p=p.replace(/__DISTANCEVALUE__/g,this.settings.distance),t=t.replace(/__DISTANCE__/g,p),t=t.replace(/__METHOD__/g,"distance")}if(t=t.replace(/__DISTANCE__/g,""),this.settings.time){var c=this.template.time;c=c.replace(/__TIMEVALUE__/g,this.settings.time),t=t.replace(/__TIME__/g,c),t=t.replace(/__METHOD__/g,"time")}t=t.replace(/__TIME__/g,"");break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(t),this.requestString=t,this.requestString}},e.a=i},function(t,e,o){"use strict";function i(t){if(!(this instanceof i))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");switch(this.logger=n.a.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=t||{},this.id=this.options.id,this.location=this.options.position,this.srs=this.options.srs,this.graphName=this.options.graph,this.profileId=this.options.profileId||null,this.profileName=this.options.profileName||null,this.exclusions=this.options.exclusions,this.reverse=this.options.reverse,this.smoothing=this.options.smoothing,this.holes=this.options.holes,this.options.method){case"time":this.method="time",this.time=this.options.time;break;case"distance":this.method="distance",this.distance=this.options.distance;break;default:this.logger.warn("Par defaut, on calcule un isochrone !"),this.method="time"}}var n=o(0);i.CLASSNAME="ProcessIsoCurveParam",i.prototype={constructor:i,getLocation:function(){return this.location.x+","+this.location.y},getExclusions:function(){return this.exclusions.join(";")}},i.prototype.getParams=function(){var t=[];return t.push({k:"location",v:this.getLocation()}),t.push({k:"smoothing",v:this.smoothing}),t.push({k:"holes",v:this.holes}),t.push({k:"reverse",v:this.reverse}),t.push({k:"method",v:this.method}),this.time&&t.push({k:"time",v:this.time}),this.distance&&t.push({k:"distance",v:this.distance}),t.push({k:"graphName",v:this.graphName}),this.exclusions&&t.push({k:"exclusions",v:this.getExclusions()}),this.srs&&t.push({k:"srs",v:this.srs}),t},e.a=i},function(t,e,o){"use strict";var i=o(0),n=o(1),r=o(2),s=o(6),a=o(8),l=o(100),p=o(18),c={build:function(t){var e=i.a.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var o=null;if(!t.response)return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_EMPTY")));if(t.rawResponse)e.trace("analyze response : raw"),o=t.response;else{switch(t.outputFormat){case"xml":e.trace("analyze response : xml");try{var c=new s.a({reader:l.a});if("string"==typeof t.response?c.setXMLString(t.response):c.setXMLDoc(t.response),!(o=c.parse()))throw new Error(n.a.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(e){var u=e.message;return u+="\n (raw response service : '"+t.response+"')",void t.onError.call(t.scope,new r.a({message:n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",u),status:200,type:r.a.TYPE_SRVERR}))}break;case"json":e.trace("analyze response : json");var h;if(h="string"==typeof t.response?JSON.parse(t.response):t.response,"OK"===h.status||"ok"===h.status){if(!(o=new p.a))return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_ANALYSE",t.response)));o.time=h.time,o.distance=h.distance,o.message=h.message,o.id=h.id,o.srs=h.srs;var d=function(t){o.geometry=t},f=function(){t.onError.call(t.scope,new r.a({message:n.a.getMessage("PARAM_FORMAT","wktGeometry")}))};if(o.hasOwnProperty("geometry")&&(a.a.toJson(h.wktGeometry,d,f),!o.geometry))return;var y=h.location.split(",");o.location&&(o.location.x=y[0],o.location.y=y[1])}else if("ERROR"===h.status||"error"===h.status){var g=h.message;return g+="\n (raw response service : '"+h+"')",void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",g)))}break;default:return void t.onError.call(t.scope,new r.a(n.a.getMessage("SERVICE_RESPONSE_FORMAT","json","xml")))}if(o&&o.exceptionReport)return void t.onError.call(t.scope,new r.a({message:n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",o.exceptionReport),type:r.a.TYPE_SRVERR,status:200}))}t.onSuccess.call(t.scope,o)}};e.a=c},function(t,e,o){"use strict";function i(t){var e,o="";return t.hasChildNodes()&&(e=t.firstChild)&&3===e.nodeType&&(o=e.nodeValue),o}var n=o(1),r=o(8),s=o(2),a=o(18),l={};l.READERS={isochronResult:function(t){var e=new a.a;if(t.hasChildNodes())for(var o,i=t.childNodes,r=0;r<i.length;r++)o=i[r],l.READERS[o.nodeName]&&l.READERS[o.nodeName](o,e);if("error"===e.status){var p=n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",e.message);throw new s.a({message:p,type:s.a.TYPE_SRVERR})}return e},message:function(t,e){e&&(e.message=i(t))},status:function(t,e){var o=i(t);"ERROR"!==o&&"error"!==o||e&&(e.status="error")},id:function(t,e){e&&(e.id=i(t))},location:function(t,e){var o=i(t);e&&e.location&&(e.location.x=parseFloat(o.split(",")[0]),e.location.y=parseFloat(o.split(",")[1]))},srs:function(t,e){e&&(e.srs=i(t))},distance:function(t,e){e&&(e.distance=parseFloat(i(t)))},time:function(t,e){e&&(e.time=parseFloat(i(t)))},wktGeometry:function(t,e){if(e){var o=t.innerHTML,i=function(t){e.geometry=t},s=function(){var t=n.a.getMessage("PARAM_FORMAT",["wktGeometry"]);throw new Error(t)};e.hasOwnProperty("geometry")&&r.a.toJson(o,i,s)}},serviceResult:function(t){var e={};if(t.hasChildNodes())for(var o,i=t.childNodes,n=0;n<i.length;n++)o=i[n],l.READERS[o.nodeName]&&l.READERS[o.nodeName](o,e);return e},ExceptionReport:function(t){var e={};if(t.hasChildNodes())for(var o,i=t.childNodes,n=0;n<i.length;n++)o=i[n],"Exception"===o.nodeName&&(e.exceptionReport=l.READERS.Exception(o));return e},Exception:function(t){var e={},o=t.getAttribute("exceptionCode");o&&(e.exceptionCode=o);var i=t.firstChild;return i&&3===i.nodeType&&(e.exception=i.nodeValue),e}},l.read=function(t){var e;if("isochronResult"===t.nodeName||"isochroneResult"===t.nodeName||"IsochroneResult"===t.nodeName)return e=l.READERS.isochronResult(t);if("ExceptionReport"===t.nodeName)return e=l.READERS[t.nodeName](t);if(l.READERS[t.nodeName]){if(e=l.READERS[t.nodeName](t),"error"===e.status){var o=n.a.getMessage("SERVICE_RESPONSE_EXCEPTION",e.message);throw new s.a({message:o,type:s.a.TYPE_SRVERR})}return e}throw new s.a({message:n.a.getMessage("SERVICE_RESPONSE_ANALYSE",t.nodeName),type:s.a.TYPE_UNKERR})},e.a=l}]).default}),e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={getZoomLevelFromScaleDenominator:function(t,e){var o={};switch(e){case"EPSG:2154":o={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:o={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424}}var i=28e-5*t;for(var n in o)if(o.hasOwnProperty(n)&&o[n]<=i)return n=parseInt(n,10);return 0},getAttributions:function(t){var e=t.zoom,o=[];if(null!=t.originators&&t.visibility)for(var i,n=0,r=t.originators.length;n<r;n++){i=!0;for(var s=t.originators[n],a=t.originators[n].constraints||[],l=0,p=a.length;l<p;l++){var c=a[l];i=!0;var u=this.getZoomLevelFromScaleDenominator(c.maxScaleDenominator,t.crs),h=this.getZoomLevelFromScaleDenominator(c.minScaleDenominator,t.crs)||21;u&&u>e&&(i=!1),i&&null!==h&&h<e&&(i=!1);var d=c.bbox;if(i&&d){i=!1;var f=t.extent;if(f){var y=[d.top,d.left,d.bottom,d.right];if(this.intersects(f,y)){i=!0;break}}}}if(i){var g=s.logo,m=s.url,v=s.name?s.name:"",_=s.attribution,b=document.createElement("div");b.className="gp-control-attribution";var E=null;E=document.createElement("a"),E.className="gp-control-attribution-link",E.target="_blank",b.appendChild(E),m&&(E.href=m);var S=!!g,w=null;S?(w=document.createElement("img"),E?(w.className="gp-control-attribution-image",E.appendChild(w)):(w.className="",b.appendChild(w)),w.src=g,w.title=_||v,w.style.height="30px",w.style.width="30px"):E.textContent=v||(_||(m||"")),o.push(b.innerHTML+" ")}}return o},intersects:function(t,e){var o=t[1]<=e[3]&&e[1]<=t[3],i=t[2]<=e[0]&&e[2]<=t[0];return o&&i}};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(3),r=i(n),s=o(10),a=i(s);return e.default={check:function(t){var e=r.default.getLogger("checkrightmanagement");if(!t)return void e.error("WARNING : no parameter specified !");var o=t.key,i=t.resources||[],n=t.services||[];if(!i||0===i.length)return void e.error("WARNING : no parameter 'resources' specified !");if(!n||0===n.length)return void e.error("WARNING : no parameter 'services' specified !");var s={};if(!o){if(!a.default.isConfigLoaded())return void console.log("WARNING : The 'apiKey' parameter is missing, and the contract key configuration has not been loaded, so impossible to check yours rights !");o=Object.keys(a.default.configuration.generalOptions.apiKeys)[0],e.log(o)}if(o){if(a.default.isConfigLoaded()){for(var l=0;l<i.length;l++)for(var p=i[l],c=0;c<n.length;c++){var u=n[c],h=a.default.getServiceParams(p,u,o)
;h&&0!==Object.keys(h).length?(s[u]||(s[u]=[]),s[u].push(p)):console.log("WARNING : The contract key configuration has no rights to load this geoportal resource ("+p+") for this service ("+u+") ")}return s&&0!==Object.keys(s).length?(s.key=o,e.log("right management checked",s),s):void console.log("WARNING : The contract key configuration has been loaded, and the 'apiKey' parameter has been set, but, there is a problem on the mapping between the contract and the key !")}console.log("WARNING : the contract key configuration has not been loaded, so be carefull !");for(var d={},f=0;f<n.length;f++){var y=n[f];d[y]=[];for(var g=0;g<i.length;g++){var m=i[g];d[y].push(m)}}return d.key=o,e.log("right management not checked",d),d}}},e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARDSURBVFiF3ZndaxxVGMZ/Z/YjX00Nadpo1qrFBgu56D9QbAtiLoRC7ywSNK1NURRREBKRFlSwFBW0gnSrJXY1CmISgyjFiyYSFC9ajE3MmpjdjWlMUtNos9lN9mteLzbRuCbZmTMTBB+Yi51znvd5n3nPnjnnjBIR/i/wuh4xpCpI0ojiENAA1AE1wCzwKzCE0EM5l2iShJvSyrXKnFVb8dOK4hmg3AIjifAmaU7ztMy7kYI7Zs6rQwjvka+AXcyiOMZx6XGahuE0AEHVitCFnhGAGoQugqrVaSrOKpNP4FWnSaxCGy1yWpesbyY/tLpwo7p/w0RxWHfI6Zk5q7ZSwhj6Q2sjzJLiXp1JQe+p+mllc4wA1CzHtw37lQmpCha5gbXpVxdJythh9z1kvzJJGrFixPBmOXixl+Z4mONmguZ4mIMXezG8WQsq5cs6tmDfTP7NXiSqN0vTzBD1TQfwbdmDUhX4tuyhvukATTNDlgxZ0SmUtUsgv0TZGPsv9FNSvXfNtpLqvey/0O+KTgF0zNQV7XHP4dsdtVvVKYCOmeqiPbwVOx21W9UpgI6ZWNEe2cSEo3arOgWwb0YYLp5G17Sjdqs6BdCZzYqL9B3dR2puYM221NwAfUf3uaJTAB0zaye5GmbWS6i2gdFQL5mFMCIJMgthRkO9hGobMLPFN4VWdAoptlcAQeUDRoG77YrZwDhQT4tk7JDsV6ZFMggv2+bZwyt2jYDuQnOa94GIFrc4IkzRrkPUM3NKsijatLjF0copsbJ++xec7TTPqw6EI/oB/glT+PC+13Y/aSQNv/Is+tNer09lMn7DMHwAYppp8fvTIpISkVQsFrslqww4M9OuqkgzANzl1MhCyrjZGAycm573pK1yFCyi5FoWvo/FYlPOT2fOqftRXMbB9lkEs+3zbe2f/FD5i3YMj2p3vn8/IV8DZ5yE+Gqkot+JEQCPada5dRhxEriiQ5ya90w+272916F+KpnJDLhjpkUy5HgESNqhZU2Vfr5ne+dSFtOBeso06J6cnEy6d0z0hPwEPGeH8sGVykvfjpfe1NZUci2+mHg7Go2G8z/d/goQVJ9B8S1veMYffujduo/thl+ZwUzDuBqJRGZWt7n/FcDH46lFNVLilar1uiTTxsJTnTssH/QpJVlMNQa5wbGJiWERya3Vz30zzfLb3OveY3dU5j5dp4e80Xdbd3TOu/H/yyAtpjnqgeGS8crRQRks+v5xf5gtY/KM/6NAVebhwvv90bLvHu2o/XId2pJSMmIaxo/RaHRMxN6yZtPM0K5K/7hl/FxVZgZWbs0mPDceeKcuGE95/kpSKUmaImHDNIfHrl+PiIj2zOb+MFvBY7IUOVl2ZG9g6bJH4ckJuRe/2NYZT3myKIkrGM4pNRyLjY+LW09URDb1+uaF0pfm3zJ+7zhRGdq1c9eDuwOBOzdLa/OG2X+APwE8DU64Y/5gfAAAAABJRU5ErkJggg==",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQ+SURBVFiF3ZlLaFxlGIaf/5zJpJNpaoxpYieoCxULEYK7Lqp0IWQhFLooKNKEtNIULxWlQoJgQQWLFMEg0lQMuXgD0dRSkNJFgoy0IrYNSTpj08xMmoxNYhLUyUwyt/O5mFbjmGTOLS58d3O+y/u95/vnvx0lIvxf4HE9Y7PyU0ETwl6gAQgANcA88AswhuIsKc7TJ0k3qZVrnTmqtpGhHeFloMJERArF+3g5Qaf84UYJ7og5rPai+JhCB6xiHuEQp+Ws0zI0pwloU+0oBrAnBKAGxQBtqt1pKc46UyjgHadFrEIHXXLCbrB9MYWhNYAb3f0bBsI+u0POnpijahtpJrA/tDbCPOU8aGdSsPdWM7SzOUIAam7ntwzrnWlWfnzMYW76tYsUy9RaXYesd6aCJswI0Tw5WvuG6EyEOWUk6UyEae0bQvPkTLEUeCzBupjCyl4iqyfHydkxdh3YQ/nWnSjlp3zrTnYd2MPJ2TFTgszwFNNaDaCwRdkYLd1B/NWNa9r81Y20dAdd4SmCHTGBkh6P7bvXkd0sTxHsiKku6eH13+fIbpanCHbExEp6ZJJTjuxmeYpgXYwiVNLnysCMI7tZniLYmc1Kk/Qe3E1ycXhNW3JxmN6Du13hKYIdMWsXuRpGzsOxugYu9Q+RXgojkiS9FOZS/xDH6howcqUPhWZ4imB9B9CmyoBx4AGrZBYwCTxMl2StBFnvTJdkUbxlOc4a3rYqBOxuNHfQC0RsxZZGhAA9dgLtiTkuOYQOW7Gl0c5xMbN/+xecnTQPq89QPGM/wT9hCJ8+MvjQ81pK8yp92ZvxeMpUNuvVNK0MQAwjI15vRkTSIpKOxWK/yyoBzsS0qiq8DAP3OxWylNMWmoL1XTMresZsjIJllIzk4GosFrvl/HbmiHoCYRAHx2cBo2Pknp4v45U3befQVY/z8/sp+Q5410mKC7P+oBMhALphBNy6jHgDxU92Am+t6PFXhrcPOeRPp7LZYXfEdEkWjWeBlJWwnKEyr41s/3rFwHDAnjY0zsTj8ZR710Qfys/Aq1ZCPrlZef7iwpYF25xKRhLLyQ+i0Wi48NPtrwBt6hsofeQNJ7zhp74PfGE1/Z0ZzNC0y5FIZHa1zf2vAFmeS2vqerkuVeu5pPLa0otXa01f9CklOQw1AfnRiampkIjk1/JzX0y3/LrY7Dm0w5f/ah0Pee/GXWeiSc/G/y+NjBjGuA6h8snK8VEZLbn+uD/MbiPe7P283pd9uvh5cMH3Q8uPdd+uE7ailFw3NO1aNBqdELG2rdk0MbSqLb8p7UZVmVF/59F8Wp97Mhg4ncjqfxWplKQMkbBmGKGJ6emIiNie2TZPDHB5v+/xxrtXBnWFnhfyL1yp/ejCXMUMShIKQnmlQrFYbFJcKmJTxQBc3O9789FtmZfOzfjPvT5S068bmWvj09PTm8G16WL+S/wJLybNu1V6htkAAAAASUVORK5CYII=",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQxSURBVFiF3ZldaBxVFMd/d2ayTRtjQpo2mlilWBEMshoj+FAERZIHIdA3iw+V1icRREFIQAKNgsUHQfBFwZI2WgWxqYUiVTDBBj9ILC5Nu2tjdjemsR+mSZNNNvsxO8eHTTRuk+zMnQmCf9iHnXvO+Z//nDvn3rmjRIT/C6zAI4ZVFRbtKDpQNCM0AvXANIo/EC4inMbmLBFZDJJaBVaZJ9Sd2HQCrwDbXHikgfewOMKPMh9ECsGIeVx1IHxEsQJeMY3iEMNy2m8aht8AtKpOhH70hADUI/TTqjr9puKvMsUE3vabxCp0MSJHdJ31xRSnVj9BVPcfOCj26U45PTHFh30c/am1EaaxuF+nKejd1WLX2gwhAPXL8T3De2XCqooKbuCu/eoiTZ6dXtch75WxaMeNENOyOXx8kHOpGMPOIudSMQ4fH8S0bBcs25Z5PMF7ZVpVL3BgQxvTsvn6+kVq6sK3jc3NRGhraKZgl9t9HGNEXvCSmvfKKJrL2nQfHVpTCEBNXZjuo0OB8JTAu5jiXmtjPL3vLl/jbnlKoNPN6spaVFbt8jXulqcEOmKSZS0yi5O+xt3ylEBHTLSsxbf913yNu+UpgU4DKE/Sc3AvczORNcfmZiL0HNwbCE8JvItxWDvJ1SjYFm0NzZzpG2RpIYbIIksLMc70Dbpsy+54SqCzzlQAY8B9Xsk8YAJ4gBHJe3HyXpkRyaN407OfN7zlVQjobjTv4BgQ1/ItjzjV9Oo46okZEBuhS8u3PDoZEDf7t9vg903zBLBfP8C/4cAnD87teclIGyFlLoVyllWh8vmQYRgVAOI4OQmFciKSFZFsMpmck1UC/Il5VNViEgHu9StkQYyb7bNNH1wrmDm3PgqWUHLBhl+SyeRV/6czLepJDAbw8fos4HTNb+/9PFv9u3YMU/X6f38/L98B7/gJ8U2uasiPEADTcRqDOozoBn7WcbzqmFOvpnYM+uTPpvP5SDBiimvP8xRPKV3DFpV7fX7HyYyD44M96xicmpqaSgd3TDQsv6J4zYvLx5nqsz/kK29qcyq5kFpafD+RSMSKf4P+CvCY+hJFRzmzmB2KPTvb+JnX8CsdzDGM8/F4/PrqseC/AggvZlGXtyipXc8kLcbCy6mdrg/6lBIbR41DYXR8cjIqIoW17IIXc17+nHnEOnS3VfhiHQt5d7HmVMK2Nn6+DHLiOGMmRLdMVI+NymjZ9Sf4abaMqZbQp01G/rnS60P5rT8duNXw1TpuGaXksmMYlxKJxLiIt23NponhKVV5a874rdZwmlYuTTvmjWdmGj9Mifl3kkpJ2hGJGY4THb9yJS4i2p0t+Gm2ggHJxMNb94eNzIAJZgEKbyxsP5kS00ZJSkG0oFQ0mZyYkKDuqIhs6u/7hyt75luM2RMPVfft3rW7bU9T0z2bxbV50+w/wF8f81R5OpwBhwAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASxSURBVFiF3ZhdbBRVGIafc2Z2210hbeWnpcQVUC8kwBUJXJBIgwkgBEPEC1GMxhgE4gUJJsYERMWI3orYaiqgrYSWH/mvMaQLciE1RAKUkrLbbhMobQ20/LT7N3OOF0CC0O7szGwv9L3c73u/93vnnD3zzYH/EUTBKx6sHUvQWgR6GTAdmASMA26A6AYuofUhQnYTVevuFlK6cGaObC9DGh8i9PtAKA/GEIKvSRZtZfnbA4VooTBmjlWvQFADPOmBfRN4l8Xv7ffbhvTF1lpwrHoTgga8GeE+by9NNRvR2tfDNfyQmVv5MYJP8L/CAqgidtai/sgpP0W84d7WavBV43Eo0CtYvOaAF7K3Rg7sKKU4Hcf71sqFfmz1DEvX9rslevvPFKc/YnSMAJRhyA+8EN2vzMHasQSzveR3/HrFEMV2udv3kOlaJmgtIg8jYcMcqpu1oGXJhMi0oJQVGaV6Dvd1day62DwnaWWd+GHSciGwz01rHraZXuaUETbMoe6qVR3Ly6fMD0oZAYJBKSOvVEyd3z3/jVjIDCSddYSjzqPwYEY875RRN2tBS4kZnDFcrNQMztw144UzjjKa6W4787IylU4ZSyZEpuWKv1w+dWohdB6Fl9NsnFNCUMqKnHGRO34PYnz+Ld2DFzN3nBIySvXkjGt1PQ+d23l3dB9ezPQ6JRzu6+rIFT/Q25lwVNHkfCDDwYuZFqeEVReb5wxYmQvDxfqz6QtvnW+e69yZcNR5jOKWgKbZKSVpZUOV0bpnG3vi0YxWXUAmo1XXnp54tLL5p+dSyi52FlJRt625nwCavxlDyrgKlLjm5o9byPBkFr456IbkfmWq1t1FsMM1zx1q3RoBr4OmpT4F+jxxndGHrbZ4IXozs3RtP0Ks98R1ghDrvYz/4PfD6ti39Qix0leNh6H07siaL9ZJKYuKtA6lhSgKaC0sWwYATENlLSmVECIZTKcHZ167NtAI9gO6PzO/1ZRg6XPAFF91AJnKDES21NaYN26l8uVoLWyhSZhS/345kUj4/+Q9XjMPdBR/9wl6Qn3TjyWnzyW88i3Y5e92BmDx6tPAV35KjDnXftqHEQBhKDXZvxmA4p5NCJzH+mFg3rxzvXzn0ZN+5BUoW8p4YcxUbbZQ4nXyGEIfhrDt7MS6o/tEOm07Z48ArTPCMPYnEomewpgBeGl1HMQGN5SSk381hdsSNzwqag1tRbZdHY/HL8JoXJwfr24AXnVKK7rae/mpz3fs8aCQ1FqfxzTPxuPxf7243V9oOMESa4XOvqgDZtlIKTKVHpz4w6Ej+ZbUWlgIHdNStkYikbZoNGoNl1f4lQGM3V8us0tLfhmhvh6/98Tu0hN/XslVQ2uRlahOIWWrMozLsVgs7aQ7KmYAAnVb67PjSh+bDsKtHX9Ubmv4dQRaEiE6JLQHwuG21tbWjBvNwm+z+8hmU+/Iu8l5akwo8uA34/bg3+W1B088nKdhCK2vmFJemjV7dqyxsdHzyTZqKwMQ2r55bmpK+SktRABb2ZO+2//9E+djvcAthIgZ0P5aZ+eVzaAKoTeqZgCKt238LP10xYaxZy7tq/j5+E5Ms629vb0b0KOt/Z/GP4jqqfL5oxVsAAAAAElFTkSuQmCC",defaultOffset:[-25.5,-38]};return e.default=i,e},function(t,e,o){"use strict";function i(t,e,o){t.style.position=o&&o.position?o.position:"relative";var n="undefined"!=typeof window?window:void 0!==r?r:{};this._itowns=n.itowns,this._viewerDiv=t,this._widgets=[],this._initEventMap(),this._isInitialized=!1,this._globeView=new this._itowns.GlobeView(t,e,o);var r=this;this.listen(i.EVENTS.GLOBE_INITIALIZED,function(){r._isInitialized=!0}),this._globeView.addFrameRequester(this._itowns.MAIN_LOOP_EVENTS.BEFORE_RENDER,function(){clearTimeout(this._preRenderTimer),r._preRenderTimer=setTimeout(function(){if(r._fetchVisibleColorLayers||r._fetchVisibleElevationLayers||r._fetchExtent){var t={type:i.EVENTS.PRE_RENDER};r._fetchExtent&&(t.extent=new r._itowns.Extent("EPSG:4326",180,-180,90,-90)),r._fetchVisibleColorLayers&&(t.colorLayersId=[]),r._fetchVisibleElevationLayers&&(t.elevationLayersId=[]),r._getCurrentSceneInfos(r._globeView.scene,t),r._globeView.dispatchEvent(t)}},100)}.bind(this)),this._globeView.controls&&this.freezeControl()}Object.defineProperty(e,"__esModule",{value:!0});var n=o(3),r=function(t){return t&&t.__esModule?t:{default:t}}(n),s=r.default.getLogger("GlobeViewExtended");return i.prototype._initEventMap=function(){i.EVENTS||(i.EVENTS={RANGE_CHANGED:this._itowns.CONTROL_EVENTS.RANGE_CHANGED,CENTER_CHANGED:this._itowns.CONTROL_EVENTS.CAMERA_TARGET_CHANGED,ORIENTATION_CHANGED:this._itowns.CONTROL_EVENTS.ORIENTATION_CHANGED,LAYER_ADDED:this._itowns.GLOBE_VIEW_EVENTS.LAYER_ADDED,LAYER_REMOVED:this._itowns.GLOBE_VIEW_EVENTS.LAYER_REMOVED,LAYERS_ORDER_CHANGED:this._itowns.GLOBE_VIEW_EVENTS.COLOR_LAYERS_ORDER_CHANGED,GLOBE_INITIALIZED:this._itowns.GLOBE_VIEW_EVENTS.GLOBE_INITIALIZED,VIEW_INITIALIZED:"viewinitialized",PRE_RENDER:"prerender",MOUSE_MOVE:"mousemove",AFTER_RENDER:this._itowns.MAIN_LOOP_EVENTS.AFTER_RENDER,OPACITY_PROPERTY_CHANGED:"opacity-property-changed",VISIBLE_PROPERTY_CHANGED:"visible-property-changed",SEQUENCE_PROPERTY_CHANGED:"sequence-property-changed"})},i.prototype.constructor=i,i.prototype.getGlobeView=function(){return this._globeView},i.prototype.isInitialized=function(){return this._isInitialized},i.prototype.onCameraMoveStop=function(t){function e(){o._globeView.removeFrameRequester(o._itowns.MAIN_LOOP_EVENTS.AFTER_CAMERA_UPDATE,e),t()}var o=this;this._globeView.addFrameRequester(this._itowns.MAIN_LOOP_EVENTS.AFTER_CAMERA_UPDATE,e)},i.prototype.freezeControl=function(){this._globeView.controls.enabled=!1,this.onCameraMoveStop(function(){this._globeView.controls.enabled=!0}.bind(this))},i.prototype.listen=function(t,e){if("function"!=typeof e)return console.log("no callback provided for event : "+t),null;var o=this._getEventTarget(t);return o?(t===i.EVENTS.AFTER_RENDER?o.addFrameRequester(t,e):o.addEventListener(t,e),{target:o,callback:e,type:t}):null},i.prototype.addLayerListener=function(t,e,o){return"function"!=typeof o?(console.log("no callback provided for event : "+e),null):(t.addEventListener(e,o),{target:t,callback:o,type:e})},i.prototype._getEventTarget=function(t){switch(t){case i.EVENTS.RANGE_CHANGED:case i.EVENTS.CENTER_CHANGED:case i.EVENTS.ORIENTATION_CHANGED:return this.getGlobeView().controls;case i.EVENTS.LAYER_ADDED:case i.EVENTS.LAYER_REMOVED:case i.EVENTS.LAYERS_ORDER_CHANGED:case i.EVENTS.GLOBE_INITIALIZED:case i.EVENTS.PRE_RENDER:case i.EVENTS.AFTER_RENDER:case i.EVENTS.VIEW_INITIALIZED:return this.getGlobeView();case i.EVENTS.MOUSE_MOVE:return this._viewerDiv;default:return console.log("unhandled event : "+t),null}},i.prototype.forgetByKey=function(t){t.type===i.EVENTS.AFTER_RENDER?t.target.removeFrameRequester(t.type,t.callback):t.target.removeEventListener(t.type,t.callback)},i.prototype.removeLayerListener=function(t,e,o){this.forgetByKey({target:t,callback:o,type:e})},i.prototype.forget=function(t,e){var o=this._getEventTarget(t);if(!o)return null;this.forgetByKey({target:o,callback:e,type:t})},i.prototype.addLayer=function(t){var e=this.getGlobeView().addLayer(t);return this.getGlobeView().notifyChange(!0),e},i.prototype.removeLayer=function(t){this.getGlobeView().removeLayer(t),this.getGlobeView().notifyChange(!0)},i.prototype.setLayerOpacity=function(t,e){this.getColorLayerById(t).opacity=e,this.getGlobeView().notifyChange(!0)},i.prototype.setLayerVisibility=function(t,e){this.getColorLayerById(t).visible=e,this.getGlobeView().notifyChange(!0)},i.prototype.moveLayerToIndex=function(t,e){this._itowns.ColorLayersOrdering.moveLayerToIndex(this.getGlobeView(),t,e),this.getGlobeView().notifyChange(!0)},i.prototype.removeEventListener=function(t,e){switch(t){case"mousemove":this._viewerDiv.removeEventListener(t,e);break;case"centerchanged":this.getGlobeView().controls.removeEventListener(t,e);break;default:this.getGlobeView().removeEventListener(t,e)}},i.prototype.preRenderEventFetchViewExtent=function(t){void 0===t&&(t=!0),this._fetchExtent=t},i.prototype.preRenderEventFetchColorLayersDisplayed=function(t){void 0===t&&(t=!0),this._fetchVisibleColorLayers=t},i.prototype.preRenderEventFetchElevationLayersDisplayed=function(t){void 0===t&&(t=!0),this._fetchVisibleElevationLayers=t},i.prototype.preRenderEventFetchLayersDisplayed=function(t){void 0===t&&(t=!0),this._fetchVisibleColorLayers=t,this._fetchVisibleElevationLayers=t},i.prototype.getLayerById=function(t){var e=this.getGlobeView().getLayers(function(e){if(e.id===t)return e})[0];return e||void s.trace("[GlobeViewExtended]  : no Layer found for the id '"+t+"'")},i.prototype.getColorLayerById=function(t){var e=this.getGlobeView().getLayers(function(e){if(e.id===t&&"color"===e.type)return e})[0];return e||void s.trace("[GlobeViewExtended]  : no colorLayer found for the id '"+t+"'")},i.prototype.getColorLayers=function(){return this.getGlobeView().getLayers(function(t){if("color"===t.type)return t})},i.prototype.getVectorLayers=function(){return this.getGlobeView().getLayers(function(t){if("rasterizer"===t.protocol)return t})},i.prototype.getElevationLayers=function(){return this.getGlobeView().getLayers(function(t){if("elevation"===t.type)return t})},i.prototype.getExtent=function(){var t={extent:new this._itowns.Extent("EPSG:4326",180,-180,90,-90)};return this._getCurrentSceneInfos(this.scene,t),t.extent},i.prototype._getCurrentSceneInfos=function(t,e){if(t&&t.visible){if(t.level&&t.material.visible){if(e.colorLayersId)for(var o=0;o<t.material.colorLayersId.length;++o)e.colorLayersId.indexOf(t.material.colorLayersId[o])<0&&e.colorLayersId.push(t.material.colorLayersId[o]);if(e.elevationLayersId)for(var i=0;i<t.material.elevationLayersId.length;++i)e.elevationLayersId.indexOf(t.material.elevationLayersId[i])<0&&e.elevationLayersId.push(t.material.elevationLayersId[i]);e.extent&&e.extent.union(t.extent)}if(t.children)for(var n in t.children)this._getCurrentSceneInfos(t.children[n],e)}},i.prototype.addWidget=function(t){t.getTarget()||t.setTarget(this._viewerDiv,"absolute"),t.setGlobe(this),this._widgets.push(t)},i.prototype.getWidgets=function(){return this._widgets},i.prototype.removeWidget=function(t){t.setGlobe();for(var e=0;e<this._widgets.length;e++)this._widgets[e]===t&&this._widgets.splice(e,1)},i.prototype.getTargetElement=function(){return this._viewerDiv},i.prototype.getScale=function(){return this.getGlobeView().controls.getScale()},i.prototype.setTilt=function(t){return this.getGlobeView().controls.setTilt(t,!1)},i.prototype.getTilt=function(){return this.getGlobeView().controls.getCameraOrientation()[0]},i.prototype.setAzimuth=function(t){return this.getGlobeView().controls.setHeading(t,!1)},i.prototype.getAzimuth=function(){return this.getGlobeView().controls.getCameraOrientation()[1]},i.prototype.getCoordinateFromPixel=function(t,e){return this.getGlobeView().controls.pickGeoPosition({x:t,y:e})},i.prototype.getCoordinateFromMouseEvent=function(t){var e=this.getGlobeView().eventToViewCoords(t);return this.getGlobeView().controls.pickGeoPosition(e)},i.prototype.getFeaturesAtMousePosition=function(t){var e=this.getVectorLayers();if(e){var o=[],i=this.getCoordinateFromMouseEvent(t);if(i)for(var n=this.getGlobeView().controls.pixelsToDegrees(5),r=0;r<e.length;r++){var s,a=e[r];if(a.visible){var l=this._itowns.FeaturesUtils.filterFeaturesUnderCoordinate(i,a.feature,n);for(s=0;s<l.length;s++)o.push(l[s])}}return o}},i.prototype.setCameraTargetGeoPosition=function(t){return this.getGlobeView().controls.setCameraTargetGeoPositionAdvanced(t,!1)},i.prototype.getCenter=function(){var t=this.getGlobeView().controls.getCameraTargetGeoPosition();return{lon:t.longitude(),lat:t.latitude(),alt:t.altitude()}},i.prototype.getZoom=function(){return this.getGlobeView().controls.getZoom()},i.prototype.setZoom=function(t){return this.getGlobeView().controls.setZoom(t,!1)},i.prototype.pixelsToMeters=function(t){return this.getGlobeView().controls.pixelsToMeters(t)},i.prototype.metersToPixels=function(t){return this.getGlobeView().controls.metersToPixels(t)},i.prototype.getRange=function(){return this.getGlobeView().controls.getRange()},i.prototype.moveTarget=function(){return this.getGlobeView().controls.moveTarget()},i.prototype.getLayerEventInfos=function(t){var e=t.type.replace("-property-changed","");return{propertyName:e,previousValue:t.previous[e],newValue:t.new[e]}},i.prototype.setBackground=function(){this.getGlobeView().mainLoop.gfxEngine.renderer.setClearColor(0,0)},i.prototype.setCameraPosition=function(t,e){this.getGlobeView().camera.camera3D.position.copy(t).setLength(e)},i.prototype.lookAt=function(t){this.getGlobeView().camera.camera3D.lookAt(t)},i.prototype.notifyChange=function(){this.getGlobeView().notifyChange(!0)},i.prototype.resize=function(t,e){this.getGlobeView().mainLoop.gfxEngine.onWindowResize(t,e),this.getGlobeView().notifyChange(!0)},e.default=i,e},function(t,e,o){return function(e,o){t.exports=o()}(0,function(){"use strict";function t(t,e){if(t[e])return t[e];for(var o,i=Object.keys(t),n=e.toLowerCase().replace(He,""),r=-1;++r<i.length;)if(o=i[r],o.toLowerCase().replace(He,"")===n)return t[o]}function e(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Ze}function o(t){return new e(t).output()}function i(t,e,o){Array.isArray(e)&&(o.unshift(e),e=null);var i=e?{}:t,r=o.reduce(function(t,e){return n(e,t),t},i);e&&(t[e]=r)}function n(t,e){if(!Array.isArray(t))return void(e[t]=!0);var o=t.shift();if("PARAMETER"===o&&(o=t.shift()),1===t.length)return Array.isArray(t[0])?(e[o]={},void n(t[0],e[o])):void(e[o]=t[0]);if(!t.length)return void(e[o]=!0);if("TOWGS84"===o)return void(e[o]=t);Array.isArray(o)||(e[o]={});var r;switch(o){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[o]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&n(t[2],e[o]));case"SPHEROID":case"ELLIPSOID":return e[o]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&n(t[3],e[o]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void i(e,o,t);default:for(r=-1;++r<t.length;)if(!Array.isArray(t[r]))return n(t,e[o]);return i(e,o,t)}}function r(t,e){var o=e[0],i=e[1];!(o in t)&&i in t&&(t[o]=t[i],3===e.length&&(t[o]=e[2](t[o])))}function s(t){return t*to}function a(t){function e(e){return e*(t.to_meter||1)}"GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"===t.datumCode&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",s],["longitude_of_center","Longitude_Of_Center"],["longc","longitude_of_center",s],["x0","false_easting",e],["y0","false_northing",e],["long0","central_meridian",s],["lat0","latitude_of_origin",s],["lat0","standard_parallel_1",s],["lat1","standard_parallel_1",s],["lat2","standard_parallel_2",s],["alpha","azimuth",s],["srsCode","name"]].forEach(function(e){return r(t,e)}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName||(t.lat0=s(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function l(t){var e=this;if(2===arguments.length){var o=arguments[1];"string"==typeof o?"+"===o.charAt(0)?l[t]=Ye(arguments[1]):l[t]=eo(arguments[1]):l[t]=o}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?l.apply(e,t):l(t)});if("string"==typeof t){if(t in l)return l[t]}else"EPSG"in t?l["EPSG:"+t.EPSG]=t:"ESRI"in t?l["ESRI:"+t.ESRI]=t:"IAU2000"in t?l["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function p(t){return"string"==typeof t}function c(t){return t in l}function u(t){return oo.some(function(e){return t.indexOf(e)>-1})}function h(t){return"+"===t[0]}function d(t){return p(t)?c(t)?l[t]:u(t)?eo(t):h(t)?Ye(t):void 0:t}function f(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=no(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function y(t){var e=t.x,o=t.y;if(o*Ue>90&&o*Ue<-90&&e*Ue>180&&e*Ue<-180)return null;var i,n;if(Math.abs(Math.abs(o)-Oe)<=je)return null;if(this.sphere)i=this.x0+this.a*this.k0*so(e-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(Be+.5*o));else{var r=Math.sin(o),s=ao(this.e,o,r);i=this.x0+this.a*this.k0*so(e-this.long0),n=this.y0-this.a*this.k0*Math.log(s)}return t.x=i,t.y=n,t}function g(t){var e,o,i=t.x-this.x0,n=t.y-this.y0;if(this.sphere)o=Oe-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var r=Math.exp(-n/(this.a*this.k0));if(-9999===(o=lo(this.e,r)))return null}return e=so(this.long0+i/(this.a*this.k0)),t.x=e,t.y=o,t}function m(){}function v(t){return t}function _(t,e){var o=go.length;return t.names?(go[o]=t,t.names.forEach(function(t){yo[t.toLowerCase()]=o}),this):(console.log(e),!0)}function b(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==yo[e]&&go[yo[e]]?go[yo[e]]:void 0}function E(){fo.forEach(_)}function S(t,e,o,i){var n=t*t,r=e*e,s=(n-r)/n,a=0;return i?(t*=1-s*(Ne+s*(ke+s*De)),n=t*t,s=0):a=Math.sqrt(s),{es:s,e:a,ep2:(n-r)/r}}function w(e,o,i,n,r){if(!e){var s=t(vo,n);s||(s=_o),e=s.a,o=s.b,i=s.rf}return i&&!o&&(o=(1-1/i)*e),(0===i||Math.abs(e-o)<je)&&(r=!0,o=e),{a:e,b:o,rf:i,sphere:r}}function P(t,e,o,i,n,r){var s={};return s.datum_type=void 0===t||"none"===t?Le:Te,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=Re),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=Ie,s.datum_params[3]*=Ge,s.datum_params[4]*=Ge,s.datum_params[5]*=Ge,s.datum_params[6]=s.datum_params[6]/1e6+1))),s.a=o,s.b=i,s.es=n,s.ep2=r,s}function C(e,o){if(!(this instanceof C))return new C(e);o=o||function(t){if(t)throw t};var i=d(e);if("object"!=typeof i)return void o(e);var n=C.projections.get(i.projName);if(!n)return void o(e);if(i.datumCode&&"none"!==i.datumCode){var r=t(bo,i.datumCode);r&&(i.datum_params=r.towgs84?r.towgs84.split(","):null,i.ellps=r.ellipse,i.datumName=r.datumName?r.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84";var s=w(i.a,i.b,i.rf,i.ellps,i.sphere),a=S(s.a,s.b,s.rf,i.R_A),l=i.datum||P(i.datumCode,i.datum_params,s.a,s.b,a.es,a.ep2);io(this,i),io(this,n),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=a.es,this.e=a.e,this.ep2=a.ep2,this.datum=l,this.init(),o(null,this)}function A(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===Re?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==Ie||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}function M(t,e,o){var i,n,r,s,a=t.x,l=t.y,p=t.z?t.z:0;if(l<-Oe&&l>-1.001*Oe)l=-Oe;else if(l>Oe&&l<1.001*Oe)l=Oe;else if(l<-Oe||l>Oe)return null;return a>Math.PI&&(a-=2*Math.PI),n=Math.sin(l),s=Math.cos(l),r=n*n,i=o/Math.sqrt(1-e*r),{x:(i+p)*s*Math.cos(a),y:(i+p)*s*Math.sin(a),z:(i*(1-e)+p)*n}}function x(t,e,o,i){var n,r,s,a,l,p,c,u,h,d,f,y,g,m,v,_,b=t.x,E=t.y,S=t.z?t.z:0;if(n=Math.sqrt(b*b+E*E),r=Math.sqrt(b*b+E*E+S*S),n/o<1e-12){if(m=0,r/o<1e-12)return v=Oe,_=-i,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(E,b);s=S/r,a=n/r,l=1/Math.sqrt(1-e*(2-e)*a*a),u=a*(1-e)*l,h=s*l,g=0;do{g++,c=o/Math.sqrt(1-e*h*h),_=n*u+S*h-c*(1-e*h*h),p=e*c/(c+_),l=1/Math.sqrt(1-p*(2-p)*a*a),d=a*(1-p)*l,f=s*l,y=f*u-d*h,u=d,h=f}while(y*y>1e-24&&g<30);return v=Math.atan(f/Math.abs(d)),{x:m,y:v,z:_}}function R(t,e,o){if(e===Re)return{x:t.x+o[0],y:t.y+o[1],z:t.z+o[2]};if(e===Ie){var i=o[0],n=o[1],r=o[2],s=o[3],a=o[4],l=o[5],p=o[6];return{x:p*(t.x-l*t.y+a*t.z)+i,y:p*(l*t.x+t.y-s*t.z)+n,z:p*(-a*t.x+s*t.y+t.z)+r}}}function I(t,e,o){if(e===Re)return{x:t.x-o[0],y:t.y-o[1],z:t.z-o[2]};if(e===Ie){var i=o[0],n=o[1],r=o[2],s=o[3],a=o[4],l=o[5],p=o[6],c=(t.x-i)/p,u=(t.y-n)/p,h=(t.z-r)/p;return{x:c+l*u-a*h,y:-l*c+u+s*h,z:a*c-s*u+h}}}function T(t){return t===Re||t===Ie}function L(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function G(t,e){return(t.datum.datum_type===Re||t.datum.datum_type===Ie)&&"WGS84"!==e.datumCode||(e.datum.datum_type===Re||e.datum.datum_type===Ie)&&"WGS84"!==t.datumCode}function O(t,e,o){var i;return Array.isArray(o)&&(o=wo(o)),Po(o),t.datum&&e.datum&&G(t,e)&&(i=new C("WGS84"),o=O(t,i,o),t=i),"enu"!==t.axis&&(o=So(t,!1,o)),"longlat"===t.projName?o={x:o.x*Fe,y:o.y*Fe}:(t.to_meter&&(o={x:o.x*t.to_meter,y:o.y*t.to_meter}),o=t.inverse(o)),t.from_greenwich&&(o.x+=t.from_greenwich),o=Eo(t.datum,e.datum,o),e.from_greenwich&&(o={x:o.x-e.from_greenwich,y:o.y}),"longlat"===e.projName?o={x:o.x*Ue,y:o.y*Ue}:(o=e.forward(o),e.to_meter&&(o={x:o.x/e.to_meter,y:o.y/e.to_meter})),"enu"!==e.axis?So(e,!0,o):o}function N(t,e,o){var i,n,r;return Array.isArray(o)?(i=O(t,e,o),3===o.length?[i.x,i.y,i.z]:[i.x,i.y]):(n=O(t,e,o),r=Object.keys(o),2===r.length?n:(r.forEach(function(t){"x"!==t&&"y"!==t&&(n[t]=o[t])}),n))}function k(t){return t instanceof C?t:t.oProj?t.oProj:C(t)}function D(t,e,o){t=k(t);var i,n=!1;return void 0===e?(e=t,t=Co,n=!0):(void 0!==e.x||Array.isArray(e))&&(o=e,e=t,t=Co,n=!0),e=k(e),o?N(t,e,o):(i={forward:function(o){return N(t,e,o)},inverse:function(o){return N(e,t,o)}},n&&(i.oProj=e),i)}function j(t,e){return e=e||5,H(W({lat:t[1],lon:t[0]}),e)}function F(t){var e=z(X(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function U(t){var e=z(X(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function B(t){return t*(Math.PI/180)}function V(t){return t/Math.PI*180}function W(t){var e,o,i,n,r,s,a,l,p,c=t.lat,u=t.lon,h=6378137,d=B(c),f=B(u);p=Math.floor((u+180)/6)+1,180===u&&(p=60),c>=56&&c<64&&u>=3&&u<12&&(p=32),c>=72&&c<84&&(u>=0&&u<9?p=31:u>=9&&u<21?p=33:u>=21&&u<33?p=35:u>=33&&u<42&&(p=37)),e=6*(p-1)-180+3,l=B(e),o=.006739496752268451,i=h/Math.sqrt(1-.00669438*Math.sin(d)*Math.sin(d)),n=Math.tan(d)*Math.tan(d),r=o*Math.cos(d)*Math.cos(d),s=Math.cos(d)*(f-l),a=h*(.9983242984503243*d-.002514607064228144*Math.sin(2*d)+2639046602129982e-21*Math.sin(4*d)-3.418046101696858e-9*Math.sin(6*d));var y=.9996*i*(s+(1-n+r)*s*s*s/6+(5-18*n+n*n+72*r-58*o)*s*s*s*s*s/120)+5e5,g=.9996*(a+i*Math.tan(d)*(s*s/2+(5-n+9*r+4*r*r)*s*s*s*s/24+(61-58*n+n*n+600*r-330*o)*s*s*s*s*s*s/720));return c<0&&(g+=1e7),{northing:Math.round(g),easting:Math.round(y),zoneNumber:p,zoneLetter:q(c)}}function z(t){var e=t.northing,o=t.easting,i=t.zoneLetter,n=t.zoneNumber;if(n<0||n>60)return null;var r,s,a,l,p,c,u,h,d,f,y=6378137,g=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=o-5e5,v=e;i<"N"&&(v-=1e7),h=6*(n-1)-180+3,r=.006739496752268451,u=v/.9996,d=u/6367449.145945056,f=d+(3*g/2-27*g*g*g/32)*Math.sin(2*d)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*d)+151*g*g*g/96*Math.sin(6*d),s=y/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),l=r*Math.cos(f)*Math.cos(f),p=.99330562*y/Math.pow(1-.00669438*Math.sin(f)*Math.sin(f),1.5),c=m/(.9996*s);var _=f-s*Math.tan(f)/p*(c*c/2-(5+3*a+10*l-4*l*l-9*r)*c*c*c*c/24+(61+90*a+298*l+45*a*a-252*r-3*l*l)*c*c*c*c*c*c/720);_=V(_);var b=(c-(1+2*a+l)*c*c*c/6+(5-2*l+28*a-3*l*l+8*r+24*a*a)*c*c*c*c*c/120)/Math.cos(f);b=h+V(b);var E;if(t.accuracy){var S=z({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});E={top:S.lat,right:S.lon,bottom:_,left:b}}else E={lat:_,lon:b};return E}function q(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function H(t,e){var o="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+Y(t.easting,t.northing,t.zoneNumber)+o.substr(o.length-5,e)+i.substr(i.length-5,e)}function Y(t,e,o){var i=Z(o);return K(Math.floor(t/1e5),Math.floor(e/1e5)%20,i)}function Z(t){var e=t%Ao;return 0===e&&(e=Ao),e}function K(t,e,o){var i=o-1,n=Mo.charCodeAt(i),r=xo.charCodeAt(i),s=n+t-1,a=r+e,l=!1;return s>Go&&(s=s-Go+Ro-1,l=!0),(s===Io||n<Io&&s>Io||(s>Io||n<Io)&&l)&&s++,(s===To||n<To&&s>To||(s>To||n<To)&&l)&&++s===Io&&s++,s>Go&&(s=s-Go+Ro-1),a>Lo?(a=a-Lo+Ro-1,l=!0):l=!1,(a===Io||r<Io&&a>Io||(a>Io||r<Io)&&l)&&a++,(a===To||r<To&&a>To||(a>To||r<To)&&l)&&++a===Io&&a++,a>Lo&&(a=a-Lo+Ro-1),String.fromCharCode(s)+String.fromCharCode(a)}function X(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,o=t.length,i=null,n="",r=0;!/[A-Z]/.test(e=t.charAt(r));){if(r>=2)throw"MGRSPoint bad conversion from: "+t;n+=e,r++}var s=parseInt(n,10);if(0===r||r+3>o)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(r++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t
;i=t.substring(r,r+=2);for(var l=Z(s),p=J(i.charAt(0),l),c=Q(i.charAt(1),l);c<$(a);)c+=2e6;var u=o-r;if(u%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var h,d,f,y,g,m=u/2,v=0,_=0;return m>0&&(h=1e5/Math.pow(10,m),d=t.substring(r,r+m),v=parseFloat(d)*h,f=t.substring(r+m),_=parseFloat(f)*h),y=v+p,g=_+c,{easting:y,northing:g,zoneLetter:a,zoneNumber:s,accuracy:h}}function J(t,e){for(var o=Mo.charCodeAt(e-1),i=1e5,n=!1;o!==t.charCodeAt(0);){if(o++,o===Io&&o++,o===To&&o++,o>Go){if(n)throw"Bad character: "+t;o=Ro,n=!0}i+=1e5}return i}function Q(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var o=xo.charCodeAt(e-1),i=0,n=!1;o!==t.charCodeAt(0);){if(o++,o===Io&&o++,o===To&&o++,o>Lo){if(n)throw"Bad character: "+t;o=Ro,n=!0}i+=1e5}return i}function $(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function tt(t,e,o){if(!(this instanceof tt))return new tt(t,e,o);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=o||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}function et(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=ko(this.es),this.ml0=Do(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function ot(t){var e,o,i,n=t.x,r=t.y,s=so(n-this.long0),a=Math.sin(r),l=Math.cos(r);if(this.es){var p=l*s,c=Math.pow(p,2),u=this.ep2*Math.pow(l,2),h=Math.pow(u,2),d=Math.abs(l)>je?Math.tan(r):0,f=Math.pow(d,2),y=Math.pow(f,2);e=1-this.es*Math.pow(a,2),p/=Math.sqrt(e);var g=Do(r,a,l,this.en);o=this.a*(this.k0*p*(1+c/6*(1-f+u+c/20*(5-18*f+y+14*u-58*f*u+c/42*(61+179*y-y*f-479*f)))))+this.x0,i=this.a*(this.k0*(g-this.ml0+a*s*p/2*(1+c/12*(5-f+9*u+4*h+c/30*(61+y-58*f+270*u-330*f*u+c/56*(1385+543*y-y*f-3111*f))))))+this.y0}else{var m=l*Math.sin(s);if(Math.abs(Math.abs(m)-1)<je)return 93;if(o=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,i=l*Math.cos(s)/Math.sqrt(1-Math.pow(m,2)),(m=Math.abs(i))>=1){if(m-1>je)return 93;i=0}else i=Math.acos(i);r<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=o,t.y=i,t}function it(t){var e,o,i,n,r=(t.x-this.x0)*(1/this.a),s=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+s/this.k0,o=jo(e,this.es,this.en),Math.abs(o)<Oe){var a=Math.sin(o),l=Math.cos(o),p=Math.abs(l)>je?Math.tan(o):0,c=this.ep2*Math.pow(l,2),u=Math.pow(c,2),h=Math.pow(p,2),d=Math.pow(h,2);e=1-this.es*Math.pow(a,2);var f=r*Math.sqrt(e)/this.k0,y=Math.pow(f,2);e*=p,i=o-e*y/(1-this.es)*.5*(1-y/12*(5+3*h-9*c*h+c-4*u-y/30*(61+90*h-252*c*h+45*d+46*c-y/56*(1385+3633*h+4095*d+1574*d*h)))),n=so(this.long0+f*(1-y/6*(1+2*h+c-y/20*(5+28*h+24*d+8*c*h+6*c-y/42*(61+662*h+1320*d+720*d*h))))/l)}else i=Oe*ro(s),n=0;else{var g=Math.exp(r/this.k0),m=.5*(g-1/g),v=this.lat0+s/this.k0,_=Math.cos(v);e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(m,2))),i=Math.asin(e),s<0&&(i=-i),n=0===m&&0===_?0:so(Math.atan2(m,_)+this.long0)}return t.x=n,t.y=i,t}function nt(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),o=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),o*=e,this.cgb[1]=o*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=o*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),o*=e,this.cgb[2]=o*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=o*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),o*=e,this.cgb[3]=o*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=o*(1237/630+e*(e*(-24832/14175)-2.4)),o*=e,this.cgb[4]=o*(4174/315+e*(-144838/6237)),this.cbg[4]=o*(-734/315+e*(109598/31185)),o*=e,this.cgb[5]=o*(601676/22275),this.cbg[5]=o*(444337/155925),o=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+o*(.25+o*(1/64+o/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=o*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=o*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),o*=e,this.utg[2]=o*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=o*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),o*=e,this.utg[3]=o*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=o*(49561/161280+e*(-179/168+e*(6601661/7257600))),o*=e,this.utg[4]=o*(-4583/161280+e*(108847/3991680)),this.gtu[4]=o*(34729/80640+e*(-3418889/1995840)),o*=e,this.utg[5]=-.03233083094085698*o,this.gtu[5]=.6650675310896665*o;var i=qo(this.cbg,this.lat0);this.Zb=-this.Qn*(i+Ho(this.gtu,2*i))}function rt(t){var e=so(t.x-this.long0),o=t.y;o=qo(this.cbg,o);var i=Math.sin(o),n=Math.cos(o),r=Math.sin(e),s=Math.cos(e);o=Math.atan2(i,s*n),e=Math.atan2(r*n,Vo(i,n*s)),e=zo(Math.tan(e));var a=Zo(this.gtu,2*o,2*e);o+=a[0],e+=a[1];var l,p;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,p=this.a*(this.Qn*o+this.Zb)+this.y0):(l=1/0,p=1/0),t.x=l,t.y=p,t}function st(t){var e=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);o=(o-this.Zb)/this.Qn,e/=this.Qn;var i,n;if(Math.abs(e)<=2.623395162778){var r=Zo(this.utg,2*o,2*e);o+=r[0],e+=r[1],e=Math.atan(Bo(e));var s=Math.sin(o),a=Math.cos(o),l=Math.sin(e),p=Math.cos(e);o=Math.atan2(s*p,Vo(l,p*a)),e=Math.atan2(l,p*a),i=so(e+this.long0),n=qo(this.cgb,o)}else i=1/0,n=1/0;return t.x=i,t.y=n,t}function at(){var t=Jo(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*Fe,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,Xo.init.apply(this),this.forward=Xo.forward,this.inverse=Xo.inverse}function lt(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Be)/(Math.pow(Math.tan(.5*this.lat0+Be),this.C)*ti(this.e*t,this.ratexp))}function pt(t){var e=t.x,o=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*o+Be),this.C)*ti(this.e*Math.sin(o),this.ratexp))-Oe,t.x=this.C*e,t}function ct(t){for(var e=t.x/this.C,o=t.y,i=Math.pow(Math.tan(.5*o+Be)/this.K,1/this.C),n=ei;n>0&&(o=2*Math.atan(i*ti(this.e*Math.sin(t.y),-.5*this.e))-Oe,!(Math.abs(o-t.y)<1e-14));--n)t.y=o;return n?(t.x=e,t.y=o,t):null}function ut(){ii.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function ht(t){var e,o,i,n;return t.x=so(t.x-this.long0),ii.forward.apply(this,[t]),e=Math.sin(t.y),o=Math.cos(t.y),i=Math.cos(t.x),n=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*o*i),t.x=n*o*Math.sin(t.x),t.y=n*(this.cosc0*e-this.sinc0*o*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function dt(t){var e,o,i,n,r;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,r=Math.sqrt(t.x*t.x+t.y*t.y)){var s=2*Math.atan2(r,this.R2);e=Math.sin(s),o=Math.cos(s),n=Math.asin(o*this.sinc0+t.y*e*this.cosc0/r),i=Math.atan2(t.x*e,r*this.cosc0*o-t.y*this.sinc0*e)}else n=this.phic0,i=0;return t.x=i,t.y=n,ii.inverse.apply(this,[t]),t.x=so(t.x+this.long0),t}function ft(t,e,o){return e*=o,Math.tan(.5*(Oe+t))*Math.pow((1-e)/(1+e),.5*o)}function yt(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=je&&(this.k0=.5*(1+ro(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=je&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=je&&(this.k0=.5*this.cons*no(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/ao(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=no(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Oe,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function gt(t){var e,o,i,n,r,s,a=t.x,l=t.y,p=Math.sin(l),c=Math.cos(l),u=so(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=je&&Math.abs(l+this.lat0)<=je?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*p+this.coslat0*c*Math.cos(u)),t.x=this.a*e*c*Math.sin(u)+this.x0,t.y=this.a*e*(this.coslat0*p-this.sinlat0*c*Math.cos(u))+this.y0,t):(o=2*Math.atan(this.ssfn_(l,p,this.e))-Oe,n=Math.cos(o),i=Math.sin(o),Math.abs(this.coslat0)<=je?(r=ao(this.e,l*this.con,this.con*p),s=2*this.a*this.k0*r/this.cons,t.x=this.x0+s*Math.sin(a-this.long0),t.y=this.y0-this.con*s*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<je?(e=2*this.a*this.k0/(1+n*Math.cos(u)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*n*Math.cos(u))),t.y=e*(this.cosX0*i-this.sinX0*n*Math.cos(u))+this.y0),t.x=e*n*Math.sin(u)+this.x0,t))}function mt(t){t.x-=this.x0,t.y-=this.y0;var e,o,i,n,r,s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(s/(.5*this.a*this.k0));return e=this.long0,(o=this.lat0,s<=je)?(t.x=e,t.y=o,t):(o=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/s),e=so(Math.abs(this.coslat0)<je?this.lat0>0?this.long0+Math.atan2(t.x,-1*t.y):this.long0+Math.atan2(t.x,t.y):this.long0+Math.atan2(t.x*Math.sin(a),s*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=o,t)}if(Math.abs(this.coslat0)<=je){if(s<=je)return o=this.lat0,e=this.long0,t.x=e,t.y=o,t;t.x*=this.con,t.y*=this.con,i=s*this.cons/(2*this.a*this.k0),o=this.con*lo(this.e,i),e=this.con*so(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else n=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=je?r=this.X0:(r=Math.asin(Math.cos(n)*this.sinX0+t.y*Math.sin(n)*this.cosX0/s),e=so(this.long0+Math.atan2(t.x*Math.sin(n),s*this.cosX0*Math.cos(n)-t.y*this.sinX0*Math.sin(n)))),o=-1*lo(this.e,Math.tan(.5*(Oe+r)));return t.x=e,t.y=o,t}function vt(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),o=this.a,i=this.rf,n=1/i,r=2*n-Math.pow(n,2),s=this.e=Math.sqrt(r);this.R=this.k0*o*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),p=Math.log((1+s*e)/(1-s*e));this.K=a-this.alpha*l+this.alpha*s/2*p}function _t(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),o=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+o)+this.K,n=2*(Math.atan(Math.exp(i))-Math.PI/4),r=this.alpha*(t.x-this.lambda0),s=Math.atan(Math.sin(r)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(r))),a=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(r));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*s+this.x0,t}function bt(t){for(var e=t.x-this.x0,o=t.y-this.y0,i=e/this.R,n=2*(Math.atan(Math.exp(o/this.R))-Math.PI/4),r=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(i)),s=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(n))),a=this.lambda0+s/this.alpha,l=0,p=r,c=-1e3,u=0;Math.abs(p-c)>1e-7;){if(++u>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+r/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(p))/2)),c=p,p=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=p,t}function Et(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var t=Math.sin(this.lat0),e=Math.cos(this.lat0),o=this.e*t;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(e,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-o*o);var i=ao(this.e,this.lat0,t),n=this.bl/e*Math.sqrt((1-this.es)/(1-o*o));n*n<1&&(n=1);var r,s;if(isNaN(this.longc)){var a=ao(this.e,this.lat1,Math.sin(this.lat1)),l=ao(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(n+Math.sqrt(n*n-1))*Math.pow(i,this.bl):this.el=(n-Math.sqrt(n*n-1))*Math.pow(i,this.bl);var p=Math.pow(a,this.bl),c=Math.pow(l,this.bl);r=this.el/p,s=.5*(r-1/r);var u=(this.el*this.el-c*p)/(this.el*this.el+c*p),h=(c-p)/(c+p),d=so(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(u*Math.tan(.5*this.bl*d)/h)/this.bl,this.long0=so(this.long0);var f=so(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*f)/s),this.alpha=Math.asin(n*Math.sin(this.gamma0))}else r=this.lat0>=0?n+Math.sqrt(n*n-1):n-Math.sqrt(n*n-1),this.el=r*Math.pow(i,this.bl),s=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/n),this.long0=this.longc-Math.asin(s*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha))}function St(t){var e,o,i,n=t.x,r=t.y,s=so(n-this.long0);if(Math.abs(Math.abs(r)-Oe)<=je)i=r>0?-1:1,o=this.al/this.bl*Math.log(Math.tan(Be+i*this.gamma0*.5)),e=-1*i*Oe*this.al/this.bl;else{var a=ao(this.e,r,Math.sin(r)),l=this.el/Math.pow(a,this.bl),p=.5*(l-1/l),c=.5*(l+1/l),u=Math.sin(this.bl*s),h=(p*Math.sin(this.gamma0)-u*Math.cos(this.gamma0))/c;o=Math.abs(Math.abs(h)-1)<=je?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-h)/(1+h))/this.bl,e=Math.abs(Math.cos(this.bl*s))<=je?this.al*this.bl*s:this.al*Math.atan2(p*Math.cos(this.gamma0)+u*Math.sin(this.gamma0),Math.cos(this.bl*s))/this.bl}return this.no_rot?(t.x=this.x0+e,t.y=this.y0+o):(e-=this.uc,t.x=this.x0+o*Math.cos(this.alpha)+e*Math.sin(this.alpha),t.y=this.y0+e*Math.cos(this.alpha)-o*Math.sin(this.alpha)),t}function wt(t){var e,o;this.no_rot?(o=t.y-this.y0,e=t.x-this.x0):(o=(t.x-this.x0)*Math.cos(this.alpha)-(t.y-this.y0)*Math.sin(this.alpha),e=(t.y-this.y0)*Math.cos(this.alpha)+(t.x-this.x0)*Math.sin(this.alpha),e+=this.uc);var i=Math.exp(-1*this.bl*o/this.al),n=.5*(i-1/i),r=.5*(i+1/i),s=Math.sin(this.bl*e/this.al),a=(s*Math.cos(this.gamma0)+n*Math.sin(this.gamma0))/r,l=Math.pow(this.el/Math.sqrt((1+a)/(1-a)),1/this.bl);return Math.abs(a-1)<je?(t.x=this.long0,t.y=Oe):Math.abs(a+1)<je?(t.x=this.long0,t.y=-1*Oe):(t.y=lo(this.e,l),t.x=so(this.long0-Math.atan2(n*Math.cos(this.gamma0)-s*Math.sin(this.gamma0),Math.cos(this.bl*e/this.al))/this.bl)),t}function Pt(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<je)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),o=Math.cos(this.lat1),i=no(this.e,e,o),n=ao(this.e,this.lat1,e),r=Math.sin(this.lat2),s=Math.cos(this.lat2),a=no(this.e,r,s),l=ao(this.e,this.lat2,r),p=ao(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>je?this.ns=Math.log(i/a)/Math.log(n/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(p,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function Ct(t){var e=t.x,o=t.y;Math.abs(2*Math.abs(o)-Math.PI)<=je&&(o=ro(o)*(Oe-2*je));var i,n,r=Math.abs(Math.abs(o)-Oe);if(r>je)i=ao(this.e,o,Math.sin(o)),n=this.a*this.f0*Math.pow(i,this.ns);else{if((r=o*this.ns)<=0)return null;n=0}var s=this.ns*so(e-this.long0);return t.x=this.k0*(n*Math.sin(s))+this.x0,t.y=this.k0*(this.rh-n*Math.cos(s))+this.y0,t}function At(t){var e,o,i,n,r,s=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(s*s+a*a),o=1):(e=-Math.sqrt(s*s+a*a),o=-1);var l=0;if(0!==e&&(l=Math.atan2(o*s,o*a)),0!==e||this.ns>0){if(o=1/this.ns,i=Math.pow(e/(this.a*this.f0),o),-9999===(n=lo(this.e,i)))return null}else n=-Oe;return r=so(l/this.ns+this.long0),t.x=r,t.y=n,t}function Mt(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function xt(t){var e,o,i,n,r,s,a,l=t.x,p=t.y,c=so(l-this.long0);return e=Math.pow((1+this.e*Math.sin(p))/(1-this.e*Math.sin(p)),this.alfa*this.e/2),o=2*(Math.atan(this.k*Math.pow(Math.tan(p/2+this.s45),this.alfa)/e)-this.s45),i=-c*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(o)+Math.sin(this.ad)*Math.cos(o)*Math.cos(i)),r=Math.asin(Math.cos(o)*Math.sin(i)/Math.cos(n)),s=this.n*r,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),t.y=a*Math.cos(s)/1,t.x=a*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t}function Rt(t){var e,o,i,n,r,s,a,l,p=t.x;t.x=t.y,t.y=p,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x),n=r/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),o=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(e)),t.x=this.long0-o/this.alfa,a=e,l=0;var c=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(l=1),a=t.y,c+=1}while(0===l&&c<15);return c>=15?null:t}function It(){this.sphere||(this.e0=mi(this.es),this.e1=vi(this.es),this.e2=_i(this.es),this.e3=bi(this.es),this.ml0=this.a*gi(this.e0,this.e1,this.e2,this.e3,this.lat0))}function Tt(t){var e,o,i=t.x,n=t.y;if(i=so(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(n)*Math.sin(i)),o=this.a*(Math.atan2(Math.tan(n),Math.cos(i))-this.lat0);else{var r=Math.sin(n),s=Math.cos(n),a=Ei(this.a,this.e,r),l=Math.tan(n)*Math.tan(n),p=i*Math.cos(n),c=p*p,u=this.es*s*s/(1-this.es),h=this.a*gi(this.e0,this.e1,this.e2,this.e3,n);e=a*p*(1-c*l*(1/6-(8-l+8*u)*c/120)),o=h-this.ml0+a*r/s*c*(.5+(5-l+6*u)*c/24)}return t.x=e+this.x0,t.y=o+this.y0,t}function Lt(t){t.x-=this.x0,t.y-=this.y0;var e,o,i=t.x/this.a,n=t.y/this.a;if(this.sphere){var r=n+this.lat0;e=Math.asin(Math.sin(r)*Math.cos(i)),o=Math.atan2(Math.tan(i),Math.cos(r))}else{var s=this.ml0/this.a+n,a=wi(s,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Oe)<=je)return t.x=this.long0,t.y=Oe,n<0&&(t.y*=-1),t;var l=Ei(this.a,this.e,Math.sin(a)),p=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(a),2),u=i*this.a/l,h=u*u;e=a-l*Math.tan(a)/p*u*u*(.5-(1+3*c)*u*u/24),o=u*(1-h*(c/3+(1+3*c)*c*h/15))/Math.cos(a)}return t.x=so(o+this.long0),t.y=Si(e),t}function Gt(){var t=Math.abs(this.lat0);if(Math.abs(t-Oe)<je?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<je?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=Ai(this.e,1),this.mmf=.5/(1-this.es),this.apa=kt(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=Ai(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function Ot(t){var e,o,i,n,r,s,a,l,p,c,u=t.x,h=t.y;if(u=so(u-this.long0),this.sphere){if(r=Math.sin(h),c=Math.cos(h),i=Math.cos(u),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((o=this.mode===this.EQUIT?1+c*i:1+this.sinph0*r+this.cosph0*c*i)<=je)return null;o=Math.sqrt(2/o),e=o*c*Math.sin(u),o*=this.mode===this.EQUIT?r:this.cosph0*r-this.sinph0*c*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(h+this.phi0)<je)return null;o=Be-.5*h,o=2*(this.mode===this.S_POLE?Math.cos(o):Math.sin(o)),e=o*Math.sin(u),o*=i}}else{switch(a=0,l=0,p=0,i=Math.cos(u),n=Math.sin(u),r=Math.sin(h),s=Ai(this.e,r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=s/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:p=1+this.sinb1*a+this.cosb1*l*i;break;case this.EQUIT:p=1+l*i;break;case this.N_POLE:p=Oe+h,s=this.qp-s;break;case this.S_POLE:p=h-Oe,s=this.qp+s}if(Math.abs(p)<je)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:p=Math.sqrt(2/p),o=this.mode===this.OBLIQ?this.ymf*p*(this.cosb1*a-this.sinb1*l*i):(p=Math.sqrt(2/(1+l*i)))*a*this.ymf,e=this.xmf*p*l*n;break;case this.N_POLE:case this.S_POLE:s>=0?(e=(p=Math.sqrt(s))*n,o=i*(this.mode===this.S_POLE?p:-p)):e=o=0}}return t.x=this.a*e+this.x0,t.y=this.a*o+this.y0,t}function Nt(t){t.x-=this.x0,t.y-=this.y0;var e,o,i,n,r,s,a,l=t.x/this.a,p=t.y/this.a;if(this.sphere){var c,u=0,h=0;if(c=Math.sqrt(l*l+p*p),(o=.5*c)>1)return null;switch(o=2*Math.asin(o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=Math.sin(o),u=Math.cos(o)),this.mode){case this.EQUIT:o=Math.abs(c)<=je?0:Math.asin(p*h/c),l*=h,p=u*c;break;case this.OBLIQ:o=Math.abs(c)<=je?this.phi0:Math.asin(u*this.sinph0+p*h*this.cosph0/c),l*=h*this.cosph0,p=(u-Math.sin(o)*this.sinph0)*c;break;case this.N_POLE:p=-p,o=Oe-o;break;case this.S_POLE:o-=Oe}e=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,p):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,p*=this.dd,(s=Math.sqrt(l*l+p*p))<je)return t.x=0,t.y=this.phi0,t;n=2*Math.asin(.5*s/this.rq),i=Math.cos(n),l*=n=Math.sin(n),this.mode===this.OBLIQ?(a=i*this.sinb1+p*n*this.cosb1/s,r=this.qp*a,p=s*this.cosb1*i-p*this.sinb1*n):(a=p*n/s,r=this.qp*a,p=s*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(r=l*l+p*p))return t.x=0,t.y=this.phi0,t;a=1-r/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(l,p),o=Dt(Math.asin(a),this.apa)}return t.x=so(this.long0+e),t.y=o,t}function kt(t){var e,o=[];return o[0]=t*Mi,e=t*t,o[0]+=e*xi,o[1]=e*Ii,e*=t,o[0]+=e*Ri,o[1]+=e*Ti,o[2]=e*Li,o}function Dt(t,e){var o=t+t;return t+e[0]*Math.sin(o)+e[1]*Math.sin(o+o)+e[2]*Math.sin(o+o+o)}function jt(){Math.abs(this.lat1+this.lat2)<je||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=no(this.e3,this.sin_po,this.cos_po),this.qs1=Ai(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=no(this.e3,this.sin_po,this.cos_po),this.qs2=Ai(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Ai(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>je?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function Ft(t){var e=t.x,o=t.y;this.sin_phi=Math.sin(o),this.cos_phi=Math.cos(o);var i=Ai(this.e3,this.sin_phi,this.cos_phi),n=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,r=this.ns0*so(e-this.long0),s=n*Math.sin(r)+this.x0,a=this.rh-n*Math.cos(r)+this.y0;return t.x=s,t.y=a,t}function Ut(t){var e,o,i,n,r,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),n=0,0!==e&&(n=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-i*i)/(2*this.ns0)):(o=(this.c-i*i)/this.ns0,s=this.phi1z(this.e3,o)),r=so(n/this.ns0+this.long0),t.x=r,t.y=s,t}function Bt(t,e){var o,i,n,r,s,a=Ni(.5*e);if(t<je)return a;for(var l=t*t,p=1;p<=25;p++)if(o=Math.sin(a),i=Math.cos(a),n=t*o,r=1-n*n,s=.5*r*r/i*(e/(1-l)-o/r+.5/t*Math.log((1-n)/(1+n))),a+=s,Math.abs(s)<=1e-7)return a;return null}function Vt(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function Wt(t){var e,o,i,n,r,s,a,l,p=t.x,c=t.y;return i=so(p-this.long0),e=Math.sin(c),o=Math.cos(c),n=Math.cos(i),s=this.sin_p14*e+this.cos_p14*o*n,r=1,s>0||Math.abs(s)<=je?(a=this.x0+this.a*r*o*Math.sin(i)/s,l=this.y0+this.a*r*(this.cos_p14*e-this.sin_p14*o*n)/s):(a=this.x0+this.infinity_dist*o*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*o*n)),t.x=a,t.y=l,t}function zt(t){var e,o,i,n,r,s;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(n=Math.atan2(e,this.rc),o=Math.sin(n),i=Math.cos(n),s=Ni(i*this.sin_p14+t.y*o*this.cos_p14/e),r=Math.atan2(t.x*o,e*this.cos_p14*i-t.y*this.sin_p14*o),r=so(this.long0+r)):(s=this.phic0,r=0),t.x=r,t.y=s,t}function qt(){this.sphere||(this.k0=no(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Ht(t){var e,o,i=t.x,n=t.y,r=so(i-this.long0);if(this.sphere)e=this.x0+this.a*r*Math.cos(this.lat_ts),o=this.y0+this.a*Math.sin(n)/Math.cos(this.lat_ts);else{var s=Ai(this.e,Math.sin(n));e=this.x0+this.a*this.k0*r,o=this.y0+this.a*s*.5/this.k0}return t.x=e,t.y=o,t}function Yt(t){t.x-=this.x0,t.y-=this.y0;var e,o;return this.sphere?(e=so(this.long0+t.x/this.a/Math.cos(this.lat_ts)),o=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(o=Ui(this.e,2*t.y*this.k0/this.a),e=so(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=o,t}function Zt(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function Kt(t){var e=t.x,o=t.y,i=so(e-this.long0),n=Si(o-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*n,t}function Xt(t){var e=t.x,o=t.y;return t.x=so(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=Si(this.lat0+(o-this.y0)/this.a),t}function Jt(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=mi(this.es),this.e1=vi(this.es),this.e2=_i(this.es),this.e3=bi(this.es),this.ml0=this.a*gi(this.e0,this.e1,this.e2,this.e3,this.lat0)}function Qt(t){var e,o,i,n=t.x,r=t.y,s=so(n-this.long0);if(i=s*Math.sin(r),this.sphere)Math.abs(r)<=je?(e=this.a*s,o=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(r),o=this.a*(Si(r-this.lat0)+(1-Math.cos(i))/Math.tan(r)));else if(Math.abs(r)<=je)e=this.a*s,o=-1*this.ml0;else{var a=Ei(this.a,this.e,Math.sin(r))/Math.tan(r);e=a*Math.sin(i),o=this.a*gi(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*(1-Math.cos(i))}return t.x=e+this.x0,t.y=o+this.y0,t}function $t(t){var e,o,i,n,r,s,a,l,p;if(i=t.x-this.x0,n=t.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=je)e=so(i/this.a+this.long0),o=0;else{s=this.lat0+n/this.a,a=i*i/this.a/this.a+s*s,l=s;var c;for(r=qi;r;--r)if(c=Math.tan(l),p=-1*(s*(l*c+1)-l-.5*(l*l+a)*c)/((l-s)/c-1),l+=p,Math.abs(p)<=je){o=l;break}e=so(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(o))}else if(Math.abs(n+this.ml0)<=je)o=0,e=so(this.long0+i/this.a);else{s=(this.ml0+n)/this.a,a=i*i/this.a/this.a+s*s,l=s;var u,h,d,f,y;for(r=qi;r;--r)if(y=this.e*Math.sin(l),u=Math.sqrt(1-y*y)*Math.tan(l),h=this.a*gi(this.e0,this.e1,this.e2,this.e3,l),d=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),f=h/this.a,p=(s*(u*f+1)-f-.5*u*(f*f+a))/(this.es*Math.sin(2*l)*(f*f+a-2*s*f)/(4*u)+(s-f)*(u*d-2/Math.sin(2*l))-d),l-=p,Math.abs(p)<=je){o=l;break}u=Math.sqrt(1-this.es*Math.pow(Math.sin(o),2))*Math.tan(o),e=so(this.long0+Math.asin(i*u/this.a)/Math.sin(o))}return t.x=e,t.y=o,t}function te(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function ee(t){var e,o=t.x,i=t.y,n=i-this.lat0,r=o-this.long0,s=n/Ge*1e-5,a=r,l=1,p=0;for(e=1;e<=10;e++)l*=s,p+=this.A[e]*l;var c,u,h=p,d=a,f=1,y=0,g=0,m=0;for(e=1;e<=6;e++)c=f*h-y*d,u=y*h+f*d,f=c,y=u,g=g+this.B_re[e]*f-this.B_im[e]*y,m=m+this.B_im[e]*f+this.B_re[e]*y;return t.x=m*this.a+this.x0,t.y=g*this.a+this.y0,t}function oe(t){var e,o,i,n=t.x,r=t.y,s=n-this.x0,a=r-this.y0,l=a/this.a,p=s/this.a,c=1,u=0,h=0,d=0;for(e=1;e<=6;e++)o=c*l-u*p,i=u*l+c*p,c=o,u=i,h=h+this.C_re[e]*c-this.C_im[e]*u,d=d+this.C_im[e]*c+this.C_re[e]*u;for(var f=0;f<this.iterations;f++){var y,g,m=h,v=d,_=l,b=p;for(e=2;e<=6;e++)y=m*h-v*d,g=v*h+m*d,m=y,v=g,_+=(e-1)*(this.B_re[e]*m-this.B_im[e]*v),b+=(e-1)*(this.B_im[e]*m+this.B_re[e]*v);m=1,v=0;var E=this.B_re[1],S=this.B_im[1];for(e=2;e<=6;e++)y=m*h-v*d,g=v*h+m*d,m=y,v=g,E+=e*(this.B_re[e]*m-this.B_im[e]*v),S+=e*(this.B_im[e]*m+this.B_re[e]*v);var w=E*E+S*S;h=(_*E+b*S)/w,d=(b*E-_*S)/w}var P=h,C=d,A=1,M=0;for(e=1;e<=9;e++)A*=P,M+=this.D[e]*A;var x=this.lat0+M*Ge*1e5,R=this.long0+C;return t.x=R,t.y=x,t}function ie(){}function ne(t){var e=t.x,o=t.y,i=so(e-this.long0),n=this.x0+this.a*i,r=this.y0+this.a*Math.log(Math.tan(Math.PI/4+o/2.5))*1.25;return t.x=n,t.y=r,t}function re(t){t.x-=this.x0,t.y-=this.y0;var e=so(this.long0+t.x/this.a),o=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=o,t}function se(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=ko(this.es)}function ae(t){var e,o,i=t.x,n=t.y;if(i=so(i-this.long0),this.sphere){if(this.m)for(var r=this.n*Math.sin(n),s=Qi;s;--s){var a=(this.m*n+Math.sin(n)-r)/(this.m+Math.cos(n));if(n-=a,Math.abs(a)<je)break}else n=1!==this.n?Math.asin(this.n*Math.sin(n)):n;e=this.a*this.C_x*i*(this.m+Math.cos(n)),o=this.a*this.C_y*n}else{var l=Math.sin(n),p=Math.cos(n);o=this.a*Do(n,l,p,this.en),e=this.a*i*p/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=o,t}function le(t){var e,o,i,n;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=Ni((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Ni(Math.sin(e)/this.n)),i=so(i+this.long0),e=Si(e)):(e=jo(t.y/this.a,this.es,this.en),n=Math.abs(e),n<Oe?(n=Math.sin(e),o=this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)),
i=so(o)):n-je<Oe&&(i=this.long0)),t.x=i,t.y=e,t}function pe(){}function ce(t){for(var e=t.x,o=t.y,i=so(e-this.long0),n=o,r=Math.PI*Math.sin(o);;){var s=-(n+Math.sin(n)-r)/(1+Math.cos(n));if(n+=s,Math.abs(s)<je)break}n/=2,Math.PI/2-Math.abs(o)<je&&(i=0);var a=.900316316158*this.a*i*Math.cos(n)+this.x0,l=1.4142135623731*this.a*Math.sin(n)+this.y0;return t.x=a,t.y=l,t}function ue(t){var e,o;t.x-=this.x0,t.y-=this.y0,o=t.y/(1.4142135623731*this.a),Math.abs(o)>.999999999999&&(o=.999999999999),e=Math.asin(o);var i=so(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),o=(2*e+Math.sin(2*e))/Math.PI,Math.abs(o)>1&&(o=1);var n=Math.asin(o);return t.x=i,t.y=n,t}function he(){Math.abs(this.lat1+this.lat2)<je||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=mi(this.es),this.e1=vi(this.es),this.e2=_i(this.es),this.e3=bi(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=no(this.e,this.sinphi,this.cosphi),this.ml1=gi(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<je?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=no(this.e,this.sinphi,this.cosphi),this.ml2=gi(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=gi(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function de(t){var e,o=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var n=gi(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-n)}var r=this.ns*so(o-this.long0),s=this.x0+e*Math.sin(r),a=this.y0+this.rh-e*Math.cos(r);return t.x=s,t.y=a,t}function fe(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0;var e,o,i,n;this.ns>=0?(o=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(o=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var r=0;if(0!==o&&(r=Math.atan2(e*t.x,e*t.y)),this.sphere)return n=so(this.long0+r/this.ns),i=Si(this.g-o/this.a),t.x=n,t.y=i,t;var s=this.g-o/this.a;return i=wi(s,this.e0,this.e1,this.e2,this.e3),n=so(this.long0+r/this.ns),t.x=n,t.y=i,t}function ye(){this.R=this.a}function ge(t){var e,o,i=t.x,n=t.y,r=so(i-this.long0);Math.abs(n)<=je&&(e=this.x0+this.R*r,o=this.y0);var s=Ni(2*Math.abs(n/Math.PI));(Math.abs(r)<=je||Math.abs(Math.abs(n)-Oe)<=je)&&(e=this.x0,o=n>=0?this.y0+Math.PI*this.R*Math.tan(.5*s):this.y0+Math.PI*this.R*-Math.tan(.5*s));var a=.5*Math.abs(Math.PI/r-r/Math.PI),l=a*a,p=Math.sin(s),c=Math.cos(s),u=c/(p+c-1),h=u*u,d=u*(2/p-1),f=d*d,y=Math.PI*this.R*(a*(u-f)+Math.sqrt(l*(u-f)*(u-f)-(f+l)*(h-f)))/(f+l);r<0&&(y=-y),e=this.x0+y;var g=l+u;return y=Math.PI*this.R*(d*g-a*Math.sqrt((f+l)*(l+1)-g*g))/(f+l),o=n>=0?this.y0+y:this.y0-y,t.x=e,t.y=o,t}function me(t){var e,o,i,n,r,s,a,l,p,c,u,h,d;return t.x-=this.x0,t.y-=this.y0,u=Math.PI*this.R,i=t.x/u,n=t.y/u,r=i*i+n*n,s=-Math.abs(n)*(1+r),a=s-2*n*n+i*i,l=-2*s+1+2*n*n+r*r,d=n*n/l+(2*a*a*a/l/l/l-9*s*a/l/l)/27,p=(s-a*a/3/l)/l,c=2*Math.sqrt(-p/3),u=3*d/p/c,Math.abs(u)>1&&(u=u>=0?1:-1),h=Math.acos(u)/3,o=t.y>=0?(-c*Math.cos(h+Math.PI/3)-a/3/l)*Math.PI:-(-c*Math.cos(h+Math.PI/3)-a/3/l)*Math.PI,e=Math.abs(i)<je?this.long0:so(this.long0+Math.PI*(r-1+Math.sqrt(1+2*(i*i-n*n)+r*r))/2/i),t.x=e,t.y=o,t}function ve(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function _e(t){var e,o,i,n,r,s,a,l,p,c,u,h,d,f,y,g,m,v,_,b,E,S,w,P=t.x,C=t.y,A=Math.sin(t.y),M=Math.cos(t.y),x=so(P-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=je?(t.x=this.x0+this.a*(Oe-C)*Math.sin(x),t.y=this.y0-this.a*(Oe-C)*Math.cos(x),t):Math.abs(this.sin_p12+1)<=je?(t.x=this.x0+this.a*(Oe+C)*Math.sin(x),t.y=this.y0+this.a*(Oe+C)*Math.cos(x),t):(v=this.sin_p12*A+this.cos_p12*M*Math.cos(x),g=Math.acos(v),m=g/Math.sin(g),t.x=this.x0+this.a*m*M*Math.sin(x),t.y=this.y0+this.a*m*(this.cos_p12*A-this.sin_p12*M*Math.cos(x)),t):(e=mi(this.es),o=vi(this.es),i=_i(this.es),n=bi(this.es),Math.abs(this.sin_p12-1)<=je?(r=this.a*gi(e,o,i,n,Oe),s=this.a*gi(e,o,i,n,C),t.x=this.x0+(r-s)*Math.sin(x),t.y=this.y0-(r-s)*Math.cos(x),t):Math.abs(this.sin_p12+1)<=je?(r=this.a*gi(e,o,i,n,Oe),s=this.a*gi(e,o,i,n,C),t.x=this.x0+(r+s)*Math.sin(x),t.y=this.y0+(r+s)*Math.cos(x),t):(a=A/M,l=Ei(this.a,this.e,this.sin_p12),p=Ei(this.a,this.e,A),c=Math.atan((1-this.es)*a+this.es*l*this.sin_p12/(p*M)),u=Math.atan2(Math.sin(x),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(x)),_=0===u?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(u)-Math.PI)<=je?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(x)*Math.cos(c)/Math.sin(u)),h=this.e*this.sin_p12/Math.sqrt(1-this.es),d=this.e*this.cos_p12*Math.cos(u)/Math.sqrt(1-this.es),f=h*d,y=d*d,b=_*_,E=b*_,S=E*_,w=S*_,g=l*_*(1-b*y*(1-y)/6+E/8*f*(1-2*y)+S/120*(y*(4-7*y)-3*h*h*(1-7*y))-w/48*f),t.x=this.x0+g*Math.sin(u),t.y=this.y0+g*Math.cos(u),t))}function be(t){t.x-=this.x0,t.y-=this.y0;var e,o,i,n,r,s,a,l,p,c,u,h,d,f,y,g,m,v,_,b,E,S,w;if(this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*Oe*this.a)return;return o=e/this.a,i=Math.sin(o),n=Math.cos(o),r=this.long0,Math.abs(e)<=je?s=this.lat0:(s=Ni(n*this.sin_p12+t.y*i*this.cos_p12/e),a=Math.abs(this.lat0)-Oe,r=so(Math.abs(a)<=je?this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y):this.long0+Math.atan2(t.x*i,e*this.cos_p12*n-t.y*this.sin_p12*i))),t.x=r,t.y=s,t}return l=mi(this.es),p=vi(this.es),c=_i(this.es),u=bi(this.es),Math.abs(this.sin_p12-1)<=je?(h=this.a*gi(l,p,c,u,Oe),e=Math.sqrt(t.x*t.x+t.y*t.y),d=h-e,s=wi(d/this.a,l,p,c,u),r=so(this.long0+Math.atan2(t.x,-1*t.y)),t.x=r,t.y=s,t):Math.abs(this.sin_p12+1)<=je?(h=this.a*gi(l,p,c,u,Oe),e=Math.sqrt(t.x*t.x+t.y*t.y),d=e-h,s=wi(d/this.a,l,p,c,u),r=so(this.long0+Math.atan2(t.x,t.y)),t.x=r,t.y=s,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),f=Ei(this.a,this.e,this.sin_p12),m=Math.cos(g),v=this.e*this.cos_p12*m,_=-v*v/(1-this.es),b=3*this.es*(1-_)*this.sin_p12*this.cos_p12*m/(1-this.es),E=e/f,S=E-_*(1+_)*Math.pow(E,3)/6-b*(1+3*_)*Math.pow(E,4)/24,w=1-_*S*S/2-E*S*S*S/6,y=Math.asin(this.sin_p12*Math.cos(S)+this.cos_p12*Math.sin(S)*m),r=so(this.long0+Math.asin(Math.sin(g)*Math.sin(S)/Math.cos(y))),s=Math.atan((1-this.es*w*this.sin_p12/Math.sin(y))*Math.tan(y)/(1-this.es)),t.x=r,t.y=s,t)}function Ee(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Se(t){var e,o,i,n,r,s,a,l,p=t.x,c=t.y;return i=so(p-this.long0),e=Math.sin(c),o=Math.cos(c),n=Math.cos(i),s=this.sin_p14*e+this.cos_p14*o*n,r=1,(s>0||Math.abs(s)<=je)&&(a=this.a*r*o*Math.sin(i),l=this.y0+this.a*r*(this.cos_p14*e-this.sin_p14*o*n)),t.x=a,t.y=l,t}function we(t){var e,o,i,n,r,s,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),o=Ni(e/this.a),i=Math.sin(o),n=Math.cos(o),s=this.long0,Math.abs(e)<=je?(a=this.lat0,t.x=s,t.y=a,t):(a=Ni(n*this.sin_p14+t.y*i*this.cos_p14/e),r=Math.abs(this.lat0)-Oe,Math.abs(r)<=je?(s=so(this.lat0>=0?this.long0+Math.atan2(t.x,-t.y):this.long0-Math.atan2(-t.x,t.y)),t.x=s,t.y=a,t):(s=so(this.long0+Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i)),t.x=s,t.y=a,t))}function Pe(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Oe-Be/2?this.face=hn.TOP:this.lat0<=-(Oe-Be/2)?this.face=hn.BOTTOM:Math.abs(this.long0)<=Be?this.face=hn.FRONT:Math.abs(this.long0)<=Oe+Be?this.face=this.long0>0?hn.RIGHT:hn.LEFT:this.face=hn.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Ce(t){var e,o,i,n,r,s,a={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,o=t.x,this.face===hn.TOP)n=Oe-e,o>=Be&&o<=Oe+Be?(l.value=dn.AREA_0,i=o-Oe):o>Oe+Be||o<=-(Oe+Be)?(l.value=dn.AREA_1,i=o>0?o-We:o+We):o>-(Oe+Be)&&o<=-Be?(l.value=dn.AREA_2,i=o+Oe):(l.value=dn.AREA_3,i=o);else if(this.face===hn.BOTTOM)n=Oe+e,o>=Be&&o<=Oe+Be?(l.value=dn.AREA_0,i=-o+Oe):o<Be&&o>=-Be?(l.value=dn.AREA_1,i=-o):o<-Be&&o>=-(Oe+Be)?(l.value=dn.AREA_2,i=-o-Oe):(l.value=dn.AREA_3,i=o>0?-o+We:-o-We);else{var p,c,u,h,d,f,y;this.face===hn.RIGHT?o=xe(o,+Oe):this.face===hn.BACK?o=xe(o,+We):this.face===hn.LEFT&&(o=xe(o,-Oe)),h=Math.sin(e),d=Math.cos(e),f=Math.sin(o),y=Math.cos(o),p=d*y,c=d*f,u=h,this.face===hn.FRONT?(n=Math.acos(p),i=Me(n,u,c,l)):this.face===hn.RIGHT?(n=Math.acos(c),i=Me(n,u,-p,l)):this.face===hn.BACK?(n=Math.acos(-p),i=Me(n,u,-c,l)):this.face===hn.LEFT?(n=Math.acos(-c),i=Me(n,u,p,l)):(n=i=0,l.value=dn.AREA_0)}return s=Math.atan(12/We*(i+Math.acos(Math.sin(i)*Math.cos(Be))-Oe)),r=Math.sqrt((1-Math.cos(n))/(Math.cos(s)*Math.cos(s))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===dn.AREA_1?s+=Oe:l.value===dn.AREA_2?s+=We:l.value===dn.AREA_3&&(s+=1.5*We),a.x=r*Math.cos(s),a.y=r*Math.sin(s),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t}function Ae(t){var e,o,i,n,r,s,a,l,p,c={lam:0,phi:0},u={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,o=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?u.value=dn.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(u.value=dn.AREA_1,e-=Oe):t.x<0&&-t.x>=Math.abs(t.y)?(u.value=dn.AREA_2,e=e<0?e+We:e-We):(u.value=dn.AREA_3,e+=Oe),p=We/12*Math.tan(e),r=Math.sin(p)/(Math.cos(p)-1/Math.sqrt(2)),s=Math.atan(r),i=Math.cos(e),n=Math.tan(o),a=1-i*i*n*n*(1-Math.cos(Math.atan(1/Math.cos(s)))),a<-1?a=-1:a>1&&(a=1),this.face===hn.TOP)l=Math.acos(a),c.phi=Oe-l,u.value===dn.AREA_0?c.lam=s+Oe:u.value===dn.AREA_1?c.lam=s<0?s+We:s-We:u.value===dn.AREA_2?c.lam=s-Oe:c.lam=s;else if(this.face===hn.BOTTOM)l=Math.acos(a),c.phi=l-Oe,u.value===dn.AREA_0?c.lam=-s+Oe:u.value===dn.AREA_1?c.lam=-s:u.value===dn.AREA_2?c.lam=-s-Oe:c.lam=s<0?-s-We:-s+We;else{var h,d,f;h=a,p=h*h,f=p>=1?0:Math.sqrt(1-p)*Math.sin(s),p+=f*f,d=p>=1?0:Math.sqrt(1-p),u.value===dn.AREA_1?(p=d,d=-f,f=p):u.value===dn.AREA_2?(d=-d,f=-f):u.value===dn.AREA_3&&(p=d,d=f,f=-p),this.face===hn.RIGHT?(p=h,h=-d,d=p):this.face===hn.BACK?(h=-h,d=-d):this.face===hn.LEFT&&(p=h,h=d,d=-p),c.phi=Math.acos(-f)-Oe,c.lam=Math.atan2(d,h),this.face===hn.RIGHT?c.lam=xe(c.lam,-Oe):this.face===hn.BACK?c.lam=xe(c.lam,-We):this.face===hn.LEFT&&(c.lam=xe(c.lam,+Oe))}if(0!==this.es){var y,g,m;y=c.phi<0?1:0,g=Math.tan(c.phi),m=this.b/Math.sqrt(g*g+this.one_minus_f_squared),c.phi=Math.atan(Math.sqrt(this.a*this.a-m*m)/(this.one_minus_f*m)),y&&(c.phi=-c.phi)}return c.lam+=this.long0,t.x=c.lam,t.y=c.phi,t}function Me(t,e,o,i){var n;return t<je?(i.value=dn.AREA_0,n=0):(n=Math.atan2(e,o),Math.abs(n)<=Be?i.value=dn.AREA_0:n>Be&&n<=Oe+Be?(i.value=dn.AREA_1,n-=Oe):n>Oe+Be||n<=-(Oe+Be)?(i.value=dn.AREA_2,n=n>=0?n-We:n+We):(i.value=dn.AREA_3,n+=Oe)),n}function xe(t,e){var o=t+e;return o<-We?o+=Ve:o>+We&&(o-=Ve),o}var Re=1,Ie=2,Te=4,Le=5,Ge=484813681109536e-20,Oe=Math.PI/2,Ne=.16666666666666666,ke=.04722222222222222,De=.022156084656084655,je=1e-10,Fe=.017453292519943295,Ue=57.29577951308232,Be=Math.PI/4,Ve=2*Math.PI,We=3.14159265359,ze={};ze.greenwich=0,ze.lisbon=-9.131906111111,ze.paris=2.337229166667,ze.bogota=-74.080916666667,ze.madrid=-3.687938888889,ze.rome=12.452333333333,ze.bern=7.439583333333,ze.jakarta=106.807719444444,ze.ferro=-17.666666666667,ze.brussels=4.367975,ze.stockholm=18.058277777778,ze.athens=23.7163375,ze.oslo=10.722916666667;var qe={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},He=/[\s_\-\/\(\)]/g,Ye=function(e){var o,i,n,r={},s=e.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var o=e.split("=");return o.push(!0),t[o[0].toLowerCase()]=o[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*Fe},lat_1:function(t){r.lat1=t*Fe},lat_2:function(t){r.lat2=t*Fe},lat_ts:function(t){r.lat_ts=t*Fe},lon_0:function(t){r.long0=t*Fe},lon_1:function(t){r.long1=t*Fe},lon_2:function(t){r.long2=t*Fe},alpha:function(t){r.alpha=parseFloat(t)*Fe},lonc:function(t){r.longc=t*Fe},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(e){r.units=e;var o=t(qe,e);o&&(r.to_meter=o.to_meter)},from_greenwich:function(t){r.from_greenwich=t*Fe},pm:function(e){var o=t(ze,e);r.from_greenwich=(o||parseFloat(e))*Fe},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(r.axis=t)}};for(o in s)i=s[o],o in a?(n=a[o],"function"==typeof n?n(i):r[n]=i):r[o]=i;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r},Ze=1,Ke=/\s/,Xe=/[A-Za-z]/,Je=/[A-Za-z84]/,Qe=/[,\]]/,$e=/[\d\.E\-\+]/;e.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;Ke.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case Ze:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},e.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(Qe.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},e.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=Ze)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=Ze,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},e.prototype.number=function(t){if($e.test(t))return void(this.word+=t);if(Qe.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)},e.prototype.quoted=function(t){if('"'===t)return void(this.state=5);this.word+=t},e.prototype.keyword=function(t){if(Je.test(t))return void(this.word+=t);if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=Ze)}if(Qe.test(t))return void this.afterItem(t);throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place)},e.prototype.neutral=function(t){if(Xe.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if($e.test(t))return this.word=t,void(this.state=3);if(Qe.test(t))return void this.afterItem(t);throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place)},e.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var to=.017453292519943295,eo=function(t){var e=o(t),i=e.shift(),r=e.shift();e.unshift(["name",r]),e.unshift(["type",i]);var s={};return n(e,s),a(s),s};!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(l);var oo=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],io=function(t,e){t=t||{};var o,i;if(!e)return t;for(i in e)void 0!==(o=e[i])&&(t[i]=o);return t},no=function(t,e,o){var i=t*e;return o/Math.sqrt(1-i*i)},ro=function(t){return t<0?-1:1},so=function(t){return Math.abs(t)<=We?t:t-ro(t)*Ve},ao=function(t,e,o){var i=t*o,n=.5*t;return i=Math.pow((1-i)/(1+i),n),Math.tan(.5*(Oe-e))/i},lo=function(t,e){for(var o,i,n=.5*t,r=Oe-2*Math.atan(e),s=0;s<=15;s++)if(o=t*Math.sin(r),i=Oe-2*Math.atan(e*Math.pow((1-o)/(1+o),n))-r,r+=i,Math.abs(i)<=1e-10)return r;return-9999},po=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],co={init:f,forward:y,inverse:g,names:po},uo=["longlat","identity"],ho={init:m,forward:v,inverse:v,names:uo},fo=[co,ho],yo={},go=[],mo={start:E,add:_,get:b},vo={};vo.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},vo.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},vo.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},vo.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},vo.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},vo.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},vo.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},vo.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},vo.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},vo.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},vo.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},vo.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},vo.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},vo.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},vo.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},vo.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},vo.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},vo.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},vo.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},vo.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},vo.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},vo.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},vo.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},vo.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},vo.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},vo.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},vo.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},vo.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},vo.hough={a:6378270,rf:297,ellipseName:"Hough"},vo.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},vo.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},vo.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},vo.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},vo.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},vo.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},vo.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},vo.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},vo.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},vo.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},vo.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},vo.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var _o=vo.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};vo.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var bo={};bo.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},bo.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},bo.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},bo.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},bo.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},bo.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},bo.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},bo.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},bo.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},bo.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},bo.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},bo.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},bo.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},bo.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},bo.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},bo.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},bo.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"},C.projections=mo,C.projections.start();var Eo=function(t,e,o){return A(t,e)?o:t.datum_type===Le||e.datum_type===Le?o:t.es!==e.es||t.a!==e.a||T(t.datum_type)||T(e.datum_type)?(o=M(o,t.es,t.a),T(t.datum_type)&&(o=R(o,t.datum_type,t.datum_params)),T(e.datum_type)&&(o=I(o,e.datum_type,e.datum_params)),x(o,e.es,e.a,e.b)):o},So=function(t,e,o){var i,n,r,s=o.x,a=o.y,l=o.z||0,p={};for(r=0;r<3;r++)if(!e||2!==r||void 0!==o.z)switch(0===r?(i=s,n="x"):1===r?(i=a,n="y"):(i=l,n="z"),t.axis[r]){case"e":p[n]=i;break;case"w":p[n]=-i;break;case"n":p[n]=i;break;case"s":p[n]=-i;break;case"u":void 0!==o[n]&&(p.z=i);break;case"d":void 0!==o[n]&&(p.z=-i);break;default:return null}return p},wo=function(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e},Po=function(t){L(t.x),L(t.y)},Co=C("WGS84"),Ao=6,Mo="AJSAJS",xo="AFAFAF",Ro=65,Io=73,To=79,Lo=86,Go=90,Oo={forward:j,inverse:F,toPoint:U};tt.fromMGRS=function(t){return new tt(U(t))},tt.prototype.toMGRS=function(t){return j([this.x,this.y],t)};var No=.01068115234375,ko=function(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+t*No))),e[1]=t*(.75-t*(.046875+t*(.01953125+t*No)));var o=t*t;return e[2]=o*(.46875-t*(.013020833333333334+.007120768229166667*t)),o*=t,e[3]=o*(.3645833333333333-.005696614583333333*t),e[4]=o*t*.3076171875,e},Do=function(t,e,o,i){return o*=e,e*=e,i[0]*t-o*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))},jo=function(t,e,o){for(var i=1/(1-e),n=t,r=20;r;--r){var s=Math.sin(n),a=1-e*s*s;if(a=(Do(n,s,Math.cos(n),o)-t)*(a*Math.sqrt(a))*i,n-=a,Math.abs(a)<je)return n}return n},Fo=["Transverse_Mercator","Transverse Mercator","tmerc"],Uo={init:et,forward:ot,inverse:it,names:Fo},Bo=function(t){var e=Math.exp(t);return e=(e-1/e)/2},Vo=function(t,e){t=Math.abs(t),e=Math.abs(e);var o=Math.max(t,e),i=Math.min(t,e)/(o||1);return o*Math.sqrt(1+Math.pow(i,2))},Wo=function(t){var e=1+t,o=e-1;return 0===o?t:t*Math.log(e)/o},zo=function(t){var e=Math.abs(t);return e=Wo(e*(1+e/(Vo(1,e)+1))),t<0?-e:e},qo=function(t,e){for(var o,i=2*Math.cos(2*e),n=t.length-1,r=t[n],s=0;--n>=0;)o=i*r-s+t[n],s=r,r=o;return e+o*Math.sin(2*e)},Ho=function(t,e){for(var o,i=2*Math.cos(e),n=t.length-1,r=t[n],s=0;--n>=0;)o=i*r-s+t[n],s=r,r=o;return Math.sin(e)*o},Yo=function(t){var e=Math.exp(t);return e=(e+1/e)/2},Zo=function(t,e,o){for(var i,n,r=Math.sin(e),s=Math.cos(e),a=Bo(o),l=Yo(o),p=2*s*l,c=-2*r*a,u=t.length-1,h=t[u],d=0,f=0,y=0;--u>=0;)i=f,n=d,f=h,d=y,h=p*f-i-c*d+t[u],y=c*f-n+p*d;return p=r*l,c=s*a,[p*h-c*y,p*y+c*h]},Ko=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"],Xo={init:nt,forward:rt,inverse:st,names:Ko},Jo=function(t,e){if(void 0===t){if((t=Math.floor(30*(so(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t},Qo=["Universal Transverse Mercator System","utm"],$o={init:at,names:Qo,dependsOn:"etmerc"},ti=function(t,e){return Math.pow((1-t)/(1+t),e)},ei=20,oi=["gauss"],ii={init:lt,forward:pt,inverse:ct,names:oi},ni=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative"],ri={init:ut,forward:ht,inverse:dt,names:ni},si=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ai={init:yt,forward:gt,inverse:mt,names:si,ssfn_:ft},li=["somerc"],pi={init:vt,forward:_t,inverse:bt,names:li},ci=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"],ui={init:Et,forward:St,inverse:wt,names:ci},hi=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"],di={init:Pt,forward:Ct,inverse:At,names:hi},fi=["Krovak","krovak"],yi={init:Mt,forward:xt,inverse:Rt,names:fi},gi=function(t,e,o,i,n){return t*n-e*Math.sin(2*n)+o*Math.sin(4*n)-i*Math.sin(6*n)},mi=function(t){return 1-.25*t*(1+t/16*(3+1.25*t))},vi=function(t){return.375*t*(1+.25*t*(1+.46875*t))},_i=function(t){return.05859375*t*t*(1+.75*t)},bi=function(t){return t*t*t*(35/3072)},Ei=function(t,e,o){var i=e*o;return t/Math.sqrt(1-i*i)},Si=function(t){return Math.abs(t)<Oe?t:t-ro(t)*Math.PI},wi=function(t,e,o,i,n){var r,s;r=t/e;for(var a=0;a<15;a++)if(s=(t-(e*r-o*Math.sin(2*r)+i*Math.sin(4*r)-n*Math.sin(6*r)))/(e-2*o*Math.cos(2*r)+4*i*Math.cos(4*r)-6*n*Math.cos(6*r)),r+=s,Math.abs(s)<=1e-10)return r;return NaN},Pi=["Cassini","Cassini_Soldner","cass"],Ci={init:It,forward:Tt,inverse:Lt,names:Pi},Ai=function(t,e){var o;return t>1e-7?(o=t*e,(1-t*t)*(e/(1-o*o)-.5/t*Math.log((1-o)/(1+o)))):2*e},Mi=.3333333333333333,xi=.17222222222222222,Ri=.10257936507936508,Ii=.06388888888888888,Ti=.0664021164021164,Li=.016415012942191543,Gi=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],Oi={init:Gt,forward:Ot,inverse:Nt,names:Gi,S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},Ni=function(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)},ki=["Albers_Conic_Equal_Area","Albers","aea"],Di={init:jt,forward:Ft,inverse:Ut,names:ki,phi1z:Bt},ji=["gnom"],Fi={init:Vt,forward:Wt,inverse:zt,names:ji},Ui=function(t,e){var o=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-o)<1e-6)return e<0?-1*Oe:Oe;for(var i,n,r,s,a=Math.asin(.5*e),l=0;l<30;l++)if(n=Math.sin(a),r=Math.cos(a),s=t*n,i=Math.pow(1-s*s,2)/(2*r)*(e/(1-t*t)-n/(1-s*s)+.5/t*Math.log((1-s)/(1+s))),a+=i,Math.abs(i)<=1e-10)return a;return NaN},Bi=["cea"],Vi={init:qt,forward:Ht,inverse:Yt,names:Bi},Wi=["Equirectangular","Equidistant_Cylindrical","eqc"],zi={init:Zt,forward:Kt,inverse:Xt,names:Wi},qi=20,Hi=["Polyconic","poly"],Yi={init:Jt,forward:Qt,inverse:$t,names:Hi},Zi=["New_Zealand_Map_Grid","nzmg"],Ki={init:te,forward:ee,inverse:oe,names:Zi},Xi=["Miller_Cylindrical","mill"],Ji={init:ie,forward:ne,inverse:re,names:Xi},Qi=20,$i=["Sinusoidal","sinu"],tn={init:se,forward:ae,inverse:le,names:$i},en=["Mollweide","moll"],on={init:pe,forward:ce,inverse:ue,names:en},nn=["Equidistant_Conic","eqdc"],rn={init:he,forward:de,inverse:fe,names:nn},sn=["Van_der_Grinten_I","VanDerGrinten","vandg"],an={init:ye,forward:ge,inverse:me,names:sn},ln=["Azimuthal_Equidistant","aeqd"],pn={init:ve,forward:_e,inverse:be,names:ln},cn=["ortho"],un={init:Ee,forward:Se,inverse:we,names:cn},hn={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},dn={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4},fn=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],yn={init:Pe,forward:Ce,inverse:Ae,names:fn};return D.defaultDatum="WGS84",D.Proj=C,D.WGS84=new D.Proj("WGS84"),D.Point=tt,D.toPoint=wo,D.defs=l,D.transform=O,D.mgrs=Oo,D.version="2.4.4",function(t){t.Proj.projections.add(Uo),t.Proj.projections.add(Xo),t.Proj.projections.add($o),t.Proj.projections.add(ri),t.Proj.projections.add(ai),t.Proj.projections.add(pi),t.Proj.projections.add(ui),t.Proj.projections.add(di),t.Proj.projections.add(yi),t.Proj.projections.add(Ci),t.Proj.projections.add(Oi),t.Proj.projections.add(Di),t.Proj.projections.add(Fi),t.Proj.projections.add(Vi),t.Proj.projections.add(zi),t.Proj.projections.add(Yi),t.Proj.projections.add(Ki),t.Proj.projections.add(Ji),t.Proj.projections.add(tn),t.Proj.projections.add(on),t.Proj.projections.add(rn),t.Proj.projections.add(an),t.Proj.projections.add(pn),t.Proj.projections.add(un),t.Proj.projections.add(yn)}(D),D}),e},function(t,e,o){"use strict";return function(t){Object.defineProperty(e,"__esModule",{value:!0});var o={configuration:null,isConfigLoaded:function(){var e="undefined"!=typeof window?window:"undefined"!=typeof self?self:void 0!==t?t:{};return!(!e.Gp||!e.Gp.Config||0===Object.keys(e.Gp.Config).length)&&(this.configuration=e.Gp.Config,!0)},getLayerId:function(t,e){var o=null;if(this.configuration){var i=this.configuration.layers;for(var n in i)if(i.hasOwnProperty(n)){var r=n.split("$");if(t===r[0]&&r[1]){var s=r[1].split(":"),a=r[1].split(";");if(a[1]===e){o=n;break}if(s[2]===e){o=n;break}}}}return o||console.log("ERROR layer id (layer name: "+t+" / service: "+e+") was not found !?"),o},getLayerParams:function(t,e,o){var i={};if(this.configuration){var n=this.getLayerId(t,e);if(n){var r=this.configuration.layers[n],s=r.apiKeys[0];if(o&&o!==s)return void console.log("ERROR different keys ("+o+" !== "+s+") !?");o=o||s,i.key=o,i.url=r.getServerUrl(o),i.version=r.getServiceParams().version,i.styles=r.getDefaultStyle(),i.format=r.getDefaultFormat(),i.projection=r.getDefaultProjection(),i.minScale=r.getMinScaleDenominator(),i.maxScale=r.getMaxScaleDenominator(),i.extent=r.getBBOX(),i.legends=r.getLegends(),i.metadata=r.getMetadata(),i.originators=r.getOriginators(),i.title=r.getTitle(),i.description=r.getDescription(),i.quicklookUrl=r.getQuicklookUrl(),r.wmtsOptions&&(i.tileMatrixSetLimits=r.wmtsOptions.tileMatrixSetLimits);var a=r.getTMSID();if(a){i.TMSLink=a;var l=this.configuration.getTMSConf(a);i.matrixOrigin=l.getTopLeftCorner(),i.nativeResolutions=l.nativeResolutions,i.matrixIds=l.matrixIds,i.tileMatrices=l.tileMatrices}}}return i},getServiceParams:function(t,e,o){var i={};if(this.configuration){var n=this.getLayerId(t,e);if(n){var r=this.configuration.layers[n],s=r.apiKeys[0];if(o&&o!==s)return;o=o||s,i.key=o,i.url=r.getServerUrl(o),i.version=r.getServiceParams().version,i.extent=r.getBBOX(),i.title=r.getTitle(),i.description=r.getDescription()}}return i},getResolutions:function(){var t=[];return this.configuration&&(t=this.configuration.generalOptions.wgs84Resolutions),t},getTileMatrix:function(t){var e={};return this.configuration&&t&&(e=this.configuration.tileMatrixSets[t.toUpperCase()]),e},getGlobalConstraints:function(t){var e={};if(t){var o=this.configuration.layers[t];e.projection=o.getDefaultProjection(),e.minScale=o.getMinScaleDenominator(),e.maxScale=o.getMaxScaleDenominator(),e.extent=o.getBBOX()}return e}};e.default=o}.call(e,o(75)),e},function(t,e,o){"use strict";function i(t){this.name=null,this._element=null,this._target=null,this._globe=null,this.setOptions(t)}return Object.defineProperty(e,"__esModule",{value:!0}),i.prototype.constructor=i,i.prototype.getElement=function(){return this._element},i.prototype.setTarget=function(t,e){if(t){if(e&&"absolute"!==e&&"relative"!==e)return void console.log("[ERROR] Widget:setTarget - position value should be 'absolute' or 'relative'");if(this._target&&this._element&&this._target.removeChild(this._element),this._target=t,!this._element)return void console.log("[ERROR] Widget:setTarget - widget element not created");this._element.style.position=e||"relative",t.appendChild(this._element)}},i.prototype.getTarget=function(){return this._target},i.prototype.setOptions=function(t){this.name=t.name,this._element=t.element,this.setTarget(t.target,t.position)},i.prototype.getGlobe=function(){return this._globe},i.prototype.setGlobe=function(t){this._globe=t},
e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){t=t||{};var e=t.options||{},o=t.layers||[];if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(o&&!Array.isArray(o))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(e&&"object"!==(void 0===e?"undefined":r(e)))throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize(e,o);var i=this._initContainer(e);a.default.control.Control.call(this,{element:i,target:e.target,render:e.render})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(1),a=i(s),l=o(0),p=i(l),c=o(2),u=i(c),h=o(36),d=i(h);return a.default.inherits(n,a.default.control.Control),n.prototype=Object.create(a.default.control.Control.prototype,{}),p.default.assign(n.prototype,d.default),n.prototype.constructor=n,n.prototype.setMap=function(t){if(t)this._addMapLayers(t),this._listeners.onMoveListener=t.on("moveend",function(){this._onMapMoveEnd.call(this,t)},this),this._listeners.onAddListener=t.getLayers().on("add",function(t){var e,o=t.element;o.hasOwnProperty("gpLayerId")?e=o.gpLayerId:(e=this._layerId,o.gpLayerId=e,this._layerId++),this._layers[e]||this.addLayer(o)},this),this._listeners.onRemoveListener=t.getLayers().on("remove",function(t){var e=t.element,o=e.gpLayerId;this._layers[o]&&this.removeLayer(e)},this);else{a.default.Observable.unByKey(this._listeners.onMoveListener),a.default.Observable.unByKey(this._listeners.onAddListener),a.default.Observable.unByKey(this._listeners.onRemoveListener);for(var e=this._layersOrder.length-1;e>=0;e--)this._layersOrder[e].layer.setZIndex(0)}a.default.control.Control.prototype.setMap.call(this,t)},n.prototype.addLayer=function(t,e){var o=this.getMap();if(e=e||{},!t)return void console.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");var i=t.gpLayerId;if("undefined"===i)return void console.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for "+t+" layer (layer id not found)");var n=!1;if(o.getLayers().forEach(function(t){t.gpLayerId===i&&(n=!0)},this),!n)return void console.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",t," layer (layer is not in map.getLayers() )");if(this._layers[i]){if(this._layers[i]&&e){for(var r in e)e.hasOwnProperty(r)&&(this._layers[i][r]=e[r]);if(e.title){var s=document.getElementById(this._addUID("GPname_ID_"+i));s&&(s.innerHTML=e.title,s.title=e.description||e.title)}var a=document.getElementById(this._addUID("GPinfo_ID_"+i));if(!document.getElementById(this._addUID("GPinfo_ID_"+i))&&e.description){var l=document.getElementById(this._addUID("GPadvancedTools_ID_"+i));l&&l.appendChild(this._createAdvancedToolInformationElement({id:i}))}a&&"GPlayerInfoOpened"===a.className&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",a.className)}}else{var p=this.getLayerInfo(t)||{},c=t.getOpacity(),u=t.getVisible(),h=this.isInRange(t,o),d={layer:t,id:i,opacity:null!=c?c:1,visibility:null==u||u,inRange:null==h||h,title:null!=e.title?e.title:p._title||i,description:e.description||p._description||null,legends:e.legends||p._legends||[],metadata:e.metadata||p._metadata||[],quicklookUrl:e.quicklookUrl||p._quicklookUrl||null};this._layers[i]=d;var f=this._createLayerDiv(d);this._layers[i].div=f,t.getZIndex&&0!==t.getZIndex()||t._forceNullzIndex?this._updateLayersOrder(o):(this._layersOrder.unshift(d),this._lastZIndex++,t.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(f,this._layerListContainer.firstChild)),t.on("change:opacity",this._updateLayerOpacity,this),t.on("change:visible",this._updateLayerVisibility,this);var y=this,g=function(t){y._updateLayersOrder.call(y,t)};null==this._layers[i].onZIndexChangeEvent&&(this._layers[i].onZIndexChangeEvent=t.on("change:zIndex",g))}},n.prototype.removeLayer=function(t){var e=t.gpLayerId,o=document.getElementById(this._addUID("GPlayersList")),i=document.getElementById(this._addUID("GPinfo_ID_"+e));i&&"GPlayerInfoOpened"===i.className&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",i.className);var n=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+e));o.removeChild(n);var r=Math.abs(t.getZIndex()-this._lastZIndex);this._layersOrder.splice(r,1),this._lastZIndex--;for(var s=this._layersOrder,a=0;a<s.length;a++)s[a].layer.setZIndex(this._lastZIndex-a);delete this._layers[e]},n.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");var e=!document.getElementById(this._addUID("GPshowLayersList")).checked;if(!(t&&e||!t&&!e)){if(!e){for(var o=document.getElementsByClassName("GPlayerInfoOpened"),i=0;i<o.length;i++)o[i].className="GPlayerInfo";document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}document.getElementById(this._addUID("GPshowLayersList")).checked=!t}},n.prototype.getCollapsed=function(){return this.collapsed},n.prototype.setRemovable=function(t,e){if(t){var o=t.gpLayerId;if(null==o)return void console.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");var i=document.getElementById(this._addUID("GPremove_ID_"+o));console.log(i.style.display),i&&(!1===e?i.style.display="none":!0===e&&(i.style.display="block"))}},n.prototype._initialize=function(t,e){this._uid=u.default.generate(),this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=void 0===t.collapsed||t.collapsed,this._layerListContainer=null,this._listeners={};for(var o=0;o<e.length;o++){var i=e[o].layer;if(i){var n;i.hasOwnProperty("gpLayerId")?n=i.gpLayerId:(n=this._layerId,i.gpLayerId=n,this._layerId++);var r=e[o].config||{},s=i.getOpacity(),a=i.getVisible(),l={layer:i,id:n,opacity:null!=s?s:1,visibility:null==a||a,title:null!=r.title?r.title:n,description:r.description||null,legends:r.legends||[],metadata:r.metadata||[],quicklookUrl:r.quicklookUrl||null};this._layers[n]=l}}},n.prototype._initContainer=function(){var t=this._createMainContainerElement(),e=this._createMainLayersShowElement();t.appendChild(e),this.collapsed?this.collapsed=!0:(e.checked="checked",this.collapsed=!1);var o=this,i=function(t){this.collapsed=!t.target.checked,this.dispatchEvent("change:collapsed")};e.addEventListener("click",function(t){i.call(o,t)});var n=this._layerListContainer=this._createMainLayersElement();t.appendChild(n),this._createDraggableElement(n,this);var r=this._createMainPictoElement();t.appendChild(r);var s=this._createMainInfoElement();return t.appendChild(s),t},n.prototype._addMapLayers=function(t){this._layersIndex={};var e=this;t.getLayers().forEach(function(e){var o;e.hasOwnProperty("gpLayerId")?o=e.gpLayerId:(o=this._layerId,e.gpLayerId=o,this._layerId++);var i=this.getLayerInfo(e)||{};if(this._layers[o])this._layers[o].opacity=e.getOpacity(),this._layers[o].visibility=e.getVisible(),this._layers[o].inRange=this.isInRange(e,t);else{var n=e.getOpacity(),r=e.getVisible(),s=this.isInRange(e,t),a={layer:e,id:o,opacity:null!=n?n:1,visibility:null==r||r,inRange:null==s||s,title:i._title||o,description:i._description||null,legends:i._legends||[],metadata:i._metadata||[],quicklookUrl:i._quicklookUrl||null};this._layers[o]=a}e.on("change:opacity",this._updateLayerOpacity,this),e.on("change:visible",this._updateLayerVisibility,this);var l=null;void 0!==e.getZIndex&&(l=e.getZIndex(),this._layersIndex[l]&&Array.isArray(this._layersIndex[l])||(this._layersIndex[l]=[]),this._layersIndex[l].push(this._layers[o]))},this);var o=function(t){e._updateLayersOrder.call(e,t)};for(var i in this._layersIndex)if(this._layersIndex.hasOwnProperty(i))for(var n=this._layersIndex[i],r=0;r<n.length;r++)this._layersOrder.unshift(n[r]),this._lastZIndex++,n[r].layer.setZIndex(this._lastZIndex),null==this._layers[n[r].layer.gpLayerId].onZIndexChangeEvent&&(this._layers[n[r].layer.gpLayerId].onZIndexChangeEvent=n[r].layer.on("change:zIndex",o));for(var s=0;s<this._layersOrder.length;s++){var a=this._layersOrder[s],l=this._createLayerDiv(a);this._layerListContainer.appendChild(l),this._layers[a.id].div=l}},n.prototype._createLayerDiv=function(t){var e=t.legends&&0!==t.legends.length,o=t.metadata&&0!==t.metadata.length,i=t.quicklookUrl;(e||o||i)&&(t.displayInformationElement=!0);var n=this._createContainerLayerElement(t);return t.inRange||n.classList.add("outOfRange"),n},n.prototype._onChangeLayerOpacity=function(t){var e=t.target.id,o=u.default.index(e),i=this._layers[o].layer,n=t.target.value;document.getElementById(this._addUID("GPopacityValue_ID_"+o)).innerHTML=n+"%",i.setOpacity(n/100)},n.prototype._updateLayerOpacity=function(t){var e=t.target.getOpacity();e>1&&(e=1),e<0&&(e=0);var o=t.target.gpLayerId;document.getElementById(this._addUID("GPopacityValueDiv_ID_"+o)).value=Math.round(100*e),document.getElementById(this._addUID("GPopacityValue_ID_"+o)).innerHTML=Math.round(100*e)+"%"},n.prototype._onVisibilityLayerClick=function(t){var e=t.target.id,o=u.default.index(e);this._layers[o].layer.setVisible(t.target.checked)},n.prototype._updateLayerVisibility=function(t){var e=t.target.getVisible(),o=t.target.gpLayerId;document.getElementById(this._addUID("GPvisibility_ID_"+o)).checked=e},n.prototype._updateLayersOrder=function(){var t=this.getMap();if(t){this._layersIndex={};var e,o;t.getLayers().forEach(function(t){o=t.gpLayerId,a.default.Observable.unByKey(this._layers[o].onZIndexChangeEvent),this._layers[o].onZIndexChangeEvent=null,e=null,void 0!==t.getZIndex&&(e=t.getZIndex(),this._layersIndex[e]&&Array.isArray(this._layersIndex[e])||(this._layersIndex[e]=[]),this._layersIndex[e].push(this._layers[o]))},this),this._lastZIndex=0;var i=this,n=function(t){i._updateLayersOrder.call(i,t)};this._layersOrder=[];for(var r in this._layersIndex)if(this._layersIndex.hasOwnProperty(r))for(var s=this._layersIndex[r],l=0;l<s.length;l++)this._layersOrder.unshift(s[l]),this._lastZIndex++,null==this._layers[s[l].layer.gpLayerId].onZIndexChangeEvent&&(this._layers[s[l].layer.gpLayerId].onZIndexChangeEvent=s[l].layer.on("change:zIndex",n));if(this._layerListContainer){for(;this._layerListContainer.firstChild;)this._layerListContainer.removeChild(this._layerListContainer.firstChild);for(var p=0;p<this._layersOrder.length;p++){var c=this._layersOrder[p];this._layerListContainer.appendChild(c.div)}}else console.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}},n.prototype._onOpenLayerInfoClick=function(t){var e,o,i=t.target.id,n=u.default.index(i),r=this._layers[n];if(i=document.getElementById(t.target.id),"GPlayerInfoOpened"===i.className)return void 0!==i.classList&&(i.classList.remove("GPlayerInfoOpened"),i.classList.add("GPlayerInfo")),e=document.getElementById(this._addUID("GPlayerInfoPanel")),void 0!==e.classList&&(e.classList.remove("GPpanel"),e.classList.remove("GPlayerInfoPanelOpened"),e.classList.add("GPlayerInfoPanelClosed")),o=document.getElementById(this._addUID("GPlayerInfoContent")),void e.removeChild(o);for(var s=document.getElementsByClassName("GPlayerInfoOpened"),a=0;a<s.length;a++)s[a].className="GPlayerInfo";void 0!==i.classList&&(i.classList.remove("GPlayerInfo"),i.classList.add("GPlayerInfoOpened")),e=document.getElementById(this._addUID("GPlayerInfoPanel")),void 0!==e.classList&&(e.classList.add("GPpanel"),e.classList.remove("GPlayerInfoPanelClosed"),e.classList.add("GPlayerInfoPanelOpened")),(o=document.getElementById(this._addUID("GPlayerInfoContent")))&&e.removeChild(o);var l={title:r.title,description:r.description,quicklookUrl:r.quicklookUrl,metadata:r.metadata,legends:r.legends},p=r.layer.getMaxResolution();l._maxScaleDenominator=p===1/0?56e7:Math.round(p/28e-5);var c=this._createContainerLayerInfoElement(l);e.appendChild(c)},n.prototype._onDropLayerClick=function(t){var e=t.target.id,o=u.default.index(e),i=this._layers[o].layer;this.getMap().getLayers().remove(i)},n.prototype._onDragAndDropLayerClick=function(){var t=this.getMap(),e=this,o=function(t){e._updateLayersOrder.call(e,t)},i=document.querySelectorAll("div.GPlayerSwitcher_layer"),n=i.length;this._layersOrder=[];for(var r=0;r<i.length;r++){var s=i[r].id,l=u.default.index(s),p=this._layers[l].layer;a.default.Observable.unByKey(this._layers[l].onZIndexChangeEvent),this._layers[l].onZIndexChangeEvent=null,p.setZIndex&&(p.setZIndex(n),this._layersOrder.push(this._layers[l]),n--),null==this._layers[l].onZIndexChangeEvent&&(this._layers[l].onZIndexChangeEvent=p.on("change:zIndex",o))}t.updateSize()},n.prototype._onMapMoveEnd=function(t){t.getLayers().forEach(function(e){var o=e.gpLayerId;if(this._layers[o]){var i,n=this._layers[o];this.isInRange(e,t)&&!n.inRange?(n.inRange=!0,i=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+o)),i.classList.remove("outOfRange")):!this.isInRange(e,t)&&n.inRange&&(n.inRange=!1,i=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+o)),i.classList.add("outOfRange"))}},this)},n.prototype.getLayerDOMId=function(t){var e=null;return this.getMap().getLayers().forEach(function(o){o==t&&(e=o.hasOwnProperty("gpLayerId")?o.gpLayerId:null)},this),null!==e?this._addUID("GPlayerSwitcher_ID_"+e):null},n.prototype.isInRange=function(t,e){if(e){var o=e.getView().getResolution();if(o>t.getMaxResolution()||o<t.getMinResolution())return!1;var i=e.getView().calculateExtent(e.getSize()),n=t.getExtent();return!(n&&!a.default.extent.intersects(i,n))}},n.prototype.getLayerInfo=function(t){var e={};if(void 0!==t.getSource){var o=t.getSource();e._title=o._title||"",e._description=o._description||"",e._quicklookUrl=o._quicklookUrl||"",e._metadata=o._metadata||[],e._legends=o._legends||[]}return e},e.default=n,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(1),r=i(n),s=o(3),a=i(s),l=o(19),p=i(l),c=a.default.getLogger("measures"),u={DEFAULT_POINTER_STYLE:new r.default.style.Circle({radius:5,stroke:new r.default.style.Stroke({color:"#002A50",width:2}),fill:new r.default.style.Fill({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new r.default.style.Style({fill:new r.default.style.Fill({color:"rgba(0, 183, 152, 0.2)"}),stroke:new r.default.style.Stroke({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new r.default.style.Style({fill:new r.default.style.Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new r.default.style.Stroke({color:"#002A50",width:3})}),tools:{MeasureLength:{active:!1,instance:null},MeasureArea:{active:!1,instance:null},MeasureAzimuth:{active:!1,instance:null}},measureDraw:null,measureSource:null,measureVector:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){var t=this.CLASSNAME;c.trace("["+t+"] deactived tool !"),this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._showContainer.checked=!1},onPointerMoveHandler:function(t){if(!t.dragging){var e=t.coordinate;if(this.sketch){var o,i=this.sketch.getGeometry();if(o=this.format(i),"LineString"===i.getType())e=i.getLastCoordinate();else{if("Polygon"!==i.getType())return;e=i.getInteriorPoint().getCoordinates()}this.measureTooltipElement.innerHTML=o,this.measureTooltip.setPosition(e)}}},onShowMeasureClick:function(t,e){var o=this.CLASSNAME;for(var i in this.tools)if(this.tools.hasOwnProperty(i)){var n=this.tools[i];n.active&&i!==o&&(n.active=!1,null!==n.instance&&n.instance.clean())}var r=this.getMap();p.default.unset(r,{current:"Measures"}),this._showContainer.checked?(this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this.tools[o].active=!1):(this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(e),this.tools[o].active=!0)},clearMeasureToolTip:function(){var t=this.getMap();if(t)for(var e=t.getTargetElement(),o=e.getElementsByClassName("ol-overlaycontainer-stopevent"),i=0;i<o.length;i++){for(var n=o[i],r=n.children.length,s=[],a=0;a<r;a++){var l=n.children[a];if(0!==l.children.length){var p=l.children[0];"GPmeasureTooltip GPmeasureTooltip-static"!==p.className&&"GPmeasureTooltip GPmeasureTooltip-measure"!==p.className||s.push(l)}}for(var c=0;c<s.length;c++)n.removeChild(s[c])}},clearMeasure:function(){var t=this.getMap();this.measureVector&&(t.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(t.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(t){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new r.default.Overlay({element:this.measureTooltipElement,offset:[0,-15],positioning:"bottom-center"}),t.addOverlay(this.measureTooltip)},createHelpTooltip:function(t){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new r.default.Overlay({element:this.helpTooltipElement,offset:[15,0],positioning:"center-left"}),t.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(t){this.options.styles=t||{},c.trace("style start",this.options.styles.start);var e={image:u.DEFAULT_POINTER_STYLE,fill:u.DEFAULT_DRAW_START_STYLE.getFill(),stroke:u.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof r.default.style.Image&&(e.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof r.default.style.Style&&(null!=this.options.styles.start.getFill()&&(e.fill=this.options.styles.start.getFill()),null!=this.options.styles.start.getStroke()&&(e.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new r.default.style.Style(e),c.trace("style finish",this.options.styles.finish);var o={fill:u.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:u.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof r.default.style.Style&&(null!=this.options.styles.finish.getFill()&&(o.fill=this.options.styles.finish.getFill()),null!=this.options.styles.finish.getStroke()&&(o.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new r.default.style.Style(o)},addMeasureInteraction:function(t){var e=this.getMap(),o=this;this.measureDraw=new r.default.interaction.Draw({source:this.measureSource,condition:function(t){return!t.originalEvent.ctrlKey||(o.sketch&&this.removeLastPoint(),!1)},type:t,style:this.options.styles.start||u.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),e.addInteraction(this.measureDraw),this.createMeasureTooltip(e),this.measureDraw.on("drawstart",function(t){o.sketch=t.feature},this),this.measureDraw.on("drawend",function(){if(o.sketch){var t,i,n=o.sketch.getGeometry();if(t=o.format(n),"LineString"===n.getType())i=n.getLastCoordinate();else{if("Polygon"!==n.getType())return;i=n.getInteriorPoint().getCoordinates()}o.measureTooltipElement.innerHTML=t,o.measureTooltip.setPosition(i)}o.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",o.measureTooltip.setOffset([0,-7]),o.sketch=null,o.measureTooltipElement=null,o.createMeasureTooltip(e)},this)},initMeasureInteraction:function(){var t=this.getMap();this.measureSource=new r.default.source.Vector,this.measureVector=new r.default.layer.Vector({source:this.measureSource,style:this.options.styles.finish||u.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",t.addLayer(this.measureVector)}};return e.default=u,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(1),r=(i(n),o(3)),s=i(r),a=o(0),l=i(a),p=o(2),c=i(p),u=o(109),h=i(u),d=s.default.getLogger("toolbox"),f={_toolbox:{},add:function(t,e){if(d.trace("ToolBox.add()",e),!t)return void d.trace("map doesn't exist !?");var o=t.getTargetElement(),i=o.ownerDocument,n=o.id;this._toolbox&&0!==Object.keys(this._toolbox).length?this._toolbox[n]||(this._toolbox[n]=c.default.generate()):this._toolbox[n]=c.default.generate();var r=this._toolbox[n];if(!i.getElementById(this.getToolBoxID(r))){d.trace("create toolbox !");var s=this._createToolBoxContainerElement(r);o.getElementsByClassName("ol-overlaycontainer-stopevent")[0].appendChild(s)}var a=i.getElementById(this.getWidgetID(r));e.setTarget(a),d.trace("add control to toolbox !")}};return l.default.assign(f,h.default),e.default=f,e},function(t,o){return t.exports=e,o},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(3),n=function(t){return t&&t.__esModule?t:{default:t}}(i),r={proxifyUrl:function(t,e){var o=n.default.getLogger("proxifyUrl");if(!e||!e.hasOwnProperty("proxyUrl")||null===e.proxyUrl||0==e.proxyUrl.trim().length)return t;if(e.noProxyDomains&&Array.isArray(e.noProxyDomains)&&e.noProxyDomains.length>0)for(var i in e.noProxyDomains)if(o.trace("[ProxyUtils] proxifyUrl : analyzing "+e.noProxyDomains[i]),-1!==t.indexOf(e.noProxyDomains[i]))return o.info("[ProxyUtils] proxifyUrl : "+t+" found in noProxyDomains list ("+e.noProxyDomains[i]+")."),t;return e.proxyUrl+encodeURIComponent(t)}};return e.default=r,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=o(1),s=i(r),a=o(4),l=i(a),p=o(3),c=i(p),u=o(16),h=i(u),d=c.default.getLogger("GfiUtils"),f={getLayerFormat:function(t){var e=t.getSource();return e instanceof s.default.source.TileWMS||e instanceof s.default.source.ImageWMS?"wms":e instanceof s.default.source.WMTS?"wmts":e instanceof s.default.source.Vector||e instanceof s.default.source.VectorTile?"vector":"unknown"},displayInfo:function(t,i,r,a,l){if(d.trace("[GfiUtils] : displayInfo..."),a||(a="text/html"),null!==r){var p=null,c=null,u=r;u=u.replace(/\n/g,""),u=u.replace(/(>)\s*(<)/g,"$1$2");var h="undefined"!=typeof window?window:null;if("object"===n(e)&&null===window){c=new(0,o(15).DOMParser),p=c.parseFromString(u,a)}else if(h.DOMParser)c=new h.DOMParser,p=c.parseFromString(u,a);else{if(!h.ActiveXObject)return console.log("Incompatible environment for DOM Parser !"),!1;p=new h.ActiveXObject("Microsoft.XMLDOM"),p.async=!1,p.loadXML(u)}var f=p.getElementsByTagName("body");if(f&&1===f.length&&!f[0].hasChildNodes())return!1;var y=document.createElement("div");y.className="gp-feature-info-div";var g=document.createElement("input");g.type="button",g.className="gp-styling-button closer",g.onclick=function(){return t.featuresOverlay&&(t.removeOverlay(t.featuresOverlay),t.featuresOverlay=null),!1};var m=document.createElement("div");return m.className="gp-features-content-div",m.innerHTML=r,y.appendChild(m),y.appendChild(g),t.featuresOverlay&&(t.removeOverlay(t.featuresOverlay),t.featuresOverlay=null),t.featuresOverlay=new s.default.Overlay({element:y,autoPan:l.autoPan,autoPanAnimation:l.autoPanAnimation,autoPanMargin:l.autoPanMargin,positioning:"bottom-center",insertFirst:!1,stopEvent:!0}),t.addOverlay(t.featuresOverlay),t.featuresOverlay.setPosition(i),t.featuresOverlay.render(),!0}},features2html:function(t,e){var o=document.createElement("div");return e.forEach(function(t){var e=t.getProperties();if(e.hasOwnProperty("name")){var i=document.createElement("div");i.className="gp-att-name-div",i.insertAdjacentHTML("afterbegin",e.name),o.appendChild(i)}if(e.hasOwnProperty("description")){var n=document.createElement("div");n.className="gp-att-description-div",n.insertAdjacentHTML("afterbegin",e.description),o.appendChild(n)}var r=null,s=!1,a=null,l=null,p=null;for(r in e)if("geometry"!=r&&"value"!=r&&"name"!=r&&"description"!=r&&"styleUrl"!=r&&("extensionsNode_"!=r||void 0!==e[r])){s||(a=document.createElement("div"),a.className="gp-att-others-div",l=document.createElement("ul"),s=!0),p=document.createElement("li");var c=document.createElement("span");c.className="gp-attname-others-span",c.appendChild(document.createTextNode(r+" : ")),p.appendChild(c),p.appendChild(document.createTextNode(e[r])),l.appendChild(p)}l&&(a.appendChild(l),o.appendChild(a))},t),o.hasChildNodes()||(o=null),o},layerGetFeatureAtCoordinates:function(t,e,o){var i=t.getPixelFromCoordinate(o);return t.hasFeatureAtPixel(i,function(t){return t===e})},displayVectorFeatureInfo:function(t,e,o,i){var n=t.getPixelFromCoordinate(e),r=[];if(t.forEachFeatureAtPixel(n,function(t,e){(!o||o.indexOf(e)>-1)&&r.push(t)}),0==r.length)return!1;var s=this.features2html(t,r);return null!==s&&(this.displayInfo(t,e,s.innerHTML,"text/html",i),!0)},displayFeatureInfo:function(t,e,o,i,n){for(var r={},s=0;s<o.length;s++){var a=o[s],p=a.obj.getZIndex();r[p]||(r[p]=[]),r[p].push(a)}var c=[],u=Object.keys(r);u.sort(function(t,e){return e-t});for(var f=0;f<u.length;f++)for(var y=u[f],g=0;g<r[y].length;++g){var m=r[y][g].obj,v=r[y][g].infoFormat||"text/html",_=!0;if(m.minResolution&&m.minResolution>t.getResolution()&&(_=!1),_&&m.maxResolution&&m.maxResolution<t.getResolution()&&(_=!1),m.getVisible()&&_){var b=this.getLayerFormat(m);if("vector"==b){this.layerGetFeatureAtCoordinates(t,m,e)&&c.push({format:b,scope:this,coordinate:e});continue}if("wms"!=b&&"wmts"!=b){console.log("[ERROR] DisplayFeatureInfo - layer format '"+b+"' not allowed");continue}var E=t.getView().getResolution(),S=null;S="wmts"==b?m.getSource().getGetFeatureInfoUrl(e,E,t.getView().getProjection(),{INFOFORMAT:v}):m.getSource().getGetFeatureInfoUrl(e,E,t.getView().getProjection(),{INFO_FORMAT:v}),c.push({format:v,url:h.default.proxifyUrl(S,i),scope:this,coordinate:e})}}var w=null,P=this;!function(t,e,o){function i(r){n++,r||n===t.length?o():e(t[n],i)}if(0!==t.length){var n=0;e(t[0],i)}}(c,function(e,o){if("vector"==e.format){if(!w){w=[];for(var i=0;i<u.length;i++)for(var s=u[i],a=0;a<r[s].length;++a)w.push(r[s][a].obj)}o(e.scope.displayVectorFeatureInfo(t,e.coordinate,w,n))}else l.default.Protocols.XHR.call({url:e.url,method:"GET",scope:e.scope,onResponse:function(i){var r=!1;0!==i.trim().length&&-1===i.indexOf("java.lang.NullPointerException")&&-1===i.indexOf("not queryable")||(r=!0);var s=!r&&P.displayInfo(t,e.coordinate,i,"text/html",n);o(s)},onFailure:function(t){console.log(t),o(!1)}})},function(){d.trace("Finish sync to GFI !")})},getPosition:function(t,e){if(t.coordinate)return t.coordinate;var o=[0,0];if(t.offsetX||t.offsetY)o[0]=t.offsetX,o[1]=t.offsetY;else if("touch"===t.pointerType){var i=t.pointers[0];o[0]=i.pageX,o[1]=i.pageY}return e.getCoordinateFromPixel(o)},onDisplayFeatureInfo:function(t,e){if(e.isActive()){d.trace(t);var o=e.getMap();if("contextmenu"==t.type||"dblclick"==t.type)t.preventDefault();else if("singleclick"==t.type)for(var i=o.getInteractions().getArray(),n=0;n<i.length;n++)if(i[n].getActive()&&(i[n]instanceof s.default.interaction.Select||i[n]instanceof s.default.interaction.Modify||i[n]instanceof s.default.interaction.Draw))return;var r={};e._proxyUrl&&(r.proxyUrl=e._proxyUrl),e._noProxyDomains&&(r.noProxyDomains=e._noProxyDomains);var a={};e._autoPan&&(a.autoPan=e._autoPan),e._autoPanAnimation&&(a.autoPanAnimation=e._autoPanAnimation),e._autoPanMargin&&(a.autoPanMargin=e._autoPanMargin);for(var l=[],p=0;p<e._layers.length;++p){if((e._layers[p].event?e._layers[p].event:e._defaultEvent)==t.type){var c=l.push(e._layers[p])-1;l[c].infoFormat||(l[c].infoFormat=e._defaultInfoFormat)}}var u=this.getPosition(t,o);this.displayFeatureInfo(o,u,l,r,a)}}};return e.default=f,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");u.default.format.KML.call(this,t),this.options=t||{}}function r(t){var e=/(>)\s*(<)(\/*)/g,o=/ *(.*) +\n/g,i=/(<.+>)(.+\n)/g;t=t.replace(e,"$1\n$2$3").replace(o,"$1\n").replace(i,"$1\n$2");for(var n="",r=t.split("\n"),s=0,a="other",l={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},p=0;p<r.length;p++){var c=r[p],u=Boolean(c.match(/<.+\/>/)),h=Boolean(c.match(/<\/.+>/)),d=Boolean(c.match(/<[^!].*>/)),f=u?"single":h?"closing":d?"opening":"other",y=a+"->"+f;a=f;var m="";s+=l[y];for(var v=0;v<s;v++)m+="\t";"opening->closing"==y?n=n.substr(0,n.length-1)+c+"\n":n+=m+c+"\n"}return g.trace(n),n}function s(t){var i=null,n=null,r="undefined"!=typeof window?window:null;if("object"===p(e)&&null===window){n=new(0,o(15).DOMParser),i=n.parseFromString(t,"text/xml")}else r.DOMParser?(n=new r.DOMParser,i=n.parseFromString(t,"text/xml")):r.ActiveXObject?(i=new r.ActiveXObject("Microsoft.XMLDOM"),i.async=!1,i.loadXML(t)):console.log("Incompatible environment for DOM Parser !");return g.trace(i),i}function a(t){var e=new XMLSerializer,o=e.serializeToString(t);return g.trace(o),o}function l(t,e,o){var i=t.documentElement,n=i.childNodes,r=n;1===n.length&&"Document"===n[0].nodeName&&(r=n[0].childNodes);for(var s={},a=-1,l=0;l<r.length;l++){var p=r[l];switch(p.nodeName){case"Style":var c=p.attributes[0];if(c&&"id"===c.nodeName){var u=c.nodeValue,h=p;s[u]=h}break;case"Placemark":a++;for(var d=p.childNodes,f=!1,y=null,m=null,v=p,_=0;_<d.length;_++)switch(d[_].nodeName){case"Point":f=!0;break;case"Style":y=d[_].childNodes;break;case"styleUrl":var b=d[_].textContent.slice(1);s[b]&&(y=s[b].childNodes);break;case"ExtendedData":m=d[_].childNodes;break;case"name":v=null}if(m){g.log("ExtendedData :",m);var E=o.extendedData;E&&"function"==typeof E&&E(e[a],m)}if(v){g.log("Name :",v);var S=o.nameData;S&&"function"==typeof S&&S(e[a],v)}if(f&&y&&y.length){for(var w=null,P=null,C=0;C<y.length;C++)switch(y[C].nodeName){case"LabelStyle":w=y[C];break;case"IconStyle":P=y[C]}var A=e[a].getProperties().name,M=e[a].getProperties().description,x=A||M;if(g.trace(x),!P&&w){var R=o.labelStyle;R&&"function"==typeof R&&R(e[a],w)}else if(P&&!w){var I=o.iconStyle;I&&"function"==typeof I&&I(e[a],P)}else if(P&&w){var T=o.iconLabelStyle;T&&"function"==typeof T&&T(e[a],P,w)}}break;default:g.trace("tag is not processing !")}}}Object.defineProperty(e,"__esModule",{value:!0});var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c=o(1),u=i(c),h=o(3),d=i(h),f=o(0),y=i(f),g=d.default.getLogger("extended KML format");return u.default.inherits(n,u.default.format.KML),n.prototype=Object.create(u.default.format.KML.prototype,{}),n.prototype.constructor=n,n.prototype.writeFeatures=function(t,e){return g.log("overload : ol.format.KML.writeFeatures"),this._writeExtendStylesFeatures(t,e)},n.prototype._writeExtendStylesFeatures=function(t,e){var o=u.default.format.KML.prototype.writeFeatures.call(this,t,e),i=s(o);if(null===i)return o;var n=function(t,e){function o(t){var e=t.toString(16);"#"===e.charAt(0)&&(e=e.slice(1));var o=1;o=parseInt(255*o,10),o=o.toString(16);var i=o;return i+=e.substr(4,2),i+=e.substr(2,2),i+=e.substr(0,2),i.toLowerCase()}if(g.trace("label with style :",e),t){if(t.getProperties().name&&t.getStyle()instanceof u.default.style.Style){
var n=t.getStyle().getText().getStroke();if(!n)return;var r=o(n.getColor())||o("#FFFFFF"),s=n.getWidth()||"0";if(e&&0===e.getElementsByTagName("LabelStyleSimpleExtensionGroup").length){var a=i.createElement("LabelStyleSimpleExtensionGroup");a.setAttribute("fontFamily","Sans"),a.setAttribute("haloColor",r),a.setAttribute("haloRadius",s),a.setAttribute("haloOpacity","1"),e.appendChild(a)}}}},p=function(t,e){if(g.trace("marker with style (hotspot):",e),t&&t.getStyle()instanceof u.default.style.Style){var o=t.getStyle().getImage();if(!o)return;var n=0,r=0,s=o.getSize(),a=o.getAnchor();if(a.length&&(n=a[0],r=a[1],r=a[1]===s[1]?0:s[1]-a[1]),e&&0===e.getElementsByTagName("hotSpot").length){var l=i.createElement("hotSpot");l.setAttribute("x",n),l.setAttribute("y",r),l.setAttribute("xunits","pixels"),l.setAttribute("yunits","pixels"),e.appendChild(l)}}};l(i,t,{labelStyle:n,iconStyle:p,iconLabelStyle:function(t,e,o){g.trace("write an icon with a label"),p(t,e),n(t,o)},nameData:function(t,e){for(var o=0;o<e.length;o++)if("name"===e[o].nodeName)return;var n=t.getProperties().name;if(n){var r=i.createElement("name");r.innerHTML=n,e.appendChild(r)}}});var c=a(i);null===c&&(c=o);var h=r(c);return null===h&&(h=o),h},n.prototype.readFeatures=function(t,e){g.log("overload : ol.format.KML.readFeatures");var o=this._readExtendStylesFeatures(t,e);return g.trace("Styles étendus",o),o},n.prototype._readExtendStylesFeatures=function(t,e){var o=u.default.format.KML.prototype.readFeatures.call(this,t,e),i=null,n="";if(n="string"==typeof t?t:t.documentElement.outerHTML,n=n.replace(/\n/g,""),n=n.replace(/(>)\s*(<)/g,"$1$2"),null===(i=s(n)))return o;var r=function(t,e){function o(t){var e="";e+=t.substr(6,2),e+=t.substr(4,2),e+=t.substr(2,2);for(var o=parseInt(e,16).toString(16),i="",n=o.length||0,r=0;r<6-n;r++)i+="0";return o="#"+i+o,o.toString(16)}if(g.trace("label with style :",e),t){for(var i=t.getProperties().name||"---",n=o("ff000000"),r="#FFFFFF",s=0,a=!1,l=e.childNodes,p=0;p<l.length;p++)switch(l[p].nodeName){case"scale":case"colorMode":break;case"color":n=o(l[p].textContent);break;case"LabelStyleSimpleExtensionGroup":a=!0;for(var c=l[p].attributes,h=0;h<c.length;h++)switch(c[h].nodeName){case"fontFamily":break;case"haloColor":r=o(c[h].nodeValue);break;case"haloRadius":s=parseInt(c[h].nodeValue,10)}}if(!a)return void g.trace("it's not a Label Style Simple Extension Group !");t.setStyle(new u.default.style.Style({image:new u.default.style.Icon({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",size:[51,38],anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),text:new u.default.style.Text({font:"16px Sans",textAlign:"left",text:i,fill:new u.default.style.Fill({color:n}),stroke:new u.default.style.Stroke({color:r,width:s})})}))}},a=function(t,e){g.trace("hotspot :",e);for(var o=null,i=null,n=!1,r=51,s=38,a=!1,l=25.5,p="pixels",c=38,h="pixels",d=e.childNodes,f=0;f<d.length;f++)switch(d[f].nodeName){case"Icon":for(var m=d[f].childNodes,v=0;v<m.length;v++)switch(m[v].nodeName){case"href":o=m[v].textContent;break;case"gx:w":n=!0,r=parseFloat(m[v].textContent);break;case"gx:h":n=!0,s=parseFloat(m[v].textContent)}break;case"hotSpot":a=!0;for(var _=d[f].attributes,b=0;b<_.length;b++)switch(_[b].nodeName){case"x":l=parseFloat(_[b].nodeValue);break;case"y":c=parseFloat(_[b].nodeValue);break;case"yunits":p=_[b].nodeValue;break;case"xunits":h=_[b].nodeValue}break;case"scale":i=parseFloat(d[f].textContent)}var E={src:o,crossOrigin:"anonymous",scale:i||1};n&&y.default.mergeParams(E,{size:[r,s]}),a&&y.default.mergeParams(E,{anchor:[l,c],anchorOrigin:"bottom-left",anchorXUnits:p||"pixels",anchorYUnits:h||"pixels"});var S=t.getStyleFunction();if(S){var w=S.call(t,0);if(w&&0!==w.length){var P=1===w.length?w[0]:w[w.length-1];t.setStyle(new u.default.style.Style({image:new u.default.style.Icon(E),text:P.getText()}))}}},p=function(t,e){if(g.trace("extendData :",e),t){for(var o=t.getProperties().name||"",i=t.getProperties().description||"",n=null,r=0;r<e.length;r++){var s=e[r],a=s.attributes[0],l=s.childNodes;if("name"===a.nodeName)switch(a.nodeValue){case"label":o=s.textContent;break;case"title":case"attributetitle":for(var p=0;p<l.length;p++)"value"===l[p].nodeName&&(n=l[p].textContent)}}n&&(i=i?n+" : "+i:n),t.setProperties({name:o,description:i})}},c=function(t,e,o){g.trace("display icon and label"),r(t,o),a(t,e)};return l(i,o,{labelStyle:this.options.showPointNames?r:null,iconStyle:a,iconLabelStyle:this.options.showPointNames?c:a,extendedData:p}),o},e.default=n,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(1),r=i(n),s=o(3),a=i(s),l=o(0),p=i(l),c=a.default.getLogger("interactions"),u={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(t,e){c.trace("unset()");var o={};p.default.mergeParams(o,this._options),p.default.mergeParams(o,e);for(var i=t.getInteractions().getArray(),n=0;n<i.length;n++)if(i[n].getActive()&&(i[n]instanceof r.default.interaction.Draw||i[n]instanceof r.default.interaction.Select||i[n]instanceof r.default.interaction.Modify)){var s=i[n].getProperties(),a=s.name;if(void 0!==a&&this._extensions.indexOf(a)>-1){if(o.current&&o.current===a)continue;i[n].setActive(!1);var l=s.source;if(void 0!==l&&l instanceof r.default.control.Control)for(var u in o)if(o.hasOwnProperty(u)){if("current"===u)continue;if("function"==typeof l[u]){var h=Array.isArray(o[u])?o[u]:[o[u]];l[u].apply(l,h)}}}}}};return e.default=u,e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPmousePosition"),t.className="GPwidget",t},_createShowMousePositionElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowMousePosition"),t.type="checkbox",t},_createShowMousePositionPictoElement:function(t){var e=this,o=document.createElement("label");o.id=this._addUID("GPshowMousePositionPicto"),o.className="GPshowAdvancedToolPicto",o.htmlFor=this._addUID("GPshowMousePosition"),o.title="Afficher les coordonnées du curseur",o.addEventListener("click",function(o){var i="";document.getElementById(e._addUID("GPshowMousePosition")).checked||t||(i="GPmapCenterVisible"),document.getElementById("GPmapCenter").className=i,e.onShowMousePositionClick(o)});var i=document.createElement("span");return i.id=this._addUID("GPshowMousePositionOpen"),i.className="GPshowAdvancedToolOpen",o.appendChild(i),o},_createMousePositionPanelElement:function(t,e,o,i){t=void 0===t||t,e=void 0===e||e,o=void 0!==o&&o;var n=document.createElement("div");n.id=this._addUID("GPmousePositionPanel"),n.className="GPpanel",n.appendChild(this._createMousePositionPanelHeaderElement()),n.appendChild(this._createMousePositionPanelBasicElement(t,e,o,i));for(var r=this._createShowMousePositionSettingsElement(e),s=0;s<r.length;s++)n.appendChild(r[s]);return n},_createMapCenter:function(){var t=document.createElement("div");return t.id="GPmapCenter",t.className="",t},_createMousePositionPanelHeaderElement:function(){var t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML="Coordonnées",t.appendChild(e);var o=document.createElement("div");o.id="GPmousePositionPanelClose",o.className="GPpanelClose",o.title="Fermer le panneau";var i=this;return o.addEventListener?o.addEventListener("click",function(){document.getElementById(i._addUID("GPshowMousePositionPicto")).click()},!1):o.attachEvent&&o.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowMousePositionPicto")).click()}),t.appendChild(o),t},_createMousePositionPanelBasicElement:function(t,e,o,i){var n=document.createElement("div");return n.id=this._addUID("GPmousePositionBasicPanel"),n.appendChild(this._createMousePositionPanelBasicCoordinateElement(e,o,i)),n.appendChild(this._createMousePositionPanelEditToolsElement(o)),n.appendChild(this._createMousePositionPanelBasicAltitudeElement(t)),n},_createCoordinateElement:function(t,e){var o=this;if(-1===["Lon","Lat"].indexOf(t))return[];var i=[],n=document.createElement("input");n.id=this._addUID("GPmousePosition"+t),n.title=!0===e?"Cliquer pour saisir des coordonnées":"",n.readOnly=!0,e&&(n.addEventListener("click",function(){o.onMousePositionEditModeClick(!0)}),n.addEventListener("change",function(e){this.classList.remove("error"),o.validateExtentCoordinate(t,this.value,e)?this.classList.remove("error"):this.classList.add("error")})),i.push(n);var r=document.createElement("span");return r.className="GPmousePositionUnits",i.push(r),i},_createDMSCoordinateElement:function(t,e){if(-1===["Lon","Lat"].indexOf(t))return[];var o=this,i=[],n=document.createElement("input");n.id=this._addUID("GPmousePosition"+t+"Degrees"),n.className="GPSexagesimal",n.setAttribute("name","degrees"),n.title=!0===e?"Cliquer pour saisir des coordonnées":"",n.readOnly=!0,n.dataset.min=0,n.dataset.max="Lon"===t?180:90,e&&(n.addEventListener("click",function(){o.onMousePositionEditModeClick(!0)}),n.addEventListener("change",function(){this.classList.remove("error"),o._checkDMSDegrees(t,this)?this.classList.remove("error"):this.classList.add("error")})),i.push(n);var r=document.createElement("span");r.className="GPmousePositionSexagesimalLabel",r.innerHTML="°",i.push(r);var s=document.createElement("input");s.id=this._addUID("GPmousePosition"+t+"Minutes"),s.className="GPSexagesimal",s.setAttribute("name","minutes"),s.title=!0===e?"Cliquer pour saisir des coordonnées":"",s.readOnly=!0,s.dataset.min=0,s.dataset.max=59,e&&(s.addEventListener("click",function(){o.onMousePositionEditModeClick(!0)}),s.addEventListener("change",function(){this.classList.remove("error"),o._checkDMSElement(this)?this.classList.remove("error"):this.classList.add("error")})),i.push(s);var a=document.createElement("span");a.className="GPmousePositionSexagesimalLabel",a.innerHTML="'",i.push(a);var l=document.createElement("input");l.id=this._addUID("GPmousePosition"+t+"Seconds"),l.className="GPSexagesimalsec",l.setAttribute("name","seconds"),l.title=!0===e?"Cliquer pour saisir des coordonnées":"",l.readOnly=!0,l.dataset.min=0,l.dataset.max=59,e&&(l.addEventListener("click",function(){o.onMousePositionEditModeClick(!0)}),l.addEventListener("change",function(){this.classList.remove("error"),o._checkDMSElement(this,!0)?this.classList.remove("error"):this.classList.add("error")})),i.push(l);var p=document.createElement("span");p.className="GPmousePositionSexagesimalLabel",p.innerHTML="''",i.push(p);var c=document.createElement("select");c.id=this._addUID("GPmousePosition"+t+"Direction"),c.className="GPmousePositionDirection",c.setAttribute("name","direction"),c.disabled=!0;var u=document.createElement("option");u.value="Lon"===t?"E":"N",u.innerHTML="Lon"===t?"E":"N",c.appendChild(u);var h=document.createElement("option");return h.value="Lon"===t?"O":"S",h.innerHTML="Lon"===t?"O":"S",c.appendChild(h),i.push(c),i},_createMousePositionPanelBasicCoordinateElement:function(t,e,o){var i=document.createElement("div");i.id=this._addUID("GPmousePositionCoordinate"),i.style.display=t?"block":"none";var n=document.createElement("div"),r=document.createElement("span");r.className="GPmousePositionLabel",r.id=this._addUID("GPmousePositionLatLabel"),r.innerHTML="Latitude : ",n.appendChild(r);var s=document.createElement("span");s.id=this._addUID("GPmousePositionLatCoordinate");var a;a="DMS"===o?this._createDMSCoordinateElement("Lat",e):this._createCoordinateElement("Lat",e);for(var l=0;l<a.length;l++)s.appendChild(a[l]);n.appendChild(s),i.appendChild(n);var p=document.createElement("div"),c=document.createElement("span");c.className="GPmousePositionLabel",c.id=this._addUID("GPmousePositionLonLabel"),c.innerHTML="Longitude : ",p.appendChild(c);var u=document.createElement("span");u.id=this._addUID("GPmousePositionLonCoordinate");var h;h="DMS"===o?this._createDMSCoordinateElement("Lon",e):this._createCoordinateElement("Lon",e);for(var d=0;d<h.length;d++)u.appendChild(h[d]);return p.appendChild(u),i.appendChild(p),i},_createMousePositionPanelBasicAltitudeElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPmousePositionAltitude"),e.style.display=t?"block":"none";var o=document.createElement("span");o.className="GPmousePositionLabel",o.innerHTML="Altitude : ",e.appendChild(o);var i=document.createElement("span");i.className="GPmousePositionCoords",i.id=this._addUID("GPmousePositionAlt"),i.innerHTML="...",e.appendChild(i);var n=document.createElement("span");return n.className="GPmousePositionAltitudeUnits",n.innerHTML="m",e.appendChild(n),e},_createMousePositionPanelEditToolsElement:function(t){var e=this,o=document.createElement("div");o.className="GPmousePositionPanelEditTools",o.id=this._addUID("GPmousePositionPanelEditTools"),t||(o.style.display="none");var i=document.createElement("span");i.className="GPmousePositionEditTool",i.id=this._addUID("GPmousePositionLocate"),i.title=!0===t?"Cliquer pour saisir des coordonnées":"",t&&i.addEventListener("click",function(){e.onMousePositionEditModeLocateClick()}),o.appendChild(i);var n=document.createElement("span");return n.className="GPmousePositionEditTool",n.id=this._addUID("GPmousePositionCloseEdit"),n.title="Quitter la saisie des coordonnées",n.style.display="none",t&&n.addEventListener("click",function(){e.onMousePositionEditModeClick(!1)}),o.appendChild(n),o},_createShowMousePositionSettingsElement:function(t){var e=[],o=document.createElement("input");o.type="checkbox",o.id=this._addUID("GPshowMousePositionSettings");var i=document.createElement("label");return i.id=this._addUID("GPshowMousePositionSettingsPicto"),i.htmlFor=this._addUID("GPshowMousePositionSettings"),i.title="Réglages",i.className="GPshowMoreOptions GPshowMousePositionSettingsPicto",i.style.display=t?"block":"none",e.push(o),e.push(i),e},_createMousePositionSettingsElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPmousePositionSettings"),e.style.display=void 0===t||t?"block":"none";var o=document.createElement("span");return o.className="GPmousePositionSettingsLabel",o.innerHTML="Système de référence",e.appendChild(o),e},_createMousePositionSettingsSystemsElement:function(t){var e=this,o=document.createElement("select");o.id=this._addUID("GPmousePositionProjectionSystem"),o.className="GPinputSelect GPmousePositionSettingsSelect",o.addEventListener("change",function(t){e.onMousePositionProjectionSystemChange(t)}),o.addEventListener("mouseover",function(t){e.onMousePositionProjectionSystemMouseOver(t)});for(var i=0;i<t.length;i++){var n=t[i],r=document.createElement("option");r.value=n.code,r.text=n.label||i,o.appendChild(r)}return o},_createMousePositionSettingsUnitsElement:function(t){var e=this,o=document.createElement("select");o.id=this._addUID("GPmousePositionProjectionUnits"),o.className="GPinputSelect GPmousePositionSettingsSelect",o.addEventListener("change",function(t){e.onMousePositionProjectionUnitsChange(t)});for(var i=0;i<t.length;i++){var n=t[i],r=document.createElement("option");r.value=n.code?n.code:i,r.text=n.label||i,o.appendChild(r)}return o},_resetLabelElements:function(t){document.getElementById(this._addUID("GPmousePositionLatLabel")).innerHTML="Geographical"===t?"Latitude :":"X :",document.getElementById(this._addUID("GPmousePositionLonLabel")).innerHTML="Geographical"===t?"Longitude :":"Y :"},_resetUnitElements:function(t){var e="";"M"!==t&&"KM"!==t||(e=t.toLowerCase());for(var o=document.getElementsByClassName("GPmousePositionUnits"),i=0;i<o.length;i++)o[i].innerHTML=e},_resetCoordinateElements:function(t,e,o){for(var i=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));i.firstChild;)i.removeChild(i.firstChild);var n;n="DMS"===o?this._createDMSCoordinateElement("Lat",t):this._createCoordinateElement("Lat",t);for(var r=0;r<n.length;r++)i.appendChild(n[r]);for(var s=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));s.firstChild;)s.removeChild(s.firstChild);var a;a="DMS"===o?this._createDMSCoordinateElement("Lon",t):this._createCoordinateElement("Lon",t);for(var l=0;l<a.length;l++)s.appendChild(a[l]);this.onMapMove()},_setEditMode:function(t){document.getElementById(this._addUID("GPmousePositionLocate")).title=t?"Aller à la position ...":"Cliquer pour saisir des coordonnées",document.getElementById(this._addUID("GPmousePositionCloseEdit")).style.display=t?"inline-block":"none";for(var e="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",o=document.querySelectorAll(e+" input"),i=0;i<o.length;i++)o[i].readOnly=!t,t&&(o[i].value="",o[i].classList.remove("error"));for(var n=document.querySelectorAll(e+" select"),r=0;r<n.length;r++)n[r].disabled=!t},_checkDMSElement:function(t,e){var o=void 0!==e,i=t.value;if(o&&(i=i.replace(",",".")),isNaN(i))return!1;var n=parseFloat(i);if(!o&&(0|n)!==n)return!1;var r=Number(t.dataset.min),s=Number(t.dataset.max);return n>=r&&n<=s},_checkDMSDegrees:function(t,e){if(isNaN(e.value))return!1;var o=parseFloat(e.value);if((0|o)!==o)return!1;var i=Number(e.dataset.min),n=Number(e.dataset.max);if(o<i||o>n)return!1;var r=document.getElementById(this._addUID("GPmousePosition"+t+"Minutes")),s=document.getElementById(this._addUID("GPmousePosition"+t+"Seconds"));return o>=n?(r.dataset.max=0,s.dataset.max=0):(r.dataset.max=59,s.dataset.max=59.9999),!0},GPdisplayCoords:function(t){if(t&&null!=t){var e=document.getElementById(this._addUID("GPmousePositionLonLabel")),o=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(t.x||t.y?(o.innerHTML="X : ",e.innerHTML="Y : "):t.e||t.n?(o.innerHTML="E : ",e.innerHTML="N : "):(o.innerHTML="Latitude : ",e.innerHTML="Longitude : "),"object"===i(t.lat)&&"object"===i(t.lng)){var n={lng:"Lon",lat:"Lat"},r=["Degrees","Minutes","Seconds"];for(var s in n)for(var a=0;a<r.length;++a){var l="GPmousePosition"+n[s]+r[a],p=document.getElementById(this._addUID(l)),c=r[a].charAt(0).toLowerCase();p.value=t[s][c]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=t.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=t.lat.direction}else{var u=document.getElementById(this._addUID("GPmousePositionLat")),h=document.getElementById(this._addUID("GPmousePositionLon"));u.value=t.x||t.lat||t.e||"0",h.value=t.y||t.lng||t.lon||t.n||"0";for(var d=void 0===t.unit?"":t.unit,f=document.getElementsByClassName("GPmousePositionUnits"),y=0;y<f.length;++y)f[y].innerHTML=d}}},GPdisplayElevation:function(t,e,o,i){var n,r=this;e||(e=500),clearTimeout(n),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",null==o&&(o=-99999),null==i&&(i=99980);var s=o+i,a=o-i;t&&null!=t&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(n=setTimeout(function(){r.onRequestAltitude(t,function(t){a<t&&t<s?r.GPresetElevation():document.getElementById(r._addUID("GPmousePositionAlt")).innerHTML=t})},e))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}};return e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(79),n=function(t){return t&&t.__esModule?t:{default:t}}(i),r={_createDraggableElement:function(t,e){n.default.create(t,{handle:".GPlayerName",draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(t){e._onDragAndDropLayerClick(t)}})},_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPlayerSwitcher"),t.className="GPwidget",t},_createMainLayersShowElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowLayersList"),t.type="checkbox",t},_createMainLayersElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPlayersList"),t.className="GPpanel",t},_createMainPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowLayersList"),e.title="Afficher/masquer le gestionnaire de couches";var o=document.createElement("span");o.id=this._addUID("GPshowLayersListOpen"),o.className="GPshowAdvancedToolOpen",o.addEventListener("click",function(){if(document.getElementById(t._addUID("GPshowLayersList")).checked){for(var e=document.getElementsByClassName("GPlayerInfoOpened"),o=0;o<e.length;o++)e[o].className="GPlayerInfo";document.getElementById(t._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}}),e.appendChild(o);var i=document.createElement("span");return i.addEventListener("click",function(){if(document.getElementById(t._addUID("GPshowLayersList")).checked){for(var e=document.getElementsByClassName("GPlayerInfoOpened"),o=0;o<e.length;o++)e[o].className="GPlayerInfo";document.getElementById(t._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}}),i.id=t._addUID("GPshowLayersListClose"),e.appendChild(i),e},_createMainInfoElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPlayerInfoPanel"),t.className="GPpanel GPlayerInfoPanelClosed",t},_createContainerLayerElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPlayerSwitcher_ID_"+t.id),e.className="GPlayerSwitcher_layer draggable-layer",e.appendChild(this._createBasicToolElement(t));for(var o=this._createAdvancedToolShowElement(t),i=0;i<o.length;i++)e.appendChild(o[i]);return e.appendChild(this._createAdvancedToolElement(t)),e},_createBasicToolElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPbasicTools_ID_"+t.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(t));for(var o=this._createBasicToolVisibilityElement(t),i=0;i<o.length;i++)e.appendChild(o[i]);return e},_createBasicToolNameElement:function(t){var e=document.createElement("span");return e.id=this._addUID("GPname_ID_"+t.id),e.className="GPlayerName",e.title=t.description||t.title,e.innerHTML=t.title,e},_createBasicToolVisibilityElement:function(t){var e=[],o=void 0===t.visibility||t.visibility,i=this._addUID("GPvisibility_ID_"+t.id),n=document.createElement("input");n.id=i,n.type="checkbox",n.checked=o;var r=document.createElement("label");r.htmlFor=i,r.id=this._addUID("GPvisibilityPicto_ID_"+t.id),r.className="GPlayerVisibility",r.title="Afficher/masquer la couche";var s=this;return n.addEventListener?n.addEventListener("click",function(t){s._onVisibilityLayerClick.call(s,t)}):n.attachEvent&&n.attachEvent("onclick",function(t){s._onVisibilityLayerClick.call(s,t)}),e.push(n),e.push(r),e},_createAdvancedToolShowElement:function(t){var e=[],o=document.createElement("label");o.id=this._addUID("GPshowAdvancedToolsPicto_ID_"+t.id),o.htmlFor=this._addUID("GPshowAdvancedTools_ID_"+t.id),o.title="Plus d'outils",o.className="GPshowMoreOptions GPshowLayerAdvancedTools";var i=document.createElement("input");return i.type="checkbox",i.id=this._addUID("GPshowAdvancedTools_ID_"+t.id),e.push(i),e.push(o),e},_createAdvancedToolElement:function(t){var e=document.createElement("div");if(e.id=this._addUID("GPadvancedTools_ID_"+t.id),e.className="GPlayerAdvancedTools",e.appendChild(this._createAdvancedToolDeleteElement(t)),t.title&&t.description&&e.appendChild(this._createAdvancedToolInformationElement(t)),"feature"!==t.type)for(var o=this._createAdvancedToolOpacityElement(t),i=0;i<o.length;i++)e.appendChild(o[i]);return e},_createAdvancedToolDeleteElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPremove_ID_"+t.id),e.className="GPlayerRemove",e.title="Supprimer la couche",e.layerId=t.id;var o=this;return e.addEventListener?e.addEventListener("click",function(t){o._onDropLayerClick.call(o,t)}):e.attachEvent&&e.attachEvent("onclick",function(t){o._onDropLayerClick.call(o,t)}),e},_createAdvancedToolInformationElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPinfo_ID_"+t.id),e.className="GPlayerInfo",e.title="Informations/légende",e.layerId=t.id;var o=this;return e.addEventListener?e.addEventListener("click",function(t){o._onOpenLayerInfoClick.call(o,t)}):e.attachEvent&&e.attachEvent("onclick",function(t){o._onOpenLayerInfoClick.call(o,t)}),e},_createAdvancedToolOpacityElement:function(t){var e=[],o=document.createElement("div");o.id=this._addUID("GPopacity_ID_"+t.id),o.className="GPlayerOpacity",o.title="Opacité";var i=void 0!==t.opacity?t.opacity:1;i=Math.round(100*i);var n=document.createElement("input");n.id=this._addUID("GPopacityValueDiv_ID_"+t.id),n.type="range",n.value=i;var r=this;n.addEventListener?n.addEventListener("change",function(t){r._onChangeLayerOpacity.call(r,t)}):n.attachEvent&&n.attachEvent("onchange",function(t){r._onChangeLayerOpacity.call(r,t)}),n.addEventListener?n.addEventListener("input",function(t){r._onChangeLayerOpacity.call(r,t)}):n.attachEvent&&n.attachEvent("oninput",function(t){r._onChangeLayerOpacity.call(r,t)}),o.appendChild(n);var s=document.createElement("div");s.id=this._addUID("GPopacityValueDiv_ID_"+t.id),s.className="GPlayerOpacityValue";var a=document.createElement("span");return a.id=this._addUID("GPopacityValue_ID_"+t.id),a.innerHTML=i+"%",s.appendChild(a),e.push(o),e.push(s),e},_createContainerLayerInfoElement:function(t){var e=document.createElement("div");e.id=this._addUID("GPlayerInfoContent");var o=document.createElement("div");if(o.id=this._addUID("GPlayerInfoTitle"),o.innerHTML=t.title,e.appendChild(o),t.quicklookUrl){var i=document.createElement("div");i.id=this._addUID("GPlayerInfoQuicklook"),i.title="Afficher un aperçu de la couche";var n=document.createElement("a");n.href=t.quicklookUrl,n.appendChild(i),e.appendChild(n)}var r=document.createElement("div");r.id=this._addUID("GPlayerInfoClose"),r.title="Fermer la fenêtre";var s=this,a=function(){document.getElementById(s._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed";for(var t=document.getElementsByClassName("GPlayerInfoOpened"),e=0;e<t.length;e++)t[e].className="GPlayerInfo"};r.addEventListener?r.addEventListener("click",a):r.attachEvent&&r.attachEvent("onclick",a),e.appendChild(r);var l=document.createElement("div");if(l.id=this._addUID("GPlayerInfoDescription"),l.innerHTML=t.description,e.appendChild(l),t.metadata){var p=document.createElement("div");p.id=this._addUID("GPlayerInfoMetadata");var c=document.createElement("div");c.className="GPlayerInfoSubtitle",c.innerHTML="Métadonnées",p.appendChild(c);for(var u=0;u<t.metadata.length;u++){var h=t.metadata[u].url,d=document.createElement("div");d.className="GPlayerInfoLink";var f=document.createElement("a");f.href=h,f.innerHTML=h,d.appendChild(f),p.appendChild(d)}0!==t.metadata.length&&e.appendChild(p)}if(t.legends){var y=document.createElement("div");y.id=this._addUID("GPlayerInfoLegend");var g=document.createElement("div");g.className="GPlayerInfoSubtitle",g.innerHTML="Légende",y.appendChild(g);for(var m={},v=t.maxScaleDenominator||56e7,_=0;_<t.legends.length;_++){var b=t.legends[_].minScaleDenominator;if(b){var E=b.toString();b=Math.round(parseInt(E.substring(0,3),10)/10)*Math.pow(10,E.length-2)}else b=270;m[b]=t.legends[_]}for(var S in m)if(m.hasOwnProperty(S)){var w=m[S].url;if("string"==typeof w&&-1==w.toLowerCase().indexOf("nolegend.jpg")){var P=document.createElement("div");P.className="GPlayerInfoLink",v=m[S].maxScaleDenominator||v;var C=document.createElement("a");C.href=w,C.innerHTML="Du 1/"+S+" au 1/"+v,P.appendChild(C),y.appendChild(P)}else delete m[S]}0!==Object.keys(m).length&&e.appendChild(y)}return e}};return e.default=r,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(9),n=function(t){return t&&t.__esModule?t:{default:t}}(i),r={isLoaded:!1,get:function(t){if(""!==t&&null!==t&&void 0!==t){var e=t.split(":");if(2===e.length){var o=e[0],i=e[1];if(this.hasOwnProperty(o)&&this[o].hasOwnProperty(i))return this[o][i]}}},load:function(){if(!this.isLoaded){for(var t=["IGNF","EPSG","CRS"],e=0;e<t.length;e++){var o=t[e],i=this[o];for(var r in i)if(i.hasOwnProperty(r)){var s=o+":"+r;n.default.defs(s,this.get(s))}}this.isLoaded=!0}},EPSG:{4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",
4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",
GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",REUN47GAUSSL:"+title=Reunion Gauss Laborde +proj=gstmerc +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-21.116666667 +lon_0=55.533333333 +k_0=1.00000000 +x_0=160000.000 +y_0=50000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}};return e.default=r,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");s.default.source.WMTS.call(this,t)}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),s=i(r),a=o(4),l=i(a),p=o(0),c=i(p);return s.default.inherits(n,s.default.source.WMTS),n.prototype=Object.create(s.default.source.WMTS.prototype,{}),n.prototype.constructor=n,n.prototype.getGetFeatureInfoUrl=function(t,e,o,i){var n=this.option&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,r=this.tileGrid,a=this.tileGrid.getTileCoordForCoordAndResolution(t,e),p=r.getTileCoordExtent(a),u=function(t,e,o){var i=[0,0,0],n=s.default.extent.createEmpty(),r=t[1],a=-t[2]-1,l=e.getTileCoordExtent(t),p=o.getExtent(),c=p;if(null!=c&&o.isGlobal()&&c[0]===p[0]&&c[2]===p[2]){r%=Math.ceil(s.default.extent.getWidth(c)/s.default.extent.getWidth(l)),i[0]=t[0],i[1]=r,i[2]=t[2],l=e.getTileCoordExtent(i,n)}return s.default.extent.intersects(l,c)?[t[0],r,a]:null}(a,r,o);if(!(r.getResolutions().length<=a[0])){var h=r.getResolution(a[0]),d=r.getMatrixIds()[a[0]],f={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:u[1],TILEROW:u[2],TILEMATRIX:d,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};c.default.assign(f,i);var y=Math.floor((t[0]-p[0])/(h/n)),g=Math.floor((p[3]-t[1])/(h/n));f.I=y,f.J=g;var m=this.urls[0];return l.default.Helper.normalyzeUrl(m,f)}},e.default=n,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(1),r=i(n),s=o(9),a=i(s),l=o(37),p=i(l);!function(){p.default.load(),!r.default.proj.proj4_&&r.default.proj.setProj4?r.default.proj.setProj4(a.default):console.log("WARNING : OpenLayers library should manage proj4 dependency in order to add custom projections (Lambert 93 for instance)")}();var c={overloadTransformExtent:function(){r.default.proj.transformExtent=function(t,e,o){"EPSG:2154"===o&&"EPSG:4326"===e&&(t[0]<-9.62&&(t[0]=-9.62),t[1]<41.18&&(t[1]=41.18),t[2]>10.3&&(t[2]=10.3),t[3]>51.54&&(t[3]=51.54));var i=r.default.proj.getTransform(e,o);return r.default.extent.applyTransform(t,i)}},overload:function(){this.overloadTransformExtent()}};return e.default=c,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!t.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof t.layer)throw new Error("ERROR WRONG TYPE : layer");if(void 0===t.ssl&&(t.ssl=!1),!y.default.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var e=y.default.getLayerId(t.layer,"WMTS");if(!e||!y.default.configuration.getLayerConf(e))return console.log("[source WMTS] ERROR : "+t.layer+" cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key."),new c.default({});var o=y.default.getLayerParams(t.layer,"WMTS",t.apiKey),i="undefined"!=typeof window?window:"undefined"!=typeof self?self:null,r=i?i.location&&i.location.protocol&&0===i.location.protocol.indexOf("https:")?"https://":"http://":t.ssl?"https://":"http://";this._originators=o.originators,this._legends=o.legends,this._metadata=o.metadata;var a={url:l.default.Helper.normalyzeUrl(o.url.replace(/(http|https):\/\//,r),{"gp-ol-ext":"2.0.0"},!1),version:o.version,style:o.styles,format:o.format,projection:o.projection,maxZoom:m.default.getZoomLevelFromScaleDenominator(o.minScale),layer:t.layer,matrixSet:o.TMSLink,tileGrid:new s.default.tilegrid.WMTS({resolutions:o.nativeResolutions,matrixIds:o.matrixIds,origin:[o.matrixOrigin.x,o.matrixOrigin.y]})};d.default.mergeParams(a,t.olParams),c.default.call(this,a),this._originators=o.originators,this._legends=o.legends,this._metadata=o.metadata,this._description=o.description,this._title=o.title,this._quicklookUrl=o.quicklookUrl}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),s=i(r),a=o(4),l=i(a),p=o(38),c=i(p),u=o(17),h=(i(u),o(0)),d=i(h),f=o(10),y=i(f),g=o(5),m=i(g)
;return s.default.inherits(n,c.default),n.prototype=Object.create(c.default.prototype,{}),n.prototype.constructor=n,e.default=n,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!t.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof t.layer)throw new Error("ERROR WRONG TYPE : layer");if(void 0===t.ssl&&(t.ssl=!1),!h.default.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var e=h.default.getLayerId(t.layer,"WMS");if(!e||!h.default.configuration.getLayerConf(e))return console.log("[source WMS] ERROR : "+t.layer+" cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key."),new s.default.source.TileWMS({});var o=h.default.getLayerParams(t.layer,"WMS",t.apiKey),i="undefined"!=typeof window?window:"undefined"!=typeof self?self:null,r=i?i.location&&i.location.protocol&&0===i.location.protocol.indexOf("https:")?"https://":"http://":t.ssl?"https://":"http://",a={url:l.default.Helper.normalyzeUrl(o.url.replace(/(http|https):\/\//,r),{"gp-ol-ext":"2.0.0"},!1),params:{SERVICE:"WMS",LAYERS:t.layer,VERSION:o.version,STYLES:o.styles,FORMAT:o.format}};c.default.mergeParams(a,t.olParams),s.default.source.TileWMS.call(this,a),this._originators=o.originators,this._legends=o.legends,this._metadata=o.metadata,this._title=o.title,this._description=o.description,this._quicklookUrl=o.quicklookUrl}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),s=i(r),a=o(4),l=i(a),p=o(0),c=i(p),u=o(10),h=i(u);return s.default.inherits(n,s.default.source.TileWMS),n.prototype=Object.create(s.default.source.TileWMS.prototype,{}),n.prototype.constructor=n,e.default=n,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(t),this._container=this._initContainer(),t.element&&t.element.appendChild&&(t.element.appendChild(this._container),this._container=t.element),s.default.control.Control.call(this,{element:this._container,target:t.target,render:t.render})}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),s=i(r),a=o(4),l=i(a),p=o(3),c=i(p),u=o(0),h=i(u),d=o(6),f=i(d),y=o(2),g=i(y),m=o(99),v=i(m),_=o(7),b=i(_),E=c.default.getLogger("locationselector");return s.default.inherits(n,s.default.control.Control),n.prototype=Object.create(s.default.control.Control.prototype,{}),h.default.assign(n.prototype,v.default),n.prototype.constructor=n,n.prototype.initialize=function(t){this.options={tag:{id:1,groupId:null,label:">",display:!0,addOption:!1,removeOption:!1},displayInfo:!0,autocompleteOptions:{}},h.default.mergeParams(this.options,t),this._uid=this.options.tag.groupId||g.default.generate(),this._map=null,this._inputsContainer=null,this._inputLabelContainer=null,this._inputAutoCompleteContainer=null,this._inputShowPointerContainer=null,this._inputShowPointer=null,this._inputCoordinateContainer=null,this._addPointElement=null,this._removePointElement=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedLocations=[],this._currentLocation=null,this._initMarker(),this._resources={},this._noRightManagement=!1,this._checkRightsManagement()},n.prototype._initMarker=function(){if(this._marker=null,this._markerUrl="",this._markerOffset=[0,0],this.options.tag.markerOpts&&this.options.tag.markerOpts.url){this._markerUrl=this.options.tag.markerOpts.url;var t=this.options.tag.markerOpts.offset;t&&(Array.isArray(t)&&2===t.length?this._markerOffset=t:console.log("markerOpts.offset should be an array. e.g. : [0,0]"))}else this._markerUrl=b.default.lightOrange,this._markerOffset=b.default.defaultOffset},n.prototype.getCoordinate=function(){return this._coordinate},n.prototype.clear=function(){this._clearResults(),this._inputLabelContainer.click()},n.prototype._checkRightsManagement=function(){var t=this.options.autocompleteOptions.filterOptions,e=t?t.type:[];e&&0!==e.length||(e=["PositionOfInterest","StreetAddress"]);var o=f.default.check({key:this.options.apiKey,resources:e,services:["AutoCompletion"]});o||(this._noRightManagement=!0),this.options.apiKey||(this.options.apiKey=o.key),h.default.assign(this._resources,o)},n.prototype._initContainer=function(){var t=this.options.tag.id,e=this._createMainContainerElement(),o=this._inputsContainer=this._createLocationPointElement(t,this.options.tag.display);e.appendChild(o);var i=this._inputLabelContainer=this._createLocationPointLabelElement(t,this.options.tag.label);o.appendChild(i);var n=this._inputAutoCompleteContainer=this._createLocationAutoCompleteteInputElement(t),r=this;n.addEventListener?n.addEventListener("click",function(){r.onAutoCompleteInputClick()}):n.attachEvent&&n.attachEvent("onclick",function(){r.onAutoCompleteInputClick()}),o.appendChild(n);var s=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(t);o.appendChild(s);var a=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(t);o.appendChild(a);var l=this._inputShowPointer=this._createLocationPointerInputElement(t);if(o.appendChild(l),this.options.tag.addOption){var p=this._addPointElement=this._createLocationAddPointElement();o.appendChild(p)}if(this.options.tag.removeOption){var c=this._removePointElement=this._createLocationRemovePointElement(t);o.appendChild(c)}var u=this._suggestedContainer=this._createLocationAutoCompleteResultElement(t);return e.appendChild(u),e},n.prototype.onAutoCompleteInputClick=function(){this._inputAutoCompleteContainer&&this._inputAutoCompleteContainer.value.length>2&&this._displaySuggestedLocation()},n.prototype.onAutoCompleteSearchText=function(t){var e=t.target.value;if(e){if(this._noRightManagement)return void console.log("no rights for this service !?");if(this._currentLocation=e,e.length<3)return void this._clearSuggestedLocation();var o=this;this._requestAutoComplete({text:e,maximumResponses:5,onSuccess:function(t){if(t){var e=t.suggestedLocations;o._fillAutoCompletedLocationListContainer(e)}},onFailure:function(t){o._clearSuggestedLocation(),E.log(t.message)}});var i=this.getMap();i.on("click",this._hideSuggestedLocation,this),i.on("pointerdrag",this._hideSuggestedLocation,this)}},n.prototype.onAutoCompletedResultsItemClick=function(t){var e=g.default.index(t.target.id);if(e){var o=[this._suggestedLocations[e].position.x,this._suggestedLocations[e].position.y];this._coordinate=o;var i={type:this._suggestedLocations[e].type,fields:this._suggestedLocations[e]},n=this._suggestedLocations[e].fullText;this._setLabel(n);var r=this.getMap().getView(),a=r.getProjection().getCode();"EPSG:4326"!==a&&(o=s.default.proj.transform(o,"EPSG:4326",a)),this._setPosition(o),this._setMarker(o,i,this.options.displayInfo)}},n.prototype.onActivateMapPointClick=function(){var t=this.getMap();this._inputShowPointerContainer.checked?(this._clearResults(),t.on("click",this.onMouseMapClick,this),this._setCursor("crosshair")):(t.un("click",this.onMouseMapClick,this),this._setCursor())},n.prototype.onLocationClearPointClick=function(){this._setCursor(),this._clearResults()},n.prototype.onLocationRemovePointClick=function(){this._setCursor(),this._clearResults()},n.prototype.onLocationAddPointClick=function(t){E.log("onRouteAddPointClick",t)},n.prototype.onMouseMapClick=function(t){var e=t.coordinate;if(t.map&&t.map.getView()){var o=t.map.getView().getProjection();this._setCoordinate(e,o),this._setMarker([e[0],e[1]],null,!1),this.onActivateMapPointClick(t)}},n.prototype._setLabel=function(t){this._inputAutoCompleteContainer.value=t},n.prototype._setCursor=function(t){var e=this.getMap(),o=e.getTargetElement();o.style.cursor=t||null},n.prototype._setCoordinate=function(t,e){this._coordinate=s.default.proj.transform(t,e,"EPSG:4326");var o=this._coordinate[0].toFixed(4),i=this._coordinate[1].toFixed(4),n=o+" / "+i;this.GPdisplayCoordinate(n)},n.prototype._setPosition=function(t){this.getMap().getView().setCenter(t)},n.prototype._setMarker=function(t,e,o){var i=this.getMap();if(null!=this._marker&&(i.removeOverlay(this._marker),this._marker=null),t){var n=document.createElement("img");n.src=this._markerUrl,this._marker=new s.default.Overlay({position:t,offset:this._markerOffset,element:n,stopEvent:!1}),i.addOverlay(this._marker),o&&E.log("marker information : ",e)}},n.prototype._clearResults=function(){var t=this.getMap();this._currentLocation=null,this._coordinate=null,this._hideSuggestedLocation(),this._clearSuggestedLocation(),this._setMarker(),t.un("click",this.onMouseMapClick,this)},n.prototype._clearSuggestedLocation=function(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)},n.prototype._hideSuggestedLocation=function(){this._suggestedContainer&&(this._suggestedContainer.style.display="none")},n.prototype._displaySuggestedLocation=function(){this._suggestedContainer&&(this._suggestedContainer.style.display="block")},n.prototype._requestAutoComplete=function(t){if(E.log("_requestAutoComplete()",t),t&&0!==Object.keys(t).length&&t.text){E.log(t);var e={};h.default.assign(e,this.options.autocompleteOptions),h.default.assign(e,t);var o=this._resources.AutoCompletion||null;o&&Array.isArray(o)&&(e.filterOptions||(e.filterOptions={}),e.filterOptions.type=o),e.apiKey=e.apiKey||this.options.apiKey,E.log(e),l.default.Services.autoComplete(e)}},n.prototype._fillAutoCompletedLocationListContainer=function(t){if(t&&0!==t.length){var e=this._suggestedContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild);for(var o=0;o<t.length;o++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,t[o],o);this._suggestedLocations=t}},e.default=n,e},function(t,e,o){return o(44),o(46),o(53),o(71),t.exports=o(86),e},function(t,e,o){"use strict";var i=o(4),n=function(t){return t&&t.__esModule?t:{default:t}}(i);return function(){var t=document.getElementsByTagName("script"),e=t[t.length-1].getAttribute("data-key");if(e){var o=e.split(/;|,|\|/);if(e&&o.length>1){for(var i=[],r=0;r<o.length;r++)i.push(o[r]);e=i}}var s=t[t.length-1].getAttribute("data-url"),a=t[t.length-1].getAttribute("data-timeout"),l=function(){},p=function(t){throw new Error("Configuration load failed : "+t.message)};if(e||s){var c={apiKey:e,onSuccess:l,onFailure:p};s&&(c.serverUrl=s,c.callbackSuffix=""),a&&(c.timeOut=a),n.default.Config||n.default.Services.getConfig(c)}}(),e},function(t,e){return t.exports=o,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var n=o(20),r=(i(n),o(21)),s=(i(r),o(22)),a=(i(s),o(23)),l=(i(a),o(24)),p=(i(l),o(25)),c=(i(p),o(26)),u=(i(c),o(27)),h=(i(u),o(28)),d=(i(h),o(29)),f=(i(d),o(30)),y=(i(f),o(31)),g=(i(y),o(32)),m=(i(g),o(33)),v=(i(m),o(34)),_=(i(v),o(47)),b=(i(_),o(48)),E=(i(b),o(49)),S=(i(E),o(50)),w=(i(S),o(51)),P=(i(w),o(52));i(P);return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}var n=o(28),r=(i(n),o(20)),s=(i(r),o(21)),a=(i(s),o(22)),l=(i(a),o(23)),p=(i(l),o(24)),c=(i(p),o(25)),u=(i(c),o(26)),h=(i(u),o(27)),d=(i(h),o(29)),f=(i(d),o(30)),y=(i(f),o(31)),g=(i(y),o(32)),m=(i(g),o(33)),v=(i(m),o(34)),_=(i(v),o(54)),b=(i(_),o(55)),E=(i(b),o(56)),S=(i(E),o(57)),w=(i(S),o(58)),P=(i(w),o(59)),C=(i(P),o(60)),A=(i(C),o(61)),M=(i(A),o(62)),x=(i(M),o(63)),R=(i(x),o(64)),I=(i(R),o(65)),T=(i(I),o(66)),L=(i(T),o(67)),G=(i(L),o(68)),O=(i(G),o(69)),N=(i(O),o(70));i(N);return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e){return e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t,e){for(var o in t)t.hasOwnProperty(o)&&(e.hasOwnProperty(o)?"object"===r(t[o])&&n(t[o],e[o]):e[o]=t[o])}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(4),a=i(s),l=o(72),p=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e}(l),c=o(5),u=i(c),h=o(73),d=i(h),f=o(78),y=i(f),g=o(80),m=i(g),v=o(82),_=i(v),b=o(84),E=i(b),S=o(8),w=i(S);a.default.LayerUtils=u.default,a.default.itownsExtVersion="2.0.0",a.default.itownsExtDate="2018-05-04";var P="undefined"!=typeof window?window:"undefined"!=typeof self?self:{};return p.control={},p.control.MousePosition=d.default,p.control.LayerSwitcher=y.default,p.control.Attributions=m.default,p.control.Scale=_.default,p.control.MiniGlobe=E.default,p.GlobeViewExtended=w.default,P.itowns||(P.itowns={}),n(p,P.itowns),e.default=a.default,e},function(t,e){return t.exports=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(t&&"object"!==(void 0===t?"undefined":r(t)))throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize(t),this._callbacks={};var e=this._initContainer(t),o=document.getElementById(t.target)||null;w.default.call(this,{name:"MousePosition",element:e,target:o})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(9),a=i(s),l=o(3),p=i(l),c=o(4),u=i(c),h=o(8),d=i(h),f=o(0),y=i(f),g=o(6),m=i(g),v=o(2),_=i(v),b=o(35),E=i(b),S=o(11),w=i(S),P=o(76),C=i(P),A=o(77),M=i(A),x=p.default.getLogger("MousePosition");return n.prototype=Object.create(w.default.prototype,{}),y.default.assign(n.prototype,E.default),n.prototype.constructor=n,n.prototype.setGlobe=function(t){if(t)this._centerElement=this._createMapCenter(),t.getTargetElement().appendChild(this._centerElement),this._callbacks.mouseMove=this.onMouseMove.bind(this),this.collapsed||(this._isDesktop?t.listen(d.default.EVENTS.MOUSE_MOVE,this._callbacks.mouseMove):t.listen(d.default.EVENTS.CENTER_CHANGED,this.onGlobeMove));else if(null==t){for(this._globe.forget(d.default.EVENTS.MOUSE_MOVE,this._callbacks.mouseMove);this.getElement().hasChildNodes();)this.getElement().removeChild(this.getElement().lastChild);this.getElement().parentNode.removeChild(this.getElement()),this._globe.getTargetElement().removeChild(this._centerElement)}w.default.prototype.setGlobe.call(this,t)},n.prototype.addSystem=function(t){if("object"!==(void 0===t?"undefined":r(t)))return void console.log("[ERROR] MousePosition:addSystem - system parameter should be an object");if(!t.crs)return void x.error("crs not defined !");t.label||(x.warn("crs label not defined, use crs code by default."),t.label=t.crs),t.type||(x.warn("type srs not defined, use 'Metric' by default."),t.type="Metric");for(var e=0;e<this._projectionSystems.length;e++){var o=this._projectionSystems[e];t.crs===o.crs&&console.log("crs '{}' already configured",o.crs)}t.code=this._projectionSystems.length,this._projectionSystems.push(t);var i=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));if(i){var n=document.createElement("option");n.value=t.code,n.text=t.label,i.appendChild(n)}},n.prototype.addSystems=function(t){if(t){if(!Array.isArray(t))return void console.log("[ERROR] MousePosition:addSystems - systems parameter should be an array");for(var e=0;e<t.length;e++)this.addSystem(t[e])}},n.prototype.removeSystem=function(t){if(!t||"string"!=typeof t)return void console.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string");for(var e=null,o=0;o<this._projectionSystems.length;o++){var i=this._projectionSystems[o];if(t===i.crs){e=i.code,this._projectionSystems.splice(o,1);break}}if(null==e)return void console.log("[WARN] MousePosition:removeSystem - system not found");for(var n=[],r=0;r<this._projectionSystems.length;r++)n[Number(this._projectionSystems[r].code)]=r,this._projectionSystems[r].code=r;for(var s=null,a=document.getElementById(this._addUID("GPmousePositionProjectionSystem")),l=0;l<a.childNodes.length;l++)e!=a.childNodes[l].value?a.childNodes[l].value=n[Number(a.childNodes[l].value)]:s=l;null!=s&&a.removeChild(a.childNodes[s]),this._currentProjectionSystems.code==e&&(a.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(a.childNodes[0].value))},n.prototype.setUnits=function(t){t&&Array.isArray(t)&&(this.options.units=t,this._projectionUnits={},this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))},n.prototype.setAltitudeOptions=function(t){if(t&&"object"===(void 0===t?"undefined":r(t))&&(this.options.altitude.triggerDelay=t.triggerDelay,this.options.altitude.responseDelay=t.responseDelay,t.serviceOptions))for(var e in t.serviceOptions)t.serviceOptions.hasOwnProperty(e)&&(this.options.altitude.serviceOptions[e]=t.serviceOptions[e])},n.prototype.displayAltitude=function(t){void 0!==t&&(void 0===this._noRightManagement&&this._checkRightsManagement(),this.options.displayAltitude=t,this._setElevationPanel(t))},n.prototype.displayCoordinates=function(t){void 0!==t&&(this.options.displayCoordinates=t,this._setCoordinatesPanel(t),this._setSettingsPanel(t))},n.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(this._isDesktop||(document.getElementById(this._addUID("GPmapCenter")).className=t?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!t)},n.prototype._initialize=function(t){if(this.options=t||{},this.options.collapsed=void 0===t.collapsed||t.collapsed,this.collapsed=this.options.collapsed,this.options.units=t.units||[],this.options.displayAltitude=void 0===t.displayAltitude||t.displayAltitude,this.options.displayCoordinates=void 0===t.displayCoordinates||t.displayCoordinates,this.options.systems=t.systems||[],t.altitude){var e=t.altitude;this.options.altitude={triggerDelay:void 0!==e.triggerDelay?e.triggerDelay:200,responseDelay:void 0!==e.responseDelay?e.responseDelay:500,serviceOptions:e.serviceOptions||{},noDataValue:void 0!==e.noDataValue?e.noDataValue:-99999,noDataValueTolerance:void 0!==e.noDataValueTolerance?e.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=_.default.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=y.default.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this.options.displayAltitude||this.options.displayCoordinates||(this.options.displayCoordinates=!0),this.options.displayAltitude&&this._checkRightsManagement()},n.prototype._initProjectionSystems=function(){for(var t=[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:"EPSG:27572",type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],e=this.options.systems,o=0;o<e.length;o++){var i=e[o];this.addSystem(i)}if(0===this._projectionSystems.length)for(var n=0;n<t.length;n++)this.addSystem(t[n])},n.prototype._initProjectionUnits=function(){var t={Geographical:[{code:"DEC",label:"degrés décimaux",convert:this._displayDEC},{code:"DMS",label:"degrés sexagésimaux",convert:this._displayDMS},{code:"RAD",label:"radians",convert:this._displayRAD},{code:"GON",label:"grades",convert:this._displayGON}],Metric:[{code:"M",label:"mètres",convert:this._displayMeter},{code:"KM",label:"kilomètres",convert:this._displayKMeter}]},e=this.options.units;for(var o in t)if(t.hasOwnProperty(o)){for(var i=!1,n=0;n<t[o].length;n++)for(var s=t[o][n],a=0;a<e.length;a++){var l=e[a];s.code===l&&(i=!0,this._projectionUnits[o]||(this._projectionUnits[o]=[]),this._projectionUnits[o].push(s))}i||(this._projectionUnits[o]=t[o])}"object"===r(this._projectionUnits)&&0===Object.keys(this._projectionUnits).length&&(this._projectionUnits=t)},n.prototype._checkRightsManagement=function(){var t=m.default.check({key:this.options.apiKey,resources:["SERVICE_CALCUL_ALTIMETRIQUE_RSC"],services:["Elevation"]});this._noRightManagement=!t,this.options.apiKey||(this.options.apiKey=t.key)},n.prototype._initContainer=function(t){var e=this._createMainContainerElement(),o=this._showMousePositionContainer=this._createShowMousePositionElement();t.collapsed||(o.checked="checked"),e.appendChild(o);var i=this._createShowMousePositionPictoElement(this._isDesktop);e.appendChild(i);var n=this._createMousePositionPanelElement(t.displayAltitude,t.displayCoordinates),r=this._createMousePositionSettingsElement(t.displayCoordinates),s=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),a=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return r.appendChild(s),r.appendChild(a),n.appendChild(r),e.appendChild(n),e},n.prototype._setElevationPanel=function(t){var e=null;t?this._noRightManagement?(e=document.getElementById("GPmousePositionAlt-"+this._uid),e.innerHTML="No rights!"):(e=document.getElementById("GPmousePositionAltitude-"+this._uid),e.style.display=""):(e=document.getElementById("GPmousePositionAltitude-"+this._uid),e.style.display="none")},n.prototype._setCoordinatesPanel=function(t){var e=document.getElementById("GPmousePositionCoordinate-"+this._uid);e.style.display=t?"":"none"},n.prototype._setSettingsPanel=function(t){var e=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),o=document.getElementById("GPmousePositionSettings-"+this._uid);t?(e.style.display="",o.style.display=""):(e.style.display="none",o.style.display="none")},n.prototype._setTypeUnitsPanel=function(t){for(var e=this._projectionUnitsContainer;e.firstChild;)e.removeChild(e.firstChild);for(var o=this._projectionUnits[t],i=0;i<o.length;i++){var n=o[i],r=document.createElement("option");r.value=n.code?n.code:i,r.text=n.label||i,e.appendChild(r)}this._currentProjectionType=t,this._currentProjectionUnits=this._projectionUnits[t][0].code},n.prototype._displayDEC=function(t){var e={};return e.lat=C.default.roundToDecimal(t.lat,6),e.lng=C.default.roundToDecimal(t.lon,6),e},n.prototype._displayDMS=function(t){var e={};return e.lat=C.default.decimalLatToDMS(t.lat),e.lng=C.default.decimalLongToDMS(t.lon),e},n.prototype._displayRAD=function(t){var e={};return e.lat=C.default.decimalToRadian(t.lat),e.lng=C.default.decimalToRadian(t.lon),e},n.prototype._displayGON=function(t){var e={};return e.lat=C.default.decimalToGrade(t.lat),e.lng=C.default.decimalToGrade(t.lon),e},n.prototype._displayMeter=function(t){var e={};return e.x=t.lon.toFixed(2),e.y=t.lat.toFixed(2),e.unit="m",e},n.prototype._displayKMeter=function(t){var e={};return e.x=(t.lon/1e3).toFixed(2),e.y=(t.lat/1e3).toFixed(2),e.unit="km",e},n.prototype._setCoordinate=function(t){var e=[],o={},i=this._currentProjectionSystems,n=i.crs;if(!i||!n)return void console.log("ERROR : system crs not found");"EPSG:4326"!==n?(e=(0,a.default)(M.default[n],[t.lon,t.lat]),o.lon=e[0],o.lat=e[1]):o=t;for(var r=this._currentProjectionSystems.type,s=null,l=this._projectionUnits[r],p=0;p<l.length;p++)if(l[p].code===this._currentProjectionUnits){s=l[p].convert;break}if(!s||"function"!=typeof s)return void console.log("WARNING : coordinates format function not found");(e=s(o))&&0!==Object.keys(e).length&&this.GPdisplayCoords(e)},n.prototype._setElevation=function(t){var e=this.options.altitude.responseDelay;this.GPdisplayElevation(t,e)},n.prototype.onMoveStopped=function(t){this._setElevation(t)},n.prototype.onMouseMove=function(t){var e=this,o=this.getGlobe().getCoordinateFromMouseEvent(t);if(!o)return this.GPdisplayCoords({lon:"---",lat:"---"}),void this.GPresetElevation();var i={lon:o.longitude(),lat:o.latitude()};this._setCoordinate(i),this.options.displayAltitude&&(clearTimeout(this._timer),this._timer=setTimeout(function(){e.onMoveStopped(i)},this.options.altitude.triggerDelay))},n.prototype.onGlobeMove=function(){},n.prototype.onRequestAltitude=function(t,e){if(t&&0!==Object.keys(t).length&&this.options.displayAltitude){if(this._noRightManagement)return console.log("[WARNING] contract key configuration has no rights to load geoportal elevation "),void(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="No rights!");var o=this.options.altitude.serviceOptions||{};o.zonly=!0,o.positions=[{lon:t.lon,lat:t.lat}],o.scope=this,o.rawResponse?o.onSuccess=function(t){console.log("alti service raw response : ",t)}:o.onSuccess=function(t){t&&Object.keys(t)&&e.call(this,t.elevations[0].z)},o.onFailure=function(t){console.log("[getAltitude] ERROR : "+t.message)},o.apiKey=o.apiKey||this.options.apiKey,u.default.Services.getAltitude(o)}},n.prototype.onShowMousePositionClick=function(){var t=this.getGlobe();this.collapsed=this._showMousePositionContainer.checked,this._showMousePositionContainer.checked?this._isDesktop?t.forget(d.default.EVENTS.MOUSE_MOVE,this._callbacks.mouseMove):t.forget(d.default.EVENTS.CENTER_CHANGED,this.onGlobeMove):this._isDesktop?t.listen(d.default.EVENTS.MOUSE_MOVE,this._callbacks.mouseMove):t.listen(d.default.EVENTS.CENTER_CHANGED,this.onGlobeMove),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)},n.prototype.onMousePositionProjectionSystemChange=function(t){var e=t.target.selectedIndex,o=t.target.options[e].value;this._setCurrentSystem(o)},n.prototype._setCurrentSystem=function(t){for(var e=null,o=0;o<this._projectionSystems.length;++o)if(this._projectionSystems[o].code==t){e=this._projectionSystems[o].type;break}if(!e)return void x.log("system not found in projection systems container");e!==this._currentProjectionType&&this._setTypeUnitsPanel(e),this._currentProjectionSystems=this._projectionSystems[Number(t)],this._isDesktop||this.onGlobeMove()},n.prototype.onMousePositionProjectionSystemMouseOver=function(){var t=this.getGlobe();if(t){var e=t.getExtent(),o=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));o.innerHTML="";for(var i,n=0;n<this._projectionSystems.length;n++){var r=this._projectionSystems[n];r.geoBBox&&(e.west()>r.geoBBox.right||e.south()>r.geoBBox.top||e.east()<r.geoBBox.left||e.north()<r.geoBBox.bottom)?r===this._currentProjectionSystems&&(i=document.createElement("option"),i.value=r.code,i.text=r.label||n,i.setAttribute("selected","selected"),i.setAttribute("disabled","disabled"),o.appendChild(i)):(i=document.createElement("option"),i.value=r.code,i.text=r.label||n,r===this._currentProjectionSystems&&i.setAttribute("selected","selected"),o.appendChild(i))}}},n.prototype.onMousePositionProjectionUnitsChange=function(t){var e=t.target.selectedIndex,o=t.target.options[e].value;this._currentProjectionUnits=o,this._isDesktop||this.onGlobeMove()},e.default=n,e},function(t,e,o){var i,n;return function(r,s){"use strict";i=s,void 0!==(n="function"==typeof i?i.call(e,o,e,t):i)&&(t.exports=n)}(0,function(){"use strict";function t(t,e){var o=t[e];if("function"==typeof o.bind)return o.bind(t);try{return Function.prototype.bind.call(o,t)}catch(e){return function(){return Function.prototype.apply.apply(o,[t,arguments])}}}function e(e){return"debug"===e&&(e="log"),typeof console!==a&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):s)}function o(t,e){for(var o=0;o<l.length;o++){var i=l[o];this[i]=o<t?s:this.methodFactory(i,t,e)}this.log=this.debug}function i(t,e,i){return function(){typeof console!==a&&(o.call(this,e,i),this[t].apply(this,arguments))}}function n(t,o,n){return e(t)||i.apply(this,arguments)}function r(t,e,i){function r(t){var e=(l[t]||"silent").toUpperCase();if(typeof window!==a){try{return void(window.localStorage[u]=e)}catch(t){}try{window.document.cookie=encodeURIComponent(u)+"="+e+";"}catch(t){}}}function s(){var t;if(typeof window!==a){try{t=window.localStorage[u]}catch(t){}if(typeof t===a)try{var e=window.document.cookie,o=e.indexOf(encodeURIComponent(u)+"=");-1!==o&&(t=/^([^;]+)/.exec(e.slice(o))[1])}catch(t){}return void 0===c.levels[t]&&(t=void 0),t}}var p,c=this,u="loglevel";t&&(u+=":"+t),c.name=t,c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=i||n,c.getLevel=function(){return p},c.setLevel=function(e,i){if("string"==typeof e&&void 0!==c.levels[e.toUpperCase()]&&(e=c.levels[e.toUpperCase()]),!("number"==typeof e&&e>=0&&e<=c.levels.SILENT))throw"log.setLevel() called with invalid level: "+e;if(p=e,!1!==i&&r(e),o.call(c,e,t),typeof console===a&&e<c.levels.SILENT)return"No console available for logging"},c.setDefaultLevel=function(t){s()||c.setLevel(t,!1)},c.enableAll=function(t){c.setLevel(c.levels.TRACE,t)},c.disableAll=function(t){c.setLevel(c.levels.SILENT,t)};var h=s();null==h&&(h=null==e?"WARN":e),c.setLevel(h,!1)}var s=function(){},a="undefined",l=["trace","debug","info","warn","error"],p=new r,c={};p.getLogger=function(t){if("string"!=typeof t||""===t)throw new TypeError("You must supply a name when creating a logger.");var e=c[t];return e||(e=c[t]=new r(t,p.getLevel(),p.methodFactory)),e};var u=typeof window!==a?window.log:void 0;return p.noConflict=function(){return typeof window!==a&&window.log===p&&(window.log=u),p},p.getLoggers=function(){return c},p}),e},function(t,e){var o;o=function(){return this}();try{o=o||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(o=window)}return t.exports=o,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={NORTH:"N",SOUTH:"S",EAST:"E",WEST:"W",digitSecond:2,digitDecimal:5,digitRadian:8,roundToDecimal:function(t,e){var o=Math.pow(10,e);return Math.round(t*o)/o},decimalToRadian:function(t){return this.roundToDecimal(.017453292519943295*t,this.digitRadian)},decimalToGrade:function(t){return this.roundToDecimal(1.1111111111111112*t,this.digitRadian)},decimalToDMS:function(t,e){t<0&&(t*=-1);var o=Math.floor(t),i=60*(t-o),n=Math.floor(i),r=60*(i-n),s=this.roundToDecimal(r,this.digitSecond),a=o+"° "+n+"' "+s+'" ';return e&&(a+=e),a},decimalLatToDMS:function(t){var e=t<0?this.SOUTH:this.NORTH;return this.decimalToDMS(t,e)},decimalLongToDMS:function(t){var e=t<0?this.WEST:this.EAST;return this.decimalToDMS(t,e)},DMSToDecimal:function(t,e,o,i){var n=t+e/60+o/3600;return n=i==this.SOUTH||i==this.WEST?-1*n:n,this.roundToDecimal(n,this.digitDecimal)}};return e.default=i,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={"EPSG:4326":"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs +units=degrees",
"EPSG:3857":"+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs","EPSG:2154":"+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:27572":"+proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs","EPSG:32620":"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs","EPSG:4467":"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:2972":"+proj=utm +zone=22 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:32630":"+proj=utm +zone=30 +datum=WGS84 +units=m +no_defs","EPSG:32631":"+proj=utm +zone=31 +datum=WGS84 +units=m +no_defs","EPSG:32632":"+proj=utm +zone=32 +datum=WGS84 +units=m +no_defs","EPSG:4471":"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:2975":"+proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:3296":"+proj=utm +zone=5 +south +ellps=GRS80 +towgs84=0.072,-0.507,-0.245,-0.0183,0.0003,-0.007,-0.0093 +units=m +no_defs","EPSG:3297":"+proj=utm +zone=6 +south +ellps=GRS80 +towgs84=0.072,-0.507,-0.245,-0.0183,0.0003,-0.007,-0.0093 +units=m +no_defs","EPSG:32707":"+proj=utm +zone=7 +south +datum=WGS84 +units=m +no_defs","EPSG:32708":"+proj=utm +zone=8 +south +datum=WGS84 +units=m +no_defs","EPSG:26912":"+proj=utm +zone=12 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs","EPSG:32742":"+proj=utm +zone=42 +south +datum=WGS84 +units=m +no_defs","EPSG:32739":"+proj=utm +zone=39 +south +datum=WGS84 +units=m +no_defs","EPSG:32743":"+proj=utm +zone=43 +south +datum=WGS84 +units=m +no_defs","EPSG:2986":"","EPSG:32737":"+proj=utm +zone=37 +south +datum=WGS84 +units=m +no_defs","EPSG:32738":"+proj=utm +zone=38 +south +datum=WGS84 +units=m +no_defs","EPSG:2988":"+proj=utm +zone=1 +south +ellps=intl +towgs84=253,-132,-127,0,0,0,0 +units=m +no_defs","EPSG:3163":"+proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){t=t||{};var e=t.options||{},o=t.layers||[];if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(o&&!Array.isArray(o))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(e&&"object"!==(void 0===e?"undefined":r(e)))throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize(e,o);var i=this._initContainer(e);this._addedLayerConf={};var s=document.getElementById(e.target)||null;g.default.call(this,{name:"LayerSwitcher",element:i,target:s})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(8),a=i(s),l=o(0),p=i(l),c=o(5),u=(i(c),o(2)),h=i(u),d=o(36),f=i(d),y=o(11),g=i(y);return n.prototype=Object.create(g.default.prototype,{}),p.default.assign(n.prototype,f.default),n.prototype.constructor=n,n.prototype.setGlobe=function(t){var e;if(t){for(var o=this,i=0;i<this._initLayers.length;i++){var n=null;if(this._initLayers[i].id&&(n=t.getLayerById(this._initLayers[i].id)),n&&this._initLayers[i].displayed){var r=this._initLayers[i].config||{},s={title:r.title||n.title||this._initLayers[i].id,description:r.description||null,legends:r.legends||[],metadata:r.metadata||[],quicklookUrl:r.quicklookUrl||null};void 0!==r.ipr&&(s.ipr=r.ipr),void 0!==r.opacity&&(s.opacity=r.opacity),void 0!==r.visibility&&(s.visibility=r.visibility),this._layers[n.id]=s}}this._addGlobeLayers(t),this._callbacks.onOpacityLayerCallBack=function(t){o._updateLayerOpacity(t.target.id,t.new.opacity)},this._callbacks.onVisibilityLayerCallBack=function(t){o._updateLayerVisibility(t.target.id,t.new.visible)},this._callbacks.onChangedViewCallBack=function(t){o._inRangeUpdate(t.colorLayersId)},t.listen(a.default.EVENTS.PRE_RENDER,this._callbacks.onChangedViewCallBack),t.preRenderEventFetchColorLayersDisplayed(),this._callbacks.onAddedLayerCallBack=function(t){var e=t.layerId;if(o){if(!o._layerDisplayedInLayerSwitcher(e))return;var i=o.getGlobe().getLayerById(e);if("elevation"===i.type)return;var n=o._getLayerConf(e)||o._addedLayerConf[e];n?o.addLayer(i,n):o.addLayer(i)}},t.listen(a.default.EVENTS.LAYER_ADDED,this._callbacks.onAddedLayerCallBack),this._callbacks.onRemovedLayerCallBack=function(t){var e=t.layerId;o&&o.removeLayer(e)},t.listen(a.default.EVENTS.LAYER_REMOVED,this._callbacks.onRemovedLayerCallBack),this._callbacks.onIndexLayerCallBack=function(t){(function(t,e){if(t.length!==e.length)return!1;for(var o=0;o<t.length;++o)if(t[o]!==e[o])return!1;return!0})(t.new.sequence,t.previous.sequence)||o._updateLayerListContainer()},t.listen(a.default.EVENTS.LAYERS_ORDER_CHANGED,this._callbacks.onIndexLayerCallBack),e=t.getColorLayers();for(var l=0;l<e.length;++l)t.addLayerListener(e[l],a.default.EVENTS.OPACITY_PROPERTY_CHANGED,this._callbacks.onOpacityLayerCallBack),t.addLayerListener(e[l],a.default.EVENTS.VISIBLE_PROPERTY_CHANGED,this._callbacks.onVisibilityLayerCallBack),o._updateLayerVisibility(e[l].id,e[l].visible),o._updateLayerOpacity(e[l].id,e[l].opacity)}else{this._globe.forget(a.default.EVENTS.PRE_RENDER,this._callbacks.onChangedViewCallBack),this._globe.forget(a.default.EVENTS.LAYER_ADDED,this._callbacks.onAddedLayerCallBack),this._globe.forget(a.default.EVENTS.LAYER_REMOVED,this._callbacks.onRemovedLayerCallBack),this._globe.forget(a.default.EVENTS.LAYERS_ORDER_CHANGED,this._callbacks.onIndexLayerCallBack),e=this._globe.getColorLayers();for(var p=0;p<e.length;++p)this._globe.removeLayerListener(e[p],a.default.EVENTS.OPACITY_PROPERTY_CHANGED,this._callbacks.onOpacityLayerCallBack),this._globe.removeLayerListener(e[p],a.default.EVENTS.VISIBLE_PROPERTY_CHANGED,this._callbacks.onVisibilityLayerCallBack);for(;this._element.hasChildNodes();)this._element.removeChild(this._element.lastChild);this._element.parentNode.removeChild(this._element)}g.default.prototype.setGlobe.call(this,t)},n.prototype.addLayer=function(t,e){e=e||{};var o=this.getGlobe();if(!t)return void console.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");var i=t.id;if("undefined"===i)return void console.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for "+t+" layer (layer id not found)");if(o.addLayerListener(t,a.default.EVENTS.OPACITY_PROPERTY_CHANGED,this._callbacks.onOpacityLayerCallBack),o.addLayerListener(t,a.default.EVENTS.VISIBLE_PROPERTY_CHANGED,this._callbacks.onVisibilityLayerCallBack),!o.getLayerById(i))return void console.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",t," layer (layer is not in globe layers )");if(this._layers[i]){if(this._layers[i]&&e){for(var n in e)e.hasOwnProperty(n)&&(this._layers[i][n]=e[n]);if(void 0!==e.ipr&&(t.attribution=e.ipr),void 0!==e.opacity&&(t.opacity=e.opacity),void 0!==e.visibility&&(t.visible=e.visibility),e.title){var r=document.getElementById(this._addUID("GPname_ID_"+i));r&&(r.innerHTML=e.title)}var s=document.getElementById(this._addUID("GPinfo_ID_"+i));if(!document.getElementById(this._addUID("GPinfo_ID_"+i))&&e.description&&(e.legends||e.metadata||e.quicklookUrl)){var l=document.getElementById(this._addUID("GPadvancedTools_ID_"+i));l&&l.appendChild(this._createAdvancedToolInformationElement({id:i}))}s&&"GPlayerInfoOpened"===s.className&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",s.className)}}else{var p=this._getLayerInfo(t)||{},c={title:e.title||p._title||i,description:e.description||p._description||null,legends:e.legends||p._legends||[],metadata:e.metadata||p._metadata||[],quicklookUrl:e.quicklookUrl||p._quicklookUrl||null};void 0!==e.ipr&&(c.ipr=e.ipr,t.attribution=c.ipr),void 0!==e.opacity&&(c.opacity=e.opacity,t.opacity=c.opacity),void 0!==e.visibility&&(c.visibility=e.visibility,t.visible=c.visibility),this._layers[i]=c,this._layers[i].div=this._createLayerDiv(i),this._updateLayerListContainer()}},n.prototype.removeLayer=function(t){var e=document.getElementById(this._addUID("GPlayersList")),o=document.getElementById(this._addUID("GPinfo_ID_"+t));o&&"GPlayerInfoOpened"===o.className&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",o.className);var i=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+t));e.removeChild(i),delete this._layers[t]},n.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");var e=this.getCollapsed();if(!(t&&e||!t&&!e)){if(!e){for(var o=document.getElementsByClassName("GPlayerInfoOpened"),i=0;i<o.length;i++)o[i].className="GPlayerInfo";document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}document.getElementById(this._addUID("GPshowLayersList")).checked=!t}},n.prototype.getCollapsed=function(){return!document.getElementById(this._addUID("GPshowLayersList")).checked},n.prototype._initialize=function(t,e){this._uid=h.default.generate(),this._layers={},this._layerListContainer=null,this._callbacks={},this._options=t,this._initLayers=e},n.prototype._getLayerConf=function(t){for(var e=0;e<this._initLayers.length;++e)if(this._initLayers[e].id===t)return this._initLayers[e].config;return null},n.prototype._layerDisplayedInLayerSwitcher=function(t){for(var e=0;e<this._initLayers.length;++e)if(this._initLayers[e].id===t)return void 0===this._initLayers[e].displayed||this._initLayers[e].displayed;return!0},n.prototype._initContainer=function(t){var e=this._createMainContainerElement(),o=this._createMainLayersShowElement();e.appendChild(o),t.collapsed||(o.checked="checked");var i=this._layerListContainer=this._createMainLayersElement();e.appendChild(i),this._createDraggableElement(i,this);var n=this._createMainPictoElement();e.appendChild(n);var r=this._createMainInfoElement();return e.appendChild(r),e},n.prototype._addGlobeLayers=function(t){for(var e,o=this.getElement().childNodes,i=0;i<o.length;i++)if(o[i].id===this._addUID("GPlayersList")){e=o[i];break}t.getColorLayers().sort(function(t,e){return e.sequence-t.sequence}).forEach(function(t){var o;if(o=t.id,this._layerDisplayedInLayerSwitcher(o)){var i=this._getLayerConf(o)||this._addedLayerConf[o]||{},n=this._getLayerInfo(t)||{};if(this._layers[o]){var r=this._layers[o];void 0!==r.ipr&&(t.options.attribution=r.ipr),void 0!==r.opacity&&(t.opacity=r.opacity),void 0!==r.visibility&&(t.visible=r.visibility)}else{var s={title:i.title||n._title||o,description:i.description||n._description||null,legends:i.legends||n._legends||[],metadata:i.metadata||n._metadata||[],quicklookUrl:i.quicklookUrl||n._quicklookUrl||null};this._layers[o]=s}var a=this._createLayerDiv(o);this._layers[o].div=a,e.appendChild(a)}},this)},n.prototype._createLayerDiv=function(t){var e=this._layers[t],o=e.legends&&0!==e.legends.length,i=e.metadata&&0!==e.metadata.length,n=e.quicklookUrl;(o||i||n)&&(e.displayInformationElement=!0),e.id=t;var r=this._createContainerLayerElement(e);return e.inRange||r.classList.add("outOfRange"),r},n.prototype._onChangeLayerOpacity=function(t){var e=this.getGlobe(),o=this._resolveLayerId(t.target.id),i=t.target.value;document.getElementById(this._addUID("GPopacityValue_ID_"+o)).innerHTML=i+"%",e.setLayerOpacity(o,i/100)},n.prototype._updateLayerOpacity=function(t,e){e>1&&(e=1),e<0&&(e=0);var o=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+t));o&&(o.value=Math.round(100*e));var i=document.getElementById(this._addUID("GPopacityValue_ID_"+t));i&&(i.innerHTML=Math.round(100*e)+"%")},n.prototype._onVisibilityLayerClick=function(t){var e=this.getGlobe(),o=this._resolveLayerId(t.target.id);e.setLayerVisibility(o,t.target.checked)},n.prototype._updateLayerVisibility=function(t,e){var o=document.getElementById(this._addUID("GPvisibility_ID_"+t));o&&(o.checked=e)},n.prototype._onOpenLayerInfoClick=function(t){var e,o,i=this._resolveLayerId(t.target.id),n=this._layers[i],r=document.getElementById(t.target.id);if("GPlayerInfoOpened"===r.className)return void 0!==r.classList&&(r.classList.remove("GPlayerInfoOpened"),r.classList.add("GPlayerInfo")),e=document.getElementById(this._addUID("GPlayerInfoPanel")),void 0!==e.classList&&(e.classList.remove("GPpanel"),e.classList.remove("GPlayerInfoPanelOpened"),e.classList.add("GPlayerInfoPanelClosed")),o=document.getElementById(this._addUID("GPlayerInfoContent")),void e.removeChild(o);for(var s=document.getElementsByClassName("GPlayerInfoOpened"),a=0;a<s.length;a++)s[a].className="GPlayerInfo";void 0!==r.classList&&(r.classList.remove("GPlayerInfo"),r.classList.add("GPlayerInfoOpened")),e=document.getElementById(this._addUID("GPlayerInfoPanel")),void 0!==e.classList&&(e.classList.add("GPpanel"),e.classList.remove("GPlayerInfoPanelClosed"),e.classList.add("GPlayerInfoPanelOpened")),(o=document.getElementById(this._addUID("GPlayerInfoContent")))&&e.removeChild(o);var l={title:n.title,description:n.description,quicklookUrl:n.quicklookUrl,metadata:n.metadata,legends:n.legends},p=this._createContainerLayerInfoElement(l);e.appendChild(p)},n.prototype._onDropLayerClick=function(t){var e=this.getGlobe(),o=this._resolveLayerId(t.target.id);e.removeLayer(o),this._updateLayerListContainer()},n.prototype._onDragAndDropLayerClick=function(t){var e=this.getGlobe();if(t.newIndex-t.oldIndex!=0){var o=null;if(t.newIndex&&0!==t.newIndex){var i=this._resolveLayerId(t.from.childNodes[t.newIndex+(t.newIndex-t.oldIndex<0?1:-1)].id);o=e.getLayerById(i).sequence}else o=e.getColorLayers().length-1;var n=this._resolveLayerId(t.item.id);e.moveLayerToIndex(n,o)}},n.prototype._inRangeUpdate=function(t){for(var e in this._layers){var o=this._layers[e];if(o){var i,n=t.indexOf(o.id)>=0;n&&!o.inRange?(o.inRange=!0,i=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+o.id)),i.classList.remove("outOfRange")):!n&&o.inRange&&(o.inRange=!1,i=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+o.id)),i.classList.add("outOfRange"))}}},n.prototype._updateLayerListContainer=function(){if(this._layerListContainer){for(var t=this.getGlobe();this._layerListContainer.firstChild;)this._layerListContainer.removeChild(this._layerListContainer.firstChild);for(var e=t.getColorLayers(),o=e.sort(function(t,e){return e.sequence-t.sequence}),i=0;i<o.length;i++)if(this._layers[o[i].id]){var n=this._layers[o[i].id].div;this._layerListContainer.appendChild(n)}}else console.log("[Itowns.control.LayerSwitcher] _updateLayerListContainer : layer list container not found to update layers order ?!")},n.prototype._getLayerInfo=function(t){var e={};return t&&(e._title=t.title||null,e._description=t.description||null,e._quicklookUrl=t.quicklookUrl||null,e._metadata=t.metadata||null,e._legends=t.legends||null),e},n.prototype._resolveLayerId=function(t){var e=h.default.name(t);return e.substring(e.indexOf("_ID_")+4)},e.default=n,e},function(t,e,o){var i,n;return function(r){"use strict";i=r,void 0!==(n="function"==typeof i?i.call(e,o,e,t):i)&&(t.exports=n)}(function(){"use strict";function t(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=e=m({},e),t[D]=this;var o={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var i in o)!(i in e)&&(e[i]=o[i]);Y(e);for(var r in this)"_"===r.charAt(0)&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&B,n(t,"mousedown",this._onTapStart),n(t,"touchstart",this._onTapStart),this.nativeDraggable&&(n(t,"dragover",this),n(t,"dragenter",this)),q.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function e(t){E&&E.state!==t&&(a(E,"display",t?"none":""),!t&&E.state&&S.insertBefore(E,v),E.state=t)}function o(t,e,o){if(t){o=o||F,e=e.split(".");var i=e.shift().toUpperCase(),n=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");do{if(">*"===i&&t.parentNode===o||(""===i||t.nodeName.toUpperCase()==i)&&(!e.length||((" "+t.className+" ").match(n)||[]).length==e.length))return t}while(t!==o&&(t=t.parentNode))}return null}function i(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.preventDefault()}function n(t,e,o){t.addEventListener(e,o,!1)}function r(t,e,o){t.removeEventListener(e,o,!1)}function s(t,e,o){if(t)if(t.classList)t.classList[o?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(k," ").replace(" "+e+" "," ");t.className=(i+(o?" "+e:"")).replace(k," ")}}function a(t,e,o){var i=t&&t.style;if(i){if(void 0===o)return F.defaultView&&F.defaultView.getComputedStyle?o=F.defaultView.getComputedStyle(t,""):t.currentStyle&&(o=t.currentStyle),void 0===e?o:o[e];e in i||(e="-webkit-"+e),i[e]=o+("string"==typeof o?"":"px")}}function l(t,e,o){if(t){var i=t.getElementsByTagName(e),n=0,r=i.length;if(o)for(;n<r;n++)o(i[n],n);return i}return[]}function p(t,e,o,i,n,r,s){var a=F.createEvent("Event"),l=(t||e[D]).options,p="on"+o.charAt(0).toUpperCase()+o.substr(1);a.initEvent(o,!0,!0),a.to=e,a.from=n||e,a.item=i||e,a.clone=E,a.oldIndex=r,a.newIndex=s,e.dispatchEvent(a),l[p]&&l[p].call(t,a)}function c(t,e,o,i,n,r){var s,a,l=t[D],p=l.options.onMove;return s=F.createEvent("Event"),s.initEvent("move",!0,!0),s.to=e,s.from=t,s.dragged=o,s.draggedRect=i,s.related=n||e,s.relatedRect=r||e.getBoundingClientRect(),t.dispatchEvent(s),p&&(a=p.call(l,s)),a}function u(t){t.draggable=!1}function h(){W=!1}function d(t,e){var o=t.lastElementChild,i=o.getBoundingClientRect();return(e.clientY-(i.top+i.height)>5||e.clientX-(i.right+i.width)>5)&&o}function f(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,o=e.length,i=0;o--;)i+=e.charCodeAt(o);return i.toString(36)}function y(t){var e=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"!==t.nodeName.toUpperCase()&&e++;return e}function g(t,e){var o,i;return function(){void 0===o&&(o=arguments,i=this,setTimeout(function(){1===o.length?t.call(i,o[0]):t.apply(i,o),o=void 0},e))}}function m(t,e){if(t&&e)for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o]);return t}var v,_,b,E,S,w,P,C,A,M,x,R,I,T,L,G,O,N={},k=/\s+/g,D="Sortable"+(new Date).getTime(),j=window,F=j.document,U=j.parseInt,B=!!("draggable"in F.createElement("div")),V=function(t){return t=F.createElement("x"),t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),W=!1,z=Math.abs,q=[],H=g(function(t,e,o){if(o&&e.scroll){var i,n,r,s,a=e.scrollSensitivity,l=e.scrollSpeed,p=t.clientX,c=t.clientY,u=window.innerWidth,h=window.innerHeight;if(C!==o&&(P=e.scroll,C=o,!0===P)){P=o;do{if(P.offsetWidth<P.scrollWidth||P.offsetHeight<P.scrollHeight)break}while(P=P.parentNode)}P&&(i=P,n=P.getBoundingClientRect(),r=(z(n.right-p)<=a)-(z(n.left-p)<=a),s=(z(n.bottom-c)<=a)-(z(n.top-c)<=a)),r||s||(r=(u-p<=a)-(p<=a),s=(h-c<=a)-(c<=a),(r||s)&&(i=j)),N.vx===r&&N.vy===s&&N.el===i||(N.el=i,N.vx=r,N.vy=s,clearInterval(N.pid),i&&(N.pid=setInterval(function(){i===j?j.scrollTo(j.pageXOffset+r*l,j.pageYOffset+s*l):(s&&(i.scrollTop+=s*l),r&&(i.scrollLeft+=r*l))},24)))}},30),Y=function(t){var e=t.group;e&&"object"==typeof e||(e=t.group={name:e}),["pull","put"].forEach(function(t){t in e||(e[t]=!0)}),t.groups=" "+e.name+(e.put.join?" "+e.put.join(" "):"")+" "};return t.prototype={constructor:t,_onTapStart:function(t){var e=this,i=this.el,n=this.options,r=t.type,s=t.touches&&t.touches[0],a=(s||t).target,l=a,c=n.filter;if(!("mousedown"===r&&0!==t.button||n.disabled)&&(a=o(a,n.draggable,i))){if(R=y(a),"function"==typeof c){if(c.call(this,t,a,this))return p(e,l,"filter",a,i,R),void t.preventDefault()}else if(c&&(c=c.split(",").some(function(t){if(t=o(l,t.trim(),i))return p(e,t,"filter",a,i,R),!0})))return void t.preventDefault();n.handle&&!o(l,n.handle,i)||this._prepareDragStart(t,s,a)}},_prepareDragStart:function(t,e,o){var i,r=this,a=r.el,p=r.options,c=a.ownerDocument;o&&!v&&o.parentNode===a&&(L=t,S=a,v=o,_=v.parentNode,w=v.nextSibling,T=p.group,i=function(){r._disableDelayedDrag(),v.draggable=!0,s(v,r.options.chosenClass,!0),r._triggerDragStart(e)},p.ignore.split(",").forEach(function(t){l(v,t.trim(),u)}),n(c,"mouseup",r._onDrop),n(c,"touchend",r._onDrop),n(c,"touchcancel",r._onDrop),p.delay?(n(c,"mouseup",r._disableDelayedDrag),n(c,"touchend",r._disableDelayedDrag),n(c,"touchcancel",r._disableDelayedDrag),n(c,"mousemove",r._disableDelayedDrag),n(c,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(i,p.delay)):i())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(t,"mouseup",this._disableDelayedDrag),r(t,"touchend",this._disableDelayedDrag),r(t,"touchcancel",this._disableDelayedDrag),r(t,"mousemove",this._disableDelayedDrag),r(t,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(t){t?(L={target:v,clientX:t.clientX,clientY:t.clientY},this._onDragStart(L,"touch")):this.nativeDraggable?(n(v,"dragend",this),n(S,"dragstart",this._onDragStart)):this._onDragStart(L,!0);try{F.selection?F.selection.empty():window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){S&&v&&(s(v,this.options.ghostClass,!0),t.active=this,p(this,S,"start",v,S,R))},_emulateDragOver:function(){if(G){if(this._lastX===G.clientX&&this._lastY===G.clientY)return;this._lastX=G.clientX,this._lastY=G.clientY,V||a(b,"display","none");var t=F.elementFromPoint(G.clientX,G.clientY),e=t,o=" "+this.options.group.name,i=q.length;if(e)do{if(e[D]&&e[D].options.groups.indexOf(o)>-1){for(;i--;)q[i]({clientX:G.clientX,clientY:G.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);V||a(b,"display","")}},_onTouchMove:function(e){if(L){t.active||this._dragStarted(),this._appendGhost();var o=e.touches?e.touches[0]:e,i=o.clientX-L.clientX,n=o.clientY-L.clientY,r=e.touches?"translate3d("+i+"px,"+n+"px,0)":"translate("+i+"px,"+n+"px)";O=!0,G=o,a(b,"webkitTransform",r),a(b,"mozTransform",r),a(b,"msTransform",r),a(b,"transform",r),e.preventDefault()}},_appendGhost:function(){if(!b){var t,e=v.getBoundingClientRect(),o=a(v),i=this.options;b=v.cloneNode(!0),s(b,i.ghostClass,!1),s(b,i.fallbackClass,!0),a(b,"top",e.top-U(o.marginTop,10)),a(b,"left",e.left-U(o.marginLeft,10)),a(b,"width",e.width),a(b,"height",e.height),a(b,"opacity","0.8"),a(b,"position","fixed"),a(b,"zIndex","100000"),a(b,"pointerEvents","none"),i.fallbackOnBody&&F.body.appendChild(b)||S.appendChild(b),t=b.getBoundingClientRect(),a(b,"width",2*e.width-t.width),a(b,"height",2*e.height-t.height)}},_onDragStart:function(t,e){var o=t.dataTransfer,i=this.options;this._offUpEvents(),"clone"==T.pull&&(E=v.cloneNode(!0),a(E,"display","none"),S.insertBefore(E,v)),e?("touch"===e?(n(F,"touchmove",this._onTouchMove),n(F,"touchend",this._onDrop),n(F,"touchcancel",this._onDrop)):(n(F,"mousemove",this._onTouchMove),n(F,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(o&&(o.effectAllowed="move",i.setData&&i.setData.call(this,o,v)),n(F,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(t){var i,n,r,s=this.el,l=this.options,p=l.group,u=p.put,f=T===p,y=l.sort;if(void 0!==t.preventDefault&&(t.preventDefault(),!l.dragoverBubble&&t.stopPropagation()),O=!0,T&&!l.disabled&&(f?y||(r=!S.contains(v)):T.pull&&u&&(T.name===p.name||u.indexOf&&~u.indexOf(T.name)))&&(void 0===t.rootEl||t.rootEl===this.el)){if(H(t,l,this.el),W)return;if(i=o(t.target,l.draggable,s),n=v.getBoundingClientRect(),r)return e(!0),void(E||w?S.insertBefore(v,E||w):y||S.appendChild(v));if(0===s.children.length||s.children[0]===b||s===t.target&&(i=d(s,t))){if(i){if(i.animated)return;m=i.getBoundingClientRect()}e(f),!1!==c(S,s,v,n,i,m)&&(v.contains(s)||(s.appendChild(v),_=s),this._animate(n,v),i&&this._animate(m,i))}else if(i&&!i.animated&&i!==v&&void 0!==i.parentNode[D]){A!==i&&(A=i,M=a(i),x=a(i.parentNode));var g,m=i.getBoundingClientRect(),P=m.right-m.left,C=m.bottom-m.top,R=/left|right|inline/.test(M.cssFloat+M.display)||"flex"==x.display&&0===x["flex-direction"].indexOf("row"),I=i.offsetWidth>v.offsetWidth,L=i.offsetHeight>v.offsetHeight,G=(R?(t.clientX-m.left)/P:(t.clientY-m.top)/C)>.5,N=i.nextElementSibling,k=c(S,s,v,n,i,m);if(!1!==k){if(W=!0,setTimeout(h,30),e(f),1===k||-1===k)g=1===k;else if(R){var j=v.offsetTop,F=i.offsetTop;g=j===F?i.previousElementSibling===v&&!I||G&&I:F>j}else g=N!==v&&!L||G&&L;v.contains(s)||(g&&!N?s.appendChild(v):i.parentNode.insertBefore(v,g?N:i)),_=v.parentNode,this._animate(n,v),this._animate(m,i)}}}},_animate:function(t,e){var o=this.options.animation;if(o){var i=e.getBoundingClientRect();a(e,"transition","none"),a(e,"transform","translate3d("+(t.left-i.left)+"px,"+(t.top-i.top)+"px,0)"),e.offsetWidth,a(e,"transition","all "+o+"ms"),a(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){a(e,"transition",""),a(e,"transform",""),e.animated=!1},o)}},_offUpEvents:function(){var t=this.el.ownerDocument;r(F,"touchmove",this._onTouchMove),r(t,"mouseup",this._onDrop),r(t,"touchend",this._onDrop),r(t,"touchcancel",this._onDrop)},_onDrop:function(e){var o=this.el,i=this.options;clearInterval(this._loopId),clearInterval(N.pid),clearTimeout(this._dragStartTimer),r(F,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(F,"drop",this),r(o,"dragstart",this._onDragStart)),this._offUpEvents(),e&&(O&&(e.preventDefault(),!i.dropBubble&&e.stopPropagation()),b&&b.parentNode.removeChild(b),v&&(this.nativeDraggable&&r(v,"dragend",this),u(v),s(v,this.options.ghostClass,!1),s(v,this.options.chosenClass,!1),S!==_?(I=y(v))>=0&&(p(null,_,"sort",v,S,R,I),p(this,S,"sort",v,S,R,I),p(null,_,"add",v,S,R,I),p(this,S,"remove",v,S,R,I)):(E&&E.parentNode.removeChild(E),v.nextSibling!==w&&(I=y(v))>=0&&(p(this,S,"update",v,S,R,I),p(this,S,"sort",v,S,R,I))),t.active&&(null!==I&&-1!==I||(I=R),p(this,S,"end",v,S,R,I),this.save())),S=v=_=b=w=E=P=C=L=G=O=I=A=M=T=t.active=null)},handleEvent:function(t){var e=t.type;"dragover"===e||"dragenter"===e?v&&(this._onDragOver(t),i(t)):"drop"!==e&&"dragend"!==e||this._onDrop(t)},toArray:function(){for(var t,e=[],i=this.el.children,n=0,r=i.length,s=this.options;n<r;n++)t=i[n],o(t,s.draggable,this.el)&&e.push(t.getAttribute(s.dataIdAttr)||f(t));return e},sort:function(t){var e={},i=this.el;this.toArray().forEach(function(t,n){var r=i.children[n];o(r,this.options.draggable,i)&&(e[t]=r)},this),t.forEach(function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return o(t,e||this.options.draggable,this.el)},option:function(t,e){var o=this.options;if(void 0===e)return o[t];o[t]=e,"group"===t&&Y(o)},destroy:function(){var t=this.el;t[D]=null,r(t,"mousedown",this._onTapStart),r(t,"touchstart",this._onTapStart),this.nativeDraggable&&(r(t,"dragover",this),r(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),q.splice(q.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},t.utils={on:n,off:r,css:a,find:l,is:function(t,e){return!!o(t,e,t)},extend:m,throttle:g,closest:o,toggleClass:s,index:y},t.create=function(e,o){return new t(e,o)},t.version="1.3.0",t}),e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){t=t||{};var e=t.options||{};if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(e&&"object"!==(void 0===e?"undefined":r(e)))throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize(e);var o=this._initContainer(e),i=document.getElementById(e.target)||null;m.default.call(this,{name:"Attributions",element:o,target:i})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(8),a=i(s),l=o(0),p=i(l),c=o(2),u=i(c),h=o(5),d=i(h),f=o(81),y=i(f),g=o(11),m=i(g);return n.prototype=Object.create(m.default.prototype,{}),p.default.assign(n.prototype,y.default),n.prototype.constructor=n,n.prototype.setGlobe=function(t){if(t){var e=this;this._callbacks.onPreRenderCallBack=function(t){var o=t.colorLayersId.concat(t.elevationLayersId);e._inRangeUpdate(o,t.extent)},t.listen(a.default.EVENTS.PRE_RENDER,this._callbacks.onPreRenderCallBack),t.preRenderEventFetchViewExtent(),t.preRenderEventFetchLayersDisplayed()}else{for(this._globe.forget(a.default.EVENTS.PRE_RENDER,this._callbacks.onPreRenderCallBack);this._element.hasChildNodes();)this._element.removeChild(this._element.lastChild);this._element.parentNode.removeChild(this._element)}m.default.prototype.setGlobe.call(this,t)},n.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] Attributions:setCollapsed - missing collapsed parameter");var e=this.getCollapsed();t&&e||!t&&!e||(document.getElementById(this._addUID("GPshowAttributionsList")).checked=!t)},n.prototype.getCollapsed=function(){return!document.getElementById(this._addUID("GPshowAttributionsList")).checked},n.prototype._initialize=function(t){this._uid=u.default.generate(),this._AttributionContainer=null,this._callbacks={},this._options=t},n.prototype._initContainer=function(t){var e=this._createMainContainerElement(),o=this._createMainAttributionsShowElement();e.appendChild(o),t.collapsed||(o.checked="checked");var i=this._attributionListContainer=this._createMainAttributionsListContainer(),n=this._createAttributionsList();i.appendChild(n),e.appendChild(i);var r=this._createMainPictoElement(t.collapsed);return e.appendChild(r),e},n.prototype._inRangeUpdate=function(t,e){for(var o=this.getGlobe(),i=1/o.getScale(),n=new window.Map,r=0;r<t.length;r++){var s=o.getLayerById(t[r]);if(s.visible){var a=s.options.originators;if(a)for(var l=0;l<a.length;l++)if(!n.has(a[l].name))if(a[l].constraints){if(a[l].constraints[0].minScaleDenominator)if(a[l].constraints[0].minScaleDenominator===a[l].constraints[0].maxScaleDenominator){var p=d.default.getZoomLevelFromScaleDenominator(a[l].constraints[0].minScaleDenominator),c=(this._resolutionsWGS84[p]+this._resolutionsWGS84[p-1])/56e-5,u=(this._resolutionsWGS84[p]+this._resolutionsWGS84[p+1])/56e-5;if(!(c>i&&i>u))continue}else if(!(a[l].constraints[0].minScaleDenominator<i&&i<a[l].constraints[0].maxScaleDenominator))continue;a[l].constraints[0].bbox?a[l].constraints[0].bbox.left<e.west()&&a[l].constraints[0].bbox.right>e.east()&&a[l].constraints[0].bbox.top>e.north()&&a[l].constraints[0].bbox.bottom<e.south()&&n.set(a[l].name,a[l]):a[l].constraints[0].bbox||n.set(a[l].name,a[l])}else n.set(a[l].name,a[l])}}this._updateAttributionListContainer(n)},n.prototype._updateAttributionListContainer=function(t){var e=document.getElementById(this._addUID("GPAttributionsList"));document.getElementById(this._addUID("GPAttributionsList")).parentNode.removeChild(e);var o=this._createAttributionsList();t.forEach(function(t){var e=document.createElement("li"),i=document.createElement("a");i.href=t.url,i.innerHTML=t.name+"&nbsp",i.target="_blank",e.id=t.name.replace(/\s/g,""),e.appendChild(i),o.appendChild(e)}),this._attributionListContainer.appendChild(o)},n.prototype._resolutionsWGS84={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,
13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPAttribution"),t.className="GPwidget",t},_createMainAttributionsShowElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowAttributionsList"),t.type="checkbox",t},_createAttributionsList:function(){var t=document.createElement("ul");return t.id=this._addUID("GPAttributionsList"),t},_createMainAttributionsListContainer:function(){var t=document.createElement("div");return t.id=this._addUID("GPAttributionsListContainer"),t},_createMainPictoElement:function(t){var e=this,o=document.createElement("label");o.id=this._addUID("GPshowAttributionsListPicto"),o.className="GPshowAdvancedToolPicto",o.htmlFor=this._addUID("GPshowAttributionsList"),o.title="Afficher/masquer les attributions";var i=document.createElement("span");return i.id=this._addUID("GPshowAttributionsListOpenClose"),i.className="GPshowAdvancedToolOpen",i.innerHTML=t?"i":"»",i.addEventListener("click",function(){i.innerHTML=document.getElementById(e._addUID("GPshowAttributionsList")).checked?"i":"»"}),o.appendChild(i),o}};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(t&&"object"!==(void 0===t?"undefined":r(t)))throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize();var e=this._initContainer(),o=document.getElementById("viewerDiv"),i=document.getElementById(t.target)||o;y.default.call(this,{name:"GraphicScale",element:e,target:i,position:t.position})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(8),a=i(s),l=o(0),p=i(l),c=o(2),u=i(c),h=o(83),d=i(h),f=o(11),y=i(f);return n.prototype=Object.create(y.default.prototype,{}),p.default.assign(n.prototype,d.default),n.prototype.constructor=n,n.prototype.setGlobe=function(t){if(t){var e=this;this._callbacks.onChangedViewCallback=function(){var o=t.pixelsToMeters(200);o=Math.floor(o);var i=Math.pow(10,o.toString().length-1);o=Math.round(o/i)*i;var n=t.metersToPixels(o),r="m";o>=1e3&&(o/=1e3,r="km"),e.getElement().innerHTML=o+" "+r,e.getElement().style.width=n+"px"},t.isInitialized()?this._callbacks.onChangedViewCallback():t.listen(a.default.EVENTS.GLOBE_INITIALIZED,this._callbacks.onChangedViewCallback),t.listen(a.default.EVENTS.RANGE_CHANGED,this._callbacks.onChangedViewCallback)}else if(null==t){for(this._globe.forget(a.default.EVENTS.GLOBE_INITIALIZED,this._callbacks.onChangedViewCallback),this._globe.forget(a.default.EVENTS.RANGE_CHANGED,this._callbacks.onChangedViewCallback);this.getElement().hasChildNodes();)this.getElement().removeChild(this.getElement().lastChild);this.getElement().parentNode.removeChild(this.getElement())}y.default.prototype.setGlobe.call(this,t)},n.prototype._initialize=function(){this._uid=u.default.generate(),this._ScaleContainer=null,this._callbacks={}},n.prototype._initContainer=function(){return this._createMainContainerElement()},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPscaleContainer"),t.className="GPwidget",t}};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(t&&"object"!==(void 0===t?"undefined":r(t)))throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize();var e=this._initContainer(),o=document.getElementById("viewerDiv");this._options=t;var i=document.getElementById(t.target)||o;y.default.call(this,{name:"Overview",element:e,target:i,position:t.position})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(8),a=i(s),l=o(0),p=i(l),c=o(2),u=i(c),h=o(85),d=i(h),f=o(11),y=i(f);return n.prototype=Object.create(y.default.prototype,{}),p.default.assign(n.prototype,d.default),n.prototype.constructor=n,n.prototype.setGlobe=function(t){if(t){var e=t.getCenter(),o=new a.default(this._element,e,{maxSubdivisionLevel:6,noControls:!0,position:"absolute"});o.setBackground();var i=function(){var e=t.getRange(),i=Math.min(Math.max(1.5*e,665e4),3e7);o.setCameraPosition(t.moveTarget(),i),o.lookAt(t.moveTarget()),o.notifyChange()};t.listen(a.default.EVENTS.AFTER_RENDER,i),t.isInitialized()||t.listen(a.default.EVENTS.GLOBE_INITIALIZED,i);var n=this._options.layer||this._baseLayer;o.addLayer(n),this._globeObj=o}else if(null==t){for(;this.getElement().hasChildNodes();)this.getElement().removeChild(this.getElement().lastChild);this.getElement().parentNode.removeChild(this.getElement())}y.default.prototype.setGlobe.call(this,t)},n.prototype._initialize=function(){this._uid=u.default.generate(),this._MiniGlobeContainer=null,this._callbacks={}},n.prototype._initContainer=function(){return this._createMainContainerElement()},n.prototype._baseLayer={type:"color",protocol:"wmts",id:"Maps",url:"https://wxs.ign.fr/an7nvfzojv5wa96dsga5nk8w/geoportail/wmts",updateStrategy:{type:"0",options:{}},networkOptions:{crossOrigin:"omit"},options:{name:"GEOGRAPHICALGRIDSYSTEMS.MAPS",mimetype:"image/jpeg",tileMatrixSet:"PM",tileMatrixSetLimits:{0:{minTileRow:"0",maxTileRow:"0",minTileCol:"0",maxTileCol:"1"},1:{minTileRow:"0",maxTileRow:"1",minTileCol:"0",maxTileCol:"2"},2:{minTileRow:"0",maxTileRow:"2",minTileCol:"0",maxTileCol:"4"},3:{minTileRow:"0",maxTileRow:"5",minTileCol:"0",maxTileCol:"8"},4:{minTileRow:"1",maxTileRow:"11",minTileCol:"0",maxTileCol:"16"},5:{minTileRow:"3",maxTileRow:"22",minTileCol:"0",maxTileCol:"32"},6:{minTileRow:"7",maxTileRow:"45",minTileCol:"0",maxTileCol:"64"},7:{minTileRow:"42",maxTileRow:"97",minTileCol:"0",maxTileCol:"115"},8:{minTileRow:"84",maxTileRow:"195",minTileCol:"1",maxTileCol:"247"},9:{minTileRow:"170",maxTileRow:"390",minTileCol:"2",maxTileCol:"495"},10:{minTileRow:"340",maxTileRow:"780",minTileCol:"5",maxTileCol:"990"},11:{minTileRow:"681",maxTileRow:"1544",minTileCol:"10",maxTileCol:"1981"},12:{minTileRow:"1363",maxTileRow:"3088",minTileCol:"20",maxTileCol:"3962"},13:{minTileRow:"2726",maxTileRow:"6177",minTileCol:"40",maxTileCol:"7924"},14:{minTileRow:"5452",maxTileRow:"12355",minTileCol:"81",maxTileCol:"15847"},15:{minTileRow:"10944",maxTileRow:"21176",minTileCol:"163",maxTileCol:"31695"},16:{minTileRow:"21889",maxTileRow:"42353",minTileCol:"326",maxTileCol:"63382"},17:{minTileRow:"43776",maxTileRow:"73526",minTileCol:"42528",maxTileCol:"85869"},18:{minTileRow:"87557",maxTileRow:"147052",minTileCol:"85058",maxTileCol:"171738"}}}},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPminiglobeContainer"),t.className="GPwidget",t}};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=o(1),r=i(n),s=o(4),a=i(s),l=o(5),p=i(l),c=o(37),u=(i(c),o(16)),h=i(u),d=o(17),f=i(d),y=o(0),g=i(y),m=o(18),v=i(m),_=o(38),b=i(_),E=o(39),S=i(E),w=o(40),P=i(w),C=o(41),A=i(C),M=o(87),x=i(M),R=o(88),I=i(R),T=o(12),L=i(T),G=o(89),O=i(G),N=o(91),k=i(N),D=o(94),j=i(D),F=o(96),U=i(F),B=o(98),V=i(B),W=o(101),z=i(W),q=o(103),H=i(q),Y=o(105),Z=i(Y),K=o(107),X=i(K),J=o(7),Q=i(J),$=o(108),tt=i($),et=o(112),ot=i(et),it=o(114),nt=i(it),rt=o(116),st=i(rt);return a.default.olExtVersion="2.0.0",a.default.olExtDate="2018-05-04",a.default.olUtils=g.default,a.default.LayerUtils=p.default,a.default.ProxyUtils=h.default,r.default.gp={},r.default.gp.GfiUtils=f.default,r.default.format.KMLExtended=v.default,r.default.source.WMTSExtended=b.default,S.default.overload(),r.default.source.GeoportalWMTS=P.default,r.default.source.GeoportalWMS=A.default,r.default.layer.GeoportalWMTS=x.default,r.default.layer.GeoportalWMS=I.default,r.default.control.GeoportalAttribution=X.default,r.default.control.LayerSwitcher=L.default,r.default.control.GetFeatureInfo=O.default,r.default.control.SearchEngine=k.default,r.default.control.Route=V.default,r.default.control.Isocurve=z.default,r.default.control.GeoportalMousePosition=j.default,r.default.control.Drawing=U.default,r.default.control.ReverseGeocode=H.default,r.default.control.LayerImport=Z.default,r.default.control.MeasureLength=ot.default,r.default.control.MeasureArea=nt.default,r.default.control.MeasureAzimuth=st.default,r.default.control.DefaultMarkers=Q.default,r.default.control.ElevationPath=tt.default,e.default=a.default,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!t.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof t.layer)throw new Error("ERROR WRONG TYPE : layer");if(void 0===t.ssl&&(t.ssl=!1),!c.default.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var e;t.olParams&&t.olParams.sourceParams&&(e=t.olParams.sourceParams);var o=new d.default({layer:t.layer,ssl:t.ssl,apiKey:t.apiKey,olParams:e}),i={source:o};if(void 0!==o.getLayer()){var r=c.default.getLayerId(t.layer,"WMTS"),a=c.default.getGlobalConstraints(r);if(a&&a.projection){var p;"string"==typeof a.projection&&(p=s.default.proj.get(a.projection)),p&&p.getUnits()&&("m"===p.getUnits()?(i.minResolution=28e-5*(a.minScale-1),i.maxResolution=28e-5*(a.maxScale+1)):"degrees"===p.getUnits()&&(i.minResolution=28e-5*(a.minScale-1)*180/(6378137*Math.PI),i.maxResolution=28e-5*(a.maxScale+1)*180/(6378137*Math.PI)))}}l.default.mergeParams(i,t.olParams),s.default.layer.Tile.call(this,i)}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),s=i(r),a=o(0),l=i(a),p=o(10),c=i(p),u=o(5),h=(i(u),o(40)),d=i(h);return s.default.inherits(n,s.default.layer.Tile),n.prototype=Object.create(s.default.layer.Tile.prototype,{}),n.prototype.constructor=n,e.default=n,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!t.layer)throw new Error("ERROR PARAM_MISSING : layer");if("string"!=typeof t.layer)throw new Error("ERROR WRONG TYPE : layer");if(void 0===t.ssl&&(t.ssl=!1),!u.default.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers. See http://ignf.github.io/evolution-apigeoportail/ol3/ol3-autoconf.html");var e;t.olParams&&t.olParams.sourceParams&&(e=t.olParams.sourceParams);var o=new f.default({layer:t.layer,ssl:t.ssl,apiKey:t.apiKey,olParams:e}),i={source:o};if(void 0!==o.getParams().LAYERS){var s=u.default.getLayerId(t.layer,"WMS"),l=u.default.getGlobalConstraints(s);if(e&&e.projection){var c=[l.extent.left,l.extent.bottom,l.extent.right,l.extent.top];i.extent=a.default.proj.transformExtent(c,"EPSG:4326",e.projection);var h;"string"==typeof e.projection?h=a.default.proj.get(e.projection):"object"===r(e.projection)&&e.projection.getCode()&&(h=a.default.proj.get(e.projection.getCode())),h&&h.getUnits()&&("m"===h.getUnits()?(i.minResolution=28e-5*(l.minScale-1),i.maxResolution=28e-5*(l.maxScale+1)):"degrees"===h.getUnits()&&(i.minResolution=28e-5*(l.minScale-1)*180/(6378137*Math.PI),i.maxResolution=28e-5*(l.maxScale+1)*180/(6378137*Math.PI)))}}p.default.mergeParams(i,t.olParams),a.default.layer.Tile.call(this,i)}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(1),a=i(s),l=o(0),p=i(l),c=o(10),u=i(c),h=o(5),d=(i(h),o(41)),f=i(d);return a.default.inherits(n,a.default.layer.Tile),n.prototype=Object.create(a.default.layer.Tile.prototype,{}),n.prototype.constructor=n,e.default=n,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){t=t||{};var e=t.options||{},o=t.layers||[];if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(o&&!Array.isArray(o))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(e&&"object"!==(void 0===e?"undefined":r(e)))throw new Error("ERROR WRONG_TYPE : options should be an object");this._initialize(e,o);var i=this._initContainer(e);a.default.control.Control.call(this,{element:i,target:e.target,render:e.render})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(1),a=i(s),l=o(4),p=(i(l),o(9)),c=(i(p),o(0)),u=i(c),h=o(17),d=i(h),f=o(2),y=i(f),g=o(90),m=i(g);return a.default.inherits(n,a.default.control.Control),n.prototype=Object.create(a.default.control.Control.prototype,{}),u.default.assign(n.prototype,m.default),n.prototype.constructor=n,n.prototype._initialize=function(t,e){if(this._uid=y.default.generate(),this._events={dblclick:!1,singleclick:!1,contextmenu:!1},this._eventsHandler={},void 0!==t.auto&&"boolean"!=typeof t.auto)return void console.log("[ERROR] GetFeatureInfo:_initialize - auto parameter should be a boolean");if(this._auto=t.auto||!1,void 0!==t.active&&"boolean"!=typeof t.active)return void console.log("[ERROR] GetFeatureInfo:_initialize - active parameter should be a boolean");if(this._active=void 0===t.active||t.active,t.defaultEvent&&"string"!=typeof t.defaultEvent)return void console.log("[ERROR] GetFeatureInfo:_initialize - defaultEvent parameter should be a string");if(this._defaultEvent=t.defaultEvent||"singleclick",!this._isValidEvent(this._defaultEvent))return void console.log("[ERROR] GetFeatureInfo:_initialize - _defaultEvent '"+this._defaultEvent+"' is not a valid event");if(t.defaultInfoFormat&&"string"!=typeof t.defaultInfoFormat)return void console.log("[ERROR] GetFeatureInfo:_initialize - defaultInfoFormat parameter should be a string");if(this._defaultInfoFormat=t.defaultInfoFormat||"text/html",t.cursorStyle&&"string"!=typeof t.cursorStyle)return void console.log("[ERROR] GetFeatureInfo:_initialize - cursorStyle parameter should be a string");if(this._cursorStyle=t.cursorStyle||"pointer",t.proxyUrl){if("string"!=typeof t.proxyUrl)return void console.log("[ERROR] GetFeatureInfo:_initialize - proxyUrl parameter should be a string");this._proxyUrl=t.proxyUrl}if(t.noProxyDomains){if(!Array.isArray(t.noProxyDomains))return void console.log("[ERROR] GetFeatureInfo:_initialize - noProxyDomains parameter should be a array");this._noProxyDomains=t.noProxyDomains}if(void 0!==t.autoPan&&"boolean"!=typeof t.autoPan)return void console.log("[ERROR] GetFeatureInfo:_initialize - autoPan parameter should be a boolean");if(this._autoPan=void 0===t.autoPan||t.autoPan,t.autoPanAnimation){if(t.autoPanAnimation.duration&&"number"!=typeof t.autoPanAnimation.duration)return void console.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : duration should be a number.");if(t.autoPanAnimation.easing&&"function"!=typeof t.autoPanAnimation.easing)return void console.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : easing should be a ol.easing function or a custom function.");this._autoPanAnimation=t.autoPanAnimation}if(t.autoPanMargin){if("number"!=typeof t.autoPanMargin)return void console.log("[ERROR] GetFeatureInfo:_initialize - autoPanMargin parameter should be a number");this._autoPanMargin=t.autoPanMargin}if(!Array.isArray(e))return void console.log("[ERROR] GetFeatureInfo:_initialize - layers parameter should be an array");this._setLayers(e),this._activateGetFeatureInfoContainer=null},n.prototype.setMap=function(t){if(t){if(this._updateEvents(t),this._cursorStyle&&this._active&&this._activateCursor(!0,t),t.getLayers().on("remove",function(e){for(var o=0;o<this._layers.length;++o)if(this._layers[o].obj===e.element){this._layers.splice(o,1);break}this._updateEvents(t)},this),this._auto){var e=!1;t.getLayers().forEach(function(t){var o=d.default.getLayerFormat(t);this._hasLayer(t)||"vector"!=o||(this._layers.push({obj:t}),e=!0)},this),e&&this._updateEvents(t),t.getLayers().on("add",function(e){"vector"==d.default.getLayerFormat(e.element)&&this._layers.push({obj:e.element}),this._updateEvents(t)},this)}}else this._clearEvents(),this._activateCursor(!1);a.default.control.Control.prototype.setMap.call(this,t)},n.prototype.getLayers=function(){return this._layers},n.prototype.setDefaultEvent=function(t){return"string"!=typeof t?void console.log("[ERROR] GetFeatureInfo:setDefaultEvent - eventName parameter should be a string"):t&&this._isValidEvent(t)?(this._defaultEvent=t,void this._updateEvents()):void console.log("[ERROR] GetFeatureInfo:setDefaultEvent - event '"+t+"' is not allowed.")},n.prototype.setCursorStyle=function(t){if("string"!=typeof t)return void console.log("[ERROR] GetFeatureInfo:setCursorStyle - cursorStyle parameter should be a string");this._active&&(!this._cursorStyle&&t?this._activateCursor(!0):this._cursorStyle&&!t&&this._activateCursor(!1)),this._cursorStyle=t},n.prototype.setActive=function(t){this._setActive(t);var e=document.getElementById(this._addUID("GPactivateGetFeatureInfo"));e&&(e.checked=t)},n.prototype._setActive=function(t){if("boolean"!=typeof t)return void console.log("[ERROR] GetFeatureInfo:_setActive - active parameter should be a boolean");this._active!==t&&(this._active=t,this._cursorStyle&&this._activateCursor(t))},n.prototype.isActive=function(){return this._active},n.prototype.setHidden=function(t){this.element.style.visibility=t?"hidden":""},n.prototype.isHidden=function(){return"hidden"==this.element.style.visibility},n.prototype.setLayers=function(t){this._setLayers(t),this._updateEvents()},n.prototype._isValidEvent=function(t){return Object.keys(this._events).indexOf(t)>-1},n.prototype._activateEvent=function(t,e){var o=this,i=function(t){d.default.onDisplayFeatureInfo(t,o)};"contextmenu"==t?e.getViewport().addEventListener(t,i):e.on(t,i),this._eventsHandler[t]=i,this._events[t]=!0},n.prototype._deactivateEvent=function(t,e){"contextmenu"==t?e.getViewport().removeEventListener(t,this._eventsHandler[t]):e.un(t,this._eventsHandler[t]),delete this._eventsHandler[t],this._events[t]=!1},n.prototype._updateEvents=function(t){t||(t=this.getMap());for(var e=[],o=0;o<this._layers.length;++o){var i=this._layers[o].event?this._layers[o].event:this._defaultEvent;e.indexOf(i)<0&&e.push(i)}for(var n in this._events)!this._events[n]&&e.indexOf(n)>=0?this._activateEvent(n,t):this._events[n]&&e.indexOf(n)<0&&this._deactivateEvent(n,t)},n.prototype._clearEvents=function(){var t=this.getMap();for(var e in this._events)this._events[e]&&this._deactivateEvent(e,t)},n.prototype._hasLayer=function(t){for(var e=0;e<this._layers.length;++e)if(this._layers[e].obj===t)return!0;return!1},n.prototype._activateCursor=function(t,e){if(e||(e=this.getMap()),t){if(this._eventsHandler.hasOwnProperty("pointermove"))return void console.log("[ERROR] _activateCursor - inconsistent state: pointermove event handler already registered");var o=this,i=function(t){var i=e.forEachFeatureAtPixel(t.pixel,function(t,e){for(var i=o.getLayers(),n=0;n<i.length;++n)if(i[n].obj===e)return!0});e.getTargetElement().style.cursor=i?o._cursorStyle:""};this._eventsHandler.pointermove=i,e.on("pointermove",i)}else e.un("pointermove",this._eventsHandler.pointermove),delete this._eventsHandler.pointermove,e.getTargetElement().style.cursor=""},n.prototype._setLayers=function(t){if(!t||!Array.isArray(t))return void console.log("[ERROR] GetFeatureInfo:setLayers - gfiLayers parameter should be a array");this._layers=[];for(var e=0;e<t.length;++e){var o=this._layers.push({})-1;t[e].event&&(this._isValidEvent(t[e].event)?this._layers[o].event=t[e].event:console.log("[ERROR] GetFeatureInfo:setLayers - layer event '"+this._layers[e].event+"' is not allowed.")),t[e].infoFormat&&(this._layers[o].infoFormat=t[e].infoFormat),this._layers[o].obj=t[e].obj}},n.prototype.onActivateGetFeatureInfoElementChange=function(t){this._setActive(t.target.checked)},n.prototype._initContainer=function(t){var e=this._createMainContainerElement(),o=this._activateGetFeatureInfoContainer=this._createActivateGetFeatureInfoElement(this.isActive());e.appendChild(o);var i=this._createMainPictoElement();if(e.appendChild(i),void 0!==t.hidden){if("boolean"!=typeof t.hidden)return void console.log("[ERROR] GetFeatureInfo:_initContainer - hidden parameter should be a boolean");t.hidden&&(e.style.visibility="hidden")}return e},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPgetFeatureInfo"),t.className="GPwidget",t},_createActivateGetFeatureInfoElement:function(t){var e=this,o=document.createElement("input");return o.id=this._addUID("GPactivateGetFeatureInfo"),o.type="checkbox",o.checked=t,o.addEventListener("change",function(t){e.onActivateGetFeatureInfoElementChange(t)}),o},_createMainPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPgetFeatureInfoPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPactivateGetFeatureInfo"),e.title="activer/desactiver l'interrogation des couches";var o=document.createElement("span");o.id=this._addUID("GPgetFeatureInfoActivate"),o.className="GPshowAdvancedToolOpen",e.appendChild(o);var i=document.createElement("span");return i.id=t._addUID("GPgetFeatureInfoDeactivate"),e.appendChild(i),e}};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(t),this._container=this._initContainer(),this._containerElement=null,t.element&&t.element.appendChild&&(t.element.appendChild(this._container),this._containerElement=t.element),a.default.control.Control.call(this,{element:this._containerElement||this._container,target:t.target,render:t.render})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(1),a=i(s),l=o(4),p=i(l),c=o(3),u=i(c),h=o(0),d=i(h),f=o(7),y=i(f),g=o(6),m=i(g),v=o(2),_=i(v),b=o(92),E=i(b),S=o(93),w=i(S),P=u.default.getLogger("searchengine");return a.default.inherits(n,a.default.control.Control),n.prototype=Object.create(a.default.control.Control.prototype,{}),d.default.assign(n.prototype,w.default),n.prototype.constructor=n,n.prototype.setMap=function(t){t||this._clearResults(),a.default.control.Control.prototype.setMap.call(this,t)},n.prototype.getCollapsed=function(){return this.collapsed},n.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(this._showSearchEngineInput.click(),this.collapsed=t)},n.prototype.initialize=function(t){this._checkInputOptions(t),this.options={collapsed:!0,zoomTo:"",resources:{geocode:[],autocomplete:[]},displayAdvancedSearch:!0,advancedSearch:{},geocodeOptions:{},autocompleteOptions:{serviceOptions:{},triggerGeocode:!1,triggerDelay:1e3},displayMarker:!0,markerStyle:"lightOrange",placeholder:"Rechercher un lieu, une adresse"},d.default.mergeParams(this.options,t),0===this.options.resources.geocode.length&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),0===this.options.resources.autocomplete.length&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.collapsed=this.options.collapsed,this._uid=_.default.generate(),this._showSearchEngineInput=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._suggestedContainer=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._marker=null;var e=this.options.markerStyle;this._markerUrl=-1===Object.keys(y.default).indexOf(e)?y.default.lightOrange:y.default[e],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._servicesRightManagement={},this._noRightManagement=!1,this._checkRightsManagement(),this._triggerHandler=null},n.prototype._checkInputOptions=function(t){var e;if(t.resources)if("object"===r(t.resources)){var o=t.resources.geocode;if(o){Array.isArray(o)||(console.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),o=null);var i=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(e=0;e<o.length;e++)-1===i.indexOf(o[e])&&console.log("[SearchEngine] options.resources.geocode : "+o[e]+" is not a resource for geocode")}var n=t.resources.autocomplete;if(n){Array.isArray(n)||(console.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),n=null);var s=["StreetAddress","PositionOfInterest"];for(e=0;e<n.length;e++)-1===s.indexOf(n[e])&&console.log("[SearchEngine] options.resources.autocomplete : "+n[e]+" is not a resource for autocomplete")}}else console.log("[SearchEngine] 'resources' parameter should be an object"),t.resources=null},n.prototype._initAdvancedSearchCodes=function(){for(var t=this.options.resources.geocode,e=0;e<t.length;e++)switch(t[e]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break;case"Administratif":this._advancedSearchCodes.push({id:"Administratif",title:"Administratif"})}0===this._advancedSearchCodes.length&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"}]),P.log("advancedSearchCodes",this._advancedSearchCodes)},n.prototype._initAdvancedSearchFilters=function(){this._advancedSearchFilters=E.default.advancedSearchFiltersByDefault;var t=this.options.advancedSearch;d.default.assign(this._advancedSearchFilters,t),P.log("advancedSearchFilters",this._advancedSearchFilters)},n.prototype._initPopupDiv=function(){var t=this,e=document.createElement("div");e.className="gp-feature-info-div";var o=document.createElement("input");return o.type="button",o.className="gp-styling-button closer",o.onclick=function(){return null!=t._popupOverlay&&t._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",e.appendChild(this._popupContent),e.appendChild(o),e},n.prototype._initContainer=function(){var t=this._createMainContainerElement(),e=this._showSearchEngineInput=this._createShowSearchEngineElement();t.appendChild(e),this.options.collapsed||(e.checked=!0);var o=this._createShowSearchEnginePictoElement();t.appendChild(o);var i=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder),n=this;if(i.addEventListener?i.addEventListener("click",function(){n.onAutoCompleteInputClick()}):i.attachEvent&&i.attachEvent("onclick",function(){n.onAutoCompleteInputClick()}),t.appendChild(i),this.options.displayAdvancedSearch){var r=this._createShowAdvancedSearchElement();t.appendChild(r);var s=this._createAdvancedSearchPanelElement(),a=this._createAdvancedSearchPanelHeaderElement(),l=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),p=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var c=this._createAdvancedSearchFormInputElement();l.appendChild(p),l.appendChild(c),s.appendChild(a),s.appendChild(l),t.appendChild(s)}var u=this._autocompleteContainer=this._createAutoCompleteElement(),h=this._suggestedContainer=this._createAutoCompleteListElement();u.appendChild(h),t.appendChild(u);var d=this._createGeocodeResultsElement(),f=this._geocodedContainer=this._createGeocodeResultsListElement();return d.appendChild(f),t.appendChild(d),t},n.prototype._setFilter=function(t){for(var e=this._filterContainer,o=!1,i=0;i<this._advancedSearchCodes.length;i++)if(this._advancedSearchCodes[i].id===t){o=!0;break}if(o){for(this._currentGeocodingCode=t;e.firstChild;)e.removeChild(e.firstChild);var n=this._advancedSearchFilters[t];if(n&&0!==n.length){for(var r=this._createAdvancedSearchFiltersTableElement(t,!0),s=0;s<n.length;s++){var a=this._createAdvancedSearchFiltersAttributElement(n[s]);r.appendChild(a)}return e.appendChild(r),e}}else for(;e.firstChild;)e.removeChild(e.firstChild)},n.prototype._checkRightsManagement=function(){var t,e=[],o=null;t=this.options.autocompleteOptions.apiKey,o=this.options.autocompleteOptions.filterOptions,e=o?o.type:[],e&&0!==e.length||(e=this.options.resources.autocomplete),e&&0!==e.length||(e=["StreetAddress","PositionOfInterest"]);var i=m.default.check({key:t||this.options.apiKey,resources:e,services:["AutoCompletion"]});P.log("rightManagementAutoComplete",i),t=this.options.geocodeOptions.apiKey,o=this.options.geocodeOptions.filterOptions,e=o?o.type:[],e&&0!==e.length||(e=this.options.resources.geocode),e&&0!==e.length||(e=["StreetAddress","PositionOfInterest"]);var n=m.default.check({key:t||this.options.apiKey,resources:e,services:["Geocode"]});if(P.log("rightManagementGeocode",n),!i&&!n)return void(this._noRightManagement=!0);this.options.apiKey||(this.options.apiKey=n?n.key:i.key),i&&(this._servicesRightManagement.AutoCompletion=i.AutoCompletion),n&&(this._servicesRightManagement.Geocode=n.Geocode)},n.prototype._requestAutoComplete=function(t){if(t&&("object"!==(void 0===t?"undefined":r(t))||0!==Object.keys(t).length)&&t.text){P.log(t);var e={};d.default.assign(e,this.options.autocompleteOptions.serviceOptions),d.default.assign(e,t);var o=this.options.resources.autocomplete;o&&Array.isArray(o)&&(e.filterOptions||(e.filterOptions={}),e.filterOptions.type||(e.filterOptions.type=o)),e.apiKey=e.apiKey||this.options.apiKey,P.log(e),p.default.Services.autoComplete(e)}},n.prototype._fillAutoCompletedLocationListContainer=function(t){if(t&&0!==t.length){var e=this._suggestedContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild);this._displaySuggestedLocation();for(var o=0;o<t.length;o++)this._createAutoCompletedLocationElement(t[o],o)}},n.prototype._requestGeocoding=function(t){
if(t&&("object"!==(void 0===t?"undefined":r(t))||0!==Object.keys(t).length)&&t.location){P.log(t);var e={};e.returnFreeForm=!0,d.default.assign(e,this.options.geocodeOptions),d.default.assign(e,t);var o=this.options.resources.geocode;o&&Array.isArray(o)&&(e.filterOptions||(e.filterOptions={}),e.filterOptions.type||(e.filterOptions.type=o)),e.apiKey=e.apiKey||this.options.apiKey,P.log(e),p.default.Services.geocode(e)}},n.prototype._fillGeocodedLocationListContainer=function(t){if(!t||0===t.length)return void this._clearGeocodedLocation();var e=this._geocodedContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild);for(var o=0;o<t.length;o++)P.log(t[o]),this._createGeocodedLocationElement(t[o],o);this._geocodedLocations=t},n.prototype._setLabel=function(t){document.getElementById("GPsearchInputText-"+this._uid).value=t},n.prototype._setPosition=function(t,e){var o=this.getMap().getView();o.setCenter(t),o.setZoom(e)},n.prototype._setMarker=function(t,e){var o=this.getMap(),i=this;if(null!=this._marker&&(o.removeOverlay(this._marker),this._marker=null),t){var n=document.createElement("img");n.src=this._markerUrl,n.addEventListener?n.addEventListener("click",function(){i._onResultMarkerSelect(e)}):n.attachEvent&&n.attachEvent("onclick",function(){i._onResultMarkerSelect(e)}),this._marker=new a.default.Overlay({position:t,offset:[-25.5,-38],element:n,stopEvent:!1}),o.addOverlay(this._marker)}},n.prototype._getZoom=function(t){var e=this.getMap(),o=this.options.zoomTo,i=null;if("function"==typeof o&&(P.trace("zoom function"),i=o.call(this,t)),"number"==typeof o&&(P.trace("zoom level"),i=o),"string"==typeof o)if("auto"===o)P.trace("zoom auto"),i=E.default.zoomToResultsByDefault(t);else{P.trace("zoom level parsing");var n=parseInt(o,10);isNaN(n)||(P.trace("zoom parsing"),i=n)}Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},i&&""!==i&&Number.isInteger(i)||(P.trace("zoom not found, current zoom..."),i=e.getView().getZoom());var r=e.minZoom,s=e.maxZoom;return i<r&&(P.trace("zoom level min..."),i=r),i>s&&(P.trace("zoom level max..."),i=s),P.trace("zoom",i),i},n.prototype._onResultMarkerSelect=function(t){var e=this.getMap(),o="";if(t.attributes){o="<ul>";var i=t.attributes;for(var n in i)i.hasOwnProperty(n)&&"bbox"!==n&&(o+="<li>",o+='<span class="gp-attname-others-span">'+n.toUpperCase()+" : </span>",o+=i[n],o+=" </li>");o+=" </ul>"}else o=t.label;this._popupContent.innerHTML=o,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new a.default.Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),e.addOverlay(this._popupOverlay))},n.prototype.onShowSearchEngineClick=function(){this.collapsed=this._showSearchEngineInput.checked,this.dispatchEvent("change:collapsed")},n.prototype.onSearchResetClick=function(){this._clearResults()},n.prototype.onAutoCompleteInputClick=function(){var t=document.getElementById("GPsearchInputText-"+this._uid);t&&!t.disabled&&t.value.length>2&&this._displaySuggestedLocation()},n.prototype.onAutoCompleteSearchText=function(t){var e=t.target.value;if(e){if(this._noRightManagement)return void console.log("no rights for this service !");if(this._currentGeocodingLocation=e,e.length<3)return void this._clearSuggestedLocation();var o=this.options.autocompleteOptions.triggerGeocode,i=this.options.autocompleteOptions.triggerDelay,n=this;this._requestAutoComplete({text:e,onSuccess:function(t){if(P.log("request from AutoComplete",t),t){n._suggestedLocations=t.suggestedLocations,n._locationsToBeDisplayed=[];for(var e=0;e<n._suggestedLocations.length;e++){var o=n._suggestedLocations[e];o.position&&0===o.position.x&&0===o.position.y&&o.fullText?n._getGeocodeCoordinatesFromFullText(o,e):n._locationsToBeDisplayed.push(o)}n._fillAutoCompletedLocationListContainer(n._locationsToBeDisplayed),n._triggerHandler&&(clearTimeout(n._triggerHandler),n._triggerHandler=null,P.warn("Cancel a geocode request !"))}},onFailure:function(t){n._clearSuggestedLocation(),P.log(t.message),"No suggestion matching the search"===t.message&&o&&(n._triggerHandler&&(clearTimeout(n._triggerHandler),P.warn("Cancel the last geocode request !")),n._triggerHandler=setTimeout(function(){P.warn("Launch a geocode request (code postal) !"),n._requestGeocoding({location:e,returnFreeForm:!0,onSuccess:function(t){if(P.log("request from Geocoding",t),t){n._locationsToBeDisplayed=[];for(var e=t.locations,o=0;o<e.length;o++){var i=e[o];i.fullText=i.placeAttributes.freeform,i.position={x:i.position.y,y:i.position.x},n._locationsToBeDisplayed.push(i)}n._fillAutoCompletedLocationListContainer(e)}},onFailure:function(t){P.log(t.message)}})},i))}});var r=this.getMap();r.on("click",this._hideSuggestedLocation,this),r.on("pointerdrag",this._hideSuggestedLocation,this)}},n.prototype._getGeocodeCoordinatesFromFullText=function(t,e){var o=this;p.default.Services.geocode({apiKey:this.options.apiKey,location:t.fullText,filterOptions:{type:t.type},onSuccess:function(t){P.log("request from Geocoding (coordinates null)",t),t.locations&&0!==t.locations.length&&t.locations[0].position&&o._suggestedLocations&&o._suggestedLocations[e]&&(o._suggestedLocations[e].position={x:t.locations[0].position.y,y:t.locations[0].position.x},o._locationsToBeDisplayed.unshift(o._suggestedLocations[e]),o._fillAutoCompletedLocationListContainer(o._locationsToBeDisplayed))},onFailure:function(){o._suggestedLocations&&o._suggestedLocations[e]&&o._createAutoCompletedLocationElement(o._suggestedLocations[e],e)}})},n.prototype.onAutoCompletedResultsItemClick=function(t){var e=_.default.index(t.target.id);if(P.log(e),P.log(this._locationsToBeDisplayed[e]),e){var o=[this._locationsToBeDisplayed[e].position.x,this._locationsToBeDisplayed[e].position.y],i={service:"SuggestedLocation",type:this._locationsToBeDisplayed[e].type,fields:this._locationsToBeDisplayed[e]},n=this._locationsToBeDisplayed[e].fullText;this._setLabel(n),i.label=n;var r=this.getMap().getView(),s=r.getProjection().getCode();"EPSG:4326"!==s&&(o=a.default.proj.transform(o,"EPSG:4326",s));var l=this._getZoom(i);this._setPosition(o,l),this._displayMarker&&this._setMarker(o,i)}},n.prototype.onGeocodingSearchSubmit=function(t){var e=t.target[0].value;if(e){if(this._noRightManagement)return void console.log("no rights for this service !");this._currentGeocodingLocation=e;var o=this;this._requestGeocoding({location:e,onSuccess:function(t){if(P.log("request from Geocoding",t),t){var e=t.locations;o._fillGeocodedLocationListContainer(e)}},onFailure:function(t){o._clearGeocodedLocation(),P.log(t.message)}})}},n.prototype.onGeocodedResultsItemClick=function(t){var e=_.default.index(t.target.id);if(e){var o,i=[this._geocodedLocations[e].position.y,this._geocodedLocations[e].position.x],n=this._geocodedLocations[e].placeAttributes,r={service:"DirectGeocodedLocation",type:this._geocodedLocations[e].type,fields:this._geocodedLocations[e]};n.freeform?o=n.freeform:n.postalCode?(o=n.postalCode+" "+n.commune,r.attributes=n):n.cadastralParcel?(o=n.cadastralParcel,r.attributes=n):o="...",this._setLabel(o),r.label=o;var s=this.getMap().getView(),l=s.getProjection().getCode();"EPSG:4326"!==l&&(i=a.default.proj.transform(i,"EPSG:4326",l));var p=this._getZoom(r);this._setPosition(i,p),this._displayMarker&&this._setMarker(i,r)}},n.prototype.onGeocodingAdvancedSearchCodeChange=function(t){P.log(t);var e=t.target.selectedIndex,o=t.target.options[e].value;o&&this._setFilter(o)},n.prototype.onGeocodingAdvancedSearchSubmit=function(t,e){if(P.log(e),e&&0!==e.length){var o,i,n={};n.type=[this._currentGeocodingCode];for(var r=0;r<e.length;r++)i=e[r],n[i.key]=i.value;"CadastralParcel"===this._currentGeocodingCode?(o=this._getCadastralParcelRequestParams(n),n={type:[this._currentGeocodingCode]}):o=this._currentGeocodingLocation;var s=this;this._requestGeocoding({location:o,filterOptions:n,onSuccess:function(t){if(P.log(t),t){var e=t.locations;s._fillGeocodedLocationListContainer(e)}},onFailure:function(t){s._clearGeocodedLocation(),P.log(t.message)}})}},n.prototype._getCadastralParcelRequestParams=function(t){var e,o="",i=t.department;i?(e=i.length,o=2===e?i:1===e?"0"+i:i.substring(0,2)):o="__";var n=t.commune;n?(e=n.length,o+=3===e?n:2==e?"_"+n:1==e?"__"+n:n.substring(0,3)):o+="___";var r=t.insee;r&&5===r.length&&(o=r);var s=t.absorbedCity;s?(e=s.length,3===e?o+=s:e<3?2===e?o+="_"+s:1===e&&(o+="__"+s):o+=s.substring(0,3)):o+="___";var a=t.section;a?(e=a.length,o+=2===e?a:1===e?"_"+a:a.substring(0,2)):o+="__";var l=t.number;return l?(e=l.length,o+=4===e?l:3===e?"_"+l:2===e?"__"+l:1===e?"___"+l:l.substring(0,4)):o+="___",P.log("location : "+o),o},n.prototype._clearResults=function(){var t=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),null!=this._popupOverlay&&(t.removeOverlay(this._popupOverlay),this._popupOverlay=null)},n.prototype._clearSuggestedLocation=function(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)},n.prototype._hideSuggestedLocation=function(){this._autocompleteContainer&&(this._autocompleteContainer.style.display="none")},n.prototype._displaySuggestedLocation=function(){this._autocompleteContainer&&(this._autocompleteContainer.style.display="block")},n.prototype._clearGeocodedLocation=function(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"importance",title:"Importance"},{name:"nature",title:"Nature"},{name:"territory",title:"Territoire"},{name:"insee",title:"Code INSEE"},{name:"municipality",title:"Ville"},{name:"department",title:"Département"}],StreetAddress:[{name:"territory",title:"Territoire"},{name:"insee",title:"Code INSEE"},{name:"municipality",title:"Ville"},{name:"department",title:"Département"}],CadastralParcel:[{name:"department",title:"Département",description:"Numéro du département (ex: 01, 94)"},{name:"commune",title:"Code commune (INSEE)",description:"Code commune (INSEE) : 3 chiffres (ex: 067)"},{name:"absorbedCity",title:"Commune absorbée",description:"Commune absorbée : 3 chiffres (ex: 000, 001)"},{name:"section",title:"Section",description:"Section : 2 caractères (ex: AA, 0D)"},{name:"number",title:"Numéro",description:"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)"}],Administratif:[{name:"prefecture",title:"Préfecture"},{name:"inseeRegion",title:"Code région (INSEE)"},{name:"inseeDepartment",title:"Code département (INSEE)"},{name:"municipality",title:"Ville"}]},zoomToResultsByDefault:function(t){var e=15,o=t.service,i=t.fields,n=t.type,r={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return"SuggestedLocation"===o&&"PositionOfInterest"===n&&(e=r[i.classification]),"DirectGeocodedLocation"===o&&"PositionOfInterest"===n&&(e=r[i.importance]||14),"StreetAddress"===n&&(e=17),"CadastralParcel"===n&&(e=17),"Administratif"===n&&(e=12),e}};return e.default=i,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),n=function(t){return t&&t.__esModule?t:{default:t}}(i),r={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPsearchEngine"),t.className="GPwidget",t},_createShowSearchEngineElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowSearchEngine"),t.type="checkbox",t},_createShowSearchEnginePictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowSearchEnginePicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowSearchEngine"),e.title="Afficher/masquer la recherche par lieux",e.addEventListener("click",function(){document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none";var e=document.getElementById(t._addUID("GPshowAdvancedSearch"));e&&(e.style.display=null,document.getElementById(t._addUID("GPadvancedSearchPanel")).style.display="none");var o="#GPsearchInput-"+t._uid;document.querySelector(o+" input").disabled=!1,t.onShowSearchEngineClick()});var o=document.createElement("span");return o.id=this._addUID("GPshowSearchEngineOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createSearchInputElement:function(t){var e=this,o=document.createElement("form");o.id=this._addUID("GPsearchInput"),o.addEventListener("submit",function(t){return t.preventDefault(),document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="block",document.getElementById(e._addUID("GPautoCompleteList")).style.display="none",e.onGeocodingSearchSubmit(t),!1});var i=document.createElement("input");i.id=this._addUID("GPsearchInputText"),i.type="text",i.placeholder=t,i.autocomplete="off",i.addEventListener("keyup",function(t){var o=t.which||t.keyCode;13!==o&&10!==o&&38!==o&&40!==o&&(document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="none",i.value.length>2?document.getElementById(e._addUID("GPautoCompleteList")).style.display="block":document.getElementById(e._addUID("GPautoCompleteList")).style.display="none",e.onAutoCompleteSearchText(t))}),i.addEventListener("keydown",function(t){var o=t.which||t.keyCode,i=document.getElementById(e._addUID("GPautocompleteResults"));if(i){var r=i.getElementsByClassName("GPautoCompleteProposal current"),s=i.getElementsByClassName("GPautoCompleteProposal"),a=s.length;if(a){var l=null;if(!r.length)return l=s[0],l.className="GPautoCompleteProposal current",l.style.color="#000000",void(l.style["background-color"]="#CEDBEF");l=r[0];var p=parseInt(n.default.index(l.id),10),c=p===a-1?s[0]:s[p+1],u=0===p?s[a-1]:s[p-1];switch(l.style["background-color"]="",l.style.color="",u.style["background-color"]="",u.style.color="",c.style["background-color"]="",c.style.color="",o){case 38:l.className="GPautoCompleteProposal",u.className="GPautoCompleteProposal current",u.style.color="#000000",u.style["background-color"]="#CEDBEF";break;case 40:l.className="GPautoCompleteProposal",c.className="GPautoCompleteProposal current",c.style.color="#000000",c.style["background-color"]="#CEDBEF";break;case 13:t.preventDefault(),l.click(t)}l.focus()}}}),o.appendChild(i);var r=document.createElement("div");return r.id=this._addUID("GPsearchInputReset"),r.addEventListener("click",function(){document.getElementById(e._addUID("GPsearchInputText")).value="",document.getElementById(e._addUID("GPautoCompleteList")).style.display="none",document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="none",e.onSearchResetClick()}),o.appendChild(r),o},_createShowAdvancedSearchElement:function(){var t=this,e=document.createElement("div");e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowAdvancedToolPicto",e.title="Ouvrir la recherche avancée",e.addEventListener("click",function(){var e="#GPsearchInput-"+t._uid;document.querySelector(e+" input").disabled=!0,document.getElementById(t._addUID("GPautoCompleteList")).style.display="none",document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(t._addUID("GPshowAdvancedSearch")).style.display="none",document.getElementById(t._addUID("GPadvancedSearchPanel")).style.display="inline-block"});var o=document.createElement("span");return o.id=this._addUID("GPshowAdvancedSearchOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createAdvancedSearchPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPadvancedSearchPanel"),t.className="GPpanel",t.style.display="none",t},_createGeocodeResultsElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPgeocodeResultsList"),t.className="GPpanel",t.style.display="none",t.appendChild(this._createGeocodeResultsHeaderElement()),t},_createAutoCompleteElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPautoCompleteList"),t.className="GPautoCompleteList",t.style.display="none",t},_createAutoCompleteListElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.addEventListener?e.addEventListener("click",function(e){t.onAutoCompletedResultsItemClick(e),document.getElementById(t._addUID("GPautoCompleteList")).style.display="none"},!1):e.attachEvent&&e.attachEvent("onclick",function(e){t.onAutoCompletedResultsItemClick(e),document.getElementById(t._addUID("GPautoCompleteList")).style.display="none"}),e},_createAutoCompletedLocationElement:function(t,e){var o=document.getElementById(this._addUID("GPautocompleteResults")),i=document.createElement("div");i.id=this._addUID("AutoCompletedLocation_"+e),i.className="GPautoCompleteProposal",i.innerHTML=t.fullText,i.addEventListener?i.addEventListener("click",function(t){o.click(t)},!1):i.attachEvent&&i.attachEvent("onclick",function(t){o.click(t)}),o.appendChild(i)},_createAdvancedSearchPanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Recherche avancée",e.appendChild(o);var i=document.createElement("div");return i.id=this._addUID("GPadvancedSearchClose"),i.className="GPpanelClose",i.title="Fermer la recherche avancée",i.addEventListener?i.addEventListener("click",function(){var e="#GPsearchInput-"+t._uid;document.querySelector(e+" input").disabled=!1,document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(t._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(t._addUID("GPadvancedSearchPanel")).style.display="none"},!1):i.attachEvent&&i.attachEvent("onclick",function(){var e="#GPsearchInput-"+t._uid;document.querySelector(e+" input").disabled=!1,document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none",document.getElementById(t._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(t._addUID("GPadvancedSearchPanel")).style.display="none"}),e.appendChild(i),e},_createAdvancedSearchPanelFormElement:function(t){var e=this,o=document.createElement("form");o.id=this._addUID("GPadvancedSearchForm"),o.addEventListener("submit",function(t){t.preventDefault();for(var o=[],i="#GPadvancedSearchFilters-"+e._uid,n=document.querySelectorAll(i+" > div > div > input"),r=0;r<n.length;r++){var s=n[r];o.push({key:s.name,value:s.value})}return e.onGeocodingAdvancedSearchSubmit(t,o),document.getElementById(e._addUID("GPgeocodeResultsList")).style.display="block",!1});var i=document.createElement("div");i.className="GPflexInput";var n=document.createElement("label");n.className="GPadvancedSearchCodeLabel",n.innerHTML="Recherche par",i.appendChild(n);var r=this._createAdvancedSearchFormCodeElement(t);return i.appendChild(r),o.appendChild(i),o},_createAdvancedSearchFormCodeElement:function(t){var e=this,o=document.createElement("select");o.id=this._addUID("GPadvancedSearchCode"),o.className="GPadvancedSearchCode",o.addEventListener("change",function(t){e.onGeocodingAdvancedSearchCodeChange(t)},!1),t||(t=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"},{id:"Administratif",title:"Administratif"}]);for(var i=0;i<t.length;i++){var n=document.createElement("option");n.value=t[i].id,n.text=t[i].title,o.appendChild(n)}return o},_createAdvancedSearchFormInputElement:function(){var t=document.createElement("input");return t.type="submit",t.id=this._addUID("GPadvancedSearchSubmit"),t.className="GPinputSubmit",t.value="Chercher",t},_createAdvancedSearchFormFiltersElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPadvancedSearchFilters"),t},_createAdvancedSearchFiltersTableElement:function(t,e){var o=document.createElement("div");return o.id=this._addUID(t),e||(o.style.display="none"),o},_createAdvancedSearchFiltersAttributElement:function(t){var e=null,o=t.name,i=t.title,n=t.description,r=t.code,s=t.value,a=document.createElement("div");a.className="GPflexInput";var l=document.createElement("label");l.className="GPadvancedSearchFilterLabel",l.htmlFor=o,l.title=n||i,l.innerHTML=i,a.appendChild(l);var p=document.createElement("input");return p.id=o,p.className="GPadvancedSearchFilterInput",p.type="text",p.name=o,s&&(p.value=s),a.appendChild(p),e=document.getElementById(this._addUID(r)),e?e.appendChild(a):e=a,e},_createGeocodeResultsHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Résultats de la recherche",e.appendChild(o);var i=document.createElement("div");return i.id=this._addUID("GPgeocodeResultsClose"),i.className="GPpanelClose",i.title="Fermer la fenêtre de résultats",i.addEventListener?i.addEventListener("click",function(){document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none"},!1):i.attachEvent&&i.attachEvent("onclick",function(){document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none"}),e.appendChild(i),e},_createGeocodeResultsListElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.addEventListener?e.addEventListener("click",function(e){e.ctrlKey||(document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none"),t.onGeocodedResultsItemClick(e)},!1):e.attachEvent&&e.attachEvent("onclick",function(e){e.ctrlKey||(document.getElementById(t._addUID("GPgeocodeResultsList")).style.display="none"),t.onGeocodedResultsItemClick(e)}),e},_createGeocodedLocationElement:function(t,e){var o=document.getElementById(this._addUID("GPgeocodeResults")),i=document.createElement("div");if(i.id=this._addUID("GeocodedLocation_"+e),i.className="GPautoCompleteProposal","string"==typeof t)i.innerHTML=t;else{var n=t.placeAttributes;n.freeform?i.innerHTML=n.freeform:n.postalCode?i.innerHTML=n.postalCode+" "+n.commune:n.cadastralParcel?i.innerHTML=n.cadastralParcel:i.innerHTML="..."}o.appendChild(i)}};return e.default=r,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(t);var e=this._initContainer(t);a.default.control.Control.call(this,{element:e,target:t.target,render:t.render})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(1),a=i(s),l=o(4),p=i(l),c=o(9),u=(i(c),o(3)),h=i(u),d=o(0),f=i(d),y=o(7),g=i(y),m=o(6),v=i(m),_=o(2),b=i(_),E=o(95),S=i(E),w=o(35),P=i(w);o(39);var C=h.default.getLogger("GeoportalMousePosition");return a.default.inherits(n,a.default.control.Control),n.prototype=Object.create(a.default.control.Control.prototype,{}),f.default.assign(n.prototype,P.default),n.prototype.constructor=n,n.prototype.setMap=function(t){var e=this;if(t){var o=this._createMapCenter();if(t.getViewport().appendChild(o),this.collapsed||this._isDesktop||(o.className="GPmapCenterVisible"),this.collapsed||(this._isDesktop?t.on("pointermove",this.onMouseMove,this):t.on("moveend",this.onMapMove,this)),this.options.editCoordinates){var i=document.createElement("img");i.id=this._addUID("GPmousePositionMarker"),i.src=this._markerUrl,i.title="Cliquer pour supprimer",i.addEventListener("click",function(){e._markerOverlay.setPosition(void 0)}),this._markerOverlay=new a.default.Overlay({offset:this._markerOffset,element:i,stopEvent:!1}),t.addOverlay(this._markerOverlay)}}if(a.default.control.Control.prototype.setMap.call(this,t),null!=t&&!this.collapsed){document.getElementById("GPshowMousePosition-"+this._uid).checked="checked",this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}},n.prototype.addSystem=function(t){if("object"!==(void 0===t?"undefined":r(t)))return void console.log("[ERROR] MousePosition:addSystem - system parameter should be an object");if(!t.crs)return void C.error("crs not defined !");t.label||(C.warn("crs label not defined, use crs code by default."),t.label=t.crs),t.type||(C.warn("type srs not defined, use 'Metric' by default."),t.type="Metric");for(var e=0;e<this._projectionSystems.length;e++){var o=this._projectionSystems[e];t.crs===o.crs&&(!0,C.info("crs '{}' already configured",o.crs))}t.code=this._projectionSystems.length,this._projectionSystems.push(t);var i=document.getElementById("GPmousePositionProjectionSystem-"+this._uid);if(i){var n=document.createElement("option");n.value=t.code,n.text=t.label,i.appendChild(n)}},n.prototype.addSystems=function(t){if(t){if(!Array.isArray(t))return void console.log("[ERROR] MousePosition:addSystems - systems parameter should be an array");for(var e=0;e<t.length;e++)this.addSystem(t[e])}},n.prototype.removeSystem=function(t){if(!t||"string"!=typeof t)return void console.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string");for(var e=document.getElementById("GPmousePositionProjectionSystem-"+this._uid),o=null,i=0;i<this._projectionSystems.length;i++){var n=this._projectionSystems[i];if(t===n.crs){o=n.code,this._projectionSystems.splice(i,1);break}}if(null==o)return void console.log("[WARN] MousePosition:removeSystem - system not found");for(var r=[],s=0;s<this._projectionSystems.length;s++)r[Number(this._projectionSystems[s].code)]=s,this._projectionSystems[s].code=s;for(var a=null,l=0;l<e.childNodes.length;l++)o!=e.childNodes[s].value?e.childNodes[s].value=r[Number(e.childNodes[s].value)]:a=l;null!=a&&e.removeChild(e.childNodes[a]),this._currentProjectionSystems.code==o&&(e.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(e.childNodes[0].value))},n.prototype.setUnits=function(t){t&&Array.isArray(t)&&(this.options.units=t,this._projectionUnits=[],this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))},n.prototype.setAltitudeOptions=function(t){if(t&&"object"===(void 0===t?"undefined":r(t))&&(this.options.altitude.triggerDelay=t.triggerDelay,this.options.altitude.responseDelay=t.responseDelay,t.serviceOptions))for(var e in t.serviceOptions)t.serviceOptions.hasOwnProperty(e)&&(this.options.altitude.serviceOptions[e]=t.serviceOptions[e])},n.prototype.displayAltitude=function(t){void 0!==t&&(void 0===this._noRightManagement&&this._checkRightsManagement(),this.options.displayAltitude=t,this._setElevationPanel(t))},n.prototype.displayCoordinates=function(t){void 0!==t&&(this.options.displayCoordinates=t,this._setCoordinatesPanel(t),this._setSettingsPanel(t))},n.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(this._isDesktop||(document.getElementById("GPmapCenter").className=t?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!t)},n.prototype._initialize=function(t){if(this.options=t||{},this.options.collapsed=void 0===t.collapsed||t.collapsed,this.collapsed=this.options.collapsed,this._markerOverlay=null,this._markerUrl=null,this._markerOffset=[0,0],this._hideMarker=!1,this._initMarker(t.positionMarker),this.options.units=t.units||[],this.options.displayAltitude=void 0===t.displayAltitude||t.displayAltitude,this.options.displayCoordinates=void 0===t.displayCoordinates||t.displayCoordinates,this.options.displayCoordinates?this.options.editCoordinates=void 0!==t.editCoordinates&&t.editCoordinates:this.options.editCoordinates=!1,this.editing=!1,this.options.systems=t.systems||[],t.altitude){var e=t.altitude;this.options.altitude={triggerDelay:void 0!==e.triggerDelay?e.triggerDelay:200,responseDelay:void 0!==e.responseDelay?e.responseDelay:500,serviceOptions:e.serviceOptions||{},noDataValue:void 0!==e.noDataValue?e.noDataValue:-99999,noDataValueTolerance:void 0!==e.noDataValueTolerance?e.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=b.default.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=f.default.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this.options.displayAltitude||this.options.displayCoordinates||(this.options.displayCoordinates=!0),this.options.displayAltitude&&this._checkRightsManagement()},n.prototype._initMarker=function(t){if(this.options.editCoordinates){if(!t)return this._markerUrl=g.default.lightOrange,void(this._markerOffset=g.default.defaultOffset);this._hideMarker=void 0!==t.hide&&t.hide,t.offset?Array.isArray(t.offset)&&2===t.offset.length?this._markerOffset=t.offset:(console.log("positionMarker.offset should be an array. e.g. : [0,0]"),this._markerOffset=g.default.defaultOffset):this._markerOffset=g.default.defaultOffset;var e=t.url;e?e.match(/^[a-zA-Z]+$/)?this._markerUrl=void 0!==g.default[e]?g.default[e]:g.default.lightOrange:this._markerUrl=e:this._markerUrl=g.default.lightOrange}},n.prototype._initProjectionSystems=function(){for(var t=[{label:"Géographique",crs:a.default.proj.get("EPSG:4326").getCode(),type:"Geographical"},{label:"Web Mercator",crs:a.default.proj.get("EPSG:3857").getCode(),type:"Metric"},{label:"Lambert 93",crs:a.default.proj.get("EPSG:2154").getCode(),type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:a.default.proj.get("EPSG:27572"),type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],e=this.options.systems,o=0;o<e.length;o++){var i=e[o];this.addSystem(i)}if(0===this._projectionSystems.length)for(var n=0;n<t.length;n++)this.addSystem(t[n])},n.prototype._initProjectionUnits=function(){var t={Geographical:[{code:"DEC",label:"degrés décimaux",format:this._displayDEC},{code:"DMS",label:"degrés sexagésimaux",format:this._displayDMS},{code:"RAD",label:"radians",format:this._displayRAD},{code:"GON",label:"grades",format:this._displayGON}],Metric:[{code:"M",label:"mètres",format:this._displayMeter},{code:"KM",label:"kilomètres",format:this._displayKMeter}]},e=this.options.units;for(var o in t)if(t.hasOwnProperty(o)){for(var i=!1,n=0;n<t[o].length;n++)for(var s=t[o][n],a=0;a<e.length;a++){var l=e[a];s.code===l&&(i=!0,this._projectionUnits[o]||(this._projectionUnits[o]=[]),this._projectionUnits[o].push(s))}i||(this._projectionUnits[o]=t[o])}"object"===r(this._projectionUnits)&&0===Object.keys(this._projectionUnits).length&&(this._projectionUnits=t)},n.prototype._getCurrentProjectionInformation=function(){for(var t=[this._currentProjectionSystems.label,"en"],e=this._projectionUnits[this._currentProjectionType],o=0;o<e.length;++o)if(e[o].code===this._currentProjectionUnits){t.push(e[o].label);break}return t.join(" ")},n.prototype._checkRightsManagement=function(){var t=v.default.check({key:this.options.apiKey,resources:["SERVICE_CALCUL_ALTIMETRIQUE_RSC"],services:["Elevation"]})
;this._noRightManagement=!t,this.options.apiKey||(this.options.apiKey=t.key)},n.prototype._initContainer=function(){var t=this._createMainContainerElement(),e=this._showMousePositionContainer=this._createShowMousePositionElement();t.appendChild(e);var o=this._createShowMousePositionPictoElement(this._isDesktop);t.appendChild(o);var i=this._createMousePositionPanelElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates,this._currentProjectionUnits),n=this._createMousePositionSettingsElement(),r=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),s=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return n.appendChild(r),n.appendChild(s),i.appendChild(n),t.appendChild(i),t},n.prototype._setElevationPanel=function(t){var e=null;t?this._noRightManagement?(e=document.getElementById("GPmousePositionAlt-"+this._uid),e.innerHTML="No rights!"):(e=document.getElementById("GPmousePositionAltitude-"+this._uid),e.style.display=""):(e=document.getElementById("GPmousePositionAltitude-"+this._uid),e.style.display="none")},n.prototype._setCoordinatesPanel=function(t){var e=document.getElementById("GPmousePositionCoordinate-"+this._uid);e.style.display=t?"":"none"},n.prototype._setSettingsPanel=function(t){var e=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),o=document.getElementById("GPmousePositionSettings-"+this._uid);t?(e.style.display="",o.style.display=""):(e.style.display="none",o.style.display="none")},n.prototype._setTypeUnitsPanel=function(t){for(var e=this._projectionUnitsContainer;e.firstChild;)e.removeChild(e.firstChild);for(var o=this._projectionUnits[t],i=0;i<o.length;i++){var n=o[i],r=document.createElement("option");r.value=n.code?n.code:i,r.text=n.label||i,e.appendChild(r)}var s=this._projectionUnits[t][0].code;"DMS"!==this._currentProjectionUnits&&"DMS"!==s||(this._resetCoordinateElements(this.options.editCoordinates,t,s),this._setEditMode(this.editing)),this._currentProjectionType=t,this._resetLabelElements(t),this._resetUnitElements(s),this._currentProjectionUnits=s},n.prototype._displayDEC=function(t){var e={};return e.lat=t[1].toFixed(6),e.lng=t[0].toFixed(6),e.unit="°",e},n.prototype._displayDMS=function(t){return{lng:S.default.decimalToDMS(t[0],"EO",2),lat:S.default.decimalToDMS(t[1],"NS",2),unit:"DMS"}},n.prototype._displayRAD=function(t){var e={},o=.017453292519943295;return e.lng=t[0]*o,e.lng=e.lng.toFixed(8),e.lat=t[1]*o,e.lat=e.lat.toFixed(8),e.unit="rad",e},n.prototype._displayGON=function(t){var e={},o=1.1111111111111112;return e.lng=t[0]*o,e.lng=e.lng.toFixed(8),e.lat=t[1]*o,e.lat=e.lat.toFixed(8),e.unit="gon",e},n.prototype._displayMeter=function(t){var e={};return e.x=t[0].toFixed(2),e.y=t[1].toFixed(2),e.unit="m",e},n.prototype._displayKMeter=function(t){var e={};return e.x=(t[0]/1e3).toFixed(2),e.y=(t[1]/1e3).toFixed(2),e.unit="km",e},n.prototype._setCoordinate=function(t,e){var o={},i=this._currentProjectionSystems.crs;if(!i)return void console.log("ERROR : system crs not found");t=a.default.proj.transform(t,e,i);for(var n=this._currentProjectionSystems.type,r=null,s=this._projectionUnits[n],l=0;l<s.length;l++)if(s[l].code===this._currentProjectionUnits){r=s[l].format;break}if(!r||"function"!=typeof r)return void console.log("WARNING : coordinates format function not found");(o=r(t))&&0!==Object.keys(o).length&&this.GPdisplayCoords(o)},n.prototype._setElevation=function(t){var e=this.options.altitude.responseDelay,o=this.options.altitude.noDataValue,i=this.options.altitude.noDataValueTolerance;this.GPdisplayElevation(t,e,o,i)},n.prototype.onMoveStopped=function(t,e){var o=a.default.proj.transform(t,e,"EPSG:4326");this._setElevation(o)},n.prototype.onMouseMove=function(t){var e=this,o=t.coordinate;if(t.map&&t.map.getView()){var i=t.map.getView().getProjection();this._setCoordinate(o,i),clearTimeout(this._timer),this._timer=setTimeout(function(){e.onMoveStopped(o,i)},this.options.altitude.triggerDelay)}},n.prototype.onMapMove=function(){var t=this,e=this.getMap();if(e&&e.getView()){var o=e.getView(),i=o.getCenter(),n=o.getProjection();this._setCoordinate(i,n),clearTimeout(this._timer),this._timer=setTimeout(function(){t.onMoveStopped(i,n)},this.options.altitude.triggerDelay)}},n.prototype.onRequestAltitude=function(t,e){if(t&&0!==Object.keys(t).length&&this.options.displayAltitude){if(this._noRightManagement)return console.log("[WARNING] contract key configuration has no rights to load geoportal elevation "),void(document.getElementById("GPmousePositionAlt-"+this._uid).innerHTML="No rights!");var o=this.options.altitude.serviceOptions||{},i=o.protocol||"XHR",n=o.timeOut||0;"JSONP"===i&&0===n&&(n=15e3);var r=[{lon:t[0],lat:t[1]}],s=this,a=o.rawResponse||!1,l=null,c=null;l=a?function(t){console.log("alti service raw response : ",t)}:function(t){t&&Object.keys(t)&&e.call(this,t.elevations[0].z)},c=function(t){console.log("[getAltitude] ERROR : "+t.message)};var u=o.apiKey||this.options.apiKey;p.default.Services.getAltitude({apiKey:u,protocol:i,timeOut:n,scope:s,rawResponse:a,onSuccess:l,onFailure:c,zonly:!0,positions:r})}},n.prototype.onShowMousePositionClick=function(){var t=this.getMap();this.collapsed=this._showMousePositionContainer.checked,this.dispatchEvent("change:collapsed"),this._showMousePositionContainer.checked?this._isDesktop?t.un("pointermove",this.onMouseMove,this):t.un("moveend",this.onMapMove,this):this.editing||(this._isDesktop?t.on("pointermove",this.onMouseMove,this):(t.on("moveend",this.onMapMove,this),this.onMapMove())),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)},n.prototype.onMousePositionEditModeClick=function(t){if(this.options.editCoordinates&&this.editing!==t){this.editing=t,this._setEditMode(this.editing);var e=this.getMap();this._isDesktop?this.editing?e.un("pointermove",this.onMouseMove,this):(e.on("pointermove",this.onMouseMove,this),this.onMapMove()):this.editing?e.un("moveend",this.onMapMove,this):(e.on("moveend",this.onMapMove,this),this.onMapMove()),!this.editing&&this._markerOverlay&&this._markerOverlay.setPosition(void 0)}},n.prototype.getCoordinate=function(t){var e=document.getElementById(this._addUID("GPmousePosition"+t+"Degrees")),o=e.value;if(!o)return null;if(o=o.replace(",","."),!S.default.isInteger(o))return null;var i=S.default.toInteger(o);if(i<Number(e.dataset.min)||i>Number(e.dataset.max))return null;var n=document.getElementById(this._addUID("GPmousePosition"+t+"Direction")).value,r=document.getElementById(this._addUID("GPmousePosition"+t+"Minutes")),s=r.value;if(s&&(s=s.replace(",","."),S.default.isInteger(s))){var a=S.default.toInteger(s);a>=Number(r.dataset.min)&&a<=Number(r.dataset.max)&&(i+=a/60)}var l=document.getElementById(this._addUID("GPmousePosition"+t+"Seconds")),p=l.value;if(p){p=p.replace(",",".");var c=S.default.toFloat(p);c&&c>=Number(l.dataset.min)&&c<=Number(l.dataset.max)&&(i+=c/3600)}return"O"!==n&&"S"!==n||(i=-i),i},n.prototype.locateDMSCoordinates=function(){var t=[this.getCoordinate("Lon"),this.getCoordinate("Lat")];if(null!==t[0]&&null!==t[1]){var e=this._currentProjectionSystems.crs;if(!e)return void console.log("ERROR : system crs not found");var o=this.getMap().getView(),i=a.default.proj.transform(t,e,o.getProjection());o.setCenter(i),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(i)}},n.prototype.locateCoordinates=function(){var t=document.getElementById(this._addUID("GPmousePositionLon")).value;if(t=t.replace(",","."),null!==(t=S.default.toFloat(t))){var e=document.getElementById(this._addUID("GPmousePositionLat")).value;if(e=e.replace(",","."),null!==(e=S.default.toFloat(e))){var o=this._currentProjectionSystems.crs;if(!o)return void console.log("ERROR : system crs not found");var i;i="Geographical"===this._currentProjectionSystems.type?[this.convert(t),this.convert(e)]:[this.convert(e),this.convert(t)];var n=a.default.proj.transform(i,this._currentProjectionSystems.crs,"EPSG:4326"),r=this._currentProjectionSystems.geoBBox;if(r){var s=[r.left,r.bottom,r.right,r.top];if(n[0]<s[0]||n[0]>s[2])return;if(n[1]<s[1]||n[1]>s[3])return}var l=this.getMap().getView(),p=a.default.proj.transform(i,o,l.getProjection());l.setCenter(p),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(p)}}},n.prototype.onMousePositionEditModeLocateClick=function(){if(this.options.editCoordinates)return this.editing?void("DMS"===this._currentProjectionUnits?this.locateDMSCoordinates():this.locateCoordinates()):void this.onMousePositionEditModeClick(!0)},n.prototype.onMousePositionProjectionSystemChange=function(t){var e=t.target.selectedIndex,o=t.target.options[e].value;this._setCurrentSystem(o)},n.prototype._setCurrentSystem=function(t){for(var e=null,o=0;o<this._projectionSystems.length;++o)if(this._projectionSystems[o].code==t){e=this._projectionSystems[o].type;break}if(!e)return void C.log("system not found in projection systems container");this._currentProjectionSystems=this._projectionSystems[Number(t)],e!==this._currentProjectionType&&this._setTypeUnitsPanel(e),this._isDesktop||this.onMapMove()},n.prototype.onMousePositionProjectionSystemMouseOver=function(t){C.trace(t);var e=this.getMap();if(e&&e.getView()){var o=e.getView(),i=o.getProjection(),n=o.calculateExtent(e.getSize());n=a.default.proj.transformExtent(n,i,"EPSG:4326");var r=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));r.innerHTML="";for(var s=0;s<this._projectionSystems.length;s++){var l=this._projectionSystems[s],p=null;if(l.geoBBox&&(n[0]>l.geoBBox.right||n[1]>l.geoBBox.top||n[2]<l.geoBBox.left||n[3]<l.geoBBox.bottom))l===this._currentProjectionSystems&&(p=document.createElement("option"),p.value=l.code,p.text=l.label||s,p.setAttribute("selected","selected"),p.setAttribute("disabled","disabled"),r.appendChild(p));else{var c=document.createElement("option");c.value=l.code,c.text=l.label||s,l===this._currentProjectionSystems&&c.setAttribute("selected","selected"),r.appendChild(c)}}}},n.prototype.onMousePositionProjectionUnitsChange=function(t){var e=t.target.selectedIndex,o=t.target.options[e].value,i=this._currentProjectionUnits;this._currentProjectionUnits=o,this._resetLabelElements(this._currentProjectionType),this._resetUnitElements(this._currentProjectionUnits),"DMS"!==i&&"DMS"!==this._currentProjectionUnits||(this._resetCoordinateElements(this.options.editCoordinates,this._currentProjectionType,this._currentProjectionUnits),this._setEditMode(this.editing)),this._isDesktop||this.onMapMove()},n.prototype.convert=function(t){var e;if("M"===this._currentProjectionUnits||"DEC"===this._currentProjectionUnits)e=t;else if("KM"===this._currentProjectionUnits)e=1e3*t;else if("RAD"===this._currentProjectionUnits){var o=(180/Math.PI).toFixed(20);e=(t*o).toFixed(20)}else if("GON"===this._currentProjectionUnits){var i=.9.toFixed(20);e=(t*i).toFixed(20)}return e},n.prototype.validateExtentCoordinate=function(t,e){if(-1===["Lon","Lat"].indexOf(t))return!1;var o=e.replace(",",".");if(null===(o=S.default.toFloat(o)))return!1;o=this.convert(o);var i=this._currentProjectionSystems.geoBBox;if(void 0===i)return!0;var n=[i.left,i.bottom,i.right,i.top];return n=a.default.proj.transformExtent(n,"EPSG:4326",this._currentProjectionSystems.crs),("Lat"!==t||!(o<n[0]||o>n[2]))&&("Lon"!==t||!(o<n[1]||o>n[3]))},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={modulo:function(t,e){var o=t%e;return o*e<0?o+e:o},decimalToDMS:function(t,e,o){var i=this.modulo(t+180,360)-180,n=Math.abs(3600*i),r=o||0,s=Math.pow(10,r),a=Math.floor(n/3600),l=Math.floor((n-3600*a)/60),p=n-3600*a-60*l;return p=Math.ceil(p*s)/s,p>=60&&(p=0,l+=1),l>=60&&(l=0,a+=1),{d:a,m:l,s:p,direction:e.charAt(i<0?1:0)}},toInteger:function(t,e){var o=e||10,i=parseInt(t,o);return!isNaN(i)&&isFinite(i)?i:null},isInteger:function(t){if(isNaN(t))return!1;var e=parseFloat(t);return(0|e)===e},toFloat:function(t){var e=parseFloat(t);return!isNaN(e)&&isFinite(e)?e:null}};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(t);var e=this._initContainer();s.default.control.Control.call(this,{element:e,target:t.target,render:t.render})}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),s=i(r),a=o(4),l=(i(a),o(3)),p=i(l),c=o(2),u=i(c),h=o(19),d=i(h),f=o(97),y=i(f),g=o(0),m=(i(g),o(18)),v=i(m),_=p.default.getLogger("Drawing");return s.default.inherits(n,s.default.control.Control),n.DefaultTools={points:!0,lines:!0,polygons:!0,text:!0,remove:!0,display:!0,tooltip:!0,edit:!0,export:!0,measure:!1},n.DefaultLabels={control:"Annoter la carte",creatingTools:"Outils de création",points:"Placer des points",lines:"Dessiner des lignes",polygons:"Dessiner des polygones",text:"Ecrire sur la carte",editingTools:"Outils d'édition",edit:"Editer les tracés",display:"Modifier l'apparence des objets",tooltip:"Modifier les textes / infos-bulles",remove:"Supprimer des objets",export:"Exporter",exportTitle:"Exporter en KML",applyToObject:"Appliquer à l'objet",saveDescription:"Enregistrer",setAsDefault:"Définir par défaut",strokeColor:"Couleur du trait : ",strokeWidth:"Epaisseur du trait : ",fillColor:"Couleur de remplissage : ",fillOpacity:"Opacité du remplissage : "},n.DefaultStyles={textFillColor:"#000000",textStrokeColor:"#FFFFFF",textIcon1x1:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",anchor:[0,0]},polyFillColor:"#ffffff",polyFillOpacity:.4,polyStrokeColor:"#ffcc33",polyStrokeWidth:4,strokeColor:"#ffcc33",strokeWidth:4},n.DefaultCursorStyle={radius:6,strokeColor:"#FFF",strokeWidth:1,fillColor:"rgba(0, 153, 255, 1)"},n.prototype=Object.create(s.default.control.Control.prototype,{}),n.prototype.assign=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},n.prototype.assign(y.default),n.prototype.constructor=n,n.prototype.setMap=function(t){if(s.default.control.Control.prototype.setMap.call(this,t),this.getMap()&&this.eventKey&&s.default.Observable.unByKey(this.eventKey),null!=t){if(!this.collapsed){document.getElementById(this._addUID("GPshowDrawing")).checked="checked"}this.layer&&this.setLayer(this.layer),this.eventKey=this.getMap().getLayers().on("remove",function(t){t.element==this.layer&&(this.layer=null,this.interactionCurrent&&(this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=null))},this)}},n.prototype.exportFeatures=function(){var t=null;if(null==s.default.control.Control.prototype.getMap.call(this))return console.log("Impossible to export : control isn't attached to any map."),t;if(!this.layer)return console.log("Impossible to export : no layer is hosting features."),t;if(!this.layer.getSource()||!this.layer.getSource().getFeatures()||!this.layer.getSource().getFeatures().length)return console.log("Impossible to export : no features found."),t;var e=this.layer.getSource().getProjection();return e=e||this.getMap().getView().getProjection(),t=new v.default({writeStyles:!0}).writeFeatures(this.layer.getSource().getFeatures(),{dataProjection:"EPSG:4326",featureProjection:e})},n.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] Drawing:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(this.onShowDrawingClick(),this._showDrawingContainer.checked=!t)},n.prototype.setExportName=function(t){this._exportName=t},n.prototype.getExportName=function(){return this._exportName},n.prototype._getsMarkersOptionsFromSrc=function(t){for(var e=null,o=0;o<this.options.markersList.length;o++)if(this.options.markersList[o].src==t)return e=this.options.markersList[o];return e},n.prototype._getIconStyleOptions=function(t){var e={};return Object.keys(t).forEach(function(o){switch(o){case"src":case"size":case"anchor":case"anchorOrigin":case"anchorXUnits":case"anchorYUnits":e[o]=t[o]}},this),e},n.prototype._initialize=function(t){this._uid=u.default.generate(),this._exportName="Croquis",this._exportFormat=".kml",this.options=t||{},this.options.tools||(this.options.tools={}),Object.keys(n.DefaultTools).forEach(function(t){this.options.tools.hasOwnProperty(t)||(this.options.tools[t]=n.DefaultTools[t])},this),this.options.cursorStyle||(this.options.cursorStyle={}),Object.keys(n.DefaultCursorStyle).forEach(function(t){this.options.cursorStyle.hasOwnProperty(t)||(this.options.cursorStyle[t]=n.DefaultCursorStyle[t])},this),this.options.collapsed=void 0===t.collapsed||t.collapsed,this.collapsed=this.options.collapsed,this.options.markersList=t.markersList||[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARfSURBVFiF3ZhfbBRVGMV/d2Z3212tbSkCbuNaqzaRiL6QyAMPjSFoYqgx4oOiRmMFUzQG479o2lQ0QXk1EhYFgmlD2mIRkYhRwqLEaA2GiKWV7rZLQ0sLwbZId7t/Zq4PFK1125m5s/vCedz7nXO+M9/N3jsD1xFEvgXlTkrI8hBQBywFbgEqgEvAMHAayZcYHBYbuZJP77yFkdsoR+ct4GXAb4OSQPARXj4QzzGejx7yEkZuZy2CMLBAgf4nkhfEi3S67UNzQ5YSIXfQhKAdtSAACxDsk2EapXT3cF2FYQdNSN7F/YQFsJkw77gVUcL01mp3o5EDJoK1Yj37VchKjcjdlJEmhvrWmg9jGNwhGhhzSlTbZmnepjBBAMrReF2F6Hgy0+fIKPb+flWRIMtip+eQ88lcPRCtg3gCCVZ3RqhPDbJepqlPDbJ6XwSvP2nDJYCXB522prLN6iwrPIEETw33U/VoLZovBPjQfCGqHqtl3XDUZiBrn1lQCXO3ZcUDLV34Su/JueYrW0btnp8tNSRLnTamEiZoWRF6uHre9dseuT0vPrOgEqbCWtW3xNX6VSy02c+/sk4JwF+WFWZ6xGL9vA2fyzb7+QcqYUYtKwYP9s+7PrA/bsNn/geSA87DSLosa44+fT/p8VM511Jjp4g8u8KGk7XPLKhM5qhlRSbppzV4JwMdEcz0WSCNmT5LrC1CS/AujKliSw1BxGljzm8AH3MjHs4BpU65DjCBn0rxDJNOSI4nM33F2O2U58yEnU6DgOpF02AzcEGJa40LZHlfhagUZvp6vkmFawObVK7/4PLFSoZpBZ50ozEThsne6i2hjZqmFRVJ6U8JUeSVUmQNzQvg0c1MVtNMIUTSl0pNLhsaGu8A4xrfbZhS4CRQ5SoFcCWtja/5NBg+N+GZsu0vhSEkcY8mf+iNx+OuX3llmJVABNCVNUA2fl3xWdvJkriqRBb2uPugAYgNHEey1Y3Gt3/ccNxFEAChm2al6zAAjNAEWF/rc1Ev6+ffOLTwmBt7E0xD02J5CSOayQLrsHMJnYGMITJvHrr588mUMKyr54CUaaHrnfF4fCQ/kwHEBmLAa044rb+WHP4xXnxJ0VJK6CkyjO2xWOx3KMSH8zDtwONWdb2jvt41u4JtChZJKeVveDwnYrHYfw5uj4KYFRpSWbGqyCPL5ypIpMTkKwcWfWVXUEqRRcio1LTuUCjUE4lEsrnq8j4ZgKEP9bpgmfHFHPpyy3fle3f9Uto3n4aUIqNhDghN6zZ1vTcajaasfAsSBmBwq7f11tLM/24Hx2L+n+rbF38zBy2JEP0anPEGAj3d3d1pJ56F2GYAGInM82M+bWW53wxd++3ipH7x1QMLj8ysk5BAyj6Ppp2+d/nyaEdHh/I/W8EmA3Ci2b/iviVT3+tCerMmxkudiz450hcYBSYQIqrDmScGBvqawSxkH3lDV2Pxe6ltItnWcFNLTXX1qpqamkoK/BCvC/wNB+l5MdQKNHsAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS7SURBVFiF3VhNTFxVFP7OfTNvOjMtM9AoJSSYEEVMCv6kJi5NoCa1TRqNxDTaFhcWNSmxaaxNQ0w3mqgLdGeRhKFYXVC7qDU2BhVt/YdqEQRhRgYTKD8VZqAMzM+7xwVCcIR58+6b2fRb3nO+853v3fvuu+8CtxEo1wX5pTu2IpasBfEeSFSCUAygCMAsgEkAQyD6DClXF3VMLeZSO2dmuN7vB+MYiBsAbDEn8BIIZ6BrzdQyF81FDzkxw8/594P5HQCFCvQ5QDRSYO4Tu30IO2QGiA/5XgVzAGpGsMKTZ/mw7wTbfLi2yFzvOwngpJ0aaXidAtG3VcnKZv5dWgE7Nf5fFBJCHqK2hUsqdKVG+EihDwn5K9SXViZEAHqAApGIVaLaO5Pg48iPEQDwg2WjCtHyzKx8RxJBZLP9qoJ5CdJ9t9XvkPWZiSVrkY0R3b2MxnM9aJ2Ooi3iRut0FEc/6IHuiZtyidwQ8RqrrVk3Q7zHNEd3L6N5eAYP7q2BppcB0KHpZXhoXw2aB6eyM8SPW23NuhnGvaY5L7T2w7Nt54Yxj68KDS19WSiZ66RBZQPYYZpRvfuejPH7H8scX0FJlv2sQcVMkWmGpmc2bBbPVicNKsvslmmOkZg0id/IQmkhy47WoLABYNo05/rnIxnjv1wOmtbgLHTSoDIz10xzzhypQiz624axWLQPLQ3V5kLUa7U1la35G9OcRMyFY/cV49qlLhiJMQAJGIkx9FzswsuVO5BccpnryKuWW7NK4IPFXmjLgwAKrHItYB66t5JaJmJWSJZnhjqmFiFxzirPIjqsGgFUD5qC3gRjRolrBsYMQEr/NEpmKBCJgHBKhWteHKdUjv8rVBvgw773QaizU2M9DMb58q98rwghXC5md5zI5WSmlCGcAODQZDIlhCSiJT0eX6waH490AsYq356ZZ4oK4DSuAihT4UuGYIaQILGQ4vknen2BibhYzlqfySBG2CH4ylA4HLb9y8v1BY8A9CkAzVwcZDA0BgkG0+oFBjP49Ij3o48n9b9U20gB7bZuZwCAAvM/gPndTDmSIZKS9CRDNwCHBIv1NzFdfzu/t2EEAEiTstS2GQDA2PwbAHrSh9ebSDewihtxMdn0h/dbO/ISkIYQoZyYoW6kYOD59YdQg8mRYjgleFONpKRk07D34qJBxmY5pmBOkKZdCIfDk7mZGQDUER0FUROwaoQdZpd6H07oXT/OOWYVJZmBQZdhvBcKhfqBfFyc1xcEEpKeNjMytOgYfqp32wUFiSVm7oPD0RsKhf5zsnYoFMsMyccTUtvtFHL7ZimxFC2eGPJezrYkM6VAHGQhBsrKyga7u7tTG+XlfGYAIFxXuLfEzZ288fvCb4U858+Ou0KZajBTUkCOkhADUtOGgsGg6SVIXswAQKiuqK3UbRxIH78yq//8Yr/3i01oSyD6UwDDTo9ncGBgIGFFM29mRh/FFm+J/3qBk+9aHbsZFzf39WwN3DK0tWXCQAzMIw4hfq/etSvY2dmpvLPlzQwA/PTk9od3eowvhWCnZEodHfC2fz3rnAEQBVFQA4YPjI6OnAZkPvvIGb7bX/Ta/LP+SEftne0V5eW1FRUVpcjzQ7wt8A+9at5zXMB2DQAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAP0SURBVFiF3ZnLbxtVFIe/e8eOPU5DapI2whEWyiILJGDTBQuWSGTTSkVlQRGs2MGSh4RoQWLB4x/gpVIViNokJUV0U4RQXKgQr0ookCYkdjONSJtQJTGltjO2Zw6LJlEbkszLTgQ/6Ww859xzPt97556Zgf+RVKMHFGgD+oADwP3APUAHsABcBS4BXwDnFNxsdP6GSCAt8LZAWUB8WEngLYHdO137HRI4JLDgE2K9LQg8vtMMCCiBowJuSJBVcwWOSBOWfRCY1yJCrLdXdwrkUANmZL05Age3G2R3hD3iZYsC6TB16ZA8rwB3h4z1Uhp4MUxg4A23co7MA2aYhD5VBrqCnkNhZqYPPyCpVJnh4Ry2PYNIFdue4fTpHKZZ8ZEjBTwWorZgEvjEc92nUiUpFn+VjbS0NCqm6edgPbEdMD97FjI8PLIhyKoGB0d8wPy0HTBXPQux7Stbwti25QNmNmhtYW4ANtCytZNUPXxslEp4pKoq8PK5Q2FuAH97elSrcx7Xr/nIc8NnPWsKAzPv6XH27OUtr585Y/nIs/Uf0ggJHPdc76ZZlqWl0Q33y+LiqCSTFR975th2wDzjqy0xzbIMDo6IbVsiYottW3Lq1IhPEBF4ejtgdgkUm9SXrVpRoDVobYH3zEqLcTxoXEAdU1Bqco5bkluPyPNNmpV5Cdk1RwE63CSYw2FrivSYKtBPhOTr5cDJnmz2Oa11IiFi2kol4iKq7ug4QMxwa3WtXaVUpcW2Sw/MzhaHwFmNjwrTDvwC3BeJAripdXF/JvP+H7HYsu/8ohwlWDEt305YlhX5BYLAI0AOMCKMIUc6Oj4eaGuzwg5RhxNhnzTXpOAC8E6UMb5qbb0QAQRAGa7bHRlmRUeBH8IEzhnGtZc6O89HSe6C62hdaAiMgjrwFH6a0NtUU6r28p49n5WUcry9N5FIVRnGsGVZc42aGRQUgBeCxPS3tZ37LplcCJlSBMYTjvNeoVD4baWGxkpgEHjCy2+ipWVifyYzECJFRURGicUuFgqFP2+/0AyYTlupyYTIpqd4WanSwe7udy/HYr5aFhFVR0letB7LZrPjuVyuvpFfU97tzhrGgYzjfL7J+PJmOn3yo/b2qa3GEFE1jTuttB5zDWMin8/bXnmb9qJ6Jh7vv7dW+1d3cN40v3+2q+vLTcIqKHVZw2Q8lRofGxurBsnZNJhpSLZr/XvadbOrv103jOt9mcwHNwxjbZkIlBGZiml96cF9+/JDQ0Oh72xN/YRw0TQffmh5+RtDJF4H5/m9ez/8OpWaB/5CqbwBk09OT0+9Dm4z62iYfkwm37CVqgzsuuvT3p6eR3t7e7vZye8w/xX9A0ynxee2hlfFAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASKSURBVFiF3ZhdbBRVHMV/9+5uPwikFExEiCtWbSKCCEsCiU1EJIEXeMIHxZgYPzBUYzB+RUPlwwTl1UhYFIiGhrQVFCMRAoQFidGaEgIuVLrbLgSkhWBb2N3uzs7M3weBILadnZndF87j3P8553/m3ty5c+Eugiq1oDy5dRw5czGKpQjTgPuAicBV4C+E02j5gSFrn4o3pkvpXbIwMmNTLaHAByjeBKqLoGRBfY4V+lSdeGmgFD2UJIzM2bwMUVFgggf634i8qo6/vttvH9oPWRAlkS1NiGrFWxCACSj1rUSiqwXx9XJ9hWH2liaQtfifYQWsIxL9yK+IJ9xYWq1+NIaBjahl6vhr33khe2pEntg+noCRxPvSGg39GNZD6tTKfrdEb8ssaHxIeYIA1FKh3/VCdD0zN74jfRS3/XpFlpx5r9vvUNC1Tc5cTDFBqoJZ1i9opyFcR0hPomD3cvR8N02H55IvOPHHUB1aBOxy05r7ZaZY6lhTFcyy74Vunp46n5AOAxWEdJhnps5n//IElaEhRw0pwucOuA8jPOpYs35BO2Mrpg87NrZiBmvn/+aooWSa29a8bACTHSsawnWjjj/1wIOOGlKEzx3wEmaiY0VIT/I1/i/uKbKfW/AS5rpjRcHudRi/VITPtSL7uQUvYfocK46e7x51PNaTKsJn9BcyDDyEkXbHkqbDc0kbp4Ydu54/xcexec42OPvcAS9b82HHmnyhmkXND3OwJ0bBPgcYFOxzHEjGWLTjEQyryrkzFXPfmkvIY1+MpSp4Aahxy3WBQQrVU9TJFzNuSK5nRsUb0yi2u+W5dNnqNgh4PWjmrXXAZU9cZ1zGMD/xQvQU5sbxfJUXbhFY5eX4Dz5/rCQSbQae96NxOyzsnXVXNjRqrSsrRarzSlWGRJRp6RBAMGAXTK1tpdRQRT6fmXHx4kAbWDf5fsPUACeAqb5SAGkxBpYMfBW9YA/mivYXZSkhFdTyc2cqlfL9yyuRaAMQAwKeNUBWZ376piV3IuVVwoSv/V1oAKpjxTGQjX40Dhh/HvMRBEAFbHuK7zAAjOttApyP9cOg17526b303iN+7G2wLa2TJQmjYmtMYDnFHEJvQwGr8H5m766M5C3n6hEgYqhAYHcqleotzcwAqmNFEuEdN5zm3PF9vxipqx4tReBMpWVtTiaTf0A5Ls4j0VbgWae6TrOvc8ngthYPFkMicpJgsCOZTP7nw+3+QsMZK/NiLqxUwdqRCrJ2PvNWes+PxQqKKBMlCdE6Hg6Hz8RiMXO4upLPDMDFWZ8tnazHfz+CvmzIHNy5Lfd712gaIqqgsXuU1nE7EOhMJBJ5J9+yhAE4P2tj8/265n+ngyNG8tdXrrfuH4E2hFLdGs6Gxow5E4/HDTee5VhmAFj92Zf7J1Q01Krq8M1nV+zMlbfTew7dXieQRaQrqPXpx+fMSbS1tXne2co2MwAds9fMm6kmHQ2gQia29ca13V8eKnT1AYMolQjA2ed6errWgF3OPkqG9pmr1+cjm4ZapjfuqK+rW1hfXz+FMr/EuwL/AGOdsbn1H7gQAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATNSURBVFiF3VhZTFxlFP7Of+8Mi12Eot2Sia36IIJCIWmT0lhSK30wfaoaNcampBhrfGhSl5hIW9HE5VFTpWilNpUI0hrTh1YwjJSkthFEcABhBoZ0YekCFGa72/FBSLAF7jY86Pc453znO9/9//nvuT/wPwIlu2DLns1Lo3J8hwDtZHA2gNUAVgC4SYRrzNxFJH6UpNjZ4iOBqWRqJ83MmVdzM7y6520CvQ4gzQIlSoxPJVX/sLi6fTwZPSTFTOMrhbuYuRJApgP6LRDv3V7ZdsptH8INmQH6aW9BOTPXwpkRAMgE0/eNZQXvssuHK7khF5VtOEhEh+F+hQlAcX/hGu1E61CzmyKOML21at3UmAMGM+96qqrttBOyo0aadufdq3mlEJxvrXlBwFhcUh58+vPOMbtcR/8ZzSu/g0UwAgAMZHgN7xtOuLZXpmXP5qUxOT4Ca8evU0RlOb7S7ntItq8S30EWjEje1GhOacWlrNyi9SR5VrGuDo92NPd3HSvfqCsJM366pqaVAKi305vtbSZAO81yJG9qdMsnZ/vvyyveSpLHB8BLkse3Mn/b1i0fnQtK3pSYuRKb6tzdm10QP2KWklNacUlOXZIzV0xOX5KbvfvwRXMdyrbbmm0zzFhjlpOVW7R+ofj9eU+ss6BkqnMnnJxmK8wSSPKschOfRpbljqbhxMykWQLr6rBJfMiCzm3LHU3DiZkRs4TRjub+BeO/+8MWdBZ8IHPBthkiXDLL6TpWvlGLTnXOFVOjk52B6oObzJXYVOdO2D8AQE1mObqSSDv/VslDI62NftbVQQAK6+rgyG8N/vNvljxsqEqqqQ4Lv93ebE8ATfseXaJpqVcALLfLtYEJI6auLTnREbFDsr0y/4wY9LVdnh0w4yu7RgCHg2ZCSrwHYNQJ1wJGFVl53wnRkZnp8Xy/E64F7Hcy/gMuP6waygpOAnjBTY3Z0Bk1ZeeuvyaESElhTksQpXiYSdOFBwBkyVA1IQwiinkTiUju1avjdYA+w3drZjkB7Qw84NIH4hqPV1wYr7wVM+JWOcykEyMsCz7fEw6HXX/yNpQVFAHww819AoNP9kS+abkcDzutoAHHXd3OAMD2o60tTPjYTY3260qLCyMAQJJhrHVtBgA8q5eWAzAf6+fAeNwYqu6c+sWNvgEYuhChpJgpPuTXBPAiLAyhs6Ez1ONdkfqEzrp59jxgVkiSToXD4eGkmAGAbUdbQ0R8wA7Hfzl+tueGctOhJDPQnaLrX4RCoT+BRbg4bywrqGXgGbO8K5NazwcXJr5zIBFj5g7IcmsoFPrXi9v2hYYZJGBfzOAnPYIy5stJaEbky86pM1ZrMpMG4iALEfD5fN1+v1+bKy/pKwMAtS/n78xIET/MU5/r/4rUNA7G+xaqwUyqgDFAQgQMSeoJBoMJM91FMQMANS/ln8xKE3dNB4Ebyq+ftU2em4cWA1G/AHo96endgUBAsaOZ9G02g7g0VhpRMovu8ZJv5rcJxbh+rHPq59l5DETB3CcL0fVYYWGwrq7O8cm2aCsDAFXPbdjkW0bNguDRDehV7ber/rihjgCYAFFQAnqfHxjoOwQYydBbVDMAcOTZxyvWLZMPXBxS6r/tjlRDlrt7e3uvAeDF1v5P42/pFun0pc2xBwAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARrSURBVFiF3ZhNbFRVFMd/985H26m1VEoL0zj0Ayqi6IZElpiQ2MSgIeJCDZGFuEEXJH4bG9QN6spoImiMIaExbREEYoIxhgEb1CZNjFg6lHnTacNHW8QW7Mx0pjPvuKDVprR9X1MX/Jfvnv/5n/89N++d++AOgip2QolRQZAWhCeA9cAqYDlwHbiCcB7NcTKcVA8wUUztopmRQarI8wbwMlBmg5IGPkGzTzUwXowaimJGEmxHOADc44L+F7BLNXHEax3aC1kEJQatCB24M8I077DEeUfE2+Z6MkOCVuBdvHdYoXgPg7e9JXGJ6aPV4SXHPDARtqs1HHVDdlWIDLAMEwP3R2sxjOGnSa1mzCnR3TET3mJpjABUkedVN0THnZEYFQQYwd7r1y3STFLr9DvkvDNBWrBjRIfS1B6J0pAdolFyNGSHqD0cRZVlbKiEKOUxp6U5N3Pry26RNZRm9ZUE5ds2o4IRIIgKRih/ajOrr8RtGVI2dObKOiUA91tGrDjUjap8cH7FZRuoOfirZQ5hvdPC3JgJW0aEHm9cfP3JBsscYkNnDtyYWW4ZoYIrPa0DKKptVzQN52YUf1vGSG548YDcVRtKN+0V9B/cvABGLGPSJxKLrqeOJm0oWWzI7XBzzLotI0Z3PII5fm7eNXPsHKM7NxVFZw7cdOaUdUymjMHwGlKdUSQ3COSQ3CCp9iiD4bXIZKllDkXUaWnOJ4Be7qKUS0ClU64D3KCcOrWSlBOS485MjxhfOeU5xJdOjYDbqfnWFTkG1LjhW2AUP+v+t6l5WmiPG64N7HFjBDxerMSgDXjWS47ZKBT4unFLZLfWuqREpCyrVElAROULOgDg95lTea1NpVQmmM2mNly+PN4JhRm+VzOVwG9AvScXwERaj2/dFT5wadg/aVtfVEEJSb+Wn2LJZNLTPwDVxA1gB7N2xw1EkH37q445MQKglPjQ0pSH5+vr6+u9/dAAVBNdwIdecvzQVd7V/l1F0ksZPtOs82wGgCFaAeuxfh4MX/Ndfe2D6tNe5E0wC1obRTGjHiWPyXNgYwidhakpNfX6Ryu+SWWU+2MqklM+35FkMjlcnM4Aai0GwitOOG0nKk6e7Sm97lJSBPpKCoX9hmH8AUvx49ygA3jaKi5mBGNbXwy3u5DIiMjv+P09hmGMzl4ovpkLVGcLqr+kRKoWikmnVWrb7rrPEkN+WyOLiMqjJC5a90Yikb5oNJqfL87vtuiFoO7jz8s/653hmsK3zL9Z8vHBZcesjIioKY05oLTuNf2+WDwezwIkEgtflYremRkMdQXa7l01ddt0cLq77JcX3qz9fgFaBqUSGvoDoVBfb29vzonmkpkZOEVpZaW+UFVpRmaeXRvzXWvZGf785oTv32MikEbkol/r8w9t3Bjv7Ox0/WZbMjMAPcfLNj28bvKMzyeBfIHCS3trvvjxbGgEuIFScR/0PzMwcHEvmEtZR9HQfaz0/WxMZdo/vftQc2Pjlubm5jqWeBPvCPwD/KOH+jnO5aMAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASxSURBVFiF3ZhdbBRVGIafc2Z2210hbeWnpcQVUC8kwBUJXJBIgwkgBEPEC1GMxhgE4gUJJsYERMWI3orYaiqgrYSWH/mvMaQLciE1RAKUkrLbbhMobQ20/LT7N3OOF0CC0O7szGwv9L3c73u/93vnnD3zzYH/EUTBKx6sHUvQWgR6GTAdmASMA26A6AYuofUhQnYTVevuFlK6cGaObC9DGh8i9PtAKA/GEIKvSRZtZfnbA4VooTBmjlWvQFADPOmBfRN4l8Xv7ffbhvTF1lpwrHoTgga8GeE+by9NNRvR2tfDNfyQmVv5MYJP8L/CAqgidtai/sgpP0W84d7WavBV43Eo0CtYvOaAF7K3Rg7sKKU4Hcf71sqFfmz1DEvX9rslevvPFKc/YnSMAJRhyA+8EN2vzMHasQSzveR3/HrFEMV2udv3kOlaJmgtIg8jYcMcqpu1oGXJhMi0oJQVGaV6Dvd1day62DwnaWWd+GHSciGwz01rHraZXuaUETbMoe6qVR3Ly6fMD0oZAYJBKSOvVEyd3z3/jVjIDCSddYSjzqPwYEY875RRN2tBS4kZnDFcrNQMztw144UzjjKa6W4787IylU4ZSyZEpuWKv1w+dWohdB6Fl9NsnFNCUMqKnHGRO34PYnz+Ld2DFzN3nBIySvXkjGt1PQ+d23l3dB9ezPQ6JRzu6+rIFT/Q25lwVNHkfCDDwYuZFqeEVReb5wxYmQvDxfqz6QtvnW+e69yZcNR5jOKWgKbZKSVpZUOV0bpnG3vi0YxWXUAmo1XXnp54tLL5p+dSyi52FlJRt625nwCavxlDyrgKlLjm5o9byPBkFr456IbkfmWq1t1FsMM1zx1q3RoBr4OmpT4F+jxxndGHrbZ4IXozs3RtP0Ks98R1ghDrvYz/4PfD6ti39Qix0leNh6H07siaL9ZJKYuKtA6lhSgKaC0sWwYATENlLSmVECIZTKcHZ167NtAI9gO6PzO/1ZRg6XPAFF91AJnKDES21NaYN26l8uVoLWyhSZhS/345kUj4/+Q9XjMPdBR/9wl6Qn3TjyWnzyW88i3Y5e92BmDx6tPAV35KjDnXftqHEQBhKDXZvxmA4p5NCJzH+mFg3rxzvXzn0ZN+5BUoW8p4YcxUbbZQ4nXyGEIfhrDt7MS6o/tEOm07Z48ArTPCMPYnEomewpgBeGl1HMQGN5SSk381hdsSNzwqag1tRbZdHY/HL8JoXJwfr24AXnVKK7rae/mpz3fs8aCQ1FqfxzTPxuPxf7243V9oOMESa4XOvqgDZtlIKTKVHpz4w6Ej+ZbUWlgIHdNStkYikbZoNGoNl1f4lQGM3V8us0tLfhmhvh6/98Tu0hN/XslVQ2uRlahOIWWrMozLsVgs7aQ7KmYAAnVb67PjSh+bDsKtHX9Ubmv4dQRaEiE6JLQHwuG21tbWjBvNwm+z+8hmU+/Iu8l5akwo8uA34/bg3+W1B088nKdhCK2vmFJemjV7dqyxsdHzyTZqKwMQ2r55bmpK+SktRABb2ZO+2//9E+djvcAthIgZ0P5aZ+eVzaAKoTeqZgCKt238LP10xYaxZy7tq/j5+E5Ms629vb0b0KOt/Z/GP4jqqfL5oxVsAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS8SURBVFiF3VhdTBxVGD3f3Rl2oRAstZXaBGxpoxaxhSVpE0ha0ib0qU/1QX009UHjQ5Oa+BO3pdTEn0QffNDGGH+SprGUqlUTSGtcKfGHBELALYTuwGJsSyEVKLuz87Mzny80sQjMzp3lQc/j3O+c8525N3fuXOB/BCq0YNNoU5lRZBwipsMM3glgM4ANAO4AuMnM14QQl7LZbFeiNpEupHfBwtRN1q1Xc+orBHoJQHEeFB3AB45w3hrcOjhXiB4KEqZxvPEIM58BUCFB/4vBRwdqBi4G7UMEYjMoqkVjzHweckEAoIJAF6LJ6BvgYC83UJiG8YYYgDYEn2EC4VRUi74eTEQSi0vrfBCNZeAy85GB7QNfyZClGtk9sfuBkBvSIL+0VsOspVg1w9XDs36JUstMYeU1rE0QAFhflCt6WYboe2aaRpvKDNW4jfy2X1nohmE85Pc7pPh1MYqMQ2DvIBER0ds3tvc1lzRvU0mttNme6tF7xmPTsT0mm178kuJIcSuATj+9+V5mxHTYqyYiInpXddd4y7qW/SqpVQCKVFKrDqw7sL+7ujsZpnDWS4OJPX2WwncYBj/uVdO+sb2vlEqfWG6sVJTWtW1q+81Lg5h2+u1NZgN42KuguaR522rj+0r2bfXSYGZPn6WQCbPBq0AltTLIOACA8KCPngDIhCEseJXYbE+tOg77Vh5Od/PuaRH+wzBue5X06D3jq43HM/FUHk6rvpDlILPM+rwKYtOxPWk3Pbzc2IK7MHxi+sReLw0Ge/oshczW/KNXjclmcetk6/YrmStxm+1JAJbN9uTlzOV462TrDoutiGdjJOK+e/NLqE3UlkYikT8BlPvl+sC8vc7eMlQ5lPFD8j0zidpEmkCf+uX5xCd+gwCSB01TMU8BmJbh5oFpS7FOyxClwiwez4/JcPPAMZnjPxDwxyqqRc8CeCaIxn1wcG7m4MyLQohwmLnYJAqrzJRzhAoASsi1c0K4RJQtMs1M3Y0bcx2Ac48eNEw5gEEAjwQKAYB1nksfnTvjTrlG3hwmhxgpRfDV0VQqFfiXN6pFmwHEAYSkRRisv5/5wv7eSMkq5IDPg93OAOiv6e8F8E4QDbvX6g0QBAAo5LpbAocBgLI/ymIAPI/1y4Fn3FvZt9M/BfF3AdcRQitImHhLPAcXzwLeh9D7YMPW3810cpYd7+IVwGxRKHQxlUpNFSQMAPTv6NeY+bgfjvmt0ZXrt+5IWjIDI2HH+UjTtN+BNbg4j2rR8wCe8qpztdzowvPzX0pYZJl5CIrSr2nafR9u3xcansjhBXb4IIVp/UolrLuZ9On0d/lKMlMOxEkWIlFVVTUSj8dzy9UVfGYAoP6X+sNik/h6BX02PsycMy8Y11fTYCZbwJ0gIRJuKDSaTCZNL981CQMA9b31Z8Vm8a/Tgd1n/aq/utC9Ai0LonEBjKklJSOJRMLy41n4ZbaIWXv2uYr5imYqp6p7z9xZdyb7ZvqHf9YxoIP5uiLEtScbG5MdHR3SO9uazQwANFxq2EuPUQ9CUOHA0U/e/dj+2b4NYB5EyRAw9vTExPWTgFsIvzUNAwC7vtnVrjyqHLeuWJ3me5nPoCgjY2NjNwHwWnv/p/E3iQfm3w9KV7kAAAAASUVORK5CYII=",anchor:[.5,1]},{
src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATaSURBVFiF3VhbbBRVGP7+M9NddtmyvcYKSbGoAYn4REJNIGmRpMREfMEH5YEYY6ptfCCBxEgEvMR4eeCBtBYa1EIIsbVAFAIIsis0og1GpJbWdrdsiUBLuXQp3e3MzpzfB23Cpe3pzGwf9Huc83/f939z5nLOAf5HoGwL7m4ryjWssdVgWkPEi5npURAKwbgJ4CoYF5n4WyBwrLZy6G42vbMWpv5MOJ9s+TYz3gIQUDtzCkw7DGgfb6gcHs5GD1kJUxcJrSWinWAUuOjgFkt+vXbl3QNe+xBeyMyg+lOhLQRqdhUEABgFRPTN59HQu8zebq7mhVxSEdoKovfgfYYJoMpzCZ91pMk87UHEHeoiobUEavai8RAYkgTWvlkxctAN3VUj2yN5eX6y464fralxG7p4vGZF8rZToqt3xs/2OzMUBADykZGb3BAdz8zutqJcI2MMYjqfX7cgTjEHHnH6H9Kd+hjW2GqAlEF0PZhataixfX5h1QJBvhLJ5kD/jaN9J7url1l2amo+U1BwugpAq5PenD9mTGtUJboeTK0v7+0rK3qhQpCvFIBPkK+0rPjFivXP/hnTtWBaaSPUPg/CzTvzlKpg1aLGdp+e+/REYz49vGTlooZfVBrMWOy0MTdh5qoK5hdWLZhqvKzo+TKVBpHa50E4D0MoVIqSr8TL+L8omnZP47pOCWCMqEokmwOK8WvT8LnjoCsA7mZmUFXSf+No31TjfTeOJKbhNOUNmQiOwxCjXVVzsrt6mWklOyYaMzLDHae63ihXaTCpfR6E4zCSKaKqsexUoOnswifiQ4eiks1+AKZksz82dDDadHbhk7ZMz1I3RlGnvTleAdRFikOEsb8AhJ1yHSA5agbnbaoaHHVCcjwz/ywx+EunPEcg7HYaBHC7OdO190G47oqrAuE6NPGhG6qrMDUrkrchaYMbrhKSNrhZ/gMeN1b10dA+ML3iReNe2JL3f/ZqQa0Qwu9nDhhE/hxmsmyRAwC6JjOWEJKI0j7DGF1y5cpwC2CP8z2F2XkiP2zr1nkAj3mLAZhpMbx3a3hnckiMTZfDTDYxErrgM92JRMLzlrcukrucgCi8nCcw+MSe2Xs6orMSbhUsoMnT6QwA1FaOtIHxqReN2G/+Ng9BAIA0Ked5DgMA12lkCwDlsn4ijNyia8d3zf7Ri78EpC1EPCthtlXC0qRYB6gXofc1YSNz/Is5rYZBtrp6EjCbpGkHEonEQFbCAED1c8k4GBudcM6fmnXscqd+06UlM9Dlt+2GeDz+BzADB+f1kTnNAL+kqhu6rHfv3Rr+2oVFmpkvQNd/jcfj9/24HR9oqKCBawyTVuk+zp+sxhyj0cMNocPT1WQmC8QxFqKztLS0KxqNWhPVZX1mAOCT1rw1uQX2oUn0+fT+4P5z3wd6p9JgpoyAvERCdEpN647FYobKd0bCAMBHzeF9ecXyodVB4kLOzwe2zzk+CS0Noj4B9OQEg12dnZ2mE8+sP2bjMEeTr6UD4eWBkCwdvzZ6Rwwd2TX7h3vrGEiBuVcX4uIzS5fGWlpaXH/ZZmxmAGBzY0H53AXWaRKcI23Y3+0INcZ/9w8CSIIopgE9L1+61LsNkNnwm9EwALB5V8EHJWWZjV0/BVpPNoW+gq539fT0XAXAM+39n8bfE7XcWzV66JYAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAR4SURBVFiF3ZhbbBRVGMd/58x2u7vQbmtvssSNAjaRiE8k8oAPBowkVTAGTVAJJMYXiTGYNFxisHiJ7ZMPQiIxxhRLCG1tjSBRubiAJEhiNDaFSlu6baRQELsI7e7sZY4PlKT2sjNzZvvC/3HO9//+33++M2e+GbiPIAqesYkSLNYgWAssBRYAFcBNYBjFBSTfkuR7GrhTSOnCmfmYcgTbgbeAoAPGOIJP8dPIVhKFKKEwZppYj2If8IAG+x8Eb7CNDq9lGJ7YCkGQXcBeIKSZJQi8zDNYHOMMu/XL8WYmxHvAbrx3WABPc5YsxzntJYke7m6tVk85psNCsZ4ddOqQ9Qr5hDJM+tF7RuwwimIxOxh1S5Racml2MjdGAMqBeh2i+840UYJiBGfHry7GSVHj9j3kvjMWa3BgJOQPjXe82BEz680htU2lzXpzqP2F9ljQF0w6UAlRzLNuS3PfmUa+Al7LW4k/ND68Zfhy2B9+fOpawkx0RfZEliSzSbsbsp/tbHJTms4z85hdQMtzLednMgJQVly2rLmu+RcHOkvdFqZjJmIXULe4blG+9XW16x4phM5U6JipsAvwS/+DXtYnUOm4ognomLltF5C20tds1q860PnXcUUT0DEzYhdwuPfw5XzrnZc647Yqgrw3ZCbomDlvF7DxyMYnE2aia6a10dRo1+bvNq+wVVH2OlOhY+Ynu4BkNhmM7Iksaetpi6Wt9CCQTlvpwUM9h2KRvZFHU9lUwFZFEHNbmPv3TAPzCfAXEHbNdY5bGCyknjE3JPeduTtifOma5w5fuDUCuoOm4n3guhbXHtdRfKhD1DNzdzzfqsW1x1ad8R+8flg1cgB4xVOOybA4GP0sukVKWVysVNAUorhIKZHNySIAn2FlslJaQoik3zTHll25kmiD3D26VzNh4HfgYU95AJmRiWhrZJ/vti/llKOUyAlF3CfVmZ54PO79k7eRlUAMb/8TVNWpiv3hiyVxXX4Wmr390AA4zhCrCCB4SjfF/IF5P1eeK//NQxVCWNYNvQNgKkx2AU7G+mnw3TGu1pysPOVF3gIrJ2V/Ycw0kEXyKg6G0MkQlshUn6r6WmREzj56FiiVFobREY/Hr3nfZvdwjFFWcRPB804pZV2lR8PdJXmH0jxQCnoCuVzrn4ODgzA3P85bUbxkF1b8t7/nofbIIQ2FpFLqD3y+X/v7+//34vZpJMsPgzeFKVYrQ5XPFiIzYqz6ZPURpymVElmE6lNSdkej0YuxWCw7U1zhOwMY7xprc/Nz38ySX1WeLT9Y1hXuzZdDKZGRWANCym7LMHr6+vpMO905MQNQtLPoQKY0M206CA0Fz0WO1vwwCy2JEJclXCoKhS52d3en3WgWfptNIOPPvC5TcqUVsKL3rhnjxo2aE5UnJscpGEepXp+UF55Yvryvra1N+2Sbs84ABN8JrkhVpU4roYqwyC34sfrzefHQCHALIfoMuLRhYKC3Aay5rKNgCLwd+EB8JJKlm0pbahctWl1bW7uQOb6J9wX+A8zucxGCTS9IAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARZSURBVFiF3ZhbbFRVFIa/vedSZkTbClJow1irNpGIvpDIAw+NIYghqTHig6JGIoLSGEK8xEhoKpKovBoJg1aCaVNpsYhIRINh1D5oDYaIvUhn2qGhNwi2RabtXM7ZPrQk0Ns5Z5+ZF/7Hs9e//vXvtXP2OgduI4isZ1S1d0JmPVAJrACWAYuAq0A/0A7qWzBOIaquZ1M6e2bU/kLwvAu8AQRsMMZAfAK+jxCbR7JRQnbMqAMbQYSBuzXY/4J6FfFas9sypCu2UgJ1sBpEI3pGmOSJo6jwbpRytbnuzHCwGtT7uO+wAPZAeJfbJHqYPFqNrnLMhAliI2LrMR2yXiHqUAGkYugfrfkwDMb9iO3DTomaxyz1HrkxAlAI8m0dovPOTN4jQ9h7/epiDDJFTu8hjc5k1mPDSBDvWDPrIkm29Cq2ppJs6T3KukgA37gNkSD4nnBamc4xq7SuxDvWzwvdT1Na4UeGAL8fGXqG0op+NkVtGrLUmQ4dMw9ZBdTxeGs+/odnWyvAv/IwFb9by6gVTgvTMVNsFbCBUNl8609x733Z0JkOHTOLrAL8yKVu1qew2HZFU9Ax859VQApz0GJ9wIbONdsVTUHHzJBVwAl6u+dbP0ZP3IbOvBsyGzTMqFariBc589gIqfOzrQ2TPP8ykdU2hCx1pkOnM2esAsZJB4qpf6CJnkgK8yKQSmFePEIsUkzdgxMYC6xlRMRpYRoTwKcLwXsJyHfMtY9RCJQgXko4ITnvzOSIccgxz5lIrVMjoD1oGnuAy3pcS1yGzF4dop6ZyfF8pxbXGjt1xn9w+2GlwvXA865y3AzDbAiVfVglpczLUyqQFCLPp5TIGNIH4PWY6YyUphBi3J9MJlb29Y00gXGD7tZMPnAOKHWVB5DXUyOhJz8Pey+NTtiWV8IQirhXql874/G4+09eFV4DRACPfg7UPbu+/zK/4VxcN0MGDrv8oQGIbS2g9rlJsfDHf1pcGAEQHtMscW8GgMFqwMZYPxPegWsDRW+e/NmNugmmIWUsO2ZETQbYhI0h9BZa2kgveefk1yKRNKyj54BSKeHxNMfj8cEsdQYQ22LAW04o+XV/ngq2xK9qKioFHXmGcSAWi/0NOflxHm4EnrUKy2sf6ly+4YsjGgrjSqm/8HrPxmKxWy5ur0YyK2wXycxalectnCtAJpKJJTuOf2c3oVIig1BRJWVbKBTqiEQimdnist8ZwNP3caVRXPDNHPnV4r2nGwpq/+iaL4dSIi0xe4SUbabH0xmNRpNWujkxA+Dr3VefXp4/YzoIRmK/FW9u/GEO2jhCdEu44AsGO9ra2lJONHNxzABIG2OvyGH/GrMwELrxzHMlcaVox/Gfbo5TMIZSXV4p2x9ZtSra1NSk/WbLWWcAAmdrVk88uvQX5RE+Mqax7PXmz+443TUEjCJE1AMXnuvp6aoBM5d1ZA0LWnd/IJL7x+/6qqquvKxsbXl5eQk53sTbAv8DzFJ5Mvw8/r8AAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQLSURBVFiF3ZnPT1xVHMU/983QYcbqlNZoCmEkqCxMtJsm+gfQ2KaJqaYurDHaZeO2dmH8lZg06qZLtYY0RhqkKFrd1KYJE2VhqiQG5YftDAwEShFpARmGN8y84wIxhQLvx8xA0pPczbzv955z7u97B+4hmLLXKN0PHASeA54A9gJ7gGngBtAPfAdcwpj5svOXBVIN0odIC0jyULJIHyDt2m7pqyEdRZr2aGJtmUZ6YbstgGSQ3kFyAhpZKQ7S20jlH/Y+zLxboom15a3tMnK0DD2ythSRnt9qI7tKmCNu5RZSTRBZVkA7bwK7A+a6oQZ4I0ii/wm3vI9MAtEghB6xADzsdx8K0jMH8WAkBgudkLRhVJC3YfQrSEYh54EjBjwbQJtPSF+4jfuYlJ2Rftc6uC31Rr1trJ9vhZlf3YR0Sl3rGVnBBanLg5lftsLMDTchtjSymRlbyngwM+5XWpAFwAZ2bBoCeZcY20DEhSmPMW4xqxBkAfjHLSAPN12+T3jgmfOs6D8EMTPpFvA9DG32/RvIeODZtEHKA+mc23iPSgu3pd715sstqbdaynmYMy1+pQXpmS63gBxEa+GxDkjmYQTI52GkHZK18PgiVHvgSfoVFmQB2AmMAXHfud4xC9RhTNZPkv+eWT5inPOd5w8tfo0Ex/IVebJCp+bJoKfmUgwdq5CZY0EllXZNlc4DgcnvQrHYlmhsfN2yrEhEitrGRKokUyhaVQDhkLNUsCzHGJPbYdvZJ8fHZzqguJJeqpk48BvQUFI9gDU/P5M4dOjT8NjYond6UzQiE7b002Amkwl6OVuGMbPAK9zROoEgac/p0xf9GFmmVwhLjxbg1YaGhobSzCzX2A18VEoVOy9f7o63tWVKURFynLryPO1IYaAbeNpvanhiYuKRAwdaTDYbuHcdcBw4W3rPABhTAF7GwyF0VdrS0tJDp059XYoRpLwJhTozmczN8pgBMCYNnPSTEm9tvRTr7p4OyCjBQKRY/CSdTv8BlXk4vwC86BYW6e8frD98uD0AQ05SL+FwTzqd/uvOD5Uw86Cx7WuKRDbcxa1sNlt35MjHkVTK05FFMgWMUrKsvkQiMZBMJgvrxYWDat4QxvxtjY+/Vqyt/Zb1G0u7z5y56GZEMksWzrCxrD4nHBpMpVI2wNDQxlelij1UV42Onl+qr7/rdBBLJn+uPX78hw3SchgzZMG1qlhsoK+vL++Hs3Kv7sPD1VY8/qdTU5NY+Sk0NTWVaG4+G5qb+3+YCBaQroctq/+p/ftTHR0dgVe2iv6FEO3peWZx374fFQpVUSgU95448dl9V65MArMYkwrBtZeGh6+/B04ldZQN1Vevvm9sO/fAl+2tTY2NzU1NTXVUuBHvCfwLna16k1MlopgAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATaSURBVFiF3VhdbBRVFP7Ondlddvqz/aERARtFMUos4YFIH3iAxESICfCABtqkCRiJtjGRBBODivhH1PigEovFGKhJXWktpdgQfDCugEFrCEhbitvdditSKIhtge52d3bu8YE2AWx7d2a2D/o97jnf+c43996Zsxf4H4GyXXD25ta8MSOxiiWvAWERCPeCUQzCNYAGwHyOGIf90I5erX3mZja1s2Ym8EJDYZq0V0D8IgB/BpQ4gN0ez9h7wx9tGs5GD1kxk1sdXM+EOgBFDuh/E9NzN2s3HHTbh3BHZzJqvt7BhEY4MwIARUz8jVEdfB1gVw9Xc0M2qh95gwhvwv0KExFWeh7vTJu/Nh9zXMQpcXxrNbqpMQmkBNYnPt3Y4oTsqJGCl/YVmOasKJxvrekwpEv54MieyiG7REdnxjR92zEzRgCgMC3Ey06Itldm9ubWvIQ/PojMXr9OETdYu8fud0i3qzJmJFaB1UZyvHp8b1V5++qyuQu8mpiTsuTlIx0DvVvqTy6Lm5aKbyRE+kkAzXZ6s73NWPIaVU6OV4+Hd63tXbtk/gqvJkoBeL2aKF23ZP6K8LvrIoZHSyh1AKXO3bB/ZgQ9qkrZW1XeHpjleWyyWIHhKaurKv9FqcO0yHZrdgkAz1VlrC6bu2C6+FOL5z2QgZBS527YN8MoVqV4NTHHTXwcszPuaRxOXs03VAkpS15WxC9loHM9447G4WSbDaoyjnQM9E4X//bMhZhShjDtA5kMDsxQuypjS/3JZcNxs2Oy2HA81fF8Q3u5Uoah1LkbDs4M/aBKiZuW/+FXDz3UcvpCKGXJfgCplCX7m0/1hxa+1rowkbJmZaAUstua7QmgpLoxN07WnwACdrk2MDLqN+fhw6pROyTbK3NrxKB9dnn2wF/YNQI4HDR1ab0F4IoTbga4okt+xwnRkZmRPZVDIGx1wlWCsNXJ+H+L6gI5NcEGABVuatwBtoLFbdtrhBA+H7M/SeTzMFPaEh4A0DVppoWQRJTwJpOjZRcvDjcB1gTdlZnCLY2BlMc6A+B+dy4AkU4Olxz7uE4khsYy5TCTRYyYLvj4+Vgs5vovb171V8slUQhu7hMYHOhs+dL4oz3mtEIaqHd5OwPcqK04AeADNzX8g10nXBgBANKknOfaDACMlszZAUA91k8CbWzkUuBs049u9CUgLSGiWTGDnSvTuqBKgJVD6O0gaZmB35qbyUxa6uwpwJwiTTsYi8UuZ8cMgJHdG6JMYpsdjr//5FHfXz3XHEoyA90+y/osGo12AjNwcZ5TE2wE8LQqz3v90vni458ccCCRYOaz0PVT0Wj0jg+37QsNFYTJ1axZT7DQC6fOSY7mnw62ZVqTmdIgjrAQXaWlpd2hUCg9WV7WVwYA8jbXrpH+wkNT1Of8c23BnL6feqarwUymgOwjIbqkpp2PRCJJle6MmAGA/E21DZZR+K/pwHf195+L2vd/NwUtAaJeAYQ9htHd1dWVsqOZ9W02gevsfzY3NbqcvTmlE7+J5M2rgdMHvr89j4E4mHt0Ic4tXro00tTU5PjNNmMrAwBFle+XpwLzjzEJD6RlFZ1q+Nx3pXsQwAiIIhoQ3tjX17MTkNnQm1EzAFBQsettM3DfNv/FM81FnS37oevd4XB4AADPtPZ/Gv8AkvXQkIP4nXQAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASpSURBVFiF3ZhbbBRlFMd/3ze7bXdp0yKlQI2NIqZlK8YHjDxgFEIikVhKAibeooH4otFIosFLgvdEn9QQHojxAkoIFChRMWBCXC5GxRgb6sJSWrrlDgXbUrrbndmZ44Mlwdru7MxsH/T/ON/5n//5z5n55swH/yOoomesb6rAMBaDNAExYAYwBbiC4hxwFORrKNlDouVaMaWLZ2bOksk44VeA5xEiBTDSiFpHqbxP267+YpRQHDONS5cjagNwkw/2n2j1DH+07gxahhGQr2hcthZhPRD1mSOC8Ag1DQ69yYNBiglmJtb8BvAWwTusgAVUN+S4nDzgN4l/M41Ll4NaTzHfO8UDVNe3c/l40h/dD+5ursKkC3/viBv6MKzbad/d55WofclZ8hoTYwRgMnb4ZT9E752pb6ogpC8WuP36RRoVnub1O+S9M4axuBAj0bLS9M6P18SzbdtPSaLVzLZtP7X9ozXxSKQkU4BKFKwHvZbmvTOx5i+BJ/JWUlaaPrf/s5OV5dE7R6/1Dw611y5YOSuTMfPfEKU2kWh9yktp3jujmO0W8tUHLx4eywhAVcWkORvfe+EXVx1HYl5L825GqHULWXL/PTPzrS9dOO82Vx3lrjMafnazKW4BJWFjepD1EVQXXNEI/JgZdAswLfuCy/r5AnSuFlzRCPyYuegW8E3815P51lv3/ZQqQCfvDRkLfswcdgt48tUP7+0fHGofa61v4Fr706+vm1cMndHwsQHID24hmYwZqV2wclbL3h/jpmX3AKZp2T1b9xyK1y5cdcfwsFnmrkPca2nevzONK8rBOoNQ6ZlbKBQDGOmbOfL9kBea9878PWJ87pnnBcKnXo2A30FTW28Dl3xx3XEJw3rXD9GfmfbdfShZ7YvrBiWr/Yz/EPTHKta8GXgsUI4bIc6WuqG257TWpaUikaxSpWERlbN1GCBkOFZOa0cplSnJZofmnD3b3wL2dXowMzNXVFJmtQG3BsoDaJz+uuHkhpBjDhfKEVG2ElIhLQeTqVQq+C9v47L5IHEkyHmCyFTrzKZK60rKb4IcbAx6OgO9yVNMbSgD7vObotweOFRtnv89QBVKOU6vvw1gNGr61wLuY/0YCIl5fpp5en8QeQccW+uu4piJx3NoHqeAIfRGKLBqzNM7lNi2e/Q4EDGVYexMpVIXgj9m13Ep2UdNwxXg4UIpVVbvd5W5y3mH0jwQgWSZbW873tPTAxNxcB5r3gascAsrdTLJW4aPb/WhkBGRI4RCv3V1df3jwx3ykSw/cvazKqQWCXryeCFa7KEaq+fbQlOKqBxKOkXrRF1d3bF4PJ4bK674nQGM+iVNthHeNU5+qTbPbqnK9Z7Il0NEWRqnW2mdcAwj2dnZmXXTnRAzAOHYQ5stSv41HURzgz/Xml17x6FlUOqkho5wNHoskUiYXjSL/5iNwEqnV+mInu+oUN31a4bkeqdlU/tuvIUCaUROhLQ+etfcuZ0tLS2+d7YJ6wxAZPaiecO6/IAIYUTsGWb3J5PsqxeBAZTqNKDj0e7uE2+CUwy9CTUDUFa/6J2sEX2pwurfMd0+8wWh0LGOjo5zgEy09n8afwEcs7T5cvn0GwAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS2SURBVFiF3VhbTBxVGP7+szPscmkq1FZqE2pvUYvYwpK0SUla0ib0iaf6oD6a+qDxoUlNvMTthZp4ifHBB22M8ZI0jVCqVk0gbeOKxAsJpAG3ENiBxdiWSypQdmd3Znbm9wGaCAKzc2b3Qb/HOf/3ff835+TMmQP8j0D5FjxwYGhdJlN0lIibmbEbwGYAGwDcBXCbmW8KIa6k0+mOWKw6mU/vvIWpqRkvV9XsK0R4CUBxDhQdwAe2Ld66cWPbbD56yEuY+vrRY8x8HkCFBP0vZhzv69tx2W8fwh+dKRzWIszcCrkgAFBBhEvhcPwNgH29XF9h6upGIwDOwP8ME0Bnw2HtdZ8iclhcWq1+NFaAw8zH+vp2fiVDlmpk796xBwIBR4P80loLM6ap7BgY2DrjlSi1zBSFX0NhggBAeVFR9mUZoueZWfiOqJPIbfuVhZ7JZB7y+h1SvLpkMkVHAXYNEgoJvaVlY09DQ8l2VaVKy+KJri59NBKZ2mcYrvyS4uJQE4B2L715XmZE3OxWEwoJvaNj62hjY+khVaUqAEWqSlWHD5ce6uzcGg8GKe2mwUyuPsvhOQwzHneraWnZ2FNWRk+sNFZWJmrOnNn0m5sGEe/22pvMBvCwW0FDQ8n2tcYPHizZ5qbBzK4+yyETZoNbgapSpZ/xBdCDube0AIkwNO9WYVk8sfY47uRgdC/nlhYhEYYn3Sq6uvTRtcaj0VQiB6M1X8hKkFlmPW4FkcjUvmTSGVhpbH7eGTh1amq/mwazu89yyGzNP7jVGAYXNzWN77x2LRW1LB4HYFoWj1+9moo2NY3vMk0OuTYmKOq5N6+E6upYWSgU+hPAeq9cD5izrNIt/f2VKS8kzzMTi1UnifCpV55HfOI1CCB50DQM5SyAKRluDpgyTeWcDFEqzOLx/IQMNweckDn+Az5/rMJh7QKAZ/xoLIV9cXr6yItCiGCQudggCqrMlLWFCgBKwLGyQjhElC4yjFTNrVuzbYB9n+03zHoANwA84isDAGZ9Njl7/LzjTGRy55BNjIQi+KehRCLh+5c3HNYaAEQBBORVmPXU+19Yme8TsgJZ4HOftzNAb++ObgDv+NGwzO5uH0EAgAKOs8V3GABYt+6PCADXY/1KYGf6Tjr59o9+/B3AsYXQ8hImGm3MAs6zAFwPoUthWXrq3XbmtO1euwqYTQoELicSiYm8hAGA3t5dGjOf9MIxMt92ZM3eu5KWzMBg0LY/0jTtd6AAF+fhsNYK4Cm3OierDc3PPf+lhEWamfuhKL2api35cHu+0HBH9gVm+whRsHy1Cnb0VDJ57rtcFZkpC+I4CxGrqqoajEaj2ZXq8j4zAFBb+0uzEJu+XkWfM6kPLxqZSyNraTCTJeCMkRAxJxAYisfjhptvQcIAQG1t9wUhNv/rdGCZPb/q8692rkJLg2hUAMNqSclgLBYzvXgWYJktYGbGeq6iYq6BaH3V/WeOMzOdTr55/Z91DOhgHlGEuPlkfX28ra1Nemcr2MwAQF3dlf1Ej3UBARWwbf3e6Y8t6+dJAHMgigeA4afHxkZOA04+/AoaBgD27PmmRVEePWka19sN/b3PoCiDw8PDtwFwob3/0/gbh/Lm30zcQi4AAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASdSURBVFiF3ZhbbBRVHMZ/58xeSgNCqRegsamt1EhEXwjw4AMmJGpAEhNoVOItxgdFQ1C5qqQiKiVRHtQIGuKDXNItFJGSoFFYpIltExIj9EK7WxbTUi7BFqHbTndm/r60CWDp7MxsX/ge9/y/7/t/55ydOXPgDoLKtWDVQZnkDPGUgiUIs4DpQCFwBTgv0KLhpwE4UlmhrufSO2dhPtstBSrEOhRvAxOyoKSV4stIiC2rnlV9ueghJ2GqYrJUYAcw1Qf9H6V4fe0yVRu0Dx2ELCJqS0w2CsTwFwRgqgj7qqrlQxEJNLmBwmzdx0bgI4KvsBLFpqp9vB9IxC9xeGvFgmiMAkdg6foKdcAP2Vcj2w7IFDNDEv9bayz0Soay9ctVr1eir202lGED4xMEoIAQq/0QPa9M1UGZJCYXye7x6xfpQbjP63so5NVl+IXoGiQSIr14Lk1l0ynVmmmOw4WOHjrrGpln2a78/KjwJLDfS2+et5mCJW41kRDpFYvpnFnEAq0pBiJaU/xQEQveeoZEyGAgFz63wvt/RnjYrWTxXJoiYR4ZbSwaZvaiuTS6+ihmeW3NzwNghltB2XRKxxovn8EDufC5FX7CFLqKaqYFGR/G3Vl3NKLrlQBccytwHC6MOS70ZOHzb9YdDcNPmItuBR09dI413t5Nyk1DMfaEjAY/YZrcCuoamWdmODXa2OAQpw43Md9NQ5S7z63wHkZxzK3Espnw1SEebOsi7jicA4Ych3NtXcS/rmOmZZPnaiPEvbfmEZUxmZgHXcBkr1wPuGoMUrT6JdXvheR5ZSor1HWE773yPGKn1yDg86ApFpuAS364WeCSZNjsh+grzPDxfJUfbhZY5ef4DwE/rLbEZDfwQhCNG+HY9t7ta0tXaK2jUZEJplLRsIiybB0GCBlOxtLaUUoNREyzf3Z3d18N2CP8oGEmA38CJYFSABnzel/tF0/vuNbbNZgtR0TZSkiFtJxoS6VSge4A1lWoq8CL3DA7/iDScPjTg16CACglBlrKLHi5pKSkJFAYgHUVql6ErUE0Uqd/qT/TsDcVQEIZjlMUOAyAeS8bIYtj/Sjo7+vpOV797vEg/g44ttbJnISpfEJZ2mE5WRxCb2rCzmSO16zZnzH7/W9TkSFlGLWpVOpCTsIArHlOJQXe88Jp+WPXkfMd9Vd8WopAa9S2tyeTydMwHhfnMYkJLHOru9LT0nZg26JqHxYDIvIXodDJZDJ504vb84WGGwyLN00xFxrhaMHtaiyzv//onpV12WqKKAslCdG6ubi4uDUej1uj1eV8ZQA++LZ7ycQpM368jb40HNq89/SJnR1jaYiojMY5q7RudgyjLZFImG6+4xIGYMM3f+++q/D+/50Ous7EG47sfPXn29AGUKpTQ3s4P7+1ubl5yItnzrfZCCJ59muD6d7H8/ILikd+S1+7fPnYnpW/3VgnkEakI6R1y6Nz5iRqamp8P9nGbWUA3vn85Px7ih77XWkj7NiWffSHN75Ltfx6EbiKUgkD2p8/e7ajEpzx7CNnWLm16eNP9pgDr6yu3lVeWrqwvLy8iHGexDsC/wHqq7fSQTg4DwAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARmSURBVFiF3ZhfbBRVFMZ/d2Z3y1aatoCAbVyxahON6AuJPPDQGIIakhojPihqJCIoxBDinxgJTUUSlVcjYTENYNo0UCiKRKrRdFUetJGEWAuE7rZLA+VPg22Fbdk/M8cHtkmtbWfmzu4L3+Pc833nfPfczD0zcAdBFVqwCSnLwdNAPfAIcA8wH7gODAJnBI5Z0LEZdbOQuQtmZjdSacIHwNtA2AVlTMHnQfh0HWqkEDUUxMweZI2CKDBPg/63wBtvotr91mH4IQui9iINCg6hZwRgnoLDUWS7IL4215eZvdAg8BH+O6yAHVHY5ldEC/mjdciPxjSwFazZgDqqQ9YqZB9SkYEE+kdrNgxb8MAm1LBXotYxy8CHFMcIQKUB7+kQPXcmf49cxd3rVxdjOVjk9R7y3Jn8hehoJFDK2Kp2YuvTDGwQMuvTDKw6TCwYZtxFmtIgPOW1Np1jVu8UEChl7OVB+pY8R50RIgKEjBCRJc9Tt3aQuEtDjnmmQsfMw04BTzbTFSrn0enWQhUsrTvA704acnsU8gQdM1VOAZHV1My2ft+z3F+IPFOhY2a+o2iIxX7W81jguqIJXa8E4IZTgJ3hisP6ZRd5/nFdUR46Zq46BQx8S99s6/1HSbrIM+uGTAfPZgS6nGI6X+GJzAjd062lh+mOvcZyF6kc80yFTmc6nQKy44Rbqniwv42YneECkLEzXEgcJNZcxUPWLeY4aSiIeS3M8wTwBTI3ABeBcq9cDxgNQ/WrqJQXkufO5EeMfV55XqCgyasR0Bw0LdgBXNPhusC1HOzUIWqZyY/nW3W4LrBVZ/wHnx9WUaQFeMmPxmTYWK2fRGo2G4ZRUiISTitVEhRROcsIAgRMO5szDFspNR5Kp1NLL10aaQNrgu/XTDlwGljiywWQMW6O7K96JjoauHjLLUdEWUpIBgz59VwymfT9yRtFVnD7NWrqq4h0zN/2VXdZa1JXIAcHfP3QANiIOimwy49G710/nPRhBECZtl3t2wzAFWgA57F+OtwwL18+seCdn/3kt8G2DCNREDONqBywFhdD6GRYKpv97u73j6RVynKOngEiGWWa7clk8kpBzABsRCWAd71wTpc1dwzMOXldM6UInC2xrD2JROIvKMKP8yhyCHjBKW4odObc/qrVBzVSjIvInwQCpxKJxH8u7oCGmBM25VR6ZUBKKmcKyKhU6puFW467FRRROZTExTB6IpHI2VgslpsuruCdAfjMvFRfYVV9PYO+dFbubP2jvKl3Ng0RlTWw+5Vh9NimeS4ej6ed8hbFDMCu4EBLefbe/00HfeHYb0cWrft+Bto4SvUZcD5YWnq2p6cn4yVnMY4ZAGNZ6/WQMbwibFdGJp6lzKGh4wu2/DQ5TmAMkd6AYZx5bNmyeFtbm/abrWidAWgMn1q++NbjvygxgzY569jCt77sLf3xKjCKUnETzr/Y39/bCHYx6ygYts/p+ni3So9vnnuwubamZmVtbW01Rd7EOwL/Ai1BeTIkgAbWAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQMSURBVFiF3ZnLT1xlGIef78zAMFgCeGscLCGoLEy0myb6B9SIMTXW1IU1Rk3cGF16SYy3xMRUN8aVWkMaY0lDUbS6qbcwKjGmSmKwXKQzMBAoINICMgxnLufnoqWhCJzLzEDSX/Ju5rzved/nu39n4BqSKfULhWqAVuAh4E7gFuAGYA44DwwAXwGnDWap1PlLIqF6oXeEloXkwdJCR4Tqdrr2qyR0SGjOI8R6mxN6ZKcZEDJCrws5AUFWzRF6Tajkw94PzBtFQqy3V3cK5FAJemS9FYQObjdIXRFzxM0uCNUHqcsKyPMKcH3AWDfVAy8GCfQ94S7vIzNANEhCj1oGdvvdh4L0TCteQKpZpos4NuOILDbjfEacKBkPOaqB+wPU5k9Cn7qO+2qlNa8/tZEuqk9RTxvrJ9sB87trIV3q3hBkVSfV7QHmt+2AOe9aiK2xLWFspTzATPqtLcgCYAOVLk5ZFx8bQ8QlVdZg3HyuUpAF4F9XjyzTLs+nPORZ9FjPFQWBmXH1+JqRLZ9/QcpDnq0bpBQSOuY63qNa1kX1bThfLqhPVcp4mDNtfmsL0jPdrh4ZosS4nU7iZBkDsmQZo4M4Me5ghSoPeeJ+CwuyAOwCJoBav7E+tAA0GEzaT5Dvnrl8xDjmN86n2vyCBJYuXZFnynRqngl6ai4G6HCZYA4Hramoa6pQOxA4+XoVKJxobmx+zrKsSESK2sZEKiSTL1gVAOGQk8tblmOMyVTadvquycn5TiisxhcLUwv8ATQVRQEsWUvzB2IPfDQRnljxnF+mYEQqbOnnoVQqFfRyBoDBLABPsKZ1gkhIR+rfPuUHBMAYhbB0Wx6ebGpqaioKBsBgeoB3i3nHd9d929NRcyJVTBkhx2koyacdoTDQA9zjN3Y6NDXVeut9bWmTDty7DjgOHC26ZwAMJg88jpdD6BrlTC738k0vfV4MCFLWhEJdqVRquiQwAAaTBF7wE9Nec/z0L1U9cwFTSjAYKRQ+TCaTZy/VUGIJnQQedfMbqhwYOhB7sCNAioykPsLh3mQy+ffaB+WAudE29nBEkU138WWTTh9sePiDkXDC05FFMnmMErKs/sbGxsF4PJ7fyC8ctOjNZDD/TFqTT8UKsS/ZuLH0ft17p9xAJJOzcEaNZfU74dBQIpGwAUZGNr8qle1D9XjFePue3J7/nQ5+jMZ/fWb3099sEpbBmBELhiuqqwf7+/uzfnKWDWaU0apaq/aveqe+cfW32dDsbGts/9HF0OKVYSJYRjoXtqyBu/ftS3R2dgZe2cr6F0JvtPfevSt7fwopVJEnX3j+5mc//qH6+xlgAWMSIRh+bHT03JvglLOOkulM1Zm3bGNnOnZ1HG9pbt7f0tLSQJkb8ZrQf5kyepAtajIBAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAASoSURBVFiF3VhNbFRVFP7OffMY6EjnvYGMrW2atmijRNyUBJcsTGRFQkJTKwpuXBliSDQxGolVEo0rjAuBhLCRGFuL4AoXTauWaBtNTHHoD/NHImXoOH2vY9+Uzvs5blpSoO37m7rgW777feec794zb867wGMEqnXAYrG4XQhxgIgOAtgNoBHADgAlADMAbjDzD7ZtX00mkwu1zF0zM7quq47jvAfgOIBtHiQVAF8S0Weqquq1qKEmZkql0mEiOgsgEUA+R0Rvqqp6KWwdIoyYmUnTtJNE1IdgRgAgwczfaZr2ITOH2txQZnRdP8nMvQh/wsTMH+u6/kGoIEGFy63VFybGGnCI6LCqqt8HEQcqRNM0hZkzCN5aG4YXQuxSFEXzKwzUZsz8PjbHCACojuO8G0To+2SKxeJ2SZLuwtvrNygqlmU96fd/KOI3ixDiADwYIaJKLBYbk2W5HUADgIJpmlnDMPYxs5u+TpKklwEM+KrND3m5yIMeOJV4PJ6VZXk/gBYAWwC0yLK8Px6Pp4losRZ5HkaQ38xzboRYLDZGRM+vtUZEe2Kx2KhbDGbe7bewIGaeciMst9ZG621uMYjINc/DCGJmhwdOQ8h1ANjpgfMAgpj51wOn4LJ+x0OMsgfOAwhi5q4bwTTNrMt63kMetw15BL7NMPOYG2f59Xt9Hf31SqXyolsMInLN8zB8mxFCDLlxmHnb/Pz806ZpDgO4BaAK4JZpmsPlcvkZx3G2ekg17Lc23xPA7OzsE5FI5G8Acb9aH5ivVqtNDQ0Nhh+R75NJJpMLzHzBr84PiOi8XyNAwKlZ13XVtu1JIkoG0W8EZp6VJOnZ/21qVhRFI6ITQbRuIKITQYwAIT+s5ubmLgJ4NUyM1bBt+5vOzs63hBDRKPO2JaKozEyWLWQAiEiOaQnhENHilqUlY8/t23o/YK/ow5qJA/gTQGsoFwAMw9CPdHefnZmZuedVw0w2MfIRwb9M5vP5UHcAiURiHsDrWLU7QcDM/MXp01f8GAEAIpYgeJcFHGttbW0NZQYAEonECIDPw8T4aWho5PLAQD5ECJIcp6kmlxHMHNE0bQTAPr/au4XCnVe6us4bhhH4dB3AcYBzoU8GAIjIEkIcgbch9D4syzJ7e3sHwhgBc5Uk6VI+ny/UxAwAKIqSAfCOH01/X9/V30dHSwFTMgMTUds+k8lk/gI24eJc07Q+Zu5y401PTU2+1tPzbYAUi8w8jkjkj0wmM7t6oeZmyuXyTsMwpqPRqLpuNZWKcezo0a/y2aynkYWZLBCnWYhUS0vLxPDwsLUWz/ftjBvq6+v/SaVSbzQ2Nl7G2pvF586cueJmhJlMASdHQqSciDSZTqeXACCbXf9TqeYns4Lx8fGLzc3Nj0wHv1679tvbx4//uI5sEURZAUzLdXUTqVSq6ifnppnJ5XJbmXlKUZSWlWelUqnYdejQuYWFhfttwkAFzDcjQtx4Ye/edH9/f+A3W83bbAVtbW33hoaGuuvr638WQsiWZdmfnjo1sGxkHkRpCZjuyeVufgQ4ADCVy21WObXB4ODgJ4VCYfHC+Qtfd7S3v9TR0dGETeyIxwb/Abxf6DIUZxAeAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAS9SURBVFiF3VhNbFRVFP7Ond9OlBnApihJM1N0EqltQzoJLFxAQiKrruhCjXFh3GhcEGowGomiJEhYUJtUiTFCGEJsBX9CU2pQqzZB6WtLOgw0MNN5TUSggtNp6Tw6fe8dNyWp0Pa9d9/Mhm8593zfOd+9J/educAjBCq34MDAwOPBYHAHM7cQ0UYATwJYC+AOgL+J6LJpmj+EQqGz9fX1d8uZu2xmRkdHV8/Pz7/DzG8BqLJBKQLo8Hg8BzZt2jRVjhrKYmZwcHAnER0BsEaC/i8Rvd7c3HzabR3CDZmZSVGUvUTUBTkjALCGmb9RFOV9Zna1ua7MDA8P7wXwIdyfMAHYNzQ09J5bESkstFaXG40lYBLRzubm5m9lyFKFjIyMRAzDyEK+tVZC3u/3b2hsbMw7JUq1ma7r76IyRgBgdalUeluG6PhkFr4jt2Dv+pVFsaqqqsbpd8jrNEswGNwBG0aEEMVYLHYhHA7XEdE6Zr5ZKBTGc7ncZtM0rfihYrH4AoBTTmpz3GbM3GIpKkSxqalpPBKJbCWiWgB+IqqNRCJbGxoaMkIIzUqDiCzzPJTXKYGInrWKicViF4QQzy215vV6G6LR6J9WGsy80WltMhfAU1YB4XC4bqX1SCQSs9IgIss8D0LGzFobhaxzs76AJ2xXtAAZMzNWAcx802L9ho0807YrWoCMmVtWAYVCYXyl9ampKdVGnhU3ZCnImLlgFZDL5Tbrup5aak3X9ZSqqlusNIjIMs+DkLmaf7GKMU2zKpVKPZ3P5/uZeQJAiZkn8vl8fyqVesY0zaANjX6ntTmeANLp9GOapv0FIOyU6wAFn8+3vqmpadYJyfHJ1NfX32Xmr5zyHOJLp0YAyUEzEAjsAzApw7WBSb/f/7EMUcrMwni+S4ZrA7tkxn/A5R8rRVFOAHjJjcZiGIZxsrW19U0hRCDAXDVHFPAxk24IHwB4Pea8LoRJRJp/bm624fr1qW7AuM93ayYM4CKAqCsXADRNm9qze/eRycnJe3Y5zGQQQ/UK/n1MVVVXbwCJRKIA4BUs2h0ZMDMfP3bseydGAICIPRC8QQdejUajUVdmACCRSAwAOOhGQxkcHPj53DnVhQR5THO9azMAMDMzsxeA5Vi/FO7cvn2js6PjVzf5TcA0hMiWxcy2bdt0AC/DxhC6GLquz3/W2XlK0zT5NmUukcdzWlXVm2UxAwCJRCJLRG1OOD/29Z29NDp6RzIlM3AlYBifZ7PZS0AFHs4VRekC0GoVN6GqY3va2r6WSKEx8yi83qFsNvu/D7fjBw0beKNUKm33+/2rlwu4p2mz7e3tZ+wKMpMO4gwLka6trb3S39+vLxVX9pMBgN7e3pbq6urvltHn40ePnuw5c+baShrMNC9g5kiItOnxjGUymTmrvBUxAwA9PT0nampqHpoOLo6M/HFg//6+ZWgaiMYFcNUXCl1Jp9MlJzkr0WYAgFAo9Nr09PTzq1atqr3/W6FQ+OfTw4d/WhzHQBHM17xCXG5MJDLd3d3SN1vFTgYAksnklng8/psQwqfrunH40KEvFEW5BaAAoowHuPpiLnftA8CsZB1lQzKZ/Oj8+fPawU8OJuN1ddvj8fh6VHgTHwn8B/S71Ufd4vUbAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATTSURBVFiF3VhPTBRXHP7e2xmBTYwgDXVdQ6m2hxrsyaweeoCkSXtQExOZ0JLSQ9NLmx5MbGya1P49NCRoQg9UG1MTA5RZEbegsYemVE1gMU1JBRZhF9dkccHGAkUXZmfe/HooJJTCzs6b5dB+yV7m/b7v9/veezvvNw/4H4EVWjASiWzNZrOvAjhCRHsBBACUA3gE4AGAUQDfA7iuadrjQuYumJm2trYyRVE+YIy9B6AkD0qGMfaVoihfHj16dK4QNRTEjK7rxwCcBbBdgv4HY+zturq6y17r4F7IRMR0XT8FQIecEQDYTkSXOjs7PyIiT5Pr80Kurq7+GMCn8L7CjDFWG4vFrHA4fENaRJa4vLV0LxrrwAZwTNO0bhmyVCHd3d2lpmkmIL+1cmHWNM09DQ0Ns26JUv8Z0zQ/xOYYAYAyRVHelyG6XplIJLLVMIwZ5Pf6lUUGwNNuzyHFbZblA9HRiKIomVAoNBgIBHZzznfYtj2dTqcno9HoASGEE99PRK8A6HJTm8w2O+IUoChK5tChQ5PBYLCGc14JYAvnvDIYDNYcPnw47vP5FguRZy1cmyGiF5xiQqHQoKqq1euNqaq6LxQKRZ00GGN73dYmszI7nQICgcDunAI7dz5biDxrIWOm3FGU8x1expfxVN4Vrei6JQBYcAqwbXs61zgRpfPI82feFS1DxsyMU0A6nZ7MNT41NZXMI0/OCVkPMmYGnQKi0egB0zTvrDeWzWbvDA4OHnTSYIw55lkL12YYYz85xQghSnp6ep5LpVJ9tm3fB5C1bft+KpXq6+3tfV4IUeykQUR9bmtzfWgS0WUALQC25YoTQpT09/fXrHr0zPIvH8wvLS25/r5xvTKapj0mom/d8lzifGNj4xO3JKlG07KszwA8lOHmgYemaX4hQ5Qys9yeH5fh5oHjMu0/4PHDStf1NgCve9FYDSFEx8mTJ9/lnBcVEZUYjBWpRMwSXAUAxWebFuc2Y2xxi2E82Tc1NRcGxArfq5ltAIYAVHlyAcAwjLmW06fPzs7OLuXLIWKCEZIKp5tjyWTS04WGpmnzAN7AqtmRBF27ejXixggAMEY+cNpjAW9WVVVVeTIDAJqm3SKiJi8ao8PDt24PDCQ9SDCfbQc9mwGAioqKUwAc2/r1MD83lw53dv7sJb8N2ILzREHM1NbWWrZtNyCPJnQ1hBDmpXC4yzAM+W1KlGU+3+VkMjldEDMAUF9fnwBwwg0n2t9/PTEx8UgyJREQKxLi60QiMQxswsW5rus6gDqnuOl0eqzlzJlOiRSLRPQbFOWXRCLxj4PbdW/mBMuy3iGil1VVLdsoJmsYTzra23vz1SRiFhjFifORysrKWF9fn7VeXMFXBgDOnTt3pLS09MoG+nStp6fj1s2bE7k0iJjJYd9jnI/YPt9YPB43nPJuihkAaG1tbSsvL/9XdzB+9+7AhfPnf9iAtgjGJjkwrvr9sZGRkaybnAXfZisoLi5+K5PJvOT3+ytXni0sLPz+XXv7j6vjCMiAaELhfPTF/fvj4XBY+s22aSsDAM3NzQeDweANzrkqhBAdFy9+Mzo6OgNgHozFfcD4a/fuTXzy94W5Z2yqGQBoamr6fNeuXSeGfh3qutJ16QIUJTY+Pv4AAG127v80/gIGr+iWe+FGsAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAToSURBVFiF3VhdbFNlGH7ec05/F6IUE9GLIYgXXYpXJBBZE0xM9EausIl6ObzBGSHRdnEJ1p+RhnBBNF4YY/xJFigNaIwxLpFYB2WwMWCW0bG1W7eEdUBwQ0fb7fy83nQJjK3nnO90F/okvTnf+7zP+/Q75/ve7wP+R6BGJ4xGo+skSXqFmfcAaAHwFIANAO4CmCai64Zh/OT3+3+Nx+PzjdRumJmOjo71zNwB4B0APguUMjN/vri4mDh27NhcI2poiJloNLqXiL4EEBCg/8XMbx05cuS00zpkh3yKxWKHiOgLAH7BHD4iiuzatcvIZDJnnRTjyEw0Gv2QiD6C8xkmInqxtbVVy2QyvcJJRIm1V+ukkxwrwCCivYlE4gcRslAhBw4ceNzj8RQg9o2YYZaInk0kErN2iZKImtvt/gBrYwQA1gN4X4Roe2ai0eg6IroFa8uvKMo+n+9Ju/uQYleltiGaGnG73eVIJNIfDAa3yLK8Udf1mVwuN55MJneoqmrG91er1ZcBnLJVm51gAKjt7HXhdrvLnZ2d46FQaLcsy80A3LIsN4dCod2dnZ15l8tVaYTOcoh8M0GzgEgk0u/xeEIrjXm93m2RSOSiBZ0Wu4WJmHnaLCAYDG6pN97S0rK5ETrLIWJmg1mALMsbnYzX8ITlimoQMfOPWYCu6zMm4yULOn9brqgGETO3zAJyudx4vfFr164VzXIwc90/ZCWImOk3C0gmkzuq1Wp2pbFyuZxNpVI7zXIQkanOcoiY+d0sQFVVX1dX19ZsNpvWdX0SwKKu65NDQ0Ppw4cPP6dpmtcsBzOn7RZme9P0+XynK5XKZwAeqxenqqqvu7t79wOPNtV+VnDPMAzb5xvbM1NrMb6xy7OJr48ePXrfLkmo0SSijwHcFuFawG0i+lSEKGSm1p4fFOFawEGR9h9weLCKxWLdAN5wkuNBMPPxEydOvC1JksfD7Fsg8riYSdMlFwAosqFqkmQQUcW9sHB/282bcylAX+LbXgCWYT+AFwA84zAPVFWdO9PTM+WWpHcBQCeCAoCJICsMAGAQZGaAGZrLhcubNutbGUVF4rMjxWLR8ZE3Fou1AkjDwX0CM/OVwcHvJwqFomgKDfjO6e0MMpnMVDgc9gIIi+YoTU+fyw4NXXFQBpFh3BFaAJbD6/UeAmClrX8ElXK5dOnixT+c6BuAoUtSoSFm4vG4ZhjGm7DQhD5UhGGoAwMDp1RV1c2jVwHzIsny6WKxOOP4NVvC+fPnZ8Ph8F0Ar1rlFPL5X8bHxuo2pXXADIx4df3kjcnJSWANLs5jsdhJAK+Zxd2bmxv5racnKSBRYeY/oSiDhULhoY3b6dL8CDRN209EL8myvH7VGFW9f6Gv72erOZlJA3GeJWm4ubk5l06ntZXiGj4zANDe3r6nqanpx1Xyc/bq1eOjN26M1cvBTKoEY4IkadiQ5ZF8Pr9gprsmZgCgvb29u6mp6ZHuYKZUupDp7e1ZhVYB0bgEjLr8/tzw8PCiHc2Gv2ZLmJ+fb1MUpdXj8TQvPatWq3f6+/rOPBjHQBnMY4okXX9++/Z8KpUSXtnWbGYAYN++fTsDgUAvEbkMw9AvnDv3ValUugXgHojyMjD6+sTEWBwwGqG3pmYAoK2t7ZNAIPDe1OTUqSuXBr6FouRGR0enAfBaa/+n8S8PPeWMetb8+wAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAATISURBVFiF3VhNbBtFGH0z3vXGbqpSikQBKSIOHKgop0quYtMadSsqVfRCoQo9IjiAuAXJ4lB+D0Q5Ig4VQvxIVZREKQhRRNoiNi2VcBECUaUNjmM7VRPHcdP81HGc/ZmPSyKVNMnuzjoHeEfPe9/73s54dnaA/xFYowsmEont0Wj0iBDiGGNsD4BHAOwCMANgEsB1IvrOcZwfDcOoNtK7YWGOHj260zTNNBG9BSDiQVID8Ilt2x8bhjHXiB4aEubQoUPHGWOnATwoIb8D4LWLFy+eDdpHKKCeHT58+BSATwFEJWtEALzc2toqCoXC5SDNBAqj6/q7AN5H8BlmjLHnYrGYnc/nL0kXkRWuLK2+IDXWgWCMHb9w4cI3MmKpRlKp1AOKooxB7j/ihllN09rOnTs361fIZdwURXkHWxMEAHaapvm2jND3zCQSie2RSKQMb9uvLGq2bT/s9z2k+HWJRqNHiMg1iKZptXQ6fTUej8dUVd1tWdZUJpPJd3V1xev1ups+qijK8wAG/PTme5kJIY65cTRNq/X29uaTyWRKVdUWAGFVVVuSyWSqp6cn19TUtOTBytVnLXyHYYw95cZJp9NXt23b9vR6Y83NzXs7OzszHqz2+O1NZgN41I0Qj8djm423t7e3NsJnLWTC7HIjqKq6O8j4Ch7y3NEKZMLcdSNYljXlMl7y4LPguaMVyIQpuxEymUx+s/ErV64UPfhs+kDWg+8wRHTVjdPV1RWvVqvX1hurVqvXuru793uwcvVZC5nd7Gc3Tr1ej3R0dDwxNDRkWJY1DsC0LGvcMAzjxIkTT5qm2eTBx/Ddm19BKpVqVhTlFoAdfrU+MM85f+z8+fOLfkS+Z2bliPGFX50fMMY+9xsEkDxoapr2AYBpGa0HTIfD4Y9khFIfZ6Ojo/VYLDYJ4EUZvQteHxwc/E1GGOjDStf1MwBeCVJjDXqy2eybnHNNI4osM6apRMx2uAoASkhYNueCMbYUXl5e3DsxMdcPOKvioGF2ENGfjLHHg2UAhBBzpVu3TlumWfeqIWIOIxQVTpdHisVi4E9eXdeTAAwEuE8gIpqpVL6uLiwUZUvYwFdBb2eQz+dvtrW1NQF4VrbGUq32y+zMzB8B2mBMiIrUbrYWlmWdAuDlWH8fbMsqzUxPDwXxF4BwOB9rSBjDMGwhxEl4OITeCyKyKpXKgOM4jjt7wyImC4XOFovFqcDLbBWFQmE2FovNAHjBq+buwsIP1fn5TQ+lm4AIGGlynL6/x8fHgS24ONd1vQ/AS248yzRHJm7e7JWwWCKiv6Aov4+Njf3rxe37QsMNtm2/wTnXOec7N+KQEIvlcvl7rzWJmA1GOeJ8uKWl5YZhGPZ6vIbPDAAcOHDgWDgc/naD+jR7+3bP/Nzc6GY1iJjFIQqM82ERCo3kcrllN98tCQMABw8ePKOq6n2ng6Va7dfy5OTgBrIlMJbnQFaNRm8MDw+bfjwbvsxWwRh71XGcZCgUaln9zXGcynSp9NO9PAJqIBpVOL/+zL59uf7+fumdbctmBgASicT+SCRyCYBKRE6lVPqsVquVAcyDsVwIyHYUCqPvAaIRflsaBgCSyeSHmqZ1Lt5dHLhze/pLKMqNbDY7CYC22vs/jX8A/Nff8x41WYEAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAPjSURBVFiF3ZlNbxtVFIafe2cceyZxEitfqiMs1EUWSLDqggXskOiGSqCyoAj+AH8BChISAv5ABahCBaoGJziISAhWMR8LECBQUNo0cZpJpLQNVWMDTZxre+ayMIGQOp7J2DMFXuls5p57zvver7lzBv5HEBHETAMngVPAA8AxYAi4DVwHLgOfAJ8BdyLI3xVkgDeAHUAHsG3gdWDwXpBth9M0Rz6IiIN2G3gqfsp3QwBnAY9wQvbMA14immUfGC/TmYiD9mK89P/GaTqfkYPmAk/GKQKamzbsHvGzLZqHSWx4MwIR++21uISkCX78hrVtoO+oxGQIMScBy8/Jtu2dQqFQVEqta61rSqn16enpomVZ1QA5bODxENyOjPfxGVnbtrcrlcrPugXK5fK8ZVlBZvZCHGK+9yNSKBTmWgnZQz6fnwsg5rs4xFz3I6KUWmsnRinlBBCzcVRiYd64Cuhp56C1rvn4KCFE0idPDfDz+QfCHAC/+znUarWbPu03AuT5LTCjPxFGzKafw+zs7LV27TMzM06APG0HpFt4F5/1blnWTrlcnm+1X7a2tuZTqVTVLwZwPg4xzwcgoi3L2snn83NKKae555UzOTk5F1CIBp6LQ0wfUAlIKKxVgN6jEguzZ+7QXGpR4jzNK00syNA8CKKYlU1ivjUDnOkC8VZ2JiyhTj9TL3aSvAUu5XK5F6SUyaTWlhIimdBaNFyZADANr96Q0hNCVHuU2n5wY6My1fygAzoXMwD8BNzfYRyklJVcNvuWaZq7QftoLVyhcUypv1p0HKcbBYRHgCJgdBBDjwwNvTeQTjth+zfgQicE9rAOpIBHwwbo6+39ejiT+bEDDkJ43q0wR3MrnAW+DdPRNIwbY8PDX3SS3APPlXKlW2IawLMEuITuhxCiPjoy8pEQwvX3PgRa14RhFBzHudmNZbaHMs2KzRNBOwz29386kE63vZS2gdawmHLd/NW1tTWIpoKYB572c0r29Czel81+GCJ+VWs9j2n+sLKy8sv+hijEDAshlrTWh77FpRDb4+Pj55KmGejKorVoIHRJS7mQy+WuFIvFRiu/SGq7hmGccl3340Pi6+FM5tLgwMByuxhai7rEWxVSLniGsVgqlZRf3sgK1YlE4mK9Xr/rdmBb1jfZsbHPD+lWRYhrEpYStn1lYWGhdpScUVbdU1LKq57n5fYeGIZxK5fNvm0Yxl/LRMMOWi+bUl5+6MSJ0tTUVOiTLdJfCJZlPby7u/ul1joBuMdGR9/pte1N4FeEKBmw9Mzq6vIrzQL8vx+pVOpVIUS1v6//g4njxx+bmJgY5x7/h/lP4A+AJ7grnrOyCgAAAABJRU5ErkJggg==",anchor:[.5,1]}],this.options.labels||(this.options.labels={}),Object.keys(n.DefaultLabels).forEach(function(t){this.options.labels.hasOwnProperty(t)||(this.options.labels[t]=n.DefaultLabels[t])},this),this.options.defaultStyles||(this.options.defaultStyles={}),Object.keys(n.DefaultStyles).forEach(function(e){if(!t.defaultStyles.hasOwnProperty(e))return void(this.options.defaultStyles[e]=n.DefaultStyles[e]);if("polyFillOpacity"==e&&(t.defaultStyles[e]<0||t.defaultStyles[e]>1))return console.log("Wrong value ("+t.defaultStyles[e]+") for defaultStyles.polyFillOpactity. Must be between 0 and 1"),void(this.options.defaultStyles[e]=n.DefaultStyles[e]);if("strokeWidth"==e||"polyStrokeWidth"==e){var o=parseInt(t.defaultStyles[e],10);if(isNaN(o)||o<0)return console.log("Wrong value ("+t.defaultStyles[e]+") for defaultStyles.strokeWidth. Must be a positive interger value."),void(this.options.defaultStyles[e]=n.DefaultStyles[e]);this.options.defaultStyles[e]=o}},this),this.interactionCurrent=null,this.interactionSelectEdit=null,this.stylingOvl=null,this.layer=null,this.options.layer&&this.options.layer instanceof s.default.layer.Vector&&(this.layer=this.options.layer),this._isDesktop=this._detectSupport()},n.prototype._createEmptyLayer=function(){var t=new s.default.Collection,e=new s.default.layer.Vector({source:new s.default.source.Vector({features:t})});e.gpResultLayerId="drawing",this.setLayer(e)},n.prototype.setLayer=function(t){if(!t)return void(this.layer=null);if(!(t instanceof s.default.layer.Vector))return void console.log("no valid layer given for hosting drawn features.");var e=this.getMap().getLayers();if(e){var o=!1;e.forEach(function(e){e==t&&(_.trace("layer already in map. Not adding."),o=!0)},this),o||this.getMap().addLayer(t),t.getSource().getFeatures().forEach(function(t){var e=t.getStyleFunction();if(e){var o=e.call(t,0);o&&0!==o.length&&t.setStyle(o[0])}})}this.layer=t},n.prototype._detectSupport=function(){var t=!0,e=window.navigator.userAgent.toLowerCase();return-1===e.indexOf("iphone")&&-1===e.indexOf("ipod")&&-1===e.indexOf("ipad")&&-1===e.indexOf("android")&&-1===e.indexOf("mobile")&&-1===e.indexOf("blackberry")&&-1===e.indexOf("tablet")&&-1===e.indexOf("phone")&&-1===e.indexOf("touch")||(t=!1),-1===e.indexOf("msie")&&-1===e.indexOf("trident")||(t=!0),t},n.prototype._initContainer=function(){var t=this._createMainContainerElement(),e=this._showDrawingContainer=this._createShowDrawingElement();t.appendChild(e);var o=this._createShowDrawingPictoElement();t.appendChild(o);var i=this._createDrawingPanelElement();return t.appendChild(i),t},n.prototype._drawEndFeature=function(t,e){var o=null;switch(e){case"Point":o=new s.default.style.Style({image:new s.default.style.Icon(this._getIconStyleOptions(this.options.markersList[0]))});break;case"LineString":o=new s.default.style.Style({stroke:new s.default.style.Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})});break;case"Polygon":o=new s.default.style.Style({fill:new s.default.style.Fill({color:this.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)}),stroke:new s.default.style.Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth})})}t.setStyle(o),this._updateMeasure(t,e);var i=null,n=this,r=function(e,o){if(n.getMap().removeOverlay(i),o&&e&&e.trim().length>0){var r=e.replace(/\n/g,"<br>");t.setProperties({description:r})}},a=this._createLabelDiv({applyFunc:r,inputId:this._addUID("att-input"),placeholder:"Saisir une description...",
measure:this.options.tools.measure?t.getProperties().measure:null,geomType:e});i=new s.default.Overlay({element:a,positioning:"top-center"}),this.getMap().addOverlay(i);var l=t.getGeometry().getExtent();i.setPosition([(l[0]+l[2])/2,(l[1]+l[3])/2]),document.getElementById(this._addUID("att-input")).focus()},n.prototype._createRemoveInteraction=function(){var t=new s.default.interaction.Select({layers:[this.layer]});return t.on("select",function(t){t&&t.selected&&0!=t.selected.length&&(this.layer.getSource().removeFeature(t.selected[0]),this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createRemoveInteraction(),this.getMap().addInteraction(this.interactionCurrent))},this),t},n.prototype._createStylingInteraction=function(){var t=new s.default.interaction.Select({layers:[this.layer]});return t.on("select",function(t){if(this.stylingOvl&&this.getMap().removeOverlay(this.stylingOvl),t&&t.selected&&0!=t.selected.length){var e=null,o=null,i=null,n=null,r={};if(t.selected[0].getGeometry()instanceof s.default.geom.Point){var a=t.selected[0].getProperties().name;t.selected[0].getStyle().getText()&&a?(n="Text",t.selected[0].getStyle().getText().getStroke()&&t.selected[0].getStyle().getText().getStroke().getColor()&&(e=t.selected[0].getStyle().getText().getStroke().getColor(),Array.isArray(e)?(e="rgba("+e.join()+")",o=this.rgbaToHex(e),r.strokeColor=o.hex,r.strokeOpacity=o.opacity):r.strokeColor=e),t.selected[0].getStyle().getText().getFill()&&t.selected[0].getStyle().getText().getFill().getColor()&&(e=t.selected[0].getStyle().getText().getFill().getColor(),Array.isArray(e)?(e="rgba("+e.join()+")",o=this.rgbaToHex(e),r.fillColor=o.hex,r.fillOpacity=o.opacity):r.fillColor=e),r.strokeColor=r.hasOwnProperty("strokeColor")?r.strokeColor:this.options.defaultStyles.textStrokeColor,r.fillColor=r.hasOwnProperty("fillColor")?r.fillColor:this.options.defaultStyles.textFillColor):t.selected[0].getStyle()&&t.selected[0].getStyle().getImage()&&(n="Point",t.selected[0].getStyle().getImage().getSrc()?r.markerSrc=t.selected[0].getStyle().getImage().getSrc():r.markerSrc=this.options.markersList[0].src)}else t.selected[0].getGeometry()instanceof s.default.geom.LineString?(n="Line",t.selected[0].getStyle()&&t.selected[0].getStyle().getStroke()&&(t.selected[0].getStyle().getStroke().getWidth()&&(r.strokeWidth=t.selected[0].getStyle().getStroke().getWidth()),t.selected[0].getStyle().getStroke().getColor()&&(e=t.selected[0].getStyle().getStroke().getColor(),Array.isArray(e)?(e="rgba("+e.join()+")",o=this.rgbaToHex(e),r.strokeColor=o.hex,r.fillOpacity=o.opacity):r.strokeColor=e)),r.strokeWidth=r.hasOwnProperty("strokeWidth")?r.strokeWidth:this.options.defaultStyles.strokeWidth,r.strokeColor=r.hasOwnProperty("strokeColor")?r.strokeColor:this.options.defaultStyles.strokeColor):t.selected[0].getGeometry()instanceof s.default.geom.Polygon&&(n="Polygon",t.selected[0].getStyle()&&t.selected[0].getStyle().getStroke()&&(t.selected[0].getStyle().getStroke().getWidth()&&(r.strokeWidth=t.selected[0].getStyle().getStroke().getWidth()),t.selected[0].getStyle().getStroke().getColor()&&(e=t.selected[0].getStyle().getStroke().getColor(),Array.isArray(e)?(e="rgba("+e.join()+")",o=this.rgbaToHex(e),r.strokeColor=o.hex,r.strokeOpacity=o.opacity):r.strokeColor=e)),t.selected[0].getStyle()&&t.selected[0].getStyle().getFill()&&t.selected[0].getStyle().getFill().getColor()&&(e=t.selected[0].getStyle().getFill().getColor(),Array.isArray(e)&&(e="rgba("+e.join()+")"),o=this.rgbaToHex(e),r.fillColor=o.hex,r.fillOpacity=o.opacity),r.strokeWidth=r.hasOwnProperty("strokeWidth")?r.strokeWidth:this.options.defaultStyles.polyStrokeWidth,r.strokeColor=r.hasOwnProperty("strokeColor")?r.strokeColor:this.options.defaultStyles.polyStrokeColor,r.fillColor=r.hasOwnProperty("fillColor")?r.fillColor:this.options.defaultStyles.polyFillColor,r.fillOpacity=r.hasOwnProperty("fillOpacity")?r.fillOpacity:this.options.defaultStyles.polyFillOpacity);if(!n)return void console.log("Unhandled geometry type for styling.");var l=this,p=function(e){if("cancel"==e)return void l.getMap().removeOverlay(i);var o="apply"!=e,r=document.getElementById(l._addUID("fillColor")),a=document.getElementById(l._addUID("fillOpacity")),p=document.getElementById(l._addUID("strokeColor")),c=document.getElementById(l._addUID("strokeWidth"));switch(n.toLowerCase()){case"text":o?(l.options.defaultStyles.textStrokeColor=p.value,l.options.defaultStyles.textFillColor=r.value):t.selected[0].setStyle(new s.default.style.Style({text:new s.default.style.Text({font:"16px sans",textAlign:"left",text:t.selected[0].getStyle().getText().getText(),fill:new s.default.style.Fill({color:r.value}),stroke:new s.default.style.Stroke({color:p.value,width:3})})}));break;case"point":var u=l._getsMarkersOptionsFromSrc(document.querySelector("input[name='marker']:checked").value);if(o){if(l.options.markersList.length>1){var h=l.options.markersList.findIndex(function(t){return t==u});h>0&&(l.options.markersList.splice(h,1),l.options.markersList.splice(0,0,u))}}else t.selected[0].setStyle(new s.default.style.Style({image:new s.default.style.Icon(l._getIconStyleOptions(u))}));break;case"line":o?(l.options.defaultStyles.strokeColor=p.value,l.options.defaultStyles.strokeWidth=parseInt(c.value,10)):t.selected[0].setStyle(new s.default.style.Style({stroke:new s.default.style.Stroke({width:parseInt(c.value,10),color:p.value})}));break;case"polygon":var d=parseInt(a.value,10)/10;o?(l.options.defaultStyles.polyStrokeColor=p.value,l.options.defaultStyles.polyFillColor=r.value,l.options.defaultStyles.polyFillOpacity=d,l.options.defaultStyles.polyStrokeWidth=parseInt(c.value,10)):t.selected[0].setStyle(new s.default.style.Style({stroke:new s.default.style.Stroke({width:parseInt(c.value,10),color:p.value}),fill:new s.default.style.Fill({color:l.hexToRgba(r.value,d)})}))}o||l.getMap().removeOverlay(i)},c=this._createStylingDiv({geomType:n,initValues:r,applyFunc:p});i=new s.default.Overlay({element:c,positioning:"top-center"}),this.getMap().addOverlay(i),i.setPosition(t.mapBrowserEvent.coordinate),this.stylingOvl=i,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createStylingInteraction(),this.getMap().addInteraction(this.interactionCurrent)}},this),t},n.prototype._createLabelInteraction=function(){var t=new s.default.interaction.Select({layers:[this.layer]});return t.on("select",function(t){if(this.labelOvl&&this.getMap().removeOverlay(this.labelOvl),t&&t.selected&&0!=t.selected.length){var e=null,o=null,i=null,n=null;if(t.selected[0].getGeometry()instanceof s.default.geom.Point){var r=t.selected[0].getProperties().name;t.selected[0].getStyle()&&t.selected[0].getStyle().getText()&&r?o="Text":t.selected[0].getStyle()&&t.selected[0].getStyle().getImage()&&(o="Point")}else t.selected[0].getGeometry()instanceof s.default.geom.LineString?o="Line":t.selected[0].getGeometry()instanceof s.default.geom.Polygon&&(o="Polygon");if(!o)return void console.log("Unhandled geometry type for styling.");if("Text"==o)i=t.selected[0].getStyle().getText().getText();else{var a=t.selected[0].getProperties();a&&a.hasOwnProperty("description")&&(i=a.description),a&&a.hasOwnProperty("measure")&&(n=a.measure)}var l=this,p=function(i,n){if(l.getMap().removeOverlay(e),n){var r=t.selected[0];if("Text"==o){var s=r.getStyle();return s.getText().setText(i),r.setProperties({name:i}),void r.setStyle(s)}var a=i.replace(/\n/g,"<br>");r.setProperties({description:a})}},c=this._createLabelDiv({applyFunc:p,inputId:this._addUID("label-input"),placeholder:"Text"==o?"Saisir un label...":"Saisir une description...",text:i,measure:this.options.tools.measure?n:null,geomType:o});e=new s.default.Overlay({element:c,positioning:"top-center"}),this.getMap().addOverlay(e),e.setPosition(t.mapBrowserEvent.coordinate),document.getElementById(this._addUID("label-input")).focus(),this.labelOvl=e,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createLabelInteraction(),this.getMap().addInteraction(this.interactionCurrent)}},this),t},n.prototype._updateMeasure=function(t,e){function o(t,e){e=e||2;var o=Math.pow(10,e);return Math.round(t*o)/o}_.log(t);var i=null,n=new s.default.Sphere(6378137),r=this.getMap().getView().getProjection(),a=e||t.getProperties().type;switch(a){case"Point":var l=t.getGeometry().getCoordinates(),p=s.default.proj.transform(l,r,"EPSG:4326");i="lon : ",i+=o(p[0],4)+"°",i+=" / ",i+="lat : ",i+=o(p[1],4)+"°";break;case"LineString":for(var c=0,u=t.getGeometry().getCoordinates(),h=0,d=u.length-1;h<d;++h){var f=s.default.proj.transform(u[h],r,"EPSG:4326"),y=s.default.proj.transform(u[h+1],r,"EPSG:4326");c+=n.haversineDistance(f,y)}i=c>1e3?o(c/1e3,3)+" km":o(c,3)+" m";break;case"Polygon":var g=0,m=t.getGeometry().clone().transform(r,"EPSG:4326").getLinearRing(0).getCoordinates();g=Math.abs(n.geodesicArea(m)),i=g>1e6?o(g/1e6,3)+" km^2":o(g,2)+" m^2"}t.setProperties({measure:i,type:a})},n.prototype._handleToolClick=function(t,e,o){var i=o.getMap();if(!i)return void _.trace("Drawing control not attached to any map.");switch(d.default.unset(i,{current:"Drawing"}),o.interactionCurrent&&(i.removeInteraction(o.interactionCurrent),o.interactionCurrent=null),o.interactionSelectEdit&&(i.removeInteraction(o.interactionSelectEdit),o.interactionSelectEdit=null),this.layer||this._createEmptyLayer(),e){case this._addUID("drawing-tool-point"):o.dtOptions.points.active&&(o.interactionCurrent=new s.default.interaction.Draw({features:o.layer.getSource().getFeaturesCollection(),style:new s.default.style.Style({image:new s.default.style.Icon(this._getIconStyleOptions(this.options.markersList[0]))}),type:"Point"}),o.interactionCurrent.on("drawend",function(t){o._drawEndFeature(t.feature,"Point")},o));break;case this._addUID("drawing-tool-line"):o.dtOptions.lines.active&&(o.interactionCurrent=new s.default.interaction.Draw({features:o.layer.getSource().getFeaturesCollection(),style:new s.default.style.Style({image:new s.default.style.Circle({radius:this.options.cursorStyle.radius,stroke:new s.default.style.Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new s.default.style.Fill({color:this.options.cursorStyle.fillColor})}),stroke:new s.default.style.Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})}),type:"LineString"}),o.interactionCurrent.on("drawend",function(t){o._drawEndFeature(t.feature,"LineString")},o));break;case this._addUID("drawing-tool-polygon"):o.dtOptions.polygons.active&&(o.interactionCurrent=new s.default.interaction.Draw({features:o.layer.getSource().getFeaturesCollection(),style:new s.default.style.Style({image:new s.default.style.Circle({radius:this.options.cursorStyle.radius,stroke:new s.default.style.Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new s.default.style.Fill({color:this.options.cursorStyle.fillColor})}),stroke:new s.default.style.Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new s.default.style.Fill({color:this.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),o.interactionCurrent.on("drawend",function(t){o._drawEndFeature(t.feature,"Polygon")},o));break;case this._addUID("drawing-tool-text"):o.dtOptions.text.active&&(o.interactionCurrent=new s.default.interaction.Draw({features:o.layer.getSource().getFeaturesCollection(),style:new s.default.style.Style({image:new s.default.style.Circle({radius:this.options.cursorStyle.radius,stroke:new s.default.style.Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new s.default.style.Fill({color:this.options.cursorStyle.fillColor})})}),type:"Point"}),o.interactionCurrent.on("drawend",function(t){var e=null,i=function(i,n){if(o.getMap().removeOverlay(e),!n)return void o.layer.getSource().removeFeature(t.feature);t.feature.setProperties({name:i}),t.feature.setStyle(new s.default.style.Style({image:new s.default.style.Icon(o._getIconStyleOptions(o.options.defaultStyles.textIcon1x1)),text:new s.default.style.Text({textAlign:"left",font:"16px sans",text:i,fill:new s.default.style.Fill({color:o.options.defaultStyles.textFillColor}),stroke:new s.default.style.Stroke({color:o.options.defaultStyles.textStrokeColor,width:3})})}))},n=this._createLabelDiv({applyFunc:i,inputId:o._addUID("label-input"),geomType:"Text",placeholder:"Saisir un label..."});e=new s.default.Overlay({element:n,positioning:"top-center"}),o.getMap().addOverlay(e),e.setPosition(t.feature.getGeometry().getCoordinates()),document.getElementById(this._addUID("label-input")).focus()},o));break;case this._addUID("drawing-tool-edit"):o.dtOptions.edit.active&&(o.interactionSelectEdit=new s.default.interaction.Select({condition:s.default.events.condition.singleClick,layers:[this.layer]}),o.interactionSelectEdit.setProperties({name:"Drawing",source:o}),i.addInteraction(o.interactionSelectEdit),o.interactionCurrent=new s.default.interaction.Modify({features:this.interactionSelectEdit.getFeatures(),style:new s.default.style.Style({image:new s.default.style.Circle({radius:this.options.cursorStyle.radius,stroke:new s.default.style.Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new s.default.style.Fill({color:this.options.cursorStyle.fillColor})})}),deleteCondition:function(){return!1}}),o.interactionCurrent.on("modifyend",function(t){var e=t.features.item(0);o._updateMeasure(e)},o));break;case this._addUID("drawing-tool-display"):o.dtOptions.display.active&&(o.interactionCurrent=this._createStylingInteraction());break;case this._addUID("drawing-tool-tooltip"):o.dtOptions.tooltip.active&&(o.interactionCurrent=this._createLabelInteraction());break;case this._addUID("drawing-tool-remove"):o.dtOptions.remove.active&&(o.interactionCurrent=o._createRemoveInteraction());break;default:_.trace("unhandled tool type")}o.interactionCurrent&&(o.interactionCurrent.setProperties({name:"Drawing",source:this}),i.addInteraction(o.interactionCurrent)),_.log("interactions",i.getInteractions())},n.prototype.onShowDrawingClick=function(){var t=this.getMap();d.default.unset(t),this.collapsed=this._showDrawingContainer.checked,this.dispatchEvent("change:collapsed");for(var e in this.dtOptions)if(this.dtOptions.hasOwnProperty(e)&&this.dtOptions[e].active){var o=this._addUID("drawing-tool-"+this.dtOptions[e].id);document.getElementById(o).className="drawing-tool",this.dtOptions[e].active=!1}},n.prototype.onExportFeatureClick=function(){var t=this.exportFeatures();if(t){var e=document.createElement("a");if(e.setAttribute("href","data:application/vnd.google-earth.kml+xml;charset=utf-8,"+encodeURIComponent(t)),e.setAttribute("download",this.getExportName()+".kml"),document.createEvent){var o=document.createEvent("MouseEvents");o.initEvent("click",!0,!0),e.dispatchEvent(o)}else e.click()}},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPdrawing"),t.className="GPwidget",t},_createShowDrawingElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowDrawing"),t.className="GPshowDrawing",t.type="checkbox",t},_createShowDrawingPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowDrawingPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowDrawing"),e.title=this.options.labels.control,e.addEventListener?e.addEventListener("click",function(e){t.onShowDrawingClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowDrawingClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowDrawingOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createDrawingPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPdrawingPanel"),t.className="GPpanel",t.appendChild(this._createDrawingPanelHeaderElement()),this.dtOptions={},this.options.tools.points&&(this.dtOptions.points={label:this.options.labels.points,active:!1,panel:"draw",id:"point"}),this.options.tools.lines&&(this.dtOptions.lines={label:this.options.labels.lines,active:!1,panel:"draw",id:"line"}),this.options.tools.polygons&&(this.dtOptions.polygons={label:this.options.labels.polygons,active:!1,panel:"draw",id:"polygon"}),this.options.tools.text&&(this.dtOptions.text={label:this.options.labels.text,active:!1,panel:"draw",id:"text"}),this.options.tools.edit&&(this.dtOptions.edit={label:this.options.labels.edit,active:!1,panel:"edit",id:"edit"}),this.options.tools.display&&(this.dtOptions.display={label:this.options.labels.display,active:!1,panel:"edit",id:"display"}),this.options.tools.tooltip&&(this.dtOptions.tooltip={label:this.options.labels.tooltip,active:!1,panel:"edit",id:"tooltip"}),this.options.tools.remove&&(this.dtOptions.remove={label:this.options.labels.remove,active:!1,panel:"edit",id:"remove"}),(this.dtOptions.points||this.dtOptions.lines||this.dtOptions.polygons||this.dtOptions.text)&&t.appendChild(this._createDrawingToolSection(this.options.labels.creatingTools,"draw")),(this.dtOptions.edit||this.dtOptions.display||this.dtOptions.tooltip||this.dtOptions.remove)&&t.appendChild(this._createDrawingToolSection(this.options.labels.editingTools,"edit")),this.options.tools.export&&t.appendChild(this._createSavingSection(this.options.labels.export,this.options.labels.exportTitle)),t},_createDrawingPanelHeaderElement:function(){var t=document.createElement("div");t.className="GPpanelHeader";var e=document.createElement("div");e.className="GPpanelTitle",e.innerHTML=this.options.controlLabel||"Annoter la carte",t.appendChild(e);var o=document.createElement("div");o.id=this._addUID("GPdrawingPanelClose"),o.className="GPpanelClose",o.title="Fermer le panneau";var i=this;return o.addEventListener?o.addEventListener("click",function(){document.getElementById(i._addUID("GPshowDrawingPicto")).click()},!1):o.attachEvent&&o.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowDrawingPicto")).click()}),t.appendChild(o),t},_createDrawingToolSection:function(t,e){function o(t){s._handleDOMToolClick(t,this.id,s),s._handleToolClick(t,this.id,s)}var i=document.createElement("div");i.className="drawing-tool-section";var n=document.createElement("p");n.className="drawing-tool-section-title",n.innerHTML=t,i.appendChild(n);var r=document.createElement("ul");r.className="drawing-tools-flex-display";var s=this;for(var a in this.dtOptions)if(this.dtOptions[a].panel===e){var l=document.createElement("li");l.className="drawing-tool",l.id=this._addUID("drawing-tool-"+this.dtOptions[a].id),l.title=this.dtOptions[a].label,l.addEventListener("click",o),r.appendChild(l)}return i.appendChild(r),i},_createSavingSection:function(t,e){var o=document.createElement("div");o.className="drawing-tool-section drawing-tools-flex-display";var i=document.createElement("button");i.title=e,i.className="tool-form-submit drawing-button",i.id=this._addUID("drawing-export"),i.type="button",i.textContent=t;var n=this;return i.onclick=function(){n.onExportFeatureClick()},o.appendChild(i),o},rgbaToHex:function(t){function e(t){if(t>255)throw"'"+t+"'' is greater than 255(0xff);";return("0"+Number(t).toString(16)).slice(-2)}var o=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,i=o.exec(t);if(!i)throw"Invalid format: "+t;var n=i[1],r=i[2],s=i[3],a=i[4],l=[e(n),e(r),e(s)],p={};return p.hex="#"+l.join(""),a&&(p.opacity=parseFloat(a)),p},hexToRgba:function(t,e){var o=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;if(!t)throw"Invalid format";t=t.replace(o,function(t,e,o,i){return e+e+o+o+i+i});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i=i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null,i?"rgba("+i.r+", "+i.g+", "+i.b+", "+e+")":null},_createMarkersChooser:function(t){var e=document.createElement("li");e.className=t.className;for(var o=0;o<this.options.markersList.length;o++){var i=document.createElement("input");i.type="radio",i.name="marker",i.id=this._addUID("marker-"+o),i.value=this.options.markersList[o].src,i.className="marker-input-radio",t.defaultValue===i.value&&(i.checked=!0),e.appendChild(i);var n=document.createElement("label");n.className="marker-label",n.setAttribute("for",i.id);var r=document.createElement("img");r.src=i.value,n.appendChild(r),e.appendChild(n)}return e},_createStylingElement:function(t){var e=document.createElement("li");e.className=t.className;var o=document.createTextNode(t.label);e.appendChild(o);var i=document.createElement("input");try{i.type=t.type}catch(t){i.type="text"}return i.id=t.id,i.value=t.defaultValue,t.title&&(i.title=t.title),void 0!==t.min&&(i.min=t.min),void 0!==t.max&&(i.max=t.max),void 0!==t.step&&(i.step=t.step),e.appendChild(i),e},_createStylingDiv:function(t){var e=document.createElement("div");e.className="gp-styling-div";var o=document.createElement("ul"),i=null;switch(t.geomType.toLowerCase()){case"point":i=this._createMarkersChooser({className:"gp-styling-option",defaultValue:t.initValues.markerSrc}),o.appendChild(i);break;case"text":i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:t.initValues.fillColor}),o.appendChild(i),i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:t.initValues.strokeColor}),o.appendChild(i);break;case"line":i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:t.initValues.strokeColor}),o.appendChild(i),i=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:t.initValues.strokeWidth}),o.appendChild(i);break;case"polygon":i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:t.initValues.strokeColor}),o.appendChild(i),i=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:t.initValues.strokeWidth}),o.appendChild(i),i=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:t.initValues.fillColor}),o.appendChild(i),i=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.fillOpacity,title:"0 (transparent) à 100% (opaque)",id:this._addUID("fillOpacity"),min:0,max:10,step:1,defaultValue:10*t.initValues.fillOpacity}),o.appendChild(i);break;default:console.log("Unhandled geometry type for styling.")}e.appendChild(o);var n=document.createElement("input");n.type="button",n.className="gp-styling-button",n.value=this.options.labels.applyToObject,n.onclick=function(){t.applyFunc.call(this,"apply")},e.appendChild(n);var r=document.createElement("input");r.type="button",r.value=this.options.labels.setAsDefault,r.className="gp-styling-button",r.onclick=function(){t.applyFunc.call(this,"default")},e.appendChild(r);var s=document.createElement("input");return s.type="button",s.className="gp-styling-button closer",s.onclick=function(){t.applyFunc.call(this,"cancel")},e.appendChild(s),e},_createLabelDiv:function(t){var e=document.createElement("div");e.className="gp-label-div";var o=null;if("Text"===t.geomType?(o=document.createElement("input"),o.type="text",o.className="gp-input-label-style"):(o=document.createElement("textArea"),o.rows=2,o.cols=40,o.className="gp-textarea-att-label-style"),t.text&&(o.value=t.text),o.autocomplete="off",o.placeholder=t.placeholder,o.id=t.inputId,e.appendChild(o),o.onblur=function(){t.applyFunc.call(this,o.value,!0)},o.onkeyup=function(e){"Text"===t.geomType&&13===e.keyCode&&t.applyFunc.call(this,o.value,!0),27===e.keyCode&&t.applyFunc.call(this,o.value,!1)},t.measure&&"Text"!==t.geomType){var i=document.createElement("input");i.type="text",i.readonly=!0,i.className="gp-input-measure-style",i.value=t.measure,e.appendChild(i)}if("Text"!==t.geomType){var n=document.createElement("input");n.type="button",n.className="gp-styling-button",n.value=this.options.labels.saveDescription,n.onclick=function(){t.applyFunc.call(this,o.value,!0)},e.appendChild(n);var r=document.createElement("input");r.type="button",r.className="gp-styling-button closer",r.onclick=function(){t.applyFunc.call(this,o.value,!1)},e.appendChild(r)}return e},_handleDOMToolClick:function(t,e,o){for(var i in o.dtOptions){var n=o._addUID("drawing-tool-"+o.dtOptions[i].id),r=document.getElementById(n);n===e?(o.dtOptions[i].active?r.className="drawing-tool":r.className="drawing-tool drawing-tool-active",o.dtOptions[i].active=!o.dtOptions[i].active):(r.className="drawing-tool",o.dtOptions[i].active=!1)}}};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(t),this._container=this._createMainContainerElement(),this._containerElement=null,t.element&&t.element.appendChild&&(t.element.appendChild(this._container),this._containerElement=t.element),a.default.control.Control.call(this,{element:this._containerElement||this._container,target:t.target,render:t.render})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(1),a=i(s),l=o(4),p=i(l),c=o(3),u=i(c),h=o(0),d=i(h),f=o(6),y=i(f),g=o(2),m=i(g),v=o(42),_=i(v),b=o(12),E=i(b),S=o(7),w=i(S),P=o(100),C=i(P),A=u.default.getLogger("route");return a.default.inherits(n,a.default.control.Control),n.prototype=Object.create(a.default.control.Control.prototype,{}),d.default.assign(n.prototype,C.default),n.prototype.constructor=n,n.prototype.getCollapsed=function(){return this.collapsed},n.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] Route:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(t?document.getElementById("GProutePanelClose-"+this._uid).click():document.getElementById("GPshowRoute-"+this._uid).click(),this.collapsed=t)},n.prototype.getLayer=function(){return this._geojsonSections},n.prototype.setMap=function(t){t&&(this._container=this._initContainer(t)),a.default.control.Control.prototype.setMap.call(this,t)},n.prototype.initialize=function(t){this._checkInputOptions(t),this.options={collapsed:!0,graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},routeOptions:{},autocompleteOptions:{}},d.default.assign(this.options,t);var e={departure:{url:w.default.red,offset:w.default.defaultOffset},stages:{url:w.default.lightOrange,offset:w.default.defaultOffset},arrival:{url:w.default.darkOrange,offset:w.default.defaultOffset}};this.options.markersOpts=d.default.assign(e,t.markersOpts),this.collapsed=this.options.collapsed,this._uid=m.default.generate(),this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._showRouteExclusionsElement=null,this._currentPoints=[],this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._waiting=!1,this._timer=null,this._geojsonRoute=null,this._geojsonSections=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._resultsSelectInteraction=null,this._resultsHoverInteraction=null,this._defaultFeatureStyle=new a.default.style.Style({stroke:new a.default.style.Stroke({color:"rgba(0,183,152,0.9)",width:12})}),this._selectedFeatureStyle=new a.default.style.Style({stroke:new a.default.style.Stroke({color:"rgba(255,102,0,0.9)",width:12})}),this._currentRouteInformations=null,this._resources={},this._noRightManagement=!1,this._checkRightsManagement()},n.prototype._checkInputOptions=function(t){if(t.graphs)if(Array.isArray(t.graphs))if(0===t.graphs.length)t.graphs=null;else for(var e=0;e<t.graphs.length;e++)"string"!=typeof t.graphs[e]?(console.log("[ol.control.Route] ERROR : parameter 'graphs' elements should be of type 'string'"),t.graphs=null):("pieton"===t.graphs[e].toLowerCase()&&(t.graphs[e]="Pieton"),"voiture"===t.graphs[e].toLowerCase()&&(t.graphs[e]="Voiture"));else A.warn("'graphs' parameter should be an array"),t.graphs=null;"true"===t.collapsed&&(t.collapsed=!0),"false"===t.collapsed&&(t.collapsed=!1)},n.prototype._checkRightsManagement=function(){var t=null,e=[],o=null;o=this.options.routeOptions.apiKey,t=this.options.routeOptions.filterOptions,(e=t?t.type:[])&&0!==e.length||(e=["Voiture","Pieton"]);var i=y.default.check({key:o||this.options.apiKey,resources:e,services:["Itineraire"]});A.log("rightManagementRoute",i),o=this.options.autocompleteOptions.apiKey,t=this.options.autocompleteOptions.filterOptions,(e=t?t.type:[])&&0!==e.length||(e=["PositionOfInterest","StreetAddress"]);var n=y.default.check({key:o||this.options.apiKey,resources:e,services:["AutoCompletion"]});A.log("rightManagementAutoComplete",n),i||n||(this._noRightManagement=!0),n&&(this._resources.AutoCompletion={},this._resources.AutoCompletion.resources=n.AutoCompletion,this._resources.AutoCompletion.key=n.key),i&&(this._resources.Itineraire={},this._resources.Itineraire.resources=i.Itineraire,this._resources.Itineraire.key=i.key)},n.prototype._initContainer=function(t){var e=this._container,o=this._showRouteContainer=this._createShowRouteElement();e.appendChild(o),this.collapsed||(o.checked=!0);var i=this._createShowRoutePictoElement();e.appendChild(i);var n=this._createRoutePanelElement(),r=this._createRoutePanelHeaderElement();n.appendChild(r);for(var s=this._formRouteContainer=this._createRoutePanelFormElement(),a=this._createRoutePanelFormPointsElement(t),l=0;l<a.length;l++)s.appendChild(a[l]);var p=this._createRoutePanelFormModeChoiceElement();p.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs)),p.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),s.appendChild(p),s.appendChild(this._createShowRouteExclusionsElement()),this._showRouteExclusionsElement=this._createShowRouteExclusionsPictoElement(),s.appendChild(this._showRouteExclusionsElement);var c=this._createRoutePanelFormExclusionsElement();c.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),s.appendChild(c);var u=this._createRouteFormResetElement();s.appendChild(u);var h=this._createRouteSubmitFormElement();s.appendChild(h),n.appendChild(s);var d=this._resultsRouteContainer=this._createRoutePanelResultsElement();n.appendChild(d);var f=this._waitingContainer=this._createRouteWaitingElement();n.appendChild(f),e.appendChild(n);var y=this;return e.addEventListener&&e.addEventListener("click",function(t){y._hideRouteSuggestedLocations.call(y,t)}),e},n.prototype._initTransport=function(){this._currentTransport="Voiture";var t=this.options.graphs;t&&0!==t.length||(this.options.graphs=["Voiture","Pieton"]),Array.isArray(t)&&t.length&&("Voiture"!==t[0]&&"Pieton"!==t[0]||(this._currentTransport=t[0]));var e=this.options.routeOptions;e.graph&&(this._currentTransport=e.graph)},n.prototype._initComputation=function(){this._currentComputation="fastest";var t=this.options.routeOptions
;t.routePreference&&(this._currentComputation=t.routePreference)},n.prototype._initExclusions=function(){this._currentExclusions=[];var t=this.options.exclusions;if((!t||"object"===(void 0===t?"undefined":r(t))&&0===Object.keys(t).length)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),t&&"object"===(void 0===t?"undefined":r(t))&&Object.keys(t).length)for(var e in t)t.hasOwnProperty(e)&&t[e]&&this._currentExclusions.push(e);var o=this.options.routeOptions;Array.isArray(o.exclusions)&&(this._currentExclusions=o.exclusions)},n.prototype._initPopupDiv=function(){var t=this,e=document.createElement("div");e.className="gp-feature-info-div";var o=document.createElement("input");return o.type="button",o.className="gp-styling-button closer",o.onclick=function(){return null!=t._popupOverlay&&t._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",e.appendChild(this._popupContent),e.appendChild(o),e},n.prototype._createRoutePanelFormPointsElement=function(t){var e=[],o=1,i=new _.default({apiKey:this.options.apiKey||null,tag:{id:o,groupId:this._uid,markerOpts:this.options.markersOpts.departure,label:"Départ",display:!0},autocompleteOptions:this.options.autocompleteOptions||null});for(i.setMap(t),this._addFormPointsEventListeners(i),e.push(i._container),this._currentPoints.push(i),o=2;o<7;o++){var n=new _.default({apiKey:this.options.apiKey||null,tag:{id:o,groupId:this._uid,label:"Etape",markerOpts:this.options.markersOpts.stages,display:!1,removeOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});n.setMap(t),this._addFormPointsEventListeners(n),e.push(n._container),this._currentPoints.push(n)}var r=new _.default({apiKey:this.options.apiKey||null,tag:{id:o,groupId:this._uid,markerOpts:this.options.markersOpts.arrival,label:"Arrivée",display:!0,addOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});return r.setMap(t),this._addFormPointsEventListeners(r),e.push(r._container),this._currentPoints.push(r),e},n.prototype._addFormPointsEventListeners=function(t){if(t){var e=this;t._inputLabelContainer.addEventListener?(t._inputLabelContainer.addEventListener("click",function(){e.onRouteOriginLabelClick.call(this,e)}),t._inputShowPointer.addEventListener("click",function(){e.onRouteOriginPointerClick.call(this,e,t)}),t._removePointElement&&t._removePointElement.addEventListener("click",function(){var t=e._showRouteExclusionsElement.style.top;e._showRouteExclusionsElement.style.top=(parseInt(t,10)-33).toString()+"px"}),t._addPointElement&&t._addPointElement.addEventListener("click",function(){var t=e._showRouteExclusionsElement.style.top;e._showRouteExclusionsElement.style.top=(parseInt(t,10)+33).toString()+"px"})):t._inputLabelContainer.attachEvent&&(t._inputLabelContainer.attachEvent("onclick",function(){e.onRouteOriginLabelClick.call(this,e)}),t._inputShowPointer.attachEvent("onclick",function(){e.onRouteOriginPointerClick.call(this,e,t)}),t._removePointElement&&t._removePointElement.attachEvent("onclick",function(){var t=e._showRouteExclusionsElement.style.top;e._showRouteExclusionsElement.style.top=(parseInt(t,10)-33).toString()+"px"}),t._addPointElement&&t._addPointElement.attachEvent("onclick",function(){var t=e._showRouteExclusionsElement.style.top;e._showRouteExclusionsElement.style.top=(parseInt(t,10)+33).toString()+"px"}))}},n.prototype.onRouteComputationSubmit=function(t){A.log("onRouteComputationSubmit",t);var e,o=this._currentPoints;if(o[0]&&o[0].getCoordinate){var i=o[0].getCoordinate();e={x:i[0],y:i[1]},A.log("start",e)}var n,r=o[o.length-1];if(r&&r.getCoordinate){var s=r.getCoordinate();n={x:s[0],y:s[1]},A.log("end",n)}for(var a=[],l=1;l<o.length-1;l++)if(o[l]&&o[l].getCoordinate){var p=o[l].getCoordinate();if(p){var c={x:p[0],y:p[1]};A.log("step",c),a.push(c)}}if(!this._noRightManagement){this._currentTransport=t.transport,this._currentComputation=t.computation,this._currentExclusions=t.exclusions;var u=this.options.routeOptions,h=u.protocol||"XHR",d=u.timeOut||0;"JSONP"===h&&0===d&&(d=15e3);var f=this;this._requestRouting({startPoint:e,endPoint:n,viaPoints:a,graph:u.graph||this._currentTransport,routePreference:u.routePreference||this._currentComputation,exclusions:u.exclusions||this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",timeOut:d,protocol:h,onSuccess:function(t){A.log(t),t&&f._fillRouteResultsDetails(t)},onFailure:function(t){f._hideWaitingContainer(),f._clearRouteResultsDetails(),A.log(t.message)}})}},n.prototype.onRouteOriginLabelClick=function(t){var e=t.getMap();t._formRouteContainer.className="",e.un("click",function(){"GProuteFormMini"===t._formRouteContainer.className&&(t._formRouteContainer.className="")})},n.prototype.onRouteOriginPointerClick=function(t,e){var o=t.getMap();e._inputShowPointerContainer.checked?(t._formRouteContainer.className="GProuteFormMini",o.on("click",function(){"GProuteFormMini"===t._formRouteContainer.className&&(t._formRouteContainer.className="")})):(t._formRouteContainer.className="",o.un("click",function(){"GProuteFormMini"===t._formRouteContainer.className&&(t._formRouteContainer.className="")}))},n.prototype.onShowRoutePanelClick=function(){this._geojsonSections||this._waiting||this._clear(),this.collapsed=document.getElementById("GPshowRoute-"+this._uid).checked,this.dispatchEvent("change:collapsed")},n.prototype.onRouteModeComputationChange=function(t){var e=t.target.selectedIndex,o=t.target.options[e].value;o&&(A.log(o),this._currentComputation=o)},n.prototype.onRouteModeComputationChangeAndRun=function(t){this.onRouteModeComputationChange(t),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})},n.prototype.onRouteModeTransportChange=function(t){var e=t.target.value;e&&(this._currentTransport=e)},n.prototype.onShowRouteExclusionsClick=function(t){A.log("onShowRouteExclusionsClick",t)},n.prototype.onRouteExclusionsChange=function(t){var e=t.target.value,o=t.target.checked;if(e&&"string"==typeof e){e=e.toLowerCase();for(var i=!1,n=null,r=0;r<this._currentExclusions.length;r++)this._currentExclusions[r]===e&&(n=r,i=!0);i||o||this._currentExclusions.push(e),i&&o&&this._currentExclusions.splice(n,1)}},n.prototype.onRouteResetClick=function(){for(var t=this._currentPoints,e=0;e<t.length;e++)t[e].clear();this._clear(),this._clearRouteInputOptions()},n.prototype.onShowRouteResultsNewClick=function(){this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry()},n.prototype.onRouteResultsDetailsMouseOver=function(t){var e=t.target.id,o=e.substring(e.indexOf("_")+1);if(t.target.classList&&t.target.classList.add("GProuteResultsDetailsInstructionHighlight"),this._geojsonSections){this._geojsonSections.getSource().getFeatureById(parseInt(o,10)).setStyle(this._selectedFeatureStyle)}},n.prototype.onRouteResultsDetailsMouseOut=function(t){var e=t.target.id,o=e.substring(e.indexOf("_")+1);if(t.target.classList&&t.target.classList.remove("GProuteResultsDetailsInstructionHighlight"),this._geojsonSections){this._geojsonSections.getSource().getFeatureById(parseInt(o,10)).setStyle(null)}},n.prototype._requestRouting=function(t){if(t&&("object"!==(void 0===t?"undefined":r(t))||0!==Object.keys(t).length)&&t.startPoint&&t.endPoint&&!this._noRightManagement&&this._resources.Itineraire){var e=this._resources.Itineraire.resources;if(e&&("object"!==(void 0===e?"undefined":r(e))||0!==Object.keys(e).length)){for(var o=this._resources.Itineraire.key,i=!1,n=0;n<e.length;n++)e[n]===t.graph&&(i=!0);if(!i)return void console.log("no rights for this service !?");t.apiKey=this.options.routeOptions.apiKey||this.options.apiKey||o,A.log(t),this._displayWaitingContainer(),p.default.Services.route(t)}}},n.prototype._fillRouteResultsDetails=function(t){var e=t.totalDistance,o=t.totalTime,i=this._simplifiedInstructions(t.routeInstructions);i&&this._fillRouteResultsDetailsContainer(e,o,i);var n=t.routeGeometry;n&&this._fillRouteResultsDetailsGeometry(n,this._defaultFeatureStyle),i&&i[0].geometry&&this._fillRouteResultsDetailsFeatureGeometry(i,this._defaultFeatureStyle);var r=t.bbox;if(r){var s=this.getMap(),l=[r.left,r.bottom,r.right,r.top],p=s.getView().getProjection().getCode();"EPSG:4326"!==p&&(l=a.default.proj.transformExtent(l,"EPSG:4326",p)),s.getView().fit(l,s.getSize())}this._currentRouteInformations=t,this._formRouteContainer.className="GProuteComponentHidden",this._hideWaitingContainer(),this._resultsRouteContainer.className=""},n.prototype._fillRouteResultsDetailsContainer=function(t,e,o){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(t,e,this._convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(o,this._convertSecondsToTime)},n.prototype._fillRouteResultsDetailsGeometry=function(t,e){this._clearRouteResultsGeometry();var o=this.getMap();if(t){var i={type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:t},n=new a.default.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),r=n.readFeatures(i,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this._geojsonRoute=new a.default.layer.Vector({source:new a.default.source.Vector({features:r}),style:e}),o.addLayer(this._geojsonRoute)}},n.prototype._fillRouteResultsDetailsFeatureGeometry=function(t,e){this._clearRouteResultsFeatureGeometry();for(var o=this.getMap(),i={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[]},n=0;n<t.length;n++){for(var r=t[n],s=n+1,l=r.geometry.coordinates,p=0;p<l.length;p++)"string"==typeof l[p][0]&&(l[p][0]=parseFloat(l[p][0]),l[p][1]=parseFloat(l[p][1]));i.features.push({type:"Feature",geometry:r.geometry,properties:{popupContent:"("+s+") distance : "+this._convertDistance(r.distance)+" / temps : "+this._convertSecondsToTime(r.duration)},id:s})}A.log(i);var c=new a.default.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),u=this.getMap().getView().getProjection().getCode(),h=c.readFeatures(i,{dataProjection:"EPSG:4326",featureProjection:u});this._geojsonSections=new a.default.layer.Vector({source:new a.default.source.Vector({features:h}),style:e,opacity:.9});var d;"Pieton"===this._currentTransport?(d="piéton",this._geojsonSections.gpResultLayerId="Pieton$OGC:OPENLS;Itineraire"):(d="voiture",this._geojsonSections.gpResultLayerId="Voiture$OGC:OPENLS;Itineraire"),o.addLayer(this._geojsonSections),o.getControls().forEach(function(t){if(t instanceof E.default){var e=this._geojsonSections.gpLayerId;t._layers[e].title===e&&t.addLayer(this._geojsonSections,{title:" Itinéraire "+d,description:" Itinéraire basé sur un graphe "+d})}},this),this._resultsHoverInteraction=new a.default.interaction.Select({condition:a.default.events.condition.pointerMove,layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsHoverInteraction.on("select",this._onResultsFeatureMouseOver,this),o.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new a.default.interaction.Select({layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsSelectInteraction.on("select",this._onResultsFeatureSelect,this),o.addInteraction(this._resultsSelectInteraction)},n.prototype._onResultsFeatureMouseOver=function(t){if(0!==t.selected.length){var e=t.selected[0],o=document.getElementById("GProuteResultsDetailsInstruction_"+e.getId()+"-"+this._uid);o&&o.classList&&o.classList.add("GProuteResultsDetailsInstructionHighlight")}if(0!==t.deselected.length){var i=t.deselected[0],n=document.getElementById("GProuteResultsDetailsInstruction_"+i.getId()+"-"+this._uid);n&&n.classList&&n.classList.remove("GProuteResultsDetailsInstructionHighlight")}},n.prototype._onResultsFeatureSelect=function(t){var e=this.getMap();if(0!==t.selected.length){var o=t.selected[0];this._popupContent.innerHTML=o.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(t.mapBrowserEvent.coordinate):(this._popupOverlay=new a.default.Overlay({element:this._popupDiv,positioning:"bottom-center",position:t.mapBrowserEvent.coordinate}),e.addOverlay(this._popupOverlay))}else null!=this._popupOverlay&&this._popupOverlay.setPosition(void 0)},n.prototype._clear=function(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var t=0;t<this._currentPoints.length;t++)this._currentPoints[t].clear();this._removeRouteStepLocations()},n.prototype._clearRouteInputOptions=function(){this._initTransport(),this._initComputation(),this._initExclusions();var t;"Pieton"===this._currentTransport?(t=document.getElementById("GProuteTransportPedestrian-"+this._uid))&&(t.checked="true"):(t=document.getElementById("GProuteTransportCar-"+this._uid))&&(t.checked="true");var e=document.getElementById("GProuteComputationSelect-"+this._uid);e&&(e.value=this._currentComputation);var o=document.getElementById("GProuteExclusionsToll-"+this._uid);o&&(-1!==this._currentExclusions.indexOf("toll")?o.checked=!1:o.checked=!0);var i=document.getElementById("GProuteExclusionsTunnel-"+this._uid);i&&(-1!==this._currentExclusions.indexOf("tunnel")?i.checked=!1:i.checked=!0);var n=document.getElementById("GProuteExclusionsBridge-"+this._uid);n&&(-1!==this._currentExclusions.indexOf("bridge")&&n?n.checked=!1:n.checked=!0)},n.prototype._removeRouteStepLocations=function(){var t=document.querySelectorAll('div[id^="GPlocationPoint"]'),e=0;if(0!==t.length)for(var o=1;o<t.length-1;o++){var i=t[o].classList;if(0!==i.length)for(var n=0;n<i.length;n++)"GPlocationStageFlexInput"===i[n]&&(document.getElementById(this._addUID("GPlocationStageRemove_"+(o+1))).click(),e+=1)}},n.prototype._clearRouteResultsDetails=function(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var t=this._resultsRouteDetailsContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild)}if(this._resultsRouteValuesContainer){var e=this._resultsRouteValuesContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}},n.prototype._clearRouteResultsGeometry=function(){var t=this.getMap();null!=this._geojsonRoute&&(t.removeLayer(this._geojsonRoute),this._geojsonRoute=null)},n.prototype._clearRouteResultsFeatureGeometry=function(){var t=this.getMap();null!=this._geojsonSections&&(t.removeLayer(this._geojsonSections),this._geojsonSections=null),null!=this._popupOverlay&&(t.removeOverlay(this._popupOverlay),this._popupOverlay=null),null!=this._resultsSelectInteraction&&(t.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),null!=this._resultsHoverInteraction&&(t.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)},n.prototype._hideRouteSuggestedLocations=function(t){if(t.target&&t.target.id&&-1!==t.target.id.indexOf("GPlocationOrigin_"))for(var e=parseInt(t.target.id.split("_")[1][0],10)-1,o=0;o<this._currentPoints.length;o++)o!==parseInt(e,10)&&this._currentPoints[o]._hideSuggestedLocation();else for(var i=0;i<this._currentPoints.length;i++)this._currentPoints[i]._hideSuggestedLocation()},n.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GProuteCalcWaitingContainerVisible",this._waiting=!0;var t=this.options.routeOptions;if(t&&t.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){!0===e._waiting?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}},n.prototype._hideWaitingContainer=function(){if(this._waiting){this._waitingContainer.className="GProuteCalcWaitingContainerHidden",this._waiting=!1;var t=this.options.routeOptions;t&&t.timeOut&&(clearTimeout(this._timer),this._timer=null)}},n.prototype._simplifiedInstructions=function(t){var e=[],o=t[0];1===t.length&&e.push(o);for(var i=1;i<t.length;i++){var n=t[i];if(n.instruction===o.instruction){o.distance=(parseFloat(n.distance)+parseFloat(o.distance)).toString(),o.duration=(parseFloat(n.duration)+parseFloat(o.duration)).toString();for(var r=1;r<n.geometry.coordinates.length;r++)o.geometry.coordinates.push(n.geometry.coordinates[r])}else e.push(o),o=n,i===t.length-1&&(e.push(n),o=null)}return A.log(e),e},n.prototype._convertSecondsToTime=function(t){var e="";t=Math.round(t);var o=Math.floor(t/3600),i=t%3600,n=Math.floor(i/60);return o&&(e=o+"h "),e+=n+" min"},n.prototype._convertDistance=function(t){var e=parseInt(t/1e3,10);return e?e+" km":parseInt(t,10)+" m"},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),n=function(t){return t&&t.__esModule?t:{default:t}}(i),r={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.className=this._addUID("GPlocationPoint"),t.className+=" GPwidget",t},_createLocationPointElement:function(t,e){var o=document.createElement("div");return o.id=this._addUID("GPlocationPoint_"+t),o.className=e?"GPflexInput GPlocationStageFlexInput":"GPflexInput GPlocationStageFlexInputHidden",o.style.cssText="",o},_createLocationPointLabelElement:function(t,e){var o=this,i=document.createElement("label");return i.id=this._addUID("GPlocationOriginLabel_"+t),i.htmlFor="GPlocationOrigin_"+t,i.innerHTML=e,i.addEventListener("click",function(t){for(var e=n.default.index(this.id),i=document.getElementsByClassName(o._addUID("GPlocationPoint")),r=0;r<i.length;r++){var s=i[r].childNodes[0].id,a=n.default.index(s);document.getElementById(o._addUID("GPlocationPoint_"+a)).style.cssText=""}document.getElementById(o._addUID("GPlocationOriginCoords_"+e)).value="",document.getElementById(o._addUID("GPlocationOrigin_"+e)).value="",document.getElementById(o._addUID("GPlocationPoint_"+e)).style.cssText="",document.getElementById(o._addUID("GPlocationOriginPointer_"+e)).checked=!1,document.getElementById(o._addUID("GPlocationOrigin_"+e)).className="GPlocationOriginVisible",document.getElementById(o._addUID("GPlocationOriginCoords_"+e)).className="GPlocationOriginHidden",document.getElementById(o._addUID("GPlocationStageRemove_"+e))&&(document.getElementById(o._addUID("GPlocationStageRemove_"+e)).className="GPlocationStageRemove"),document.getElementById(o._addUID("GPlocationStageAdd"))&&(document.getElementById(o._addUID("GPlocationStageAdd")).className=""),o.onLocationClearPointClick(t)}),i},_createLocationAutoCompleteteInputElement:function(t){var e=this,o=document.createElement("input");return o.id=this._addUID("GPlocationOrigin_"+t),o.className="GPlocationOriginVisible",o.type="text",o.placeholder="Saisir une adresse",o.autocomplete="off",o.addEventListener("keyup",function(t){var o=t.which||t.keyCode;if(13!==o&&10!==o&&38!==o&&40!==o){var i=n.default.index(this.id);document.getElementById(e._addUID("GPlocationOrigin_"+i)).value.length>2?document.getElementById(e._addUID("GPlocationAutoCompleteList_"+i)).style.display="block":document.getElementById(e._addUID("GPlocationAutoCompleteList_"+i)).style.display="none",e.onAutoCompleteSearchText(t)}}),o.addEventListener("keydown",function(o){var i=o.which||o.keyCode,r=document.getElementById(e._addUID("GPlocationAutoCompleteList_"+t));if(r){var s=r.getElementsByClassName("GPautoCompleteProposal current"),a=r.getElementsByClassName("GPautoCompleteProposal"),l=a.length;if(l){var p=null;if(!s.length)return p=a[0],p.className="GPautoCompleteProposal current",p.style.color="#000000",void(p.style["background-color"]="#CEDBEF");p=s[0];var c=parseInt(n.default.index(p.id),10),u=c===l-1?a[0]:a[c+1],h=0===c?a[l-1]:a[c-1];switch(p.style["background-color"]="",p.style.color="",h.style["background-color"]="",h.style.color="",u.style["background-color"]="",u.style.color="",i){case 38:console.log("arrow up"),p.className="GPautoCompleteProposal",h.className="GPautoCompleteProposal current",h.style.color="#000000",h.style["background-color"]="#CEDBEF";break;case 40:console.log("arrow down"),p.className="GPautoCompleteProposal",u.className="GPautoCompleteProposal current",u.style.color="#000000",u.style["background-color"]="#CEDBEF";break;case 13:console.log("enter"),p.click(o)}p.focus()}}}),o},_createLocationCoordinateInputElement:function(t){var e=this,o=document.createElement("input");return o.id=this._addUID("GPlocationOriginCoords_"+t),o.className="GPlocationOriginHidden",o.type="text",o.disabled=!1,o.addEventListener("click",function(){var t=n.default.index(this.id);document.getElementById(e._addUID("GPlocationOriginLabel_"+t)).click()}),o},_createLocationPointerShowInputElement:function(t){var e=document.createElement("input");return e.id=this._addUID("GPlocationOriginPointer_"+t),e.type="checkbox",e},_createLocationPointerInputElement:function(t){var e=this,o=document.createElement("label");return o.id=this._addUID("GPlocationOriginPointerImg_"+t),o.htmlFor="GPlocationOriginPointer_"+t,o.className="GPlocationOriginPointerImg",o.title="Pointer un lieu sur la carte",o.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var o,i,r,s=n.default.index(this.id),a=document.getElementsByClassName(e._addUID("GPlocationPoint"));for(o=0;o<a.length;o++)i=a[o].childNodes[0].id,r=n.default.index(i),s!==r&&(document.getElementById(e._addUID("GPlocationOriginPointer_"+r)).checked=!1,"Pointer un lieu sur la carte"===document.getElementById(e._addUID("GPlocationOriginCoords_"+r)).value&&(document.getElementById(e._addUID("GPlocationOriginCoords_"+r)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+r)).className="GPlocationOriginVisible",document.getElementById(e._addUID("GPlocationOriginCoords_"+r)).className="GPlocationOriginHidden"));if(document.getElementById(e._addUID("GPlocationOriginPointer_"+s)).checked){for(document.getElementById(e._addUID("GPlocationOriginCoords_"+s)).value="",o=0;o<a.length;o++)i=a[o].childNodes[0].id,r=n.default.index(i),document.getElementById(e._addUID("GPlocationPoint_"+r)).style.cssText="";document.getElementById(e._addUID("GPlocationStageRemove_"+s))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+s)).className="GPlocationStageRemove"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className=""),document.getElementById(e._addUID("GPlocationOriginPointer_"+s)).checked=!1,document.getElementById(e._addUID("GPlocationOrigin_"+s)).className="GPlocationOriginVisible",document.getElementById(e._addUID("GPlocationOriginCoords_"+s)).className="GPlocationOriginHidden"}else{for(document.getElementById(e._addUID("GPlocationOriginCoords_"+s)).value="Pointer un lieu sur la carte",o=0;o<a.length;o++)i=a[o].childNodes[0].id,r=n.default.index(i),s===r?document.getElementById(e._addUID("GPlocationPoint_"+r)).style.cssText="":document.getElementById(e._addUID("GPlocationPoint_"+r)).style.display="none";document.getElementById(e._addUID("GPlocationStageRemove_"+s))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+s)).className="GPlocationOriginHidden"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPlocationOriginHidden"),document.getElementById(e._addUID("GPlocationOriginPointer_"+s)).checked=!0,document.getElementById(e._addUID("GPlocationOrigin_"+s)).className="GPlocationOriginHidden",document.getElementById(e._addUID("GPlocationOriginCoords_"+s)).className="GPlocationOriginVisible",document.getElementById(e._addUID("GPlocationOriginCoords_"+s)).disabled=!0}e.onActivateMapPointClick(t)}),o},_createLocationRemovePointElement:function(t){var e=this,o=document.createElement("div");return o.id=this._addUID("GPlocationStageRemove_"+t),o.className="GPlocationStageRemove",o.title="Supprimer l'étape",o.addEventListener("click",function(o){var i=document.getElementsByClassName(e._addUID("GPlocationPoint")),r=i.length-1,s=i[0].childNodes[0].id,a=i[r].childNodes[0].id,l=n.default.index(s),p=n.default.index(a);if(t!==l&&t!==p){var c=n.default.index(this.id);document.getElementById(e._addUID("GPlocationPoint_"+c)).className="GPflexInput GPlocationStageFlexInputHidden",document.getElementById(e._addUID("GPlocationOrigin_"+c)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+c)).className="GPlocationOriginVisible",document.getElementById(e._addUID("GPlocationOriginCoords_"+c)).value="",document.getElementById(e._addUID("GPlocationOriginCoords_"+c)).className="GPlocationOriginHidden",document.getElementById(e._addUID("GPlocationStageAdd")).style.display="",e.onLocationRemovePointClick(o)}}),o},_createLocationAddPointElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPlocationStageAdd"),e.title="Ajouter une étape",e.addEventListener("click",function(e){for(var o=1,i=0,r=document.getElementsByClassName(t._addUID("GPlocationPoint")),s=1;s<r.length-1;s++){var a=r[s].childNodes[0].id,l=n.default.index(a);document.getElementById(t._addUID("GPlocationPoint_"+l))&&("GPflexInput GPlocationStageFlexInputHidden"===document.getElementById(t._addUID("GPlocationPoint_"+l)).className?1===o&&(o=l):i++)}o<r.length&&(document.getElementById(t._addUID("GPlocationPoint_"+o)).className="GPflexInput GPlocationStageFlexInput"),4===i&&(document.getElementById(t._addUID("GPlocationStageAdd")).style.display="none"),t.onLocationAddPointClick(e)}),e},_createLocationAutoCompleteResultElement:function(t){var e=this,o=document.createElement("div");return o.id=this._addUID("GPlocationAutoCompleteList_"+t),o.className="GPadvancedAutoCompleteList",o.addEventListener?o.addEventListener("click",function(o){e.onAutoCompletedResultsItemClick(o),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+t)).style.display="none"},!1):o.attachEvent&&o.attachEvent("onclick",function(o){e.onAutoCompletedResultsItemClick(o),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+t)).style.display="none"}),o},_createLocationAutoCompletedLocationElement:function(t,e,o){var i=document.getElementById(this._addUID("GPlocationAutoCompleteList_"+t)),n=document.createElement("div");n.id=this._addUID("AutoCompletedLocation_"+o),n.className="GPautoCompleteProposal",n.innerHTML=e.fullText,i.appendChild(n)},GPdisplayCoordinate:function(t){for(var e=document.getElementsByClassName(this._addUID("GPlocationPoint")),o=0;o<e.length;o++){var i=e[o].childNodes[0].id,r=n.default.index(i);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+r)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+r)).value=t,document.getElementById(this._addUID("GPlocationOriginCoords_"+r)).disabled=!1;for(var s=0;s<e.length;s++){i=e[s].childNodes[0].id;var a=n.default.index(i);document.getElementById(this._addUID("GPlocationPoint_"+a)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+a))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+a)).className="GPlocationStageRemove")}return document.getElementById(this._addUID("GPlocationOriginPointer_"+r)).checked=!1,void(document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className=""))}}}};return e.default=r,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(2),n=function(t){return t&&t.__esModule?t:{default:t}}(i),r={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProute"),t.className="GPwidget",t},_createShowRouteElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowRoute"),t.type="checkbox",t},_createShowRoutePictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowRoutePicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowRoute"),e.title="Ouvrir le calcul d'itinéraire",e.addEventListener?e.addEventListener("click",function(e){t.onShowRoutePanelClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowRoutePanelClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowRouteOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createRoutePanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProutePanel"),t.className="GPpanel",t},_createRoutePanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Calcul d'itinéraire",e.appendChild(o);var i=document.createElement("div");return i.id=this._addUID("GProutePanelClose"),i.className="GPpanelClose",i.title="Masquer le panneau",i.addEventListener?i.addEventListener("click",function(){document.getElementById(t._addUID("GPshowRoutePicto")).click()},!1):i.attachEvent&&i.attachEvent("onclick",function(){document.getElementById(t._addUID("GPshowRoutePicto")).click()}),e.appendChild(i),e},_createRoutePanelFormElement:function(){var t=this,e=document.createElement("form");return e.id=this._addUID("GProuteForm"),e.setAttribute("onkeypress","return event.keyCode != 13;"),e.addEventListener("submit",function(e){console.log(e),e.preventDefault();var o=document.getElementsByClassName(t._addUID("GPlocationPoint")),i=o[0].childNodes[0].id,r=o[o.length-1].childNodes[0].id,s=n.default.index(i),a=n.default.index(r);if(""==document.getElementById(t._addUID("GPlocationOrigin_"+s)).value&&""==document.getElementById(t._addUID("GPlocationOriginCoords_"+s)).value||""==document.getElementById(t._addUID("GPlocationOrigin_"+a)).value&&""==document.getElementById(t._addUID("GPlocationOriginCoords_"+a)).value)return!1;var l;document.getElementById(t._addUID("GProuteResultsStages")).innerHTML="";for(var p=0;p<o.length;p++){var c=o[p].childNodes[0].id;if(l=n.default.index(c),"GPflexInput GPlocationStageFlexInput"==document.getElementById(t._addUID("GPlocationPoint_"+l)).className){var u=document.createElement("div");u.className="GProuteResultsStages";var h=document.createElement("div");h.className="GProuteResultStageLabel",h.innerHTML=document.getElementById(t._addUID("GPlocationOriginLabel_"+l)).innerHTML+" :",u.appendChild(h);var d=document.createElement("div");d.className="GProuteResultStageValue";var f=document.getElementById(t._addUID("GPlocationOriginCoords_"+l)),y=f.value,g="GPlocationOriginVisible"===f.className;d.innerHTML=null!=y&&""!=y&&g?y:document.getElementById(t._addUID("GPlocationOrigin_"+l)).value,u.appendChild(d),""!=d.innerHTML&&document.getElementById(t._addUID("GProuteResultsStages")).appendChild(u)}}var m=null;if(document.getElementById(t._addUID("GProuteComputationSelect"))){var v=document.getElementById(t._addUID("GProuteResultsComputationSelect"));v.selectedIndex=document.getElementById(t._addUID("GProuteComputationSelect")).selectedIndex,m=v.options[v.selectedIndex].value}var _=null;document.getElementById(t._addUID("GProuteTransportCar"))&&document.getElementById(t._addUID("GProuteTransportCar")).checked&&(_=document.getElementById(t._addUID("GProuteTransportCar")).value),document.getElementById(t._addUID("GProuteTransportPedestrian"))&&document.getElementById(t._addUID("GProuteTransportPedestrian")).checked&&(_=document.getElementById(t._addUID("GProuteTransportPedestrian")).value);for(var b=[],E=document.getElementsByClassName("GProuteExclusionsOption"),S=0;S<E.length;S++){l=E[S].htmlFor;var w=document.getElementById(l);w.checked||b.push(w.value)}return t.onRouteComputationSubmit({computation:m,transport:_,exclusions:b}),!1}),e},_createRoutePanelResultsElement:function(){var t=document.createElement("div");t.id=this._addUID("GProuteResultsPanel"),t.className="GProuteComponentHidden",t.appendChild(this._createRouteResultsStagesElement()),
t.appendChild(this._createRouteResultsElement());var e=document.createElement("div");e.className="GPfakeBorder GPfakeBorderLeft",t.appendChild(e),t.appendChild(this._createRouteShowResultsDetailsElement());var o=document.createElement("label");o.htmlFor=this._addUID("GProuteResultsShowDetails"),o.innerHTML="Afficher le détail",t.appendChild(o);var i=document.createElement("label");i.htmlFor=this._addUID("GProuteResultsShowDetails"),i.innerHTML="Masquer le détail",t.appendChild(i);var n=document.createElement("div");return n.className="GPfakeBorder",t.appendChild(n),t.appendChild(this._createRouteResultsDetailsElement()),t},_createRouteWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GProuteCalcWaitingContainer"),t.className="GProuteCalcWaitingContainerHidden";var e=document.createElement("p");return e.className="GProuteCalcWaiting",e.innerHTML="Calcul en cours...",t.appendChild(e),t},_createRouteResultsStagesElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProuteResultsStages"),t},_createRouteResultsElement:function(){var t=this,e=document.createElement("div");e.id=this._addUID("GProuteResults");var o=document.createElement("div");o.id=this._addUID("GProuteResultsValues"),e.appendChild(o);var i=document.createElement("div");i.id=this._addUID("GProuteResultsMode");var n=document.createElement("select");n.id=this._addUID("GProuteResultsComputationSelect"),n.className="GPinputSelect",n.addEventListener("change",function(e){t.onRouteModeComputationChangeAndRun(e)});for(var r=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],s=0;s<r.length;s++){var a=document.createElement("option");a.value=r[s].code,a.text=r[s].label,n.appendChild(a)}i.appendChild(n),e.appendChild(i);var l=document.createElement("div");return l.id=this._addUID("GProuteResultsNew"),l.title="Modifier le calcul",l.addEventListener("click",function(e){document.getElementById(t._addUID("GProuteResultsPanel")).className="GProuteComponentHidden",document.getElementById(t._addUID("GProuteForm")).className="",t.onShowRouteResultsNewClick(e)}),e.appendChild(l),e},_addRouteResultsValuesElement:function(t,e,o){var i=document.getElementById(this._addUID("GProuteResultsValues"));if(i.childElementCount)for(;i.firstChild;)i.removeChild(i.firstChild);var n=document.createElement("div");n.className="GProuteResultsValue";var r=document.createElement("label");r.className="GProuteResultsValueLabel",r.innerHTML="Distance :",n.appendChild(r);var s=0;if(parseInt(t/1e3,10)){var a=Math.round(t);a/=1e3,s=a+" km"}else s=Math.round(t)+" m";var l=document.createElement("div");l.id=this._addUID("GProuteResultsValueDist"),l.innerHTML=s,n.appendChild(l),i.appendChild(n);var p=document.createElement("div");p.className="GProuteResultsValue";var c=document.createElement("label");c.className="GProuteResultsValueLabel",c.innerHTML="Durée :",p.appendChild(c);var u=document.createElement("div");return u.id=this._addUID("GProuteResultsValueDist"),u.innerHTML=o(e),p.appendChild(u),i.appendChild(p),i},_createRouteShowResultsDetailsElement:function(){var t=document.createElement("input");return t.id=this._addUID("GProuteResultsShowDetails"),t.type="checkbox",t},_createRouteResultsDetailsElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProuteResultsDetails"),t},_addRouteResultsDetailsElement:function(t,e){var o=this,i=document.getElementById(this._addUID("GProuteResultsDetails"));if(i.childElementCount)for(;i.firstChild;)i.removeChild(i.firstChild);for(var n=0,r=0,s=0;s<t.length;s++){var a=s+1,l=t[s],p=document.createElement("div");p.className="GProuteResultsDetailsNumber",p.innerHTML=a+".",i.appendChild(p),r+=parseFloat(l.duration),n+=parseFloat(l.distance);var c=0;if(parseInt(n/1e3,10)){var u=Math.round(n);u/=1e3,c=u+" km"}else c=Math.round(n)+" m";var h=document.createElement("div");h.className="GProuteResultsDetailsInstruction",h.id=this._addUID("GProuteResultsDetailsInstruction_"+a),h.title="distance : "+c+" / temps : "+e(r),h.innerHTML=l.instruction,h.addEventListener("mouseover",function(t){o.onRouteResultsDetailsMouseOver(t)}),h.addEventListener("mouseout",function(t){o.onRouteResultsDetailsMouseOut(t)}),h.addEventListener("click",function(t){"function"==typeof o.onRouteResultsDetailsClick&&o.onRouteResultsDetailsClick(t)}),i.appendChild(h)}return i},_createRoutePanelFormPointElement:function(t,e,o){var i=this,n=document.createElement("div");n.id="GProutePoint"+t,n.className=o?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var r=document.createElement("label");r.id="GProuteOriginLabel"+t,r.htmlFor="GProuteOrigin"+t,r.innerHTML=e,r.addEventListener("click",function(){var t=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+t).value="";for(var e=1;e<8;e++)document.getElementById("GProutePoint"+e).style.display="flex";document.getElementById("GProuteForm").className="",document.getElementById("GProuteOriginPointer"+t).checked=!1,document.getElementById("GProuteOrigin"+t).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+t).className="GProuteOriginHidden"}),n.appendChild(r);var s=document.createElement("input");s.id="GProuteOrigin"+t,s.className="GProuteOriginVisible",s.type="text",s.placeholder="Saisir une adresse",s.addEventListener("keyup",function(t){var e=t.which||t.keyCode;if(13!==e&&10!==e){var o=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+o).value.length>2?document.getElementById("GProuteAutoCompleteList"+o).style.display="block":document.getElementById("GProuteAutoCompleteList"+o).style.display="none",i.onAutoCompleteSearchText(t)}}),s.addEventListener("blur",function(){var t=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+t).style.display="none"}),n.appendChild(s);var a=document.createElement("input");a.id="GProuteOriginCoords"+t,a.className="GProuteOriginHidden",a.type="text",a.disabled=!0,n.appendChild(a);var l=document.createElement("input");l.id="GProuteOriginPointer"+t,l.type="checkbox",n.appendChild(l);var p=document.createElement("label");return p.id="GProuteOriginPointerImg"+t,p.htmlFor="GProuteOriginPointer"+t,p.className="GProuteOriginPointerImg",p.title="Pointer un lieu sur la carte",p.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation();var e,o=this.id.charAt(this.id.length-1);for(e=1;e<8;e++)o!=e&&(document.getElementById("GProuteOriginPointer"+e).checked=!1,"Pointer un lieu sur la carte"==document.getElementById("GProuteOriginCoords"+e).value&&(document.getElementById("GProuteOriginCoords"+e).value="",document.getElementById("GProuteOrigin"+e).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+e).className="GProuteOriginHidden"));if(document.getElementById("GProuteOriginPointer"+o).checked){for(document.getElementById("GProuteOriginCoords"+o).value="",e=1;e<8;e++)document.getElementById("GProutePoint"+e).style.display="flex";document.getElementById("GProuteForm").className="",document.getElementById("GProuteOriginPointer"+o).checked=!1,document.getElementById("GProuteOrigin"+o).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+o).className="GProuteOriginHidden"}else{for(document.getElementById("GProuteOriginCoords"+o).value="Pointer un lieu sur la carte",e=1;e<8;e++)document.getElementById("GProutePoint"+e).style.display=o==e?"flex":"none";document.getElementById("GProuteForm").className="GProuteFormMini",document.getElementById("GProuteOriginPointer"+o).checked=!0,document.getElementById("GProuteOrigin"+o).className="GProuteOriginHidden",document.getElementById("GProuteOriginCoords"+o).className="GProuteOriginVisible"}i.onRouteMapPointClick(t)}),n.appendChild(p),n},_createRoutePanelFormRemoveStageElement:function(t){var e=this,o=document.createElement("div");return o.id="GProuteStageRemove"+t,o.className="GProuteStageRemove",o.title="Supprimer l'étape",1!=t&&7!=t&&o.addEventListener("click",function(t){var o=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+o).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+o).value="",document.getElementById("GProuteOrigin"+o).className="GProuteOriginVisible",document.getElementById("GProuteOriginCoords"+o).value="",document.getElementById("GProuteOriginCoords"+o).className="GProuteOriginHidden",document.getElementById("GProuteStageAdd").style.display="";var i=document.getElementById("GPshowRouteExclusionsPicto").style.top;document.getElementById("GPshowRouteExclusionsPicto").style.top=(parseInt(i,10)-33).toString()+"px",e.onRouteRemovePointClick(t)}),o},_createRoutePanelFormAddStageElement:function(){var t=this,e=document.createElement("div");return e.id="GProuteStageAdd",e.title="Ajouter une étape",e.addEventListener("click",function(e){for(var o=1,i=0,n=2;n<7;n++)"GPflexInput GProuteStageFlexInputHidden"==document.getElementById("GProutePoint"+n).className?1==o&&(o=n):i++;if(o<7){document.getElementById("GProutePoint"+o).className="GPflexInput GProuteStageFlexInput";var r=document.getElementById("GPshowRouteExclusionsPicto").style.top;document.getElementById("GPshowRouteExclusionsPicto").style.top=(parseInt(r,10)+33).toString()+"px"}4==i&&(document.getElementById("GProuteStageAdd").style.display="none"),t.onRouteAddPointClick(e)}),e},_createRoutePanelFormAutoCompleteListElement:function(t){var e=this,o=document.createElement("div");return o.id="GProuteAutoCompleteList"+t,o.className="GPadvancedAutoCompleteList",o.addEventListener?o.addEventListener("click",function(o){e.onAutoCompletedResultsItemClick(o),document.getElementById("GProuteAutoCompleteList"+t).style.display="none"},!1):o.attachEvent&&o.attachEvent("onclick",function(o){e.onAutoCompletedResultsItemClick(o),document.getElementById("GProuteAutoCompleteList"+t).style.display="none"}),o},_createRouteAutoCompletedLocationElement:function(t,e,o){var i=document.getElementById("GProuteAutoCompleteList"+e),n=document.createElement("div");n.id="AutoCompletedLocation"+o,n.className="GPautoCompleteProposal",n.innerHTML=t.fullText,i.appendChild(n)},_createRoutePanelFormModeChoiceElement:function(){var t=document.createElement("div");return t.id=this._addUID("GProuteModeChoice"),t},_createRoutePanelFormModeChoiceTransportElement:function(t){var e=this,o=document.createElement("div");o.id=this._addUID("GProuteTransportChoice");var i=document.createElement("span");i.className="GProuteModeLabel",i.innerHTML="Mode de transport",o.appendChild(i);for(var n=0;n<t.length;n++){var r=t[n];if("Voiture"===r){var s=document.createElement("input");s.id=this._addUID("GProuteTransportCar"),s.type="radio",s.name="GProuteTransport",s.value="Voiture",0===n&&(s.checked=!0),s.addEventListener?s.addEventListener("change",function(t){e.onRouteModeTransportChange(t)}):s.attachEvent&&s.attachEvent("onchange",function(t){e.onRouteModeTransportChange(t)}),o.appendChild(s);var a=document.createElement("label");a.className="GProuteTransportImg",a.htmlFor=this._addUID("GProuteTransportCar"),a.title="Voiture",o.appendChild(a)}if("Pieton"===r){var l=document.createElement("input");l.id=this._addUID("GProuteTransportPedestrian"),l.type="radio",l.name="GProuteTransport",l.value="Pieton",0===n&&(l.checked=!0),l.addEventListener?l.addEventListener("change",function(t){e.onRouteModeTransportChange(t)}):l.attachEvent&&l.attachEvent("onchange",function(t){e.onRouteModeTransportChange(t)}),o.appendChild(l);var p=document.createElement("label");p.className="GProuteTransportImg",p.htmlFor=this._addUID("GProuteTransportPedestrian"),p.title="Piéton",o.appendChild(p)}}return o},_createRoutePanelFormModeChoiceComputeElement:function(){var t=this,e=document.createElement("div");e.id=this._addUID("GProuteComputationChoice");var o=document.createElement("span");o.className="GProuteModeLabel",o.innerHTML="Mode de calcul",e.appendChild(o);var i=document.createElement("select");i.id=this._addUID("GProuteComputationSelect"),i.className="GPinputSelect",i.addEventListener("change",function(e){t.onRouteModeComputationChange(e)});for(var n=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],r=0;r<n.length;r++){var s=document.createElement("option");s.value=n[r].code,s.text=n[r].label,i.appendChild(s)}return e.appendChild(i),e},_createShowRouteExclusionsElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowRouteExclusions"),t.type="checkbox",t},_createShowRouteExclusionsPictoElement:function(){var t=this,e=document.createElement("label");return e.id=this._addUID("GPshowRouteExclusionsPicto"),e.className="GPshowMoreOptions GPshowRouteExclusionsPicto",e.htmlFor=this._addUID("GPshowRouteExclusions"),e.title="Exclusions",e.style.top="185px",e.addEventListener?e.addEventListener("click",function(e){t.onShowRouteExclusionsClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowRouteExclusionsClick(e)}),e},_createRoutePanelFormExclusionsElement:function(){var t=document.createElement("div");t.id=this._addUID("GProuteExclusions");var e=document.createElement("span");return e.className="GProuteExclusionsLabel",e.innerHTML="Passages autorisés",t.appendChild(e),t},_createRoutePanelFormExclusionOptionsElement:function(t){var e=this,o=document.createElement("div");o.className="GProuteExclusionsOptions";for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];switch(i){case"toll":var r=document.createElement("input");r.id=this._addUID("GProuteExclusionsToll"),r.type="checkbox",r.value="Toll",r.checked=!n,r.addEventListener?r.addEventListener("change",function(t){e.onRouteExclusionsChange(t)}):r.attachEvent&&r.attachEvent("onchange",function(t){e.onRouteExclusionsChange(t)}),o.appendChild(r);var s=document.createElement("label");s.className="GProuteExclusionsOption",s.htmlFor=this._addUID("GProuteExclusionsToll"),s.innerHTML="Péages",o.appendChild(s);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GProuteExclusionsTunnel"),a.type="checkbox",a.value="Tunnel",a.checked=!n,a.addEventListener?a.addEventListener("change",function(t){e.onRouteExclusionsChange(t)}):a.attachEvent&&a.attachEvent("onchange",function(t){e.onRouteExclusionsChange(t)}),o.appendChild(a);var l=document.createElement("label");l.className="GProuteExclusionsOption",l.htmlFor=this._addUID("GProuteExclusionsTunnel"),l.innerHTML="Tunnels",o.appendChild(l);break;case"bridge":var p=document.createElement("input");p.id=this._addUID("GProuteExclusionsBridge"),p.type="checkbox",p.value="Bridge",p.checked=!n,p.addEventListener?p.addEventListener("change",function(t){e.onRouteExclusionsChange(t)}):p.attachEvent&&p.attachEvent("onchange",function(t){e.onRouteExclusionsChange(t)}),o.appendChild(p);var c=document.createElement("label");c.className="GProuteExclusionsOption",c.htmlFor=this._addUID("GProuteExclusionsBridge"),c.innerHTML="Ponts",o.appendChild(c)}}return o},_createRouteSubmitFormElement:function(){var t=document.createElement("input");return t.id=this._addUID("GProuteSubmit"),t.className="GPinputSubmit",t.type="submit",t.value="Calculer",t},_createRouteFormResetElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GProuteReset"),e.title="Réinitialiser les paramètres",e.addEventListener("click",function(e){t.onRouteResetClick(e)}),e}};return e.default=r,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(t),this._container=this._createMainContainerElement(),this._containerElement=null,t.element&&t.element.appendChild&&(t.element.appendChild(this._container),this._containerElement=t.element),a.default.control.Control.call(this,{element:this._containerElement||this._container,target:t.target,render:t.render})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(1),a=i(s),l=o(4),p=i(l),c=o(3),u=i(c),h=o(0),d=i(h),f=o(6),y=i(f),g=o(2),m=i(g),v=o(42),_=i(v),b=o(12),E=i(b),S=o(7),w=i(S),P=o(102),C=i(P),A=u.default.getLogger("isocurve");return a.default.inherits(n,a.default.control.Control),n.prototype=Object.create(a.default.control.Control.prototype,{}),d.default.assign(n.prototype,C.default),n.prototype.constructor=n,n.prototype.getCollapsed=function(){return this.collapsed},n.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] Isocurve:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(t?document.getElementById("GPisochronPanelClose-"+this._uid).click():document.getElementById("GPshowIsochronPicto-"+this._uid).click(),this.collapsed=t)},n.prototype.getLayer=function(){return this._geojsonLayer},n.prototype.setMap=function(t){t&&(this._container=this._initContainer(t)),a.default.control.Control.prototype.setMap.call(this,t)},n.prototype.initialize=function(t){this._checkInputOptions(t),this.options={collapsed:!0,methods:["time","distance"],graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],markerOpts:{url:w.default.lightOrange,offset:w.default.defaultOffset},isocurveOptions:{},autocompleteOptions:{}},d.default.assign(this.options,t),this.collapsed=this.options.collapsed,this._uid=m.default.generate(),this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._currentDirection=null,this._initDirection(),this._originPoint=null,this._showIsoContainer=null,this._waitingContainer=null,this._formContainer=null,this._currentIsoResults=null,this._geojsonLayer=null,this._waiting=!1,this._timer=null,this._defaultFeatureStyle=new a.default.style.Style({fill:new a.default.style.Fill({color:"rgba(0, 183, 152, 0.7)"})}),this._resources={},this._noRightManagement=!1,this._checkRightsManagement()},n.prototype._checkInputOptions=function(t){var e;if(t.methods)if(Array.isArray(t.methods))if(0===t.methods.length)t.methods=null;else for(e=0;e<t.methods.length;e++)"string"!=typeof t.methods[e]&&console.log("[ol.control.Isocurve] ERROR : parameter 'methods' elements should be of type 'string'");else A.warn("'methods' parameter should be an array"),t.methods=null;if(t.graphs)if(Array.isArray(t.graphs))if(0===t.graphs.length)t.graphs=null;else for(e=0;e<t.graphs.length;e++)"string"!=typeof t.graphs[e]?console.log("[ol.control.Isocurve] ERROR : parameter 'graphs' elements should be of type 'string'"):("pieton"===t.graphs[e].toLowerCase()&&(t.graphs[e]="Pieton"),"voiture"===t.graphs[e].toLowerCase()&&(t.graphs[e]="Voiture"));else A.warn("'graphs' parameter should be an array"),t.graphs=null;if(t.directions)if(Array.isArray(t.directions))if(0===t.directions.length)t.directions=null;else for(e=0;e<t.directions.length;e++)"string"!=typeof t.directions[e]&&console.log("[ol.control.Isocurve] ERROR : parameter 'directions' elements should be of type 'string'");else A.warn("'directions' parameter should be an array"),t.directions=null;"true"===t.collapsed&&(t.collapsed=!0),"false"===t.collapsed&&(t.collapsed=!1)},n.prototype._initTransport=function(){this._currentTransport="Voiture";var t=this.options.graphs;t&&0!==t.length||(this.options.graphs=["Voiture","Pieton"]),Array.isArray(t)&&t.length&&("Voiture"!==t[0]&&"Pieton"!==t[0]||(this._currentTransport=t[0]));var e=this.options.isocurveOptions;e.graph&&(this._currentTransport=e.graph)},n.prototype._initComputation=function(){this._currentComputation="time";var t=this.options.methods;t&&0!==t.length||(this.options.methods=["time","distance"]),Array.isArray(t)&&t.length&&("time"!==t[0]&&"distance"!==t[0]||(this._currentComputation=t[0]));var e=this.options.isocurveOptions;e.method&&(this._currentComputation=e.method),e.time&&(this._currentComputation="time"),e.distance&&(this._currentComputation="distance")},n.prototype._initDirection=function(){this._currentDirection="departure";var t=this.options.directions;t&&0!==t.length||(this.options.directions=["departure","arrival"]),Array.isArray(t)&&t.length&&("departure"!==t[0]&&"arrival"!==t[0]||(this._currentDirection=t[0]));var e=this.options.isocurveOptions;e.reverse||(this._currentDirection="departure"),!0===e.reverse&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])},n.prototype._initExclusions=function(){this._currentExclusions=[];var t=this.options.exclusions;if((!t||"object"===(void 0===t?"undefined":r(t))&&0===Object.keys(t).length)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),t&&"object"===(void 0===t?"undefined":r(t))&&Object.keys(t).length)for(var e in t)t.hasOwnProperty(e)&&t.k&&this._currentExclusions.push(e);var o=this.options.isocurveOptions;Array.isArray(o.exclusions)&&(this._currentExclusions=o.exclusions)},n.prototype._checkRightsManagement=function(){var t=null,e=[],o=null;o=this.options.isocurveOptions.apiKey,t=this.options.isocurveOptions.filterOptions,(e=t?t.type:[])&&0!==e.length||(e=["Voiture","Pieton"]);var i=y.default.check({key:o||this.options.apiKey,resources:e,services:["Isochrone"]});A.log("rightManagementIsocurve",i),o=this.options.autocompleteOptions.apiKey,t=this.options.autocompleteOptions.filterOptions,(e=t?t.type:[])&&0!==e.length||(e=["PositionOfInterest","StreetAddress"]);var n=y.default.check({key:o||this.options.apiKey,resources:e,services:["AutoCompletion"]});A.log("rightManagementAutoComplete",n),i||n||(this._noRightManagement=!0),n&&(this._resources.AutoCompletion={},this._resources.AutoCompletion.resources=n.AutoCompletion,this._resources.AutoCompletion.key=n.key),i&&(this._resources.Isocurve={},this._resources.Isocurve.resources=i.Isochrone,this._resources.Isocurve.key=i.key)},n.prototype._initContainer=function(t){var e=this._container,o=this._showIsoContainer=this._createShowIsoElement();e.appendChild(o),this.collapsed||(o.checked=!0);var i=this._createShowIsoPictoElement();e.appendChild(i);var n=this._createIsoPanelElement(),s=this._createIsoPanelHeaderElement();n.appendChild(s);var a=this._formContainer=this._createIsoPanelFormElement(),l=this._createIsoPanelFormPointElement(t);a.appendChild(l);for(var p=!1,c=!1,u=this._createIsoPanelFormTypeChoiceElement(),h=0;h<this.options.methods.length;h++)"time"===this.options.methods[h]&&(p=0===h,u.appendChild(this._createIsoPanelFormTypeChoiceChronElement(p))),"distance"===this.options.methods[h]&&(c=0===h,u.appendChild(this._createIsoPanelFormTypeChoiceDistElement(c)));a.appendChild(u),a.appendChild(this._createIsoPanelFormValueIsochronElement(p)),a.appendChild(this._createIsoPanelFormValueIsodistanceElement(c));var d=this._createIsoPanelFormModeChoiceElement();if(d.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),d.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),a.appendChild(d),this.options.exclusions&&"object"===r(this.options.exclusions)&&0!==Object.keys(this.options.exclusions).length){a.appendChild(this._createShowIsoExclusionsElement()),a.appendChild(this._createShowIsoExclusionsPictoElement());var f=this._createIsoPanelFormExclusionsElement();f.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),a.appendChild(f)}var y=this._createIsoFormResetElement();a.appendChild(y);var g=this._submitContainer=this._createIsoSubmitFormElement();a.appendChild(g),n.appendChild(a);var m=this._waitingContainer=this._createIsoWaitingElement();n.appendChild(m),e.appendChild(n);var v=this;return e.addEventListener&&e.addEventListener("click",function(t){v._hideIsoSuggestedLocations.call(v,t)}),e},n.prototype._createIsoPanelFormPointElement=function(t){this._originPoint=new _.default({apiKey:this.options.apiKey||null,tag:{id:1,groupId:this._uid,markerOpts:this.options.markerOpts,label:"Départ",display:!0},autocompleteOptions:this.options.autocompleteOptions||null}),this._originPoint.setMap(t);var e=this;return document.getElementById("GPlocationOriginPointerImg_1-"+this._uid).onclick=function(){e._clearGeojsonLayer();var t=e.getMap();e._originPoint._inputShowPointerContainer.checked?(e._formContainer.className="GPisochronFormMini",t.on("click",function(){e._formContainer.className=""})):(e._formContainer.className="",t.un("click",function(){e._formContainer.className=""}))},document.getElementById("GPlocationOriginLabel_1-"+this._uid).onclick=function(){e._clearGeojsonLayer(),e._formContainer.className="",t.un("click",function(){e._formContainer.className=""})},document.getElementById("GPlocationOrigin_1-"+this._uid).onclick=function(){e._clearGeojsonLayer()},this._originPoint._container},n.prototype.onIsoComputationSubmit=function(){if(!this._originPoint||!this._originPoint.getCoordinate||!this._originPoint.getCoordinate())return void console.log("[Isocurve] Missing position parameter to submit isocurve request");var t=this._originPoint.getCoordinate(),e={x:t[0],y:t[1]};A.log("origin : ",e);var o,i;if("time"===this._currentComputation.toLowerCase()){var n=document.getElementById("GPisochronValueChronInput1-"+this._uid),r=parseInt(n.value,10);isNaN&&isNaN(r)&&(r=0);var s=document.getElementById("GPisochronValueChronInput2-"+this._uid),a=parseInt(s.value,10);isNaN&&isNaN(a)&&(a=0),o=3600*r+60*a,A.log("time : "+o)}if("distance"===this._currentComputation.toLowerCase()){var l=document.getElementById("GPisochronValueDistInput-"+this._uid);i=1e3*parseFloat(l.value),A.log("distance : "+i)}if(!o&&!i)return void console.log("[Isocurve] Missing time or distance parameter to submit isocurve request");if(this._noRightManagement)return void console.log("[Isocurve] no rights for this service");var p=this.options.isocurveOptions||{},c=p.protocol||"XHR",u=p.timeOut||0;"JSONP"===c&&0===u&&(u=15e3);var h=this,d={position:e,graph:p.graph||this._currentTransport,exclusions:p.exclusions||this._currentExclusions,method:p.method||this._currentComputation,smoothing:p.smoothing||!0,timeOut:u,protocol:c,onSuccess:function(t){A.log(t),t&&h._drawIsoResults(t)},onFailure:function(t){h._hideWaitingContainer(),A.log(t.message)}};("arrival"===this._currentDirection.toLowerCase()||p.reverse)&&(d.reverse=!0),o&&(d.time=o),i&&(d.distance=i),this._requestIsoCurve(d)},n.prototype.onShowIsoPanelClick=function(){this.collapsed=this._showIsoContainer.checked,this.dispatchEvent("change:collapsed")},n.prototype.onIsoTypeChoiceChange=function(t){var e=t.target.value;e&&("isodistance"===e&&(this._currentComputation="distance"),"isochron"===e&&(this._currentComputation="time"))},n.prototype.onIsoModeTransportChange=function(t){var e=t.target.value;e&&(this._currentTransport=e)},n.prototype.onIsoModeDirectionChange=function(t){var e=t.target.value;e&&("arrival"===e.toLowerCase()?this._originPoint._inputLabelContainer.innerHTML="Arrivée":this._originPoint._inputLabelContainer.innerHTML="Départ",this._currentDirection=e)},n.prototype.onIsoExclusionsChange=function(t){var e=t.target.value,o=t.target.checked;if(e){for(var i=!1,n=null,r=0;r<this._currentExclusions.length;r++)this._currentExclusions[r]===e&&(n=r,i=!0);i||o||this._currentExclusions.push(e),i&&o&&(this._currentExclusions[n]=null)}},n.prototype.onIsoResetClick=function(){this._clear()},n.prototype._requestIsoCurve=function(t){if(t&&("object"!==(void 0===t?"undefined":r(t))||0!==Object.keys(t).length)&&t.position){if(this._noRightManagement||!this._resources.Isocurve)return void console.log("no rights for this service");var e=this._resources.Isocurve.resources;if(!e||"object"===(void 0===e?"undefined":r(e))&&0===Object.keys(e).length)return void console.log("no rights for this service");for(var o=!1,i=0;i<e.length;i++)e[i]===t.graph&&(o=!0);if(!o)return void console.log("no rights for this service !?");var n=this._resources.Isocurve.key;t.apiKey=this.options.isocurveOptions.apiKey||this.options.apiKey||n,A.log(t),this._clearGeojsonLayer(),this._displayWaitingContainer(),p.default.Services.isoCurve(t)}},n.prototype._drawIsoResults=function(t){if(this._currentIsoResults=t,this._hideWaitingContainer(),t.geometry){var e=this.getMap(),o={type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:t.geometry},i=new a.default.format.GeoJSON({defaultDataProjection:"EPSG:4326"}),n=e.getView().getProjection().getCode(),r=i.readFeatures(o,{dataProjection:"EPSG:4326",featureProjection:n});this._geojsonLayer=new a.default.layer.Vector({source:new a.default.source.Vector({features:r}),style:this._defaultFeatureStyle,opacity:.9});var s;if("Pieton"===this._currentTransport?(s="piéton",this._geojsonLayer.gpResultLayerId="Pieton$GEOPORTAIL:GPP:Isocurve"):(s="voiture",this._geojsonLayer.gpResultLayerId="Voiture$GEOPORTAIL:GPP:Isocurve"),e.addLayer(this._geojsonLayer),r[0]&&r[0].getGeometry()&&r[0].getGeometry().getExtent()){var l=r[0].getGeometry().getExtent();e.getView().fit(l,e.getSize())}var p="time"===this._currentComputation?"Isochrone":"Isodistance";e.getControls().forEach(function(t){if(t instanceof E.default){var e=this._geojsonLayer.gpLayerId;t._layers[e].title===e&&t.addLayer(this._geojsonLayer,{title:p+" "+s,description:p+" basé sur un graphe "+s})}},this)}},n.prototype._clear=function(){this._clearIsoInputs(),this._originPoint.clear(),this._clearGeojsonLayer(),this._currentIsoResults=null},n.prototype._clearIsoInputs=function(){var t=document.getElementById("GPisochronValueChronInput1-"+this._uid);t&&(t.value="0");var e=document.getElementById("GPisochronValueChronInput2-"+this._uid);e&&(e.value="0");var o=document.getElementById("GPisochronValueDistInput-"+this._uid);o&&(o.value="0"),this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions();var i;"Pieton"===this._currentTransport?(i=document.getElementById("GPisochronTransportPedestrian-"+this._uid))&&(i.checked="true"):(i=document.getElementById("GPisochronTransportCar-"+this._uid))&&(i.checked="true");var n;"distance"===this._currentComputation.toLowerCase()?(n=document.getElementById("GPisochronChoiceAltDist-"+this._uid),n&&(n.checked="true"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPflexInput"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPisochronValueHidden")):(n=document.getElementById("GPisochronChoiceAltChron-"+this._uid),n&&(n.checked="true"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPflexInput"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPisochronValueHidden"));var r=document.getElementById("GPisochronDirectionSelect-"+this._uid);r&&(r.value=this._currentDirection),"arrival"===this._currentDirection?this._originPoint._inputLabelContainer.innerHTML="Arrivée":this._originPoint._inputLabelContainer.innerHTML="Départ";var s=document.getElementById("GPisoExclusionsToll-"+this._uid);s&&(-1!==this._currentExclusions.indexOf("toll")?s.checked=!1:s.checked=!0);var a=document.getElementById("GPisoExclusionsTunnel-"+this._uid);a&&(-1!==this._currentExclusions.indexOf("tunnel")?a.checked=!1:a.checked=!0);var l=document.getElementById("GPisoExclusionsBridge-"+this._uid);l&&(-1!==this._currentExclusions.indexOf("bridge")&&l?l.checked=!1:l.checked=!0)},n.prototype._clearGeojsonLayer=function(){var t=this.getMap();this._geojsonLayer&&(t.removeLayer(this._geojsonLayer),this._geojsonLayer=null)},n.prototype._hideIsoSuggestedLocations=function(t){t.target&&t.target.id&&-1!==t.target.id.indexOf("GPlocationOrigin_")||this._originPoint._hideSuggestedLocation()},n.prototype._displayWaitingContainer=function(){
this._waitingContainer.className="GPisochronCalcWaitingContainerVisible",this._waiting=!0;var t=this.options.isocurveOptions;if(t&&t.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){!0===e._waiting?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}},n.prototype._hideWaitingContainer=function(){if(this._waiting){this._waitingContainer.className="GPisochronCalcWaitingContainerHidden",this._waiting=!1;var t=this.options.isocurveOptions;t&&t.timeOut&&(clearTimeout(this._timer),this._timer=null)}},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPisochron"),t.className="GPwidget",t},_createShowIsoElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowIsochron"),t.type="checkbox",t},_createShowIsoPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowIsochronPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowIsochron"),e.title="Calculer une isochrone",e.addEventListener?e.addEventListener("click",function(e){t.onShowIsoPanelClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowIsoPanelClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowIsochronOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createIsoPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPisochronPanel"),t.className="GPpanel",t},_createIsoPanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Calcul d'isochrone",e.appendChild(o);var i=document.createElement("div");return i.id=this._addUID("GPisochronPanelClose"),i.className="GPpanelClose",i.title="Fermer le panneau",i.addEventListener?i.addEventListener("click",function(){document.getElementById(t._addUID("GPshowIsochronPicto")).click()},!1):i.attachEvent&&i.attachEvent("onclick",function(){document.getElementById(t._addUID("GPshowIsochronPicto")).click()}),e.appendChild(i),e},_createIsoPanelFormElement:function(){var t=this,e=document.createElement("form");return e.id=this._addUID("GPisochronForm"),e.addEventListener("submit",function(e){return e.preventDefault(),t.onIsoComputationSubmit(e),!1}),e},_createIsoWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GPisochronCalcWaitingContainer"),t.className="GPisochronCalcWaitingContainerHidden";var e=document.createElement("p");return e.className="GPisochronCalcWaiting",e.innerHTML="Calcul en cours...",t.appendChild(e),t},_createIsoPanelFormTypeChoiceElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPisochronChoice"),t},_createIsoPanelFormTypeChoiceChronElement:function(t){var e=this,o=document.createElement("div");o.className="GPisochronChoiceAlt";var i=document.createElement("input");i.id=this._addUID("GPisochronChoiceAltChron"),i.name="GPisochronChoiceMode",i.type="radio",i.checked=!!t,i.addEventListener?i.addEventListener("change",function(t){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(e._addUID("GPisochronValueDist")).className="GPisochronValueHidden",e.onIsoTypeChoiceChange(t)},!1):i.attachEvent&&i.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput",document.getElementById(e._addUID("GPisochronValueDist")).className="GPisochronValueHidden",e.onIsoTypeChoiceChange()}),i.value="isochron",o.appendChild(i);var n=document.createElement("label");n.className="GPisochronChoiceAltImg",n.htmlFor=this._addUID("GPisochronChoiceAltChron"),o.appendChild(n);var r=document.createElement("span");return r.id=this._addUID("GPisochronChoiceAltChronTxt"),r.innerHTML="isochrone",r.addEventListener?r.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()},!1):r.attachEvent&&r.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()}),o.appendChild(r),o},_createIsoPanelFormTypeChoiceDistElement:function(t){var e=this,o=document.createElement("div");o.className="GPisochronChoiceAlt";var i=document.createElement("input");i.id=this._addUID("GPisochronChoiceAltDist"),i.name="GPisochronChoiceMode",i.type="radio",i.checked=!!t,i.addEventListener?i.addEventListener("change",function(t){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput",document.getElementById(e._addUID("GPisochronValueChron")).className="GPisochronValueHidden",e.onIsoTypeChoiceChange(t)},!1):i.attachEvent&&i.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput",document.getElementById(e._addUID("GPisochronValueChron")).className="GPisochronValueHidden",e.onIsoTypeChoiceChange()}),i.value="isodistance",o.appendChild(i);var n=document.createElement("label");n.className="GPisochronChoiceAltImg",n.htmlFor=this._addUID("GPisochronChoiceAltDist"),o.appendChild(n);var r=document.createElement("span");return r.id=this._addUID("GPisochronChoiceAltDistTxt"),r.innerHTML="isodistance",r.addEventListener?r.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()},!1):r.attachEvent&&r.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()}),o.appendChild(r),o},_createIsoPanelFormValueIsochronElement:function(t){var e=this,o=document.createElement("div");o.id=this._addUID("GPisochronValueChron"),o.className=t?"GPflexInput":"GPisochronValueHidden";var i=document.createElement("label");i.id=this._addUID("GPisochronValueChronLabel"),i.htmlFor=this._addUID("GPisochronValueChronInput"),i.innerHTML="Temps",o.appendChild(i);var n=document.createElement("input");n.id=this._addUID("GPisochronValueChronInput1"),n.min="0",n.step="1",n.value="0",n.type="number",n.addEventListener?n.addEventListener("change",function(t){"function"==typeof e.onIsoValueChronTimeMinuteChange&&e.onIsoValueChronTimeHourChange(t)}):n.attachEvent&&n.attachEvent("onchange",function(t){"function"==typeof e.onIsoValueChronTimeMinuteChange&&e.onIsoValueChronTimeHourChange(t)}),o.appendChild(n);var r=document.createElement("label");r.innerHTML="h",o.appendChild(r);var s=document.createElement("input");s.id=this._addUID("GPisochronValueChronInput2"),s.min="0",s.max="59",s.step="1",s.value="0",s.type="number",s.addEventListener?s.addEventListener("change",function(t){"function"==typeof e.onIsoValueChronTimeMinuteChange&&e.onIsoValueChronTimeMinuteChange(t)}):s.attachEvent&&s.attachEvent("onchange",function(t){"function"==typeof e.onIsoValueChronTimeMinuteChange&&e.onIsoValueChronTimeMinuteChange(t)}),o.appendChild(s);var a=document.createElement("label");return a.innerHTML="min",o.appendChild(a),o},_createIsoPanelFormValueIsodistanceElement:function(t){var e=this,o=document.createElement("div");o.id=this._addUID("GPisochronValueDist"),o.className=t?"GPflexInput":"GPisochronValueHidden";var i=document.createElement("label");i.id=this._addUID("GPisochronValueDistLabel"),i.htmlFor=this._addUID("GPisochronValueDistInput"),i.innerHTML="Distance",o.appendChild(i);var n=document.createElement("input");n.id=this._addUID("GPisochronValueDistInput"),n.min="0",n.step="any",n.value="0",n.type="number",n.addEventListener?n.addEventListener("change",function(t){"function"==typeof e.onIsoValueDistChange&&e.onIsoValueDistChange(t)}):n.attachEvent&&n.attachEvent("onchange",function(t){"function"==typeof e.onIsoValueDistChange&&e.onIsoValueDistChange(t)}),o.appendChild(n);var r=document.createElement("label");return r.innerHTML="km",o.appendChild(r),o},_createIsoPanelFormModeChoiceElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPisochronModeChoice"),t},_createIsoPanelFormModeChoiceTransportElement:function(t){var e=this,o=document.createElement("div");o.id=this._addUID("GPisochronTransportChoice");var i=document.createElement("span");i.className="GPisochronModeLabel",i.innerHTML="Mode de transport",o.appendChild(i);for(var n=0;n<t.length;n++){var r=t[n];if("Voiture"===r){var s=document.createElement("input");s.id=this._addUID("GPisochronTransportCar"),s.type="radio",s.name="GPisochronTransport",0===n&&(s.checked=!0),s.addEventListener?s.addEventListener("change",function(t){e.onIsoModeTransportChange(t)}):s.attachEvent&&s.attachEvent("onchange",function(t){e.onIsoModeTransportChange(t)}),s.value="Voiture",o.appendChild(s);var a=document.createElement("label");a.className="GPisochronTransportImg",a.htmlFor=this._addUID("GPisochronTransportCar"),a.title="Voiture",o.appendChild(a)}if("Pieton"===r){var l=document.createElement("input");l.id=this._addUID("GPisochronTransportPedestrian"),l.type="radio",l.name="GPisochronTransport",0===n&&(l.checked=!0),l.addEventListener?l.addEventListener("change",function(t){e.onIsoModeTransportChange(t)}):l.attachEvent&&l.attachEvent("onchange",function(t){e.onIsoModeTransportChange(t)}),l.value="Pieton",o.appendChild(l);var p=document.createElement("label");p.className="GPisochronTransportImg",p.htmlFor=this._addUID("GPisochronTransportPedestrian"),p.title="Piéton",o.appendChild(p)}}return o},_createIsoPanelFormModeChoiceDirectionElement:function(t){var e=this,o=document.createElement("div");o.id=this._addUID("GPisochronDirectionChoice");var i=document.createElement("span");i.className="GPisochronModeLabel",i.innerHTML="Sens de parcours",o.appendChild(i);var n=document.createElement("select");n.id=this._addUID("GPisochronDirectionSelect"),n.className="GPinputSelect",n.addEventListener("change",function(t){e.onIsoModeDirectionChange(t)});for(var r=0;r<t.length;r++){var s=t[r];if("departure"===s.toLowerCase()){var a=document.createElement("option");0===r&&(a.selected="selected"),a.value="departure",a.text="Départ",n.appendChild(a)}if("arrival"===s.toLowerCase()){var l=document.createElement("option");0===r&&(l.selected="selected"),l.value="arrival",l.text="Arrivée",n.appendChild(l)}}return o.appendChild(n),o},_createShowIsoExclusionsElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowIsoExclusions"),t.type="checkbox",t},_createShowIsoExclusionsPictoElement:function(){var t=document.createElement("label");return t.id=this._addUID("GPshowIsoExclusionsPicto"),t.className="GPshowMoreOptions GPshowIsoExclusionsPicto",t.htmlFor=this._addUID("GPshowIsoExclusions"),t.title="Exclusions",t.style.top="240px",t},_createIsoPanelFormExclusionsElement:function(){var t=document.createElement("div");t.id=this._addUID("GPisoExclusions");var e=document.createElement("span");return e.className="GPisoExclusionsLabel",e.innerHTML="Passages autorisés",t.appendChild(e),t},_createIsoPanelFormExclusionOptionsElement:function(t){var e=this,o=document.createElement("div");o.className="GPisoExclusionsOptions";for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];switch(i){case"toll":var r=document.createElement("input");r.id=this._addUID("GPisoExclusionsToll"),r.type="checkbox",r.checked=!n,r.addEventListener?r.addEventListener("change",function(t){e.onIsoExclusionsChange(t)}):r.attachEvent&&r.attachEvent("onchange",function(t){e.onIsoExclusionsChange(t)}),r.value="Toll",o.appendChild(r);var s=document.createElement("label");s.className="GPisoExclusionsOption",s.htmlFor=this._addUID("GPisoExclusionsToll"),s.innerHTML="Péages",o.appendChild(s);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GPisoExclusionsTunnel"),a.type="checkbox",a.checked=!n,a.addEventListener?a.addEventListener("change",function(t){e.onIsoExclusionsChange(t)}):a.attachEvent&&a.attachEvent("onchange",function(t){e.onIsoExclusionsChange(t)}),a.value="Tunnel",o.appendChild(a);var l=document.createElement("label");l.className="GPisoExclusionsOption",l.htmlFor=this._addUID("GPisoExclusionsTunnel"),l.innerHTML="Tunnels",o.appendChild(l);break;case"bridge":var p=document.createElement("input");p.id=this._addUID("GPisoExclusionsBridge"),p.type="checkbox",p.checked=!n,p.addEventListener?p.addEventListener("change",function(t){e.onIsoExclusionsChange(t)}):p.attachEvent&&p.attachEvent("onchange",function(t){e.onIsoExclusionsChange(t)}),p.value="Bridge",o.appendChild(p);var c=document.createElement("label");c.className="GPisoExclusionsOption",c.htmlFor=this._addUID("GPisoExclusionsBridge"),c.innerHTML="Ponts",o.appendChild(c)}}return o},_createIsoSubmitFormElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPisochronSubmit"),t.className="GPinputSubmit",t.type="submit",t.value="Calculer",t},_createIsoFormResetElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPisochronReset"),e.title="Réinitialiser les paramètres",e.addEventListener("click",function(e){t.onIsoResetClick(e)}),e}};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.initialize(t),this._container=this._initContainer(),this._containerElement=null,t.element&&t.element.appendChild&&(t.element.appendChild(this._container),this._containerElement=t.element),s.default.control.Control.call(this,{element:this._containerElement||this._container,target:t.target,render:t.render})}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),s=i(r),a=o(4),l=i(a),p=o(3),c=i(p),u=o(0),h=i(u),d=o(7),f=i(d),y=o(12),g=i(y),m=o(6),v=i(m),_=o(2),b=i(_),E=o(104),S=i(E),w=c.default.getLogger("reversegeocoding");return s.default.inherits(n,s.default.control.Control),n.prototype=Object.create(s.default.control.Control.prototype,{}),h.default.assign(n.prototype,S.default),n.prototype.constructor=n,n.prototype.getCollapsed=function(){return this.collapsed},n.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] ReverseGeocode:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(t?document.getElementById("GPreverseGeocodingPanelClose-"+this._uid).click():document.getElementById("GPshowReverseGeocoding-"+this._uid).click(),this.collapsed=t)},n.prototype.setMap=function(t){if(t)this._activateMapInteraction(t);else{var e=this.getMap();this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(e),null!=this._inputFeaturesLayer&&(e.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)}s.default.control.Control.prototype.setMap.call(this,t)},n.prototype.initialize=function(t){this._checkInputOptions(t),this.options={collapsed:!0,resources:["StreetAddress","PositionOfInterest","CadastralParcel"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{}},h.default.assign(this.options,t),this.collapsed=this.options.collapsed,this._uid=b.default.generate(),this._servicesRightManagement={},this._noRightManagement=!1,this._checkRightsManagement(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingInput=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeatures=null,this._inputFeaturesSource=null,this._inputFeaturesLayer=null,this._mapInteraction=null,this._requestOptions=null,this._requestPosition=null,this._requestCircleFilter=null,this._requestBboxFilter=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[],this._reverseGeocodingLocationsMarkers=[],this._resultsDefaultStyle=new s.default.style.Style({image:new s.default.style.Icon({src:f.default.lightOrange,anchor:[.5,1]})}),this._resultsSelectedStyle=new s.default.style.Style({image:new s.default.style.Icon({src:f.default.red,anchor:[.5,1]})}),this._resultsHoverInteraction=null,this._resultsSelectInteraction=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null},n.prototype._checkInputOptions=function(t){var e,o;if(t.resources){var i=t.resources;Array.isArray(i)||(console.log("[ReverseGeocode] 'options.resources' parameter should be an array"),i=null);var n=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"],r=[];for(e=0;e<i.length;e++)-1===n.indexOf(i[e])&&(r.push(e),console.log("[ReverseGeocode] options.resources : "+i[e]+" is not a resource for reverse geocode"));if(0!==r.length)for(o=0;o<r.length;o++)i.splice(r[o],1)}if(t.delimitations){var s=t.delimitations;Array.isArray(s)||(console.log("[ReverseGeocode] 'options.delimitations' parameter should be an array"),s=null);var a=["Circle","Point","Extent"],l=[];for(e=0;e<s.length;e++)-1===a.indexOf(s[e])&&(l.push(e),console.log("[ReverseGeocode] options.delimitations : "+s[e]+" is not a delimitation for reverse geocode"));if(0!==l.length)for(o=0;o<l.length;o++)s.splice(l[o],1)}},n.prototype._initGeocodingType=function(){this._currentGeocodingType="StreetAddress";var t=this.options.resources;if(t&&0!==t.length||(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),Array.isArray(t)&&t.length){for(var e=[],o=0;o<t.length;o++)this._servicesRightManagement.Geocode.indexOf(t[o])<0&&(e.push(o),console.log("[ReverseGeocode] no rights for options.resources : "+t[o]));if(0!==e.length)for(var i=0;i<e.length;i++)t.splice(e[i],1);"StreetAddress"!==t[0]&&"PositionOfInterest"!==t[0]&&"CadastralParcel"!==t[0]&&"Administratif"!==t[0]||(this._currentGeocodingType=t[0])}var n=this.options.reverseGeocodeOptions;n.filterOptions&&Array.isArray(n.filterOptions.type)&&0!==n.filterOptions.type.length&&(this._currentGeocodingType=n.filterOptions.type[0])},n.prototype._initGeocodingDelimitation=function(){this._currentGeocodingDelimitation="Point";var t=this.options.delimitations;if(t&&0!==t.length||(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(t)&&t.length){var e=t[0].toLowerCase();"point"!==e&&"circle"!==e&&"extent"!==e||(this._currentGeocodingDelimitation=t[0])}},n.prototype._initPopupDiv=function(){var t=this,e=document.createElement("div");e.className="gp-feature-info-div";var o=document.createElement("input");return o.type="button",o.className="gp-styling-button closer",o.onclick=function(){return null!=t._popupOverlay&&t._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",e.appendChild(this._popupContent),e.appendChild(o),e},n.prototype._checkRightsManagement=function(){var t,e=[],o=null;t=this.options.reverseGeocodeOptions.apiKey,o=this.options.reverseGeocodeOptions.filterOptions,e=o?o.type:[],e&&0!==e.length||(e=this.options.resources),e&&0!==e.length||(e=["StreetAddress","PositionOfInterest"]);var i=v.default.check({key:t||this.options.apiKey,resources:e,services:["Geocode"]});if(w.log("rightManagementGeocode",i),!i)return void(this._noRightManagement=!0);this.options.apiKey||(this.options.apiKey=i.key),i&&(this._servicesRightManagement.Geocode=i.Geocode)},n.prototype._initContainer=function(){var t=this._createMainContainerElement(),e=this._showReverseGeocodingInput=this._createShowReverseGeocodingElement();t.appendChild(e),this.collapsed||(e.checked=!0);var o=this._createShowReverseGeocodingPictoElement();t.appendChild(o);var i=this._createReverseGeocodingPanelElement(),n=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),r=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();n.appendChild(r);var s=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();n.appendChild(s);var a=this._createReverseGeocodingPanelCloseElement();n.appendChild(a),i.appendChild(n);var l=this._formContainer=this._createReverseGeocodingPanelFormElement();l.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),l.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var p=this._createReverseGeocodingSubmitFormElement();l.appendChild(p),i.appendChild(l);var c=this._waitingContainer=this._createReverseGeocodingWaitingElement();i.appendChild(c);var u=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),h=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return u.appendChild(h),i.appendChild(u),t.appendChild(i),w.log(t),t},n.prototype._activateMapInteraction=function(t){if(!this.collapsed){null==this._inputFeaturesLayer&&(this._inputFeatures=new s.default.Collection,this._inputFeaturesSource=new s.default.source.Vector({features:this._inputFeatures}),this._inputFeaturesLayer=new s.default.layer.Vector({source:this._inputFeaturesSource,style:new s.default.style.Style({fill:new s.default.style.Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new s.default.style.Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new s.default.style.Icon({src:f.default.turquoiseBlue,anchor:[.5,1]})})}),this._inputFeaturesLayer.gpResultLayerId="reverseGeocoding",t.addLayer(this._inputFeaturesLayer));switch(this._currentGeocodingDelimitation.toLowerCase()){case"point":this._activatePointInteraction(t);break;case"circle":this._activateCircleInteraction(t);break;case"extent":this._activateBoxInteraction(t)}t.getControls().forEach(function(t){if(t instanceof g.default){var e=this._inputFeaturesLayer.gpLayerId;t._layers[e].title===e&&(t.addLayer(this._inputFeaturesLayer,{title:"Saisie (recherche inverse)",description:"Couche de saisie d'une zone de recherche pour la recherche inverse"}),t.setRemovable(this._inputFeaturesLayer,!1))}},this)}},n.prototype._activatePointInteraction=function(t){this._mapInteraction=new s.default.interaction.Draw({style:new s.default.style.Style({image:new s.default.style.Circle({radius:0,fill:new s.default.style.Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Point",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",function(t){w.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"point")},this),t.addInteraction(this._mapInteraction),this._setCursor("crosshair",t)},n.prototype._activateCircleInteraction=function(t){this._mapInteraction=new s.default.interaction.Draw({style:new s.default.style.Style({fill:new s.default.style.Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new s.default.style.Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new s.default.style.Circle({radius:4,fill:new s.default.style.Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Circle",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",function(t){w.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"circle")},this),this._mapInteraction.on("drawend",function(t){if(w.log("on drawend",t),t.feature&&t.feature.getGeometry){var e=t.feature.getGeometry().getRadius();this._requestCircleFilter={},this._requestCircleFilter.radius=e,this._requestPosition&&(this._requestCircleFilter.x=this._requestPosition.x,this._requestCircleFilter.y=this._requestPosition.y),w.log("circle radius : ",e)}},this),t.addInteraction(this._mapInteraction)},n.prototype._activateBoxInteraction=function(t){var e=function(t,e){e||(e=new s.default.geom.Polygon(null));var o=t[0],i=t[1];return e.setCoordinates([[o,[o[0],i[1]],i,[i[0],o[1]],o]]),e};this._mapInteraction=new s.default.interaction.Draw({style:new s.default.style.Style({fill:new s.default.style.Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new s.default.style.Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new s.default.style.Circle({radius:4,fill:new s.default.style.Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"LineString",source:this._inputFeaturesSource,maxPoints:2,geometryFunction:e}),this._mapInteraction.on("drawstart",function(t){w.log("on drawstart",t),this._inputFeatures.clear()},this),this._mapInteraction.on("drawend",function(t){w.log("on drawend",t),this._onBoxDrawEnd(t)},this),t.addInteraction(this._mapInteraction)},n.prototype._removeMapInteraction=function(t){null!=this._mapInteraction&&(t.removeInteraction(this._mapInteraction),this._mapInteraction=null),this._setCursor()},n.prototype._onDrawStart=function(t,e){var o;if(t.feature&&t.feature.getGeometry){var i=t.feature.getGeometry();"point"===e&&(o=i.getCoordinates()),"circle"===e&&(o=i.getCenter())}if(o){var n;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)n=this.options.reverseGeocodeOptions.srs;else{var r=this.getMap();if(!r||!r.getView())return;n=r.getView().getProjection()}var a=s.default.proj.transform(o,n,"EPSG:4326");this._requestPosition={x:a[0],y:a[1]},w.log("position coordinates : ",this._requestPosition)}},n.prototype._onBoxDrawEnd=function(t){if(t.feature&&t.feature.getGeometry){var e,o=t.feature.getGeometry().getCoordinates()[0],i=o[0],n=o[2];if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)e=this.options.reverseGeocodeOptions.srs;else{var r=this.getMap();if(!r||!r.getView())return;e=r.getView().getProjection()}var a=s.default.proj.transform(i,e,"EPSG:4326"),l=s.default.proj.transform(n,e,"EPSG:4326");this._requestPosition={},this._requestBboxFilter={},a[0]<l[0]?(this._requestBboxFilter.left=a[0],this._requestBboxFilter.right=l[0]):(this._requestBboxFilter.left=l[0],this._requestBboxFilter.right=a[0]),a[1]<l[1]?(this._requestBboxFilter.bottom=a[1],this._requestBboxFilter.top=l[1]):(this._requestBboxFilter.bottom=l[1],this._requestBboxFilter.top=a[1]),this._requestPosition.x=(a[0]+l[0])/2,this._requestPosition.y=(a[1]+l[1])/2,w.log("bbox filter : ",this._requestBboxFilter),w.log("center coordinates : ",this._requestPosition)}},n.prototype._setCursor=function(t,e){if(e=e||this.getMap()){var o=e.getTargetElement();o.style.cursor=t||null}},n.prototype._reverseGeocodingRequest=function(){var t=this.getMap();this._requestOptions=this._getReverseGeocodingRequestOptions(),this._removeMapInteraction(t),this._displayWaitingContainer(),l.default.Services.reverseGeocode(this._requestOptions)},n.prototype._getReverseGeocodingRequestOptions=function(){var t=this.getMap(),e=this.options.reverseGeocodeOptions,o=this,i={apiKey:e.apiKey||this.options.apiKey,position:this._requestPosition,filterOptions:{type:[this._currentGeocodingType]},srs:"CRS:84",returnFreeForm:!1,maximumResponses:e.maximumResponses||25,timeOut:e.timeOut||3e4,protocol:e.protocol||"XHR",onSuccess:function(t){t.locations&&(w.log("reverseGeocode results : ",t.locations),o._displayGeocodedLocations(t.locations))},onFailure:function(e){o._hideWaitingContainer(),o._clearResults(),o._clearInputFeatures(),o._activateMapInteraction(t),w.log(e.message)}};return"circle"===this._currentGeocodingDelimitation.toLowerCase()&&this._requestCircleFilter&&(this._requestCircleFilter.radius>1e3&&(console.log("INFO : initial circle radius ("+this._requestCircleFilter.radius+") limited to 1000m."),this._requestCircleFilter.radius=1e3),i.filterOptions.circle=this._requestCircleFilter),"extent"===this._currentGeocodingDelimitation.toLowerCase()&&this._requestBboxFilter&&(i.filterOptions.bbox=this._requestBboxFilter),w.log("reverseGeocode request options : ",i),i},n.prototype._displayGeocodedLocations=function(t){this._clearResults(),this._reverseGeocodingLocations=t,this._formContainer.className="GPreverseGeocodingComponentHidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="Résultats de la recherche",this._returnPictoContainer.className="",this._resultsContainer.className="GPpanel",this._fillGeocodedLocationListContainer(t),this._displayGeocodedLocationsOnMap(t)},n.prototype._fillGeocodedLocationListContainer=function(t){for(var e=0;e<t.length;e++){var o=t[e];w.log(o);var i=this._fillGeocodedLocationDescription(o);0!==i.length&&this._createReverseGeocodingResultElement(i,e)}},n.prototype._fillGeocodedLocationDescription=function(t){if(t&&t.placeAttributes){var e=t.placeAttributes,o="";switch(t.type){case"StreetAddress":e.street&&(o+=e.number?e.number+" ":"",o+=e.street+", "),o+=e.postalCode+" "+e.commune;break;case"PositionOfInterest":"City"===t.matchType&&e.commune?(o+=e.commune,o+=e.postalCode?", "+e.postalCode:""):"Département"===t.matchType&&e.municipality?(o+=e.municipality,o+=e.postalCode?", "+e.postalCode:""):"Toponym"===t.matchType&&e.municipality?(o+=e.municipality,o+=e.postalCode?", "+e.postalCode:"",o+=e.commune?" "+e.commune:""):o+=e.municipality?e.municipality:"",o+=e.nature?" ("+e.nature+") ":"";break;case"CadastralParcel":o+=e.cadastralParcel?e.cadastralParcel:"",o+=e.municipality?" ("+e.municipality+")":"";break;case"Administratif":o+=e.municipality?e.municipality:"",e.inseeDepartment?o+="(Département)":e.inseeRegion&&(o+="(Région)");break;default:o+=e.municipality?e.municipality:""}return o}},n.prototype._displayGeocodedLocationsOnMap=function(t){if(0!==this._reverseGeocodingLocations.length){var e=this.getMap();this._createResultsLayer();for(var o=0;o<t.length;o++)this._addResultFeature(t[o],o);if(this._resultsFeatures.getLength()>1){if(this._resultsFeaturesSource&&this._resultsFeaturesSource.getExtent){var i=this._resultsFeaturesSource.getExtent();e.getView().fit(i,e.getSize())}}else{var n=this._resultsFeatures.item(0),r=n.getGeometry().getCoordinates();e.getView().setCenter(r),e.getView().setZoom(17)}this._resultsHoverInteraction=new s.default.interaction.Select({condition:s.default.events.condition.pointerMove,layers:[this._resultsFeaturesLayer]}),this._resultsHoverInteraction.on("select",this._onResultsFeatureMouseOver,this),e.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new s.default.interaction.Select({layers:[this._resultsFeaturesLayer]}),this._resultsSelectInteraction.on("select",this._onResultsFeatureSelect,this),e.addInteraction(this._resultsSelectInteraction);var a="";switch(this._currentGeocodingType){case"StreetAddress":a="adresses";break;case"PositionOfInterest":a="toponymes";break;case"CadastralParcel":a="parcelles cadastrales";break;case"Administratif":a="unités administratives"}e.getControls().forEach(function(t){if(t instanceof g.default){var e=this._resultsFeaturesLayer.gpLayerId;t._layers[e].title===e&&(t.addLayer(this._resultsFeaturesLayer,{title:"Résultats de la recherche inverse",description:"Résultats de la recherche inverse sur les "+a}),t.setRemovable(this._resultsFeaturesLayer,!1))}},this)}},n.prototype._createResultsLayer=function(){var t=this.getMap();this._resultsFeatures=new s.default.Collection,this._resultsFeaturesSource=new s.default.source.Vector({features:this._resultsFeatures}),this._resultsFeaturesLayer=new s.default.layer.Vector({source:this._resultsFeaturesSource}),this._resultsFeaturesLayer.gpResultLayerId="reverseGeocodingResults",t.addLayer(this._resultsFeaturesLayer)},n.prototype._addResultFeature=function(t,e){var o=this.getMap(),i=[t.position.x,t.position.y];if(i){var n=o.getView(),r=n.getProjection().getCode();"EPSG:4326"!==r&&(i=s.default.proj.transform(i,"EPSG:4326",r));var a=new s.default.Feature({geometry:new s.default.geom.Point(i)});a.setStyle(this._resultsDefaultStyle),a.setId(e),a.setProperties({popupContent:this._fillPopupContent(t)}),this._resultsFeatures.push(a)}},n.prototype._fillPopupContent=function(t){var e="<ul>",o=t.placeAttributes;for(var i in o)o.hasOwnProperty(i)&&"bbox"!==i&&(e+="<li>",e+='<span class="gp-attname-others-span">'+i.toUpperCase()+" : </span>",e+=o[i],e+=" </li>");return e+=" </ul>"},n.prototype._onResultsFeatureMouseOver=function(t){var e;if(0!==t.selected.length){if(e=t.selected[0],e.setStyle(this._resultsSelectedStyle),null!=e.getId()){
var o=document.getElementById("ReverseGeocodedLocation_"+e.getId()+"-"+this._uid);o&&o.classList&&o.classList.add("GPreverseGeocodedLocationHighlight")}document.getElementById("ReverseGeocodedLocation_"+e.getId()+"-"+this._uid)}if(0!==t.deselected.length){e=t.deselected[0],e.setStyle(this._resultsDefaultStyle);var i=document.getElementById("ReverseGeocodedLocation_"+e.getId()+"-"+this._uid);i&&i.classList&&i.classList.remove("GPreverseGeocodedLocationHighlight")}},n.prototype._onResultsFeatureSelect=function(t){var e=this.getMap();if(0!==t.selected.length){var o=t.selected[0];this._popupContent.innerHTML=o.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(t.mapBrowserEvent.coordinate):(this._popupOverlay=new s.default.Overlay({element:this._popupDiv,positioning:"bottom-center",position:t.mapBrowserEvent.coordinate}),e.addOverlay(this._popupOverlay))}else null!=this._popupOverlay&&this._popupOverlay.setPosition(void 0)},n.prototype.onShowReverseGeocodingClick=function(){this.collapsed=this._showReverseGeocodingInput.checked,this.dispatchEvent("change:collapsed");var t=this.getMap();this._waiting||this._reverseGeocodingLocations.length||(this.collapsed?(this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(t),null!=this._inputFeaturesLayer&&(t.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)):this._activateMapInteraction(t))},n.prototype.onReverseGeocodingTypeChange=function(t){var e=t.target.selectedIndex,o=t.target.options[e].value;o&&(w.log(o),this._currentGeocodingType=o)},n.prototype.onReverseGeocodingDelimitationChange=function(t){var e=t.target.selectedIndex,o=t.target.options[e].value;if(o){w.log(o),this._currentGeocodingDelimitation=o;var i=this.getMap();this._clearInputFeatures(),this._removeMapInteraction(i),this._activateMapInteraction(i)}},n.prototype.onGPreverseGeocodingReturnPictoClick=function(){this._clearResults(),this._clearInputFeatures(),this._activateMapInteraction(this.getMap())},n.prototype.onReverseGeocodingSubmit=function(){if(!this._requestPosition)return void w.log("missing position");this._noRightManagement||this._reverseGeocodingRequest()},n.prototype.onReverseGeocodingResultClick=function(t){w.log("onReverseGeocodingResultClick",t)},n.prototype.onReverseGeocodingResultMouseOver=function(t){var e=t.target.id,o=e.substring(e.indexOf("_")+1);if(t.target.classList&&t.target.classList.add("GPreverseGeocodedLocationHighlight"),this._resultsFeaturesSource){this._resultsFeaturesSource.getFeatureById(parseInt(o,10)).setStyle(this._resultsSelectedStyle)}},n.prototype.onReverseGeocodingResultMouseOut=function(t){var e=t.target.id,o=e.substring(e.indexOf("_")+1);if(t.target.classList&&t.target.classList.remove("GPreverseGeocodedLocationHighlight"),this._resultsFeaturesSource){this._resultsFeaturesSource.getFeatureById(parseInt(o,10)).setStyle(this._resultsDefaultStyle)}},n.prototype._clearResults=function(){var t=this.getMap();if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);this._resultsFeaturesLayer&&(t.removeLayer(this._resultsFeaturesLayer),this._resultsFeaturesLayer=null),null!=this._popupOverlay&&(t.removeOverlay(this._popupOverlay),this._popupOverlay=null),null!=this._resultsSelectInteraction&&(t.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),null!=this._resultsHoverInteraction&&(t.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)},n.prototype._clearInputFeatures=function(){this._inputFeatures&&this._inputFeatures.clear(),this._requestPosition=null,this._requestCircleFilter=null,this._requestBboxFilter=null},n.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GProuteCalcWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){!0===t._waiting?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)},n.prototype._hideWaitingContainer=function(){this._waiting&&(this._waitingContainer.className="GProuteCalcWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPreverseGeocoding"),t.className="GPwidget",t},_createShowReverseGeocodingElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowReverseGeocoding"),t.type="checkbox",t},_createShowReverseGeocodingPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowReverseGeocodingPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowReverseGeocoding"),e.title="Ouvrir la recherche inverse",e.addEventListener?e.addEventListener("click",function(){t.onShowReverseGeocodingClick()}):e.attachEvent&&e.attachEvent("onclick",function(){t.onShowReverseGeocodingClick()});var o=document.createElement("span");return o.id=this._addUID("GPshowReverseGeocodingOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createReverseGeocodingWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),t.className="GPreverseGeocodingCalcWaitingContainerHidden";var e=document.createElement("p");return e.className="GPreverseGeocodingCalcWaiting",e.innerHTML="Recherche en cours...",t.appendChild(e),t},_createReverseGeocodingResultsPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingResultsPanel"),t.className="GPpanel GPreverseGeocodingComponentHidden",t},_createReverseGeocodingResultsListElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingResultsList"),t},_createReverseGeocodingResultElement:function(t,e){var o=this,i=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),n=document.createElement("div");n.id=this._addUID("ReverseGeocodedLocation_"+e),n.className="GPautoCompleteProposal",n.innerHTML=t,n.title=t,n.addEventListener?(n.addEventListener("mouseover",function(t){o.onReverseGeocodingResultMouseOver(t)}),n.addEventListener("mouseout",function(t){o.onReverseGeocodingResultMouseOut(t)}),n.addEventListener("click",function(t){"function"==typeof o.onReverseGeocodingResultClick&&o.onReverseGeocodingResultClick(t)})):n.attachEvent&&(n.attachEvent("onmouseover",function(t){o.onReverseGeocodingResultMouseOver(t)}),n.attachEvent("onmouseout",function(t){o.onReverseGeocodingResultMouseOut(t)}),n.attachEvent("onclick",function(t){"function"==typeof o.onReverseGeocodingResultClick&&o.onReverseGeocodingResultClick(t)})),i.appendChild(n)},_createReverseGeocodingPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPreverseGeocodingPanel"),t.className="GPpanel",t},_createReverseGeocodingPanelHeaderElement:function(){var t=document.createElement("div");return t.className="GPpanelHeader",t},_createReverseGeocodingPanelReturnPictoElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPreverseGeocodingReturnPicto"),e.title="Nouvelle recherche",e.className="GPreverseGeocodingReturnPictoHidden",e.addEventListener?e.addEventListener("click",function(e){document.getElementById(t._addUID("GPreverseGeocodingResultsPanel")).className="GProuteComponentHidden",document.getElementById(t._addUID("GPreverseGeocodingForm")).className="",document.getElementById(t._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(t._addUID("GPreverseGeocodingReturnPicto")).className="GPreverseGeocodingReturnPictoHidden",t.onGPreverseGeocodingReturnPictoClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){document.getElementById(t._addUID("GPreverseGeocodingResultsPanel")).className="GProuteComponentHidden",document.getElementById(t._addUID("GPreverseGeocodingForm")).className="",document.getElementById(t._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(t._addUID("GPreverseGeocodingReturnPicto")).className="GPreverseGeocodingReturnPictoHidden",t.onGPreverseGeocodingReturnPictoClick(e)}),e},_createReverseGeocodingPanelTitleElement:function(){var t=document.createElement("div");return t.className="GPpanelTitle",t.id=this._addUID("GPreverseGeocodingHeaderTitle"),t.innerHTML="Recherche inverse",t},_createReverseGeocodingPanelCloseElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPreverseGeocodingPanelClose"),e.className="GPpanelClose",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(t._addUID("GPshowReverseGeocodingPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(t._addUID("GPshowReverseGeocodingPicto")).click()}),e},_createReverseGeocodingPanelFormElement:function(){var t=this,e=document.createElement("form");return e.id=this._addUID("GPreverseGeocodingForm"),e.addEventListener?e.addEventListener("submit",function(e){e.preventDefault(),t.onReverseGeocodingSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(e){e.preventDefault(),t.onReverseGeocodingSubmit()}),e},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(t){var e=this,o=document.createElement("div");o.className="GPflexInput";var i=document.createElement("label");i.className="GPreverseGeocodingCodeLabel",i.innerHTML="Recherche par",i.title="Recherche par",o.appendChild(i);var n=document.createElement("select");n.className="GPreverseGeocodingCode",n.addEventListener?n.addEventListener("change",function(t){e.onReverseGeocodingTypeChange(t)}):n.attachEvent&&n.attachEvent("onchange",function(t){e.onReverseGeocodingTypeChange(t)}),t&&Array.isArray(t)||(t=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var r=0;r<t.length;r++)switch(t[r]){case"PositionOfInterest":var s=document.createElement("option");s.value="PositionOfInterest",s.text="Lieux/toponymes",n.appendChild(s);break;case"StreetAddress":var a=document.createElement("option");a.value="StreetAddress",a.text="Adresses",n.appendChild(a);break;case"CadastralParcel":var l=document.createElement("option");l.value="CadastralParcel",l.text="Parcelles cadastrales",n.appendChild(l);break;case"Administratif":var p=document.createElement("option");p.value="Administratif",p.text="Unités administratives",n.appendChild(p)}return o.appendChild(n),o},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(t){var e=this,o=document.createElement("div");o.className="GPflexInput";var i=document.createElement("label");i.className="GPreverseGeocodingCodeLabel",i.innerHTML="Délimitation",i.title="Délimitation",o.appendChild(i);var n=document.createElement("select");n.className="GPreverseGeocodingCode",n.addEventListener?n.addEventListener("change",function(t){e.onReverseGeocodingDelimitationChange(t)}):n.attachEvent&&n.attachEvent("onchange",function(t){e.onReverseGeocodingDelimitationChange(t)}),t&&Array.isArray(t)||(t=["Point","Circle","Extent"]);for(var r=0;r<t.length;r++)switch(t[r].toLowerCase()){case"point":var s=document.createElement("option");s.value="point",s.text="Pointer un lieu",n.appendChild(s);break;case"circle":var a=document.createElement("option");a.value="circle",a.text="Dessiner un cercle",n.appendChild(a);break;case"extent":var l=document.createElement("option");l.value="extent",l.text="Dessiner une emprise",n.appendChild(l)}return o.appendChild(n),o},_createReverseGeocodingSubmitFormElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPreverseGeocodingSubmit"),t.className="GPinputSubmit",t.type="submit",t.value="Rechercher",t}};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(t);var e=this._initContainer(t);a.default.control.Control.call(this,{element:e,target:t.target,render:t.render})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(1),a=i(s),l=o(4),p=i(l),c=o(3),u=i(c),h=o(0),d=i(h),f=o(7),y=i(f),g=o(106),m=i(g),v=o(2),_=i(v),b=o(16),E=i(b),S=o(18),w=i(S),P=u.default.getLogger("layerimport");return a.default.inherits(n,a.default.control.Control),n.DefaultStyles={image:new a.default.style.Icon({src:y.default.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new a.default.style.Stroke({color:"rgba(0,42,80,0.8)",width:4}),fill:new a.default.style.Fill({color:"rgba(0, 183, 152, 0.5)"}),text:new a.default.style.Text({font:"16px Sans",textAlign:"left",fill:new a.default.style.Fill({color:"rgba(255, 255, 255, 1)"}),stroke:new a.default.style.Stroke({color:"rgba(0, 0, 0, 1)",width:2})})},n.prototype=Object.create(a.default.control.Control.prototype,{}),d.default.assign(n.prototype,m.default),n.prototype.constructor=n,n.prototype.getCollapsed=function(){return this.collapsed},n.prototype.setCollapsed=function(t){if(void 0===t)return void console.log("[ERROR] LayerImport:setCollapsed - missing collapsed parameter");t&&this.collapsed||!t&&!this.collapsed||(t?document.getElementById("GPimportPanelClose-"+this._uid).click():document.getElementById("GPshowImport-"+this._uid).click(),this.collapsed=t)},n.prototype.getStaticImportContent=function(){return this.contentStatic},n.prototype.getServiceImportContent=function(){return this.contentService},n.prototype._initialize=function(t){if(this._checkInputOptions(t),this.options={collapsed:!0,layerTypes:["KML","GPX","GeoJSON","WMS","WMTS"],webServicesOptions:{},vectorStyleOptions:{KML:{extractStyles:!0,showPointNames:!0,defaultStyle:{}},GPX:{defaultStyle:{}},GeoJSON:{defaultStyle:{}}}},t.vectorStyleOptions&&t.vectorStyleOptions.KML&&t.vectorStyleOptions.KML.extractStyles&&(this.options.vectorStyleOptions.KML.extractStyles=t.vectorStyleOptions.KML.extractStyles),t.vectorStyleOptions&&t.vectorStyleOptions.KML&&t.vectorStyleOptions.KML.showPointNames&&(this.options.vectorStyleOptions.KML.showPointNames=t.vectorStyleOptions.KML.showPointNames),t.vectorStyleOptions&&t.vectorStyleOptions.KML&&t.vectorStyleOptions.KML.defaultStyle?this.options.vectorStyleOptions.KML.defaultStyle=t.vectorStyleOptions.KML.defaultStyle:this.options.vectorStyleOptions.KML.defaultStyle=new a.default.style.Style({image:n.DefaultStyles.image,stroke:n.DefaultStyles.stroke,fill:n.DefaultStyles.fill,text:n.DefaultStyles.text}),t.vectorStyleOptions&&t.vectorStyleOptions.GPX&&t.vectorStyleOptions.GPX.defaultStyle?this.options.vectorStyleOptions.GPX.defaultStyle=t.vectorStyleOptions.GPX.defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle=new a.default.style.Style({image:n.DefaultStyles.image,stroke:n.DefaultStyles.stroke,fill:n.DefaultStyles.fill}),t.vectorStyleOptions&&t.vectorStyleOptions.GeoJSON&&t.vectorStyleOptions.GeoJSON.defaultStyle?this.options.vectorStyleOptions.GeoJSON.defaultStyle=t.vectorStyleOptions.GeoJSON.defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle=new a.default.style.Style({image:n.DefaultStyles.image,stroke:n.DefaultStyles.stroke,fill:n.DefaultStyles.fill}),Array.isArray(t.layerTypes)){for(var e=[],o=0;o<t.layerTypes.length;o++)e.push(t.layerTypes[o]);this.options.layerTypes=e}d.default.mergeParams(this.options,t),this.collapsed=this.options.collapsed,this._uid=_.default.generate(),this._waiting=!1,this._timer=null,this._initImportTypes(),this._initDefaultStyles(),this._showImportInput=null,this._importPanel=null,this._formContainer=null,this._staticLocalImportInput=null,this._staticUrlImportInput=null,this._serviceUrlImportInput=null,this._getCapPanel=null,this._getCapResultsListContainer=null,this._waitingContainer=null,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMSLayers=[],this._getCapResponseWMTS=null,this._getCapResponseWMTSLayers=[]},n.prototype._checkInputOptions=function(t){if(t.layerTypes){var e=t.layerTypes;if(Array.isArray(e)){for(var o=["KML","GPX","GEOJSON","WMS","WMTS","WFS"],i=[],n=0;n<e.length;n++)"string"!=typeof e[n]?(i.push(n),console.log("[ol.control.LayerImport] 'options.layerTypes' elements should be of type string ("+e[n]+")")):(e[n]=e[n].toUpperCase(),-1===o.indexOf(e[n])&&(i.push(n),console.log("[ol.control.LayerImport] options.layerTypes : "+e[n]+" is not a supported type")),"GEOJSON"===e[n]&&(e[n]="GeoJSON"));if(0!==i.length)for(var r=i.length-1;r>=0;r--)e.splice(i[r],1)}else console.log('[ol.control.LayerImport] \'options.layerTypes\' parameter should be an array. Set default values ["KML", "GPX", "GeoJSON", "WMS", "WMTS"]'),t.layerTypes=["KML","GPX","GeoJSON","WMS","WMTS"]}},n.prototype._initDefaultStyles=function(){var t=this.options.vectorStyleOptions.KML.defaultStyle;this._defaultKMLStyle=new a.default.style.Style({image:t.image,stroke:t.stroke,fill:t.fill,text:t.text});var e=this.options.vectorStyleOptions.GPX.defaultStyle;this._defaultGPXStyle=new a.default.style.Style({image:e.image,stroke:e.stroke,fill:e.fill});var o=this.options.vectorStyleOptions.GeoJSON.defaultStyle;this._defaultGeoJSONStyle=new a.default.style.Style({image:o.image,stroke:o.stroke,fill:o.fill})},n.prototype._initImportTypes=function(){this._currentImportType=this.options.layerTypes[0]||"KML","KML"===this._currentImportType||"GPX"===this._currentImportType||"GeoJSON"===this._currentImportType?this._isCurrentImportTypeStatic=!0:"WMS"!==this._currentImportType&&"WMTS"!==this._currentImportType&&"WFS"!==this._currentImportType||(this._isCurrentImportTypeStatic=!1),this._currentStaticImportType="local"},n.prototype._initContainer=function(){var t=this._createMainContainerElement(),e=this._showImportInput=this._createShowImportElement();t.appendChild(e),this.collapsed||(e.checked=!0);var o=this._createShowImportPictoElement();t.appendChild(o);var i=this._importPanel=this._createImportPanelElement(),n=this._createImportPanelHeaderElement();i.appendChild(n);var r=this._formContainer=this._initInputFormElement();i.appendChild(r),t.appendChild(i);var s=this._getCapPanel=this._createImportGetCapPanelElement();s.appendChild(this._createImportGetCapPanelHeaderElement());var a=this._getCapResultsListContainer=this._createImportGetCapResultsListElement();s.appendChild(a),t.appendChild(s);var l=this._waitingContainer=this._createImportWaitingElement();return t.appendChild(l),t},n.prototype._initInputFormElement=function(){var t=this._createImportPanelFormElement(),e=this._createImportTypeLineElement(this.options.layerTypes);t.appendChild(e);var o=this._createImportStaticParamsContainer(this.options.layerTypes[0]),i=this._createStaticNameLabel();o.appendChild(i);var n=this._createStaticModeChoiceDiv(),r=this._createStaticLocalChoiceDiv();n.appendChild(r);var s=this._createStaticUrlChoiceDiv();n.appendChild(s),o.appendChild(n);var a=this._createStaticLocalInputDiv();a.appendChild(this._createStaticLocalInputLabel()),this._staticLocalImportInput=this._createStaticLocalInput(),a.appendChild(this._staticLocalImportInput),o.appendChild(a);var l=this._createStaticUrlInputDiv();l.appendChild(this._createStaticUrlInputLabel()),this._staticUrlImportInput=this._createStaticUrlInput(),l.appendChild(this._staticUrlImportInput),o.appendChild(l),t.appendChild(o);var p=this._createServiceParamsContainer(this.options.layerTypes[0]),c=this._createServiceUrlDiv();c.appendChild(this._createServiceUrlInputLabel()),this._serviceUrlImportInput=this._createServiceUrlInput(),c.appendChild(this._serviceUrlImportInput),p.appendChild(c),t.appendChild(p);var u=this._createImportSubmitFormElement();return t.appendChild(u),t},n.prototype._onShowImportClick=function(){this.collapsed=this._showImportInput.checked,this.dispatchEvent("change:collapsed")},n.prototype._onImportTypeChange=function(t){this._currentImportType=t.target.value,"KML"===this._currentImportType||"GPX"===this._currentImportType||"GeoJSON"===this._currentImportType?this._isCurrentImportTypeStatic=!0:"WMS"!==this._currentImportType&&"WMTS"!==this._currentImportType&&"WFS"!==this._currentImportType||(this._isCurrentImportTypeStatic=!1)},n.prototype._onStaticImportTypeChange=function(t){this._currentStaticImportType=t.target.value},n.prototype._onGetCapPanelClose=function(){this._clearGetCapParams(),this._emptyGetCapResultsList()},n.prototype._onImportSubmit=function(){P.log("import d'une couche de type : "+this._currentImportType),this.contentStatic=null,this.contentService=null,this._isCurrentImportTypeStatic?this._importStaticLayer():this._importServiceLayers()},n.prototype._importStaticLayer=function(){var t,e=document.getElementById(this._addUID("GPimportName"));e&&(t=e.value,P.log("import layer name : "+t)),"local"===this._currentStaticImportType?(P.log("import static layer from local file"),this._importStaticLayerFromLocalFile(t)):"url"===this._currentStaticImportType&&(P.log("import static layer from url"),this._importStaticLayerFromUrl(t))},n.prototype._importStaticLayerFromUrl=function(t){t=t||"";var e=this._staticUrlImportInput.value;if(P.log("url : ",e),0===e.length)return void console.log("[ol.control.LayerImport] url parameter is mandatory");if(e.trim&&(e=e.trim()),!this.options.webServicesOptions||!this.options.webServicesOptions.proxyUrl&&!this.options.webServicesOptions.noProxyDomains)return void console.log("[ol.control.LayerImport] options.webServicesOptions.proxyUrl parameter is mandatory to request resources on another domain (cross-domain)");e=E.default.proxifyUrl(e,this.options.webServicesOptions);var o=this;p.default.Protocols.XHR.call({url:e,method:"GET",timeOut:15e3,onResponse:function(e){o._hideWaitingContainer(),o._addFeaturesFromImportStaticLayer(e,t)},onFailure:function(t){o._hideWaitingContainer(),console.log("[ol.control.LayerImport] KML/GPX/GeoJSON request failed : ",t)}})},n.prototype._importStaticLayerFromLocalFile=function(t){var e=this._staticLocalImportInput.files[0];if(!e)return void console.log("[ol.control.LayerImport] missing file");var o=new FileReader,i=this;o.onerror=function(t){i._hideWaitingContainer(),P.log("error fileReader : ",t)},o.onprogress=function(){P.log("onprogress")},o.onloadstart=function(){i._displayWaitingContainer(),P.log("onloadstart")},o.onabort=function(){i._hideWaitingContainer(),P.log("onabort")},o.onloadend=function(t){P.log("onloadend : ",t)},o.onload=function(e){P.log("fileReader onload - file content : ",e.target.result),i._hideWaitingContainer(),i._addFeaturesFromImportStaticLayer(e.target.result,t)},o.readAsText(e)},n.prototype._addFeaturesFromImportStaticLayer=function(t,e){var o=this.getMap();if(o&&t){this.contentStatic=t;var i,n;"KML"===this._currentImportType?(i=new w.default({showPointNames:this.options.vectorStyleOptions.KML.showPointNames,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}),n=this.options.vectorStyleOptions.KML.defaultStyle):"GPX"===this._currentImportType?(i=new a.default.format.GPX,n=this.options.vectorStyleOptions.GPX.defaultStyle):"GeoJSON"===this._currentImportType&&(i=new a.default.format.GeoJSON,n=this.options.vectorStyleOptions.GeoJSON.defaultStyle);var r=i.readProjection(t),s=this._getMapProjectionCode(),l=null;l=i.readFeatures(t,{dataProjection:r,featureProjection:s}),P.log("loaded features : ",l);var p=new a.default.source.Vector({features:new a.default.Collection});p.addFeatures(l),P.trace(p),e?p._title=p._description=e:i.readName&&i.readName(t)?p._title=p._description=i.readName(t):(p._title=p._description="Import "+this._currentImportType,P.log('[ol.control.LayerImport] set default name "Import '+this._currentImportType+'"'));var c=new a.default.layer.Vector({source:p,style:n});if(c.gpResultLayerId="layerimport:"+this._currentImportType,o.addLayer(c),o.getView()&&o.getSize()&&p.getExtent){var u=p.getExtent();u&&u[0]!==1/0&&o.getView().fit(p.getExtent(),o.getSize())}}},n.prototype._addFeaturesFromImportStaticLayerUrl=function(t,e){var o=this.getMap();if(o&&t){var i;"KML"===this._currentImportType?i=new w.default({showPointNames:!0,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}):"GPX"===this._currentImportType?i=new a.default.format.GPX:"GeoJSON"===this._currentImportType&&(i=new a.default.format.GeoJSON);var n=new a.default.source.Vector({url:t,format:i});"GPX"===this._currentImportType&&n.forEachFeature(function(t){null==t.getStyle()&&(P.log("[ol.control.LayerImport] set default style for GPX feature"),t.setStyle(this.options.vectorStyleOptions.GPX.defaultStyle))}),"GeoJSON"===this._currentImportType&&n.forEachFeature(function(t){null==t.getStyle()&&(P.log("[ol.control.LayerImport] set default style for GeoJSON feature"),t.setStyle(this.options.vectorStyleOptions.GeoJSON.defaultStyle))}),n._title=n._description=e||"Import "+this._currentImportType;var r=new a.default.layer.Vector({source:n});if(r.gpResultLayerId="layerimport:"+this._currentImportType,o.addLayer(r),o.getView()&&o.getSize()&&n.getExtent){var s=n.getExtent();s&&s[0]!==1/0&&o.getView().fit(n.getExtent(),o.getSize())}}},n.prototype._importServiceLayers=function(){if("WFS"===this._currentImportType)return void console.log("[ol.control.LayerImport] WFS layer import is not implemented yet");this._emptyGetCapResultsList();var t=this._getCapRequestUrl=this._serviceUrlImportInput.value;if(!t)return void console.log("[ol.control.LayerImport] url parameter is mandatory");P.log("url : ",t),t.trim&&(t=t.trim());var e=t.indexOf("?");if(e<0?t+="?SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities":e===t.length-1&&(t+="SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities"),!this.options.webServicesOptions||!this.options.webServicesOptions.proxyUrl&&!this.options.webServicesOptions.noProxyDomains)return void console.log("[ol.control.LayerImport] options.webServicesOptions.proxyUrl parameter is mandatory to request web service layers (getcapabilities request)");var o=this.options.webServicesOptions.proxyUrl,i=this.options.webServicesOptions.noProxyDomains,n=!1;if(i&&Array.isArray(i)&&i.length>0)for(var r in i)P.log("analyzing "+i[r]),-1!==t.indexOf(i[r])&&(P.log(t+" found in noProxyDomains list ("+i[r]+")."),n=!0);!1===n&&(t=o+encodeURIComponent(t)),this._displayWaitingContainer();var s=this;p.default.Protocols.XHR.call({url:t,method:"GET",timeOut:15e3,onResponse:function(t){s._hideWaitingContainer(),s._displayGetCapResponseLayers.call(s,t)},onFailure:function(t){s._hideWaitingContainer(),console.log("[ol.control.LayerImport] getCapabilities request failed : ",t)}})},n.prototype._displayGetCapResponseLayers=function(t){var e,o,i,n;if(this._getCapResponseWMSLayers=[],this.contentService=t,this._importPanel.style.display="none",this._getCapPanel.style.display="block","WMS"===this._currentImportType){if(!(e=new a.default.format.WMSCapabilities))return;var r=this._getCapResponseWMS=e.read(t);if(P.log("getCapabilities response : ",r),r&&r.Capability&&r.Capability.Layer){var s=r.Capability.Layer;if(Array.isArray(s))for(var l=0;l<s.length;l++)this._displayGetCapResponseWMSLayer(s[l]);else this._displayGetCapResponseWMSLayer(s)}}else if("WMTS"===this._currentImportType){if(!(e=new a.default.format.WMTSCapabilities))return;var p=this._getCapResponseWMTS=e.read(t);if(P.log("getCapabilities response : ",p),p&&p.Contents&&p.Contents.Layer&&(o=p.Contents.Layer,Array.isArray(o))){this._getCapResponseWMTSLayers=o;for(var c=0;c<o.length;c++)if((n=this._getWMTSLayerProjection(o[c],p))&&"string"==typeof n){if(!a.default.proj.get(n)&&!a.default.proj.get(n.toUpperCase())){console.log("[ol.control.LayerImport] wmts layer cannot be added to map : unknown projection",o[c]);continue}i=o[c].Title,this._getCapResultsListContainer&&this._getCapResultsListContainer.appendChild(this._createImportGetCapResultElement(i,c))}}}},n.prototype._displayGetCapResponseWMSLayer=function(t,e){t?P.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer - layerObj : ",t):console.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer : getCapabilities layer object not found");var o,i,n=this._getMapProjectionCode();if(e){var r,s,a=["CRS","Style"];for(s=0;s<a.length;s++)if(r=a[s],Array.isArray(e[r])&&0!==e[r].length)if(Array.isArray(t[r])&&0!==t[r].length)for(var l=0;l<e[r];l++)-1===t[r].indexOf(e[r][l])&&t[r].push(e[r][l]);else t[r]=e[r];var p=["BoundingBox","EX_GeographicBoundingBox","MaxScaleDenominator","MinScaleDenominator","Attribution","Dimension","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight"];for(s=0;s<p.length;s++)r=p[s],e[r]&&!t[r]&&(t[r]=e[r]);!e._isRootLayer&&e.Title&&(t.Title=e.Title+" > "+t.Title)}else t._isRootLayer=!0;if(t.Layer){if(Array.isArray(t.Layer))for(var c=0;c<t.Layer.length;c++)this._displayGetCapResponseWMSLayer(t.Layer[c],t)}else{var u=this._getCapResponseWMSLayers.length;o=this._getWMSLayerProjection(t,n),o?(t._projection=o,i=t.Title,this._getCapResultsListContainer&&this._getCapResultsListContainer.appendChild(this._createImportGetCapResultElement(i,u)),this._getCapResponseWMSLayers[u]=t):console.log("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection",t)}},n.prototype._onGetCapResponseLayerClick=function(t){if(t.target&&t.target.id){var e=parseInt(t.target.id.substr(23),10);if(null==e)return;var o;"WMS"===this._currentImportType?(o=this._getCapResponseWMSLayers[e],this._addGetCapWMSLayer(o)):"WMTS"===this._currentImportType&&(o=this._getCapResponseWMTSLayers[e],this._addGetCapWMTSLayer(o))}},n.prototype._addGetCapWMSLayer=function(t){var e=this.getMap();if(!e)return void console.log("[ol.control.LayerImport] _addGetCapWMSLayer error : map is not defined");if(!t)return void console.log("[ol.control.LayerImport] _addGetCapWMSLayer error : layerInfo is not defined");var o=this._getMapProjectionCode(),i={},n=this._getWMSLayerGetMapUrl();if(n)i.url=n;else{var r=this._getCapRequestUrl.indexOf("?");i.url=-1!==r?this._getCapRequestUrl.substring(0,r):this._getCapRequestUrl}if(i.params={},!t.Name)return void console.log("[ol.control.LayerImport] unable to add wms layer : mandatory layer 'name' parameter cannot be found",t);i.params.LAYERS=t.Name,i.params.SERVICE="WMS",this._getCapResponseWMS.version&&(i.params.VERSION=this._getCapResponseWMS.version);var s=t._projection;if(!s)return void console.log("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection");s!==o&&(i.projection=s);var l;if(t.Style&&Array.isArray(t.Style)){var p=t.Style[0];i.params.STYLES=p.Name,p.LegendURL&&Array.isArray(p.LegendURL)&&0!==p.LegendURL.length&&(l=p.LegendURL[0].OnlineResource)}var c=new a.default.source.TileWMS(i);this._getWMSLayerInfoForLayerSwitcher(t,l,c);var u={};u.source=c,this._getWMSLayerMinMaxResolution(t,o,u),this._getWMSLayerExtent(t,o,u);var h=new a.default.layer.Tile(u);h.gpResultLayerId="layerimport:WMS",t.queryable&&(h.gpGFIparams={queryable:!0},this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format&&Array.isArray(this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)&&(h.gpGFIparams.formats=this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)),e.addLayer(h)},n.prototype._getWMSLayerGetMapUrl=function(){var t
;if(this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetMap){var e=this._getCapResponseWMS.Capability.Request.GetMap;if(e.DCPType&&Array.isArray(e.DCPType)&&0!==e.DCPType.length){var o=e.DCPType[0];o&&o.HTTP&&o.HTTP.Get&&(t=o.HTTP.Get.OnlineResource)}}return t},n.prototype._getWMSLayerProjection=function(t,e){var o;if(!t||"object"!==(void 0===t?"undefined":r(t)))return void P.log("missing layer information (from getCapabilities)");var i=t.CRS;if(Array.isArray(i))for(var n=0;n<i.length;n++){var s=i[n];if(s===e){o=s;break}if(s&&"string"==typeof s&&(a.default.proj.get(s)||a.default.proj.get(s.toUpperCase()))){o=s;break}}return o},n.prototype._getWMSLayerMinMaxResolution=function(t,e,o){var i=a.default.proj.get(e).getUnits();if("m"===i)t.MinScaleDenominator&&(o.minResolution=28e-5*t.MinScaleDenominator),t.MaxScaleDenominator&&(o.maxResolution=28e-5*t.MaxScaleDenominator);else if("degrees"===i){var n=28e-5*180/(6378137*Math.PI);t.MinScaleDenominator&&(o.minResolution=t.MinScaleDenominator*n),t.MaxScaleDenominator&&(o.maxResolution=t.MaxScaleDenominator*n)}},n.prototype._getWMSLayerExtent=function(t,e,o){if(!t)return void console.log("[ol.control.LayerImport] _getWMSLayerExtent error : layerInfo is not defined");var i=t.EX_GeographicBoundingBox,n=t.BoundingBox;if(i&&Array.isArray(i))o.extent="EPSG:4326"===e?i:a.default.proj.transformExtent(i,"EPSG:4326",e);else if(n&&Array.isArray(n))for(var r,s,l=0;l<n.length;l++)if(r=n[l].crs,s=n[l].extent,r){if(r===e){o.extent=s;break}if(r&&"string"==typeof r){var p=a.default.proj.get(r)?a.default.proj.get(r):a.default.proj.get(r.toUpperCase());if(p){if("degrees"===p.getUnits()&&0===r.toUpperCase().indexOf("EPSG")){var c=[s[1],s[0],s[3],s[2]];o.extent=a.default.proj.transformExtent(c,p,e)}else o.extent=a.default.proj.transformExtent(s,p,e);break}}}},n.prototype._getWMSLayerInfoForLayerSwitcher=function(t,e,o){if(t.Title?(o._title=t.Title,o._description=t.Abstract?t.Abstract:t.Title):(o._title=t.Name,o._description=t.Abstract?t.Abstract:t.Name),e&&(o._legends=[{url:e}]),t.MetadataURL&&Array.isArray(t.MetadataURL)){o._metadata=[];for(var i=0;i<t.MetadataURL.length;i++){var n=t.MetadataURL[i].OnlineResource;n&&o._metadata.push({url:n})}}if(t.Attribution){var r=t.Attribution;o._originators={},r.OnlineResource&&(o._originators.url=r.OnlineResource),r.Title&&(o._originators.name=o._originators.attribution=r.Title),r.LogoURL&&r.LogoURL.OnlineResource&&(o._originators.logo=r.LogoURL.OnlineResource)}},n.prototype._addGetCapWMTSLayer=function(t){if(!t||!t.Identifier)return void console.log("[ol.control.LayerImport] layer information not found in getCapabilities response for layer ");var e=this.getMap();if(e){var o={};o.layer=t.Identifier,this._getCapResponseWMTS.version&&(o.version=this._getCapResponseWMTS.version);var i=this._getWMTSLayerGetTileUrl();if(i)o.url=i;else{var n=this._getCapRequestUrl.indexOf("?");o.url=-1!==n?this._getCapRequestUrl.substring(0,n):this._getCapRequestUrl}var r=this._getTMSParams(t);o.matrixSet=r.tms,o.projection=r.projCode,o.tileGrid=new a.default.tilegrid.WMTS({resolutions:r.resolutions,matrixIds:r.matrixIds,origin:r.origin});var s,l;if(t.Style&&Array.isArray(t.Style))for(var p,c=0;c<t.Style.length&&(p=t.Style[c],s=p.Identifier,!p.isDefault);c++)p.LegendURL&&Array.isArray(p.LegendURL)&&0!==p.LegendURL.length&&(l=p.LegendURL[0].href);null==s&&console.log("[ol.control.LayerImport] style information not found in getCapabilities response for layer "+t.Identifier),o.style=s;var u;t.Format&&Array.isArray(t.Format)&&(u=t.Format[0]),null==u&&console.log("[ol.control.LayerImport] format information not found in getCapabilities response for layer "+t.Identifier),o.format=u;var h=new a.default.source.WMTS(o);t.Title?(h._title=t.Title,h._description=t.Abstract?t.Abstract:t.Title):(h._title=t.Identifier,h._description=t.Abstract?t.Abstract:t.Identifier),l&&(h._legends=[{url:l}]);var d={};d.source=h,d.extent=this._getWMTSLayerExtent(t);var f;try{f=new a.default.layer.Tile(d)}catch(t){return void console.log("[ol.control.LayerImport] an error occured while trying to create ol.layer.Tile from getCapabilities information. error : ",t)}f.gpResultLayerId="layerimport:WMTS",e.addLayer(f)}},n.prototype._getWMTSLayerGetTileUrl=function(){var t;if(this._getCapResponseWMTS&&this._getCapResponseWMTS.OperationsMetadata&&this._getCapResponseWMTS.OperationsMetadata.GetTile){var e=this._getCapResponseWMTS.OperationsMetadata.GetTile;e.DCP&&e.DCP.HTTP&&e.DCP.HTTP.Get&&Array.isArray(e.DCP.HTTP.Get)&&0!==e.DCP.HTTP.Get.length&&(t=e.DCP.HTTP.Get[0].href)}return t},n.prototype._getWMTSLayerProjection=function(t,e){var o;if(!t||"object"!==(void 0===t?"undefined":r(t)))return void P.log("missing layer information (from getCapabilities)");if(!e||"object"!==(void 0===e?"undefined":r(e)))return void P.log("missing getCapabilities response");if(t.TileMatrixSetLink&&Array.isArray(t.TileMatrixSetLink)){var i,n=t.TileMatrixSetLink[0].TileMatrixSet;if(e.Contents&&Array.isArray(e.Contents.TileMatrixSet))for(var s=e.Contents.TileMatrixSet,l=0;l<s.length;l++)if(s[l].Identifier===n&&s[l].TileMatrix){var p=s[l];i=p.SupportedCRS,i&&"string"==typeof i&&(a.default.proj.get(i)||a.default.proj.get(i.toUpperCase()))&&(o=i);break}}return o},n.prototype._getTMSParams=function(t){var e,o,i,n={},r=[],s=[],l=[];if(this.getMap()&&t.TileMatrixSetLink&&Array.isArray(t.TileMatrixSetLink)){if(e=t.TileMatrixSetLink[0].TileMatrixSet,this._getCapResponseWMTS.Contents&&Array.isArray(this._getCapResponseWMTS.Contents.TileMatrixSet)){for(var p=this._getCapResponseWMTS.Contents.TileMatrixSet,c=0;c<p.length;c++)if(p[c].Identifier===e&&p[c].TileMatrix){var u,h,d,f,y,g=p[c];if(g.SupportedCRS&&(o=g.SupportedCRS,i=a.default.proj.get(o)),i&&i.getUnits&&(y=i.getUnits()),Array.isArray(g.TileMatrix))for(var m=0;m<g.TileMatrix.length;m++)u=g.TileMatrix[m],null!=u.Identifier&&(h=parseInt(u.Identifier,10),r.push(h)),d=u.ScaleDenominator,f="degrees"===y?28e-5*d*180/(6378137*Math.PI):28e-5*d,s.push(f),l=u.TopLeftCorner;Array.isArray(s)&&void 0!==s.sort&&s.sort(function(t,e){return e-t}),Array.isArray(r)&&void 0!==r.sort&&r.sort(function(t,e){return t-e})}}else console.log("[ol.control.LayerImport] TileMatrixSet data not found in getCapabilities response for layer "+t.Identifier);return n.tms=e,n.projCode=o,n.matrixIds=r,n.resolutions=s,n.origin=l,n}},n.prototype._getWMTSLayerExtent=function(t){var e,o=this._getMapProjectionCode();return t.WGS84BoundingBox&&Array.isArray(t.WGS84BoundingBox)&&(e=a.default.proj.transformExtent(t.WGS84BoundingBox,"EPSG:4326",o)),e},n.prototype._getMapProjectionCode=function(){var t=this.getMap();return t&&t.getView&&t.getView().getProjection?t.getView().getProjection().getCode():void P.log("unable to get layerimport's map")},n.prototype._displayWaitingContainer=function(){this._waitingContainer.className="GPimportWaitingContainerVisible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){!0===t._waiting?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)},n.prototype._hideWaitingContainer=function(){this._waiting&&(this._waitingContainer.className="GPimportWaitingContainerHidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)},n.prototype._clearGetCapParams=function(){this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMTS=null,this._getCapResponseWMSLayers=null,this._getCapResponseWMTSLayers=null},n.prototype._emptyGetCapResultsList=function(){if(this._getCapResultsListContainer)for(;this._getCapResultsListContainer.firstChild;)this._getCapResultsListContainer.removeChild(this._getCapResultsListContainer.firstChild)},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPimport"),t.className="GPwidget",t},_createShowImportElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowImport"),t.type="checkbox",t},_createShowImportPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowImportPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowImport"),e.title="Ouvrir l'import de couches",e.addEventListener?e.addEventListener("click",function(){t._onShowImportClick()}):e.attachEvent&&e.attachEvent("onclick",function(){t._onShowImportClick()});var o=document.createElement("span");return o.id=this._addUID("GPshowImportOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createImportPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPimportPanel"),t.className="GPpanel",t},_createImportPanelHeaderElement:function(){var t=document.createElement("div");t.className="GPpanelHeader";var e=this._createImportPanelTitleElement();t.appendChild(e);var o=this._createImportPanelCloseElement();return t.appendChild(o),t},_createImportPanelTitleElement:function(){var t=document.createElement("div");return t.className="GPpanelTitle",t.innerHTML="Import de données",t},_createImportPanelCloseElement:function(){var t=this,e=document.createElement("div");return e.id=this._addUID("GPimportPanelClose"),e.className="GPpanelClose",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(t._addUID("GPshowImportPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(t._addUID("GPshowImportPicto")).click()}),e},_createImportPanelFormElement:function(){var t=this,e=document.createElement("form");return e.id=this._addUID("GPimportForm"),e.className="map-tool-box",e.addEventListener?e.addEventListener("submit",function(e){e.preventDefault(),t._onImportSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(e){e.preventDefault(),t._onImportSubmit()}),e},_createImportTypeLineElement:function(t){var e=this,o=document.createElement("div");o.id=this._addUID("GPimportTypeLine"),o.className="GPimportInputLine";var i=document.createElement("label");i.htmlFor=this._addUID("GPimportType"),i.className="GPimportLabel",i.innerHTML="Type de donnée",i.title="Type de donnée",o.appendChild(i);var n=document.createElement("select");n.className="GPimportSelect",n.addEventListener?n.addEventListener("change",function(t){"KML"===this.value||"GPX"===this.value||"GeoJSON"===this.value?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPimportVisibleParams",document.getElementById(e._addUID("GPimportServiceParams")).className="GPimportHiddenParams"):"WMS"!==this.value&&"WMTS"!==this.value&&"WFS"!==this.value||(document.getElementById(e._addUID("GPimportServiceParams")).className="GPimportVisibleParams",document.getElementById(e._addUID("GPimportStaticParams")).className="GPimportHiddenParams"),e._onImportTypeChange(t)}):n.attachEvent&&n.attachEvent("onchange",function(){"KML"===this.value||"GPX"===this.value||"GeoJSON"===this.value?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPimportVisibleParams",document.getElementById(e._addUID("GPimportServiceParams")).className="GPimportHiddenParams"):"WMS"!==this.value&&"WMTS"!==this.value&&"WFS"!==this.value||(document.getElementById(e._addUID("GPimportServiceParams")).className="GPimportVisibleParams",document.getElementById(e._addUID("GPimportStaticParams")).className="GPimportHiddenParams"),e._onImportTypeChange()}),n.id=this._addUID("GPimportType"),t&&Array.isArray(t)||(t=["KML","GPX","GeoJSON","WMS","WMTS","WFS"]);for(var r,s=0;s<t.length;s++)r=document.createElement("option"),r.value=t[s],r.text=t[s],n.appendChild(r);return o.appendChild(n),o},_createImportWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GPimportWaitingContainer"),t.className="GPimportWaitingContainerHidden";var e=document.createElement("p");return e.className="GPimportWaiting",e.innerHTML="Recherche en cours...",t.appendChild(e),t},_createImportStaticParamsContainer:function(t){var e=document.createElement("div");return e.id=this._addUID("GPimportStaticParams"),e.className="KML"===t||"GPX"===t||"GeoJSON"===t?"GPimportVisibleParams":"GPimportHiddenParams",e},_createStaticNameLabel:function(){var t=document.createElement("div");t.className="GPimportInputLine";var e=document.createElement("label");e.className="GPimportLabel",e.htmlFor=this._addUID("GPimportName"),e.innerHTML="Nom",e.title="Nom",t.appendChild(e);var o=document.createElement("input");return o.type="text",o.id=this._addUID("GPimportName"),o.className="GPimportInput",t.appendChild(o),t},_createStaticModeChoiceDiv:function(){var t=document.createElement("div");return t.id=this._addUID("GPimportChoice"),t},_createStaticLocalChoiceDiv:function(){var t=this,e=document.createElement("div");e.className="GPimportChoiceAlt";var o=document.createElement("input");o.type="radio",o.addEventListener?o.addEventListener("change",function(e){document.getElementById(t._addUID("GPimportValueLocal")).className="GPimportInputLine",document.getElementById(t._addUID("GPimportValueUrl")).className="GPimportValueHidden",t._onStaticImportTypeChange(e)}):o.appendChild&&o.appendChild("onchange",function(){document.getElementById(t._addUID("GPimportValueLocal")).className="GPimportInputLine",document.getElementById(t._addUID("GPimportValueUrl")).className="GPimportValueHidden",t._onStaticImportTypeChange()}),o.name="GPimportChoiceMode",o.value="local",o.checked=!0,o.id=this._addUID("GPimportChoiceAltLocal"),e.appendChild(o);var i=document.createElement("label");return i.className="GPimportChoiceAltTxt",i.htmlFor=this._addUID("GPimportChoiceAltLocal"),i.innerHTML="par fichier local",i.title="par fichier local",e.appendChild(i),e},_createStaticUrlChoiceDiv:function(){var t=this,e=document.createElement("div");e.className="GPimportChoiceAlt";var o=document.createElement("input");o.type="radio",o.addEventListener?o.addEventListener("change",function(e){document.getElementById(t._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(t._addUID("GPimportValueLocal")).className="GPimportValueHidden",t._onStaticImportTypeChange(e)}):o.appendChild&&o.appendChild("onchange",function(){document.getElementById(t._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(t._addUID("GPimportValueLocal")).className="GPimportValueHidden",t._onStaticImportTypeChange()}),o.id=this._addUID("GPimportChoiceAltUrl"),o.name="GPimportChoiceMode",o.value="url",o.checked=!1,e.appendChild(o);var i=document.createElement("label");return i.className="GPimportChoiceAltTxt",i.htmlFor=this._addUID("GPimportChoiceAltUrl"),i.innerHTML="par URL",i.title="par URL",e.appendChild(i),e},_createStaticLocalInputDiv:function(){var t=document.createElement("div");return t.id=this._addUID("GPimportValueLocal"),t.className="GPimportInputLine",t},_createStaticLocalInputLabel:function(){var t=document.createElement("label");return t.className="GPimportLabel",t.htmlFor=this._addUID("GPimportFile"),t.innerHTML="Fichier local",t.title="Fichier local",t},_createStaticLocalInput:function(){var t=document.createElement("input");return t.type="file",t.id=this._addUID("GPimportFile"),t.className="GPimportInputFile",t},_createStaticUrlInputDiv:function(){var t=document.createElement("div");return t.id=this._addUID("GPimportValueUrl"),t.className="GPimportValueHidden",t},_createStaticUrlInputLabel:function(){var t=document.createElement("label");return t.className="GPimportLabel",t.htmlFor=this._addUID("GPimportUrl"),t.innerHTML="URL",t.title="URL",t},_createStaticUrlInput:function(){var t=document.createElement("input");return t.type="text",t.id=this._addUID("GPimportUrl"),t.className="GPimportInput",t},_createServiceParamsContainer:function(t){var e=document.createElement("div");return e.id=this._addUID("GPimportServiceParams"),e.className="WMS"===t||"WMTS"===t||"WFS"===t?"GPimportVisibleParams":"GPimportHiddenParams",e},_createServiceUrlDiv:function(){var t=document.createElement("div");return t.className="GPimportInputLine",t},_createServiceUrlInputLabel:function(){var t=document.createElement("label");return t.className="GPimportLabel",t.htmlFor=this._addUID("GPimportServiceUrl"),t.innerHTML="URL du service",t.title="URL du service",t},_createServiceUrlInput:function(){var t=document.createElement("input");return t.type="text",t.id=this._addUID("GPimportServiceUrl"),t.className="GPimportInput",t},_createImportSubmitFormElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPimportSubmit"),t.className="GPinputSubmit tool-form-submit",t.type="submit",t.value="Importer",t},_createImportGetCapPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPimportGetCapPanel"),t.className="GPpanel",t},_createImportGetCapPanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var o=document.createElement("div");o.className="GPpanelTitle",o.innerHTML="Couches accessibles",o.title="Couches accessibles",e.appendChild(o);var i=document.createElement("div");return i.addEventListener?i.addEventListener("click",function(){document.getElementById(t._addUID("GPimportGetCapPanel")).style.display="none",document.getElementById(t._addUID("GPimportPanel")).style.display="",t._onGetCapPanelClose()}):i.attachEvent&&i.attachEvent("click",function(){document.getElementById(t._addUID("GPimportGetCapPanel")).style.display="none",document.getElementById(t._addUID("GPimportPanel")).style.display="",t._onGetCapPanelClose()}),i.className="GPpanelClose",i.title="Fermer le panneau",i.id=this._addUID("GPimportGetCapPanelClose"),e.appendChild(i),e},_createImportGetCapResultsListElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPimportGetCapResults"),t},_createImportGetCapResultElement:function(t,e){var o=document.createElement("div");o.className="GPimportGetCapProposal",o.innerHTML=t,o.title=t;var i=this;return o.addEventListener?o.addEventListener("click",function(t){i._onGetCapResponseLayerClick(t)}):o.attachEvent&&o.attachEvent("onclick",function(){i._onGetCapResponseLayerClick()}),o.id="GPimportGetCapProposal_"+e,o}};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");s.default.control.Attribution.call(this,t)}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),s=i(r),a=o(5),l=i(a);return s.default.inherits(n,s.default.control.Attribution),n.prototype=Object.create(s.default.control.Attribution.prototype,{}),n.prototype.constructor=n,n.prototype.setMap=function(t){if(null!=t){var e=t.getControls();e.forEach(function(t){t instanceof s.default.control.Attribution&&!(t instanceof n)&&this.remove(t)},e),this._updateAttributions(t);var o=this;t.on("moveend",function(){o._updateAttributions(t)},this),t.getLayers().on("add",function(){o._updateAttributions(t)},this),t.getLayers().on("remove",function(){o._updateAttributions(t)},this)}s.default.control.Attribution.prototype.setMap.call(this,t)},n.prototype._updateAttributions=function(t){for(var e={},o=t.getView(),i=o.calculateExtent(t.getSize()),n=o.getProjection().getCode(),r=s.default.proj.transformExtent(i,n,"EPSG:4326"),a=[r[3],r[0],r[1],r[2]],l=o.getZoom(),p=t.getLayers().getArray(),c=0;c<p.length;c++)if(p[c].getSource)this._updateLayerAttributions(p[c],e,a,n,l);else if(p[c].getLayers){var u=p[c].getLayers(),h=this;u.forEach(function(t){t.getSource?h._updateLayerAttributions(t,e,a,n,l):console.log("cannot find layer source in layergroup ",p[c])})}},n.prototype._updateLayerAttributions=function(t,e,o,i,n){var r=t.getSource(),a=[],p=t.getVisible(),c=r._originators;if(void 0!==c&&r.setAttributions(),c&&p){for(var u=l.default.getAttributions({extent:o,crs:i,zoom:n,visibility:p,originators:c}),h=0;h<u.length;h++){var d=u[h];e&&e[d]||(a.push(new s.default.Attribution({html:d})),e[d]=!0)}0!==a.length&&r.setAttributions(a)}},e.default=n,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(x.trace("ElevationPath()"),t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="ElevationPath",this._uid=M.default.generate(),this._showContainer=null,this._pictoContainer=null,this._panelContainer=null,this._profileContainer=null,this._waitingContainer=null,this._infoContainer=null,this._timerHdlr=null,this._drawStyleStart=null,this._drawStyleFinish=null,this._markerStyle=null,this._profile=null,this._data={},this._measureSource=null,this._measureVector=null,this._measureDraw=null,this._lastSketch=null,this._currentSketch=null,this._marker=null,this._noRightManagement=!1,this._initialize(t),this._checkRightsManagement();var e=t.element?t.element:this._initializeContainer();a.default.control.Control.call(this,{element:e,target:t.target,render:t.render})}Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s=o(1),a=i(s),l=o(4),p=i(l),c=o(3),u=i(c),h=o(0),d=i(h),f=o(6),y=i(f),g=o(13),m=i(g),v=o(14),_=i(v),b=o(19),E=i(b),S=o(110),w=i(S),P=o(111),C=i(P),A=o(2),M=i(A),x=u.default.getLogger("elevationpath");return a.default.inherits(n,a.default.control.Control),n.prototype=Object.create(a.default.control.Control.prototype,{}),d.default.assign(n.prototype,w.default),n.__removeProfileMarker=function(t){var e=t;e._marker&&(e._measureSource.removeFeature(e._marker),e._marker=null)},n.__createProfileMarker=function(t,e){var o=t,i=o.getMap(),n=i.getView().getProjection(),r=a.default.proj.transform([e.lon,e.lat],"EPSG:4326",n),s=o._measureSource.getFeatures()[0].getGeometry().getClosestPoint(r),l=new a.default.geom.Point(s);o._marker=new a.default.Feature({geometry:l}),x.trace(l),o._marker.setStyle(o._markerStyle),o._measureSource.addFeature(o._marker)},n.__updateProfileMarker=function(t,e){var o=t;n.__removeProfileMarker(o),n.__createProfileMarker(o,e)},n.__customRawProfileOperation=function(t,e){x.log("__customRawProfileOperation");for(var o=t,i=e.points,r=o.getMap().getView().getProjection(),s=0;s<i.length;s++){var l=i[s],p=a.default.proj.transform([l.lon,l.lat],"EPSG:4326",r),c=new a.default.geom.Point(p);o._marker=new a.default.Feature({geometry:c}),x.trace(c);var u=n.DEFAULT_STYLES.RESULTS,h=new a.default.style.Circle({radius:u.imageRadius,stroke:new a.default.style.Stroke({color:u.imageStrokeColor,width:u.imageStrokeWidth}),fill:new a.default.style.Fill({color:u.imageFillColor})});o._marker.setStyle(new a.default.style.Style({image:h})),o._measureSource.addFeature(o._marker)}},n.__customRawProfileMouseOverEvent=function(t,e){x.log("__customRawProfileMouseOverEvent",t,e)},n.DISPLAY_PROFILE_LIB_AMCHARTS=function(t,e,o){if(x.trace("ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS"),"undefined"==typeof AmCharts)return void console.log("Lib. AmCharts is not loaded !");var i=C.default.displayProfileLibAmCharts(t,e,o,n);i&&(this._profile=i)},n.DISPLAY_PROFILE_LIB_D3=function(t,e,o){if(x.trace("ElevationPath.DISPLAY_PROFILE_LIB_D3"),"undefined"==typeof d3)return void console.log("Lib. D3 is not loaded !");var i=C.default.displayProfileLibD3(t,e,o,n);i&&(this._profile=i)},n.DISPLAY_PROFILE_RAW=function(t,e,o){x.trace("ElevationPath.DISPLAY_PROFILE_RAW");var i=C.default.displayProfileRaw(t,e,o,n);i&&(this._profile=i)},n.DISPLAY_PROFILE_BY_DEFAULT=function(t,e,o){x.trace("ElevationPath.DISPLAY_PROFILE_BY_DEFAULT");var i=C.default.displayProfileByDefault(t,e,o,n);i&&(this._profile=i)},n.DEFAULT_STYLES={MARKER:new a.default.style.Icon({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAsCAYAAAAATWqyAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABTtJREFUeNq8WGtsFUUU/rb3gtdCAykFG9AUDTQUKimhxUewEusrJYoBo4FfEgoqotHERH6oP9TGmJhIrIlWAf9hjAaEiME2pgFfVVpFii8sWqIQLLSx3EJLW7p+Z2Z2b2l7d/b23vZLTmZ2duacb2fmnDk7DlKA67rXs1hJKacsohRQppjXFygnKT9TDlH2O47zFzIFGnco91EOuqnjoBnr2Ow4FhIlLN6m3DykFTh3BGj/Doj/CfSe082xPCDnBmDWTUBeyXDVjZTHOUNHUiZCEs+weI0ySTV0/w0c2wa07gIungn+vOx8YN46oPhpYOp1Xms/5TmSeSMUERKImFnYqBoGuPRNL5LEW8BgX2rrmjWZZLYApS8BUW8r4T0zO5eTEjFr+S6lSjV0HgPqVwNdf6S30abNB+7aDeQWey3bKZtIxvU5DxvyrE/izJfAvuXpkxCIDtElOjWqjK2RM8LZWMbiG0oEnUc5kB7a14WMYvI04H56du5ieZKluZWz8r0/IyQh5TuKRH8cqFuTeRIC0Sm6xYbYok1j21+ahyhLVO3wC8D5VowbRLfY0FhibOulIavDLEoRZyD8sJDeMWBXKG5ZsIobsdDsg+OMq3u1m1u9KQo8zP45EqjRxOUpk6i50IRl4FuGjpZtwUoiMYa314GFj/EzIsN8n8v+C1e4kfvwcm+wnhsZY27xQ8oiWZpKrWRQB6tAElfxpKnjsCdGklDzG9HvpI/0DYLYEpsalVnmAAM6fgR62oMHl70C5N9mn3rpI32DILbEpkZ5ljlFgbPNFtebzij5VPhNKX1lTBASNtXSzPZ3cxCuvVOH7FTCu4yxeZDGbCES0z5+PniQ3uGpwTYmYTOWCPGTpgYP6u9OnYhtzBCbQkSH0NiM4EEdP6VOxDYmYbNLiJxQ1elFwYPaG3XQCn3QHddjgpCweUKI6K2bvzw4YROf//rJob6fZl/H2FRoFiINfqo3qyzYwD8MVIeYLw32J+8j76SP9A2C2BKbGg1CZL+EF/W4YKP9a3/fCeyhkrY9DOOXEu1SlzZ5J31sSNjqURm/OfQkY9qgvkYOvXhbuH0g505Oga7HT9rPF9+t5+pDL0ulwzt46FV5ROax+JUSRRtP0LoHMK64+xNg7iqVEVOKSKRVxRGpsKhRnaRD4SPjR0J0axKCGmP7ilQxm4X8d8xXmfvHJZlPkCR3WfODl9FLMlxCIhevSJ5Nwzo1XdKxYpe3hpmB6BKdmoS43VqPxIgsni+aWOg8biZ3f+nLmSMiuvKWek/P01az7QdLyNVT7lC/l59WAKcb0iMxhzpW1nvmvpDtSiKD1l9OkpnDgv8UyMWFU9wvTP8vdY6NhJwnD1JVtso2OiiLSeL0iJUbNfg6zikVVwRTyOn2HWOfjfLtHgnBhtFIJCViyNDZUatdmnGlaFPqJIoe1WM1aqlz71ivJbLNobgAA9zgu7nZ/vstHAk5WVdzaPRqmGC5lER6kjpV4OWJdq+1kkshSk4VH9izcy/bV66qSPQZV+0J9G7rTY6+XNmqHmYwyJVV24kse1X31dhKHdasygkzy+a64oC4nWr47F4e858nSbLv4V/KAe9JKpVDrx/SImLIXMOiRUKdujESl+49O8xVZxpXzVc/C/I/RxL/hgq8YYkYhev9q6kVO4d9B+sr3vdICNaHJTHWW8Ya/87wqy2uWwstUk/gTYw3aCRGOarMDfS67kfFWqSuIe9imAjQEC272nJHixYNaSvGRIIGN49ywbsZEw1zI11N6TZSHeaGORn+F2AAJtRIMx4t+hUAAAAASUVORK5CYII=",anchor:[.5,1],snapToPixel:!0}),RESULTS:{imageRadius:5,imageFillColor:"rgba(128, 128, 128, 0.2)",imageStrokeColor:"rgba(0, 0, 0, 0.7)",imageStrokeWidth:2}},n.prototype.constructor=n,n.prototype.setMap=function(t){x.trace("ElevationPath::setMap"),t&&(this.options.active&&(null===this._profile&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(t),this._addMeasureInteraction(t)),this.options.target||_.default.add(t,this)),a.default.control.Control.prototype.setMap.call(this,t)},n.prototype.getActive=function(){return x.trace("ElevationPath::getActive"),this.options.active},n.prototype.setActive=function(t){x.trace("ElevationPath::setActive"),this.options.active=t},n.prototype.clean=function(){x.trace("ElevationPath::clean");var t=this.getMap();this._panelContainer.style.display="none",this._showContainer.checked=!1,this._removeProfile(),this._removeMeasure(),this._removeMeasureInteraction(t)},n.prototype._removeMeasure=function(){if(this._lastSketch=null,this._currentSketch=null,this._measureSource){this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null);for(var t=this._measureSource.getFeatures(),e=0;e<t.length;e++)this._measureSource.removeFeature(t[e])}},n.prototype._removeProfile=function(){if(this._profile=null,this._profileContainer)for(;this._profileContainer.firstChild;)this._profileContainer.removeChild(this._profileContainer.firstChild)},n.prototype._initialize=function(t){x.trace("ElevationPath::_initialize : ",t),this.options={target:null,render:null,active:!1,apiKey:null,elevationOptions:{},displayProfileOptions:{greaterSlope:!0,meanSlope:!0,ascendingElevation:!0,descendingElevation:!0,currentSlope:!0,apply:null,target:null},stylesOptions:{profile:null,draw:null,marker:null}},d.default.mergeParams(this.options,t),this.options.apiKey=t.apiKey;var e=t.displayProfileOptions||{},o=e.apply;this.options.displayProfileOptions.apply="function"==typeof o?o:n.DISPLAY_PROFILE_BY_DEFAULT;var i=e.target;this.options.displayProfileOptions.target=void 0!==i?i:null;var r=t.stylesOptions||{};this.options.stylesOptions.draw=r.draw||{},this._createStylingDraw(),this.options.stylesOptions.marker=r.marker||{},this._createStylingMarker()},n.prototype._initializeContainer=function(){x.trace("ElevationPath::_initializeContainer : ",this._uid);var t=this._createMainContainerElement(),e=this._showContainer=this._createShowElevationPathElement();t.appendChild(e);var o=this._pictoContainer=this._createShowElevationPathPictoElement();t.appendChild(o),this.options.active&&(this._showContainer.checked=!0);var i=this._panelContainer=this._createElevationPathPanelElement(),n=this._createElevationPathPanelHeaderElement();i.appendChild(n);var r=this._profileContainer=this._createElevationPathPanelProfilElement();i.appendChild(r);var s=this._waitingContainer=this._createElevationPathWaitingElement();i.appendChild(s);var a=this._infoContainer=this._createElevationPathInformationsElement();return i.appendChild(a),null===this.options.displayProfileOptions.target&&t.appendChild(i),t},n.prototype._checkRightsManagement=function(){x.trace("ElevationPath::_checkRightsManagement");var t=y.default.check({key:this.options.apiKey,resources:["SERVICE_CALCUL_ALTIMETRIQUE_RSC"],services:["Elevation"]});t||(this._noRightManagement=!0),this.options.apiKey||(this.options.apiKey=t.key)},n.prototype._createStylingMarker=function(){x.trace("ElevationPath::_createStylingMarker ");var t=n.DEFAULT_STYLES.MARKER;x.trace("style marker",t),this.options.stylesOptions.marker instanceof a.default.style.Image&&(t=this.options.stylesOptions.marker),this._markerStyle=new a.default.style.Style({image:t})},n.prototype._createStylingDraw=function(){x.trace("ElevationPath::_createStylingDraw");var t=this.options.stylesOptions.draw;x.trace("style start",t.start);var e={image:m.default.DEFAULT_POINTER_STYLE,stroke:m.default.DEFAULT_DRAW_START_STYLE.getStroke()};t.hasOwnProperty("pointer")&&t.pointer instanceof a.default.style.Image&&(e.image=t.pointer),t.hasOwnProperty("start")&&t.start instanceof a.default.style.Stroke&&(e.stroke=t.start),this._drawStyleStart=new a.default.style.Style(e),x.trace("style finish",t.finish);var o={stroke:m.default.DEFAULT_DRAW_FINISH_STYLE.getStroke()};t.hasOwnProperty("finish")&&t.finish instanceof a.default.style.Stroke&&(o.stroke=t.finish),this._drawStyleFinish=new a.default.style.Style(o)},n.prototype._createStylingProfile=function(){x.trace("ElevationPath::_createStylingProfile");var t=this.options.stylesOptions.profile;x.trace("style profile",t);var e=n.DEFAULT_STYLES.PROFILE;Object.keys(e).forEach(function(o){if(t.hasOwnProperty(o)){var i=e[o];"object"===(void 0===i?"undefined":r(i))&&(d.default.mergeParams(i,t[o]),t[o]=i)}else t[o]=e[o]},this)},n.prototype._initMeasureInteraction=function(t){x.trace("ElevationPath::_initMeasureInteraction()"),t&&(this._measureSource=new a.default.source.Vector,this._measureVector=new a.default.layer.Vector({source:this._measureSource,style:this._drawStyleFinish}),t.addLayer(this._measureVector))},n.prototype._addMeasureInteraction=function(t){if(x.trace("ElevationPath::_addMeasureInteraction()"),t){this._measureDraw=new a.default.interaction.Draw({source:this._measureSource,type:"LineString",style:this._drawStyleStart}),this._measureDraw.setProperties({name:"ElevationPath",source:this}),t.addInteraction(this._measureDraw);var e=this;this._measureDraw.on("drawstart",function(t){x.trace("drawstart",t),null!==e._marker&&(e._measureSource.removeFeature(e._marker),e._marker=null),null!==e._lastSketch&&(e._measureSource.removeFeature(e._lastSketch),e._lastSketch=null),e._currentSketch=t.feature;for(var o=e._measureSource.getFeatures(),i=0;i<o.length;i++)e._measureSource.removeFeature(o[i])},this),this._measureDraw.on("drawend",function(t){x.trace("drawend",t),e._lastSketch=e._currentSketch,void 0===e.options.elevationOptions.onSuccess&&null===e.options.displayProfileOptions.target&&(e._panelContainer.style.display="block"),e._requestService()},this)}},n.prototype._removeMeasureInteraction=function(t){x.trace("ElevationPath::_removeMeasureInteraction()"),
t&&(this._measureVector&&(t.removeLayer(this._measureVector),this._measureVector=null),this._measureDraw&&(t.removeInteraction(this._measureDraw),this._measureDraw=null))},n.prototype._getGeometry=function(){if(null===this._currentSketch)return void x.warn("Current Feature undefined !?");for(var t=[],e=this.getMap(),o=e.getView().getProjection(),i=this._currentSketch.getGeometry().getCoordinates(),n=0;n<i.length;n++){var r=i[n],s=r;"EPSG:4326"!==o&&(s=a.default.proj.transform(r,o,"EPSG:4326")),t.push({lon:s[0],lat:s[1]})}return t},n.prototype._getLength=function(){if(null===this._currentSketch)return void x.warn("Current Feature undefined !?");for(var t=0,e=new a.default.Sphere(6378137),o=this.getMap(),i=o.getView().getProjection(),n=this._currentSketch.getGeometry().getCoordinates(),r=0,s=n.length-1;r<s;++r){var l=a.default.proj.transform(n[r],i,"EPSG:4326"),p=a.default.proj.transform(n[r+1],i,"EPSG:4326");t+=e.haversineDistance(l,p)}return t},n.prototype._requestService=function(){x.trace("ElevationPath::_requestService");var t=this._getGeometry();if(x.trace("geometry",t),!t)return void x.warn("missing geometry !?");if(this._noRightManagement)return void x.warn("no rights to this service !");var e={};d.default.mergeParams(e,this.options.elevationOptions),d.default.mergeParams(e,{apiKey:this.options.apiKey});var o=this,i=function(t){x.trace(t),t&&(o._panelContainer.style.display="block",o._displayProfile(t.elevations),o._waitingContainer.className="GPelevationPathCalcWaitingContainerHidden",o._waiting=!1)},n=function(t){o._panelContainer.style.display="none",x.error(t.message),o._waitingContainer.className="GPelevationPathCalcWaitingContainerHidden",o._waiting=!1};if(d.default.mergeParams(e,{onSuccess:this.options.elevationOptions.onSuccess||i,onFailure:this.options.elevationOptions.onFailure||n}),!e.sampling){var r=50,s=this._getLength();x.trace("length",s);var a=Math.floor(s)/5;r=a>=200?200:Math.floor(a),d.default.mergeParams(e,{sampling:r||50})}d.default.mergeParams(e,{positions:t}),x.trace("options du service",e),this._waitingContainer.className="GPelevationPathCalcWaitingContainerVisible",p.default.Services.getAltitude(e)},n.prototype._computeElevationMeasure=function(t){x.trace("ElevationPath::_computeElevationMeasure",t);var e=t,o="km",i=1e3;this._getLength()<2e3&&(i=1,o="m"),e[0].dist=0,e[0].slope=0;for(var n=0,r=0,s=0,l=0,p=0,c=0,u=new a.default.Sphere(6378137),h=1;h<e.length;h++){var d=[e[h].lon,e[h].lat],f=[e[h-1].lon,e[h-1].lat],y=u.haversineDistance(d,f),g=e[h].z,m=e[h-1].z;g<0&&(g=0),m<0&&(m=0);var v=g-m;v<0?(n+=y,l+=v):v>0&&(r+=y,s+=v),p+=y/i,e[h].dist=p,c+=v?Math.abs(Math.round(v/y*100)):0,e[h].slope=v?Math.abs(Math.round(v/y*100)):0;var _=e[h].slope;e[h].color=_>15&&_<30?"#005b4c":_>30&&_<45?"#00362d":_>45?"#00120f":"#00B798",e[h].lat=Math.round(1e4*e[h].lat)/1e4,e[h].lon=Math.round(1e4*e[h].lon)/1e4}var b=100;p>100?b=1:p>10&&(b=10),p=Math.round(p*b)/b,n=Math.round(n*b)/b,r=Math.round(r*b)/b;for(var E=e[0].z,S=e[0].z,w=e[0].slope,P=0;P<e.length;P++){var C=e[P];C.z<0&&(C.z=0),C.z>=S&&(S=C.z),C.z<=E&&(E=C.z),C.dist=Math.round(C.dist*b)/b,C.slope>w&&(w=C.slope)}return{greaterSlope:w,meanSlope:Math.round(c/e.length),distancePlus:r.toLocaleString(),distanceMinus:n.toLocaleString(),ascendingElevation:s,descendingElevation:l,altMin:E.toLocaleString(),altMax:S.toLocaleString(),distance:p.toLocaleString(),unit:o,points:e}},n.prototype._displayProfile=function(t){x.trace("ElevationPath::_displayProfile",t),this._data&&(this._data={});var e=this._data=this._computeElevationMeasure(t),o=this.options.displayProfileOptions.target;o&&o.appendChild(this._panelContainer),o=this._profileContainer;var i=this;this.options.displayProfileOptions.apply.call(this,e,o,i);var n=this.options.displayProfileOptions,r=document.getElementById("GPelevationPathPanelInfo-"+this._uid);r&&(n.greaterSlope||n.meanSlope||n.ascendingElevation||n.descendingElevation)&&(r.style.display="block")},n.prototype.onShowElevationPathClick=function(){var t=this.getMap();E.default.unset(t,{current:"ElevationPath"}),this._showContainer.checked?(this._panelContainer.style.display="none",this._removeMeasure(),this._removeProfile(),this._removeMeasureInteraction(t)):(null===this._profile&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(t),this._addMeasureInteraction(t))},n.prototype.onOpenElevationPathInfoClick=function(){var t=this.options.displayProfileOptions.meanSlope,e=this.options.displayProfileOptions.greaterSlope,o=this.options.displayProfileOptions.ascendingElevation,i=this.options.displayProfileOptions.descendingElevation,n=this._infoContainer;if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);o&&this._addElevationPathInformationsItem("Dénivelé positif : "+this._data.ascendingElevation.toLocaleString()+" m"),i&&this._addElevationPathInformationsItem("Dénivelé négatif : "+this._data.descendingElevation.toLocaleString()+" m"),t&&this._addElevationPathInformationsItem("Pente moyenne : "+this._data.meanSlope.toLocaleString()+" %"),e&&this._addElevationPathInformationsItem("Plus forte pente : "+this._data.greaterSlope.toLocaleString()+" %"),"GPelevationPathInformationsContainerVisible"===n.className?(clearTimeout(this._timerHdlr),n.className="GPelevationPathInformationsContainerHidden"):n.className="GPelevationPathInformationsContainerVisible",this._timerHdlr=setTimeout(function(){n.className="GPelevationPathInformationsContainerHidden"},4e3)},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(t){return t?this._toolboxId+"-"+t:this._toolboxId},getButtonID:function(t){return t?this._buttonId+"-"+t:this._buttonId},getWidgetID:function(t){return t?this._widgetId+"-"+t:this._widgetId},_createToolBoxContainerElement:function(t){var e=document.createElement("div");e.id=this.getToolBoxID(t),e.className="GPshowAdvancedToolPicto";var o=document.createElement("button");o.id=this.getButtonID(t);var i=this;o.addEventListener("click",function(){this.blur();var e=document.getElementById(i.getWidgetID(t));"block"===e.style.display?e.style.display="none":e.style.display="block"}),e.appendChild(o);var n=document.createElement("div");return n.id=this.getWidgetID(t),n.addEventListener("click",function(){},!1),e.appendChild(n),e}};return e.default=i,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPelevationPath"),t.className="GPwidget",t},_createShowElevationPathElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowElevationPath"),t.type="checkbox",t},_createShowElevationPathPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowElevationPathPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowElevationPath"),e.title="Calculer un profil",e.addEventListener?e.addEventListener("click",function(e){t.onShowElevationPathClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowElevationPathClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowElevationPathOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e},_createElevationPathPanelElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPelevationPathPanel"),t.className="GPpanel",t},_createElevationPathPanelHeaderElement:function(){var t=this,e=document.createElement("div");e.className="GPpanelHeader";var o=document.createElement("div");o.id=this._addUID("GPelevationPathPanelInfo"),o.className="GPpanelInfo",o.title="Informations",o.addEventListener?o.addEventListener("click",function(){t.onOpenElevationPathInfoClick()}):o.attachEvent&&o.attachEvent("onclick",function(){t.onOpenElevationPathInfoClick()}),e.appendChild(o);var i=document.createElement("div");i.className="GPpanelTitle",i.innerHTML="Profil Altimétrique",e.appendChild(i);var n=document.createElement("div");n.id=this._addUID("GPelevationPathPanelReduce"),n.className="GPpanelReduce",n.title="Masquer le panneau",n.addEventListener?n.addEventListener("click",function(){"function"==typeof t.onReduceElevationPathPanelClick&&(document.getElementById(t._addUID("GPshowElevationPath")).checked=!1,t.onReduceElevationPathPanelClick())},!1):n.attachEvent&&n.attachEvent("onclick",function(){"function"==typeof t.onReduceElevationPathPanelClick&&(document.getElementById(t._addUID("GPshowElevationPath")).checked=!1,t.onReduceElevationPathPanelClick())}),e.appendChild(n);var r=document.createElement("div");return r.id=this._addUID("GPelevationPathPanelClose"),r.className="GPpanelClose",r.title="Fermer le panneau",r.addEventListener?r.addEventListener("click",function(){document.getElementById(t._addUID("GPshowElevationPathPicto")).click()},!1):r.attachEvent&&r.attachEvent("onclick",function(){document.getElementById(t._addUID("GPshowElevationPathPicto")).click()}),e.appendChild(r),e},_createElevationPathPanelProfilElement:function(){var t=document.createElement("div");return t.id="GPelevationPathProfil",t},_createElevationPathWaitingElement:function(){var t=document.createElement("div");t.id=this._addUID("GPelevationPathCalcWaitingContainer"),t.className="GPelevationPathCalcWaitingContainerHidden";var e=document.createElement("p");return e.className="GPelevationPathCalcWaiting",e.innerHTML="Calcul en cours...",t.appendChild(e),t},_createElevationPathInformationsElement:function(){var t=document.createElement("div");t.id=this._addUID("GPelevationPathInformationsContainer"),t.className="GPelevationPathInformationsContainerHidden";var e=document.createElement("p");return e.className="GPelevationPathInformations",e.innerHTML="Aucune information...",t.appendChild(e),t},_addElevationPathInformationsItem:function(t){var e=document.getElementById(this._addUID("GPelevationPathInformationsContainer"));if(e){var o=document.createElement("p");o.className="GPelevationPathInformations",o.innerHTML=t,e.appendChild(o)}return e}};return e.default=i,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={displayProfileByDefault:function(t,e,o,i){var n=o;if(e)for(;e.firstChild;)e.removeChild(e.firstChild);if(t){var r=n.options.displayProfileOptions,s=t.points,a=JSON.parse(JSON.stringify(s));a.sort(function(t,e){return t.z-e.z});var l=a[0].z,p=a[a.length-1].z,c=p-l,u=t.distance,h=t.unit,d=100/s.length,f=document.createElement("div");f.id="profileElevationByDefault",e.appendChild(f);var y=document.createElement("div");y.className="profile-box";var g=document.createElement("div");g.className="profile-z-vertical";var m=document.createElement("ul"),v=document.createElement("li");v.setAttribute("class","profile-min-z"),v.innerHTML=l+" m";var _=document.createElement("li");_.setAttribute("class","profile-max-z"),_.innerHTML=p+" m",m.appendChild(_),m.appendChild(v),g.appendChild(m),y.appendChild(g);var b=document.createElement("div");b.className="profile-content",b.addEventListener("mouseover",function(t){var e=parseFloat(t.target.dataset.lon),o=parseFloat(t.target.dataset.lat);e&&o&&i.__createProfileMarker(n,{lat:o,lon:e})}),b.addEventListener("mousemove",function(t){var e=parseFloat(t.target.dataset.lon),o=parseFloat(t.target.dataset.lat);e&&o&&i.__updateProfileMarker(n,{lat:o,lon:e})}),b.addEventListener("mouseout",function(){i.__removeProfileMarker(n)});var E=document.createElement("ul");E.id="profile-data",E.className="profile-z-axis profile-x-axis",b.appendChild(E);for(var S=0;S<s.length;S++){var w=s[S],P=document.createElement("li");P.setAttribute("data-z",w.z),P.setAttribute("data-lon",w.lon),P.setAttribute("data-lat",w.lat),P.setAttribute("data-dist",w.dist);var C=Math.floor(100*(w.z-l)/c);P.setAttribute("class","percent v"+C),P.title="Altitude : "+w.z+"m",r.currentSlope&&(P.title+=" - Pente : "+w.slope+"%"),P.title+=" (Lat : "+w.lat+" / Lon : "+w.lon+")",P.setAttribute("style","width: "+d+"%"),E.appendChild(P)}y.appendChild(b),f.appendChild(y);var A=document.createElement("div");A.className="profile-x-horizontal";var M=document.createElement("ul"),x=document.createElement("li");x.setAttribute("class","profile-min-x"),x.innerHTML="";var R=document.createElement("li");return R.setAttribute("class","profile-max-x"),R.innerHTML=u+" "+h,M.appendChild(x),M.appendChild(R),A.appendChild(M),f.appendChild(A),e}},displayProfileRaw:function(t,e,o,i){if(e)for(;e.firstChild;)e.removeChild(e.firstChild);var n=t.points,r=document.createElement("textarea");return r.id="profilElevationResults",r.rows=10,r.cols=50,r.style.width="100%",r.innerHTML=JSON.stringify(n,void 0,4),r.addEventListener("mouseover",function(t){i.__customRawProfileMouseOverEvent(o,t)}),e.appendChild(r),e},displayProfileLibD3:function(t,e,o,i){var n=o;if(e)for(;e.firstChild;)e.removeChild(e.firstChild);var r=t.points,s=n.options.displayProfileOptions,a={top:20,right:20,bottom:30,left:40},l=e.clientWidth-a.left-a.right,p=e.clientHeight-a.top-a.bottom,c=d3.scale.linear().range([0,l]),u=d3.scale.linear().range([p,0]),h=d3.svg.axis().scale(c).orient("bottom").ticks(5),d=d3.svg.axis().scale(u).orient("left").ticks(5),f=d3.svg.line().interpolate("basis").x(function(t){return c(t.dist)}).y(function(t){return u(t.z)}),y=d3.svg.area().interpolate("basis").x(function(t){return c(t.dist)}).y0(p).y1(function(t){return u(t.z)}),g=d3.select(e).append("svg").attr("width",l+a.left+a.right).attr("height",p+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),m=d3.extent(r,function(t){return t.dist});c.domain(m);var v=[0,d3.max(r,function(t){return t.z})];u.domain(v),g.append("path").datum(r).attr("class","area-d3").attr("d",y),g.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+p+")").call(h).append("text").attr("y",-15).attr("dy",".71em").attr("x",l).text("Distance ("+t.unit+")"),g.append("g").attr("class","y axis-d3").call(d).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),g.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+p+")").call(h.orient("bottom").tickSize(-p,0,0).tickFormat("")),g.append("g").attr("class","grid-d3 horizontal").call(d.orient("left").tickSize(-l,0,0).tickFormat("")),g.append("path").datum(r).attr("class","line-d3").attr("d",f),g.selectAll("circle").data(r).enter().append("circle").attr("cx",function(t){return c(t.dist)}).attr("cy",function(t){return u(t.z)}).attr("r",0).attr("class","circle-d3");var _=g.append("g").style("display","none");_.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),_.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),_.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var b=d3.select(e).append("div").attr("class","tooltip-d3").style("opacity",0),E=d3.bisector(function(t){return t.dist}).left;return g.append("rect").attr("class","overlay-d3").attr("width",l).attr("height",p).on("mouseover",function(){_.style("display",null),i.__createProfileMarker(n,r[0])}).on("mouseout",function(){_.style("display","none"),i.__removeProfileMarker(n),b.transition().duration(500).style("opacity",0)}).on("mousemove",function(){var t=d3.mouse(this),e=c.invert(t[0]),o=E(r,e),a=r[o-1],l=r[o],p=e-a[0]>l[0]-e?l:a,h=c(p.dist),d=u(p.z);_.select("#focusCircle").attr("cx",h).attr("cy",d),_.select("#focusLineX").attr("x1",h).attr("y1",u(v[0])).attr("x2",h).attr("y2",u(v[1])),_.select("#focusLineY").attr("x1",c(m[0])).attr("y1",d).attr("x2",c(m[1])).attr("y2",d),i.__updateProfileMarker(n,p),b.transition().duration(200).style("opacity",.9);var f="";f+=" Altitude : "+p.z+" m",s.currentSlope&&(f+="<br/> Pente : "+p.slope+" %"),f+="<br/> (Lat : "+p.lat+"/ Lon : "+p.lon+")",b.html(f).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}),g},displayProfileLibAmCharts:function(t,e,o,i){var n=o,r=t.points,s="<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>";n.options.displayProfileOptions.currentSlope&&(s+="<span class='altiPathValue'>Pente : [[slope]] %</span><br/>"),s+="<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>",AmCharts.addInitHandler(function(){});var a={type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:8,theme:"light",thousandsSeparator:"",numberFormatter:{precision:-1,decimalSeparator:",",thousandsSeparato:" "},categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance ("+t.unit+")",titleColor:"#5E5E5E",labelOffset:0,startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:s,bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[],allLabels:[],dataProvider:r},l=AmCharts.makeChart(e,a);return l.addListener("changed",function(t){var e=t.chart.dataProvider[t.index];i.__updateProfileMarker(n,e)}),l}};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureLength",this._uid=v.default.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(t);var e=t.element?t.element:this._initializeContainer();s.default.control.Control.call(this,{element:e,target:t.target,render:t.render})}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),s=i(r),a=o(3),l=i(a),p=o(0),c=i(p),u=o(14),h=i(u),d=o(13),f=i(d),y=o(113),g=i(y),m=o(2),v=i(m),_=l.default.getLogger("measurelength");return s.default.inherits(n,s.default.control.Control),n.prototype=Object.create(s.default.control.Control.prototype,{}),c.default.assign(n.prototype,f.default),c.default.assign(n.prototype,g.default),n.prototype.constructor=n,n.prototype.setMap=function(t){_.trace("setMap()");var e=this.CLASSNAME;t?this.options.target||h.default.add(t,this):this.clean(),this.tools[e].instance=t?this:null,s.default.control.Control.prototype.setMap.call(this,t)},n.prototype._initialize=function(t){_.trace("call MeasureLength::_initialize() : ",t),this.options={},this.options.geodesic=void 0===t.geodesic||t.geodesic,this.options.target=void 0!==t.target?t.target:null,this.options.render=void 0!==t.render?t.render:null,this.createStylingMeasureInteraction(t.styles)},n.prototype._initializeContainer=function(){_.trace("call MeasureLength::_initializeContainer() : ",this._uid);var t=this._createMainContainerElement(),e=this._showContainer=this._createShowMeasureLengthElement();t.appendChild(e),this._showContainer.checked=!1;var o=this._pictoContainer=this._createShowMeasureLengthPictoElement();return t.appendChild(o),t},n.prototype.addMeasureEvents=function(){_.trace("call MeasureLength::addMeasureEvents()");var t=this.getMap();t.on("singleclick",this.onPointerMoveHandler,this),t.on("pointermove",this.onPointerMoveHandler,this)},n.prototype.removeMeasureEvents=function(){_.trace("call MeasureLength::removeMeasureEvents()");var t=this.getMap();t.un("singleclick",this.onPointerMoveHandler,this),t.un("pointermove",this.onPointerMoveHandler,this)},n.prototype.format=function(t){_.trace("call MeasureLength::format()");var e,o=this.getMap();if(this.options.geodesic){var i=new s.default.Sphere(6378137),n=t.getCoordinates();e=0;for(var r=o.getView().getProjection(),a=0,l=n.length-1;a<l;++a){var p=s.default.proj.transform(n[a],r,"EPSG:4326"),c=s.default.proj.transform(n[a+1],r,"EPSG:4326");e+=i.haversineDistance(p,c)}}else e=Math.round(100*t.getLength())/100;return e>1e3?Math.round(e/1e3*100)/100+" km":Math.round(100*e)/100+" m"},n.prototype.onShowMeasureLengthClick=function(t){_.trace("call MeasureLength::onShowMeasureLengthClick()",t),this.onShowMeasureClick(t,"LineString")},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPmeasureLength"),t.className="GPwidget",t},_createShowMeasureLengthElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowMeasureLength"),t.type="checkbox",t},_createShowMeasureLengthPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowMeasureLengthPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowMeasureLength"),e.title="Mesurer une distance",e.addEventListener?e.addEventListener("click",function(e){t.onShowMeasureLengthClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowMeasureLengthClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowMeasureLengthOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e}};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureArea",this._uid=v.default.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(t);var e=t.element?t.element:this._initializeContainer();s.default.control.Control.call(this,{element:e,target:t.target,render:t.render})}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),s=i(r),a=o(3),l=i(a),p=o(0),c=i(p),u=o(14),h=i(u),d=o(13),f=i(d),y=o(115),g=i(y),m=o(2),v=i(m),_=l.default.getLogger("measurearea");return s.default.inherits(n,s.default.control.Control),n.prototype=Object.create(s.default.control.Control.prototype,{}),c.default.assign(n.prototype,f.default),c.default.assign(n.prototype,g.default),n.prototype.constructor=n,n.prototype.setMap=function(t){_.trace("setMap()");var e=this.CLASSNAME;t?this.options.target||h.default.add(t,this):this.clean(),this.tools[e].instance=t?this:null,s.default.control.Control.prototype.setMap.call(this,t)},n.prototype._initialize=function(t){_.trace("call MeasureArea::_initialize() : ",t),this.options={},this.options.geodesic=void 0===t.geodesic||t.geodesic,this.options.target=void 0!==t.target?t.target:null,this.options.render=void 0!==t.render?t.render:null,this.createStylingMeasureInteraction(t.styles)},n.prototype._initializeContainer=function(){_.trace("call MeasureArea::_initializeContainer() : ",this._uid);var t=this._createMainContainerElement(),e=this._showContainer=this._createShowMeasureAreaElement();t.appendChild(e),this._showContainer.checked=!1;var o=this._pictoContainer=this._createShowMeasureAreaPictoElement();return t.appendChild(o),t},n.prototype.addMeasureEvents=function(){_.trace("call MeasureArea::addMeasureEvents()");var t=this.getMap();t.on("singleclick",this.onPointerMoveHandler,this),t.on("pointermove",this.onPointerMoveHandler,this)},n.prototype.removeMeasureEvents=function(){_.trace("call MeasureArea::removeMeasureEvents()");var t=this.getMap();t.un("singleclick",this.onPointerMoveHandler,this),t.un("pointermove",this.onPointerMoveHandler,this)},n.prototype.format=function(t){_.trace("call MeasureArea::format()");var e,o=this.getMap();if(this.options.geodesic){var i=new s.default.Sphere(6378137),n=o.getView().getProjection(),r=t.clone().transform(n,"EPSG:4326"),a=r.getLinearRing(0).getCoordinates();e=Math.abs(i.geodesicArea(a))}else e=t.getArea();return e>1e6?Math.round(e/1e6*100)/100+" km<sup>2</sup>":e>1e5?Math.round(e/1e6*1e3)/1e3+" km<sup>2</sup>":e>1e3?10*Math.round(e/10)+" m<sup>2</sup>":Math.round(100*e)/100+" m<sup>2</sup>"},n.prototype.onShowMeasureAreaClick=function(t){_.trace("call MeasureArea::onShowMeasureAreaClick()",t),this.onShowMeasureClick(t,"Polygon")},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPmeasureArea"),t.className="GPwidget",t},_createShowMeasureAreaElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowMeasureArea"),t.type="checkbox",t},_createShowMeasureAreaPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowMeasureAreaPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowMeasureArea"),e.title="Mesurer une surface",e.addEventListener?e.addEventListener("click",function(e){t.onShowMeasureAreaClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowMeasureAreaClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowMeasureAreaOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e}};return e.default=i,e},function(t,e,o){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function n(t){if(t=t||{},!(this instanceof n))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="MeasureAzimuth",this._uid=v.default.generate(),this._showContainer=null,this._pictoContainer=null,this._initialize(t);var e=t.element?t.element:this._initializeContainer();s.default.control.Control.call(this,{element:e,target:t.target,render:t.render})}Object.defineProperty(e,"__esModule",{value:!0});var r=o(1),s=i(r),a=o(3),l=i(a),p=o(0),c=i(p),u=o(14),h=i(u),d=o(13),f=i(d),y=o(117),g=i(y),m=o(2),v=i(m),_=l.default.getLogger("measureazimut");return s.default.inherits(n,s.default.control.Control),n.prototype=Object.create(s.default.control.Control.prototype,{}),c.default.assign(n.prototype,f.default),c.default.assign(n.prototype,g.default),n.prototype.constructor=n,n.prototype.setMap=function(t){_.trace("setMap()");var e=this.CLASSNAME;t?this.options.target||h.default.add(t,this):this.clean(),this.tools[e].instance=t?this:null,s.default.control.Control.prototype.setMap.call(this,t)},n.prototype.setGeodesic=function(t){this.options.geodesic=void 0!==t&&t},n.prototype.isGeodesic=function(){return this.options.geodesic},n.prototype._initialize=function(t){_.trace("call MeasureAzimuth::_initialize() : ",t),this.options={},this.options.geodesic=void 0!==t.geodesic&&t.geodesic,this.options.target=void 0!==t.target?t.target:null,this.options.render=void 0!==t.render?t.render:null,this.createStylingMeasureInteraction(t.styles)},n.prototype._initializeContainer=function(){_.trace("call MeasureAzimuth::_initializeContainer() : ",this._uid);var t=this._createMainContainerElement(),e=this._showContainer=this._createShowMeasureAzimuthElement();t.appendChild(e),this._showContainer.checked=!1;var o=this._pictoContainer=this._createShowMeasureAzimuthPictoElement();return t.appendChild(o),t},n.prototype.addMeasureEvents=function(){_.trace("call MeasureAzimuth::addMeasureEvents()");var t=this.getMap();t.on("singleclick",this.onPointerMoveAzimutHandler,this),t.on("pointermove",this.onPointerMoveAzimutHandler,this)},n.prototype.removeMeasureEvents=function(){_.trace("call MeasureAzimuth::removeMeasureEvents()");var t=this.getMap();t.un("singleclick",this.onPointerMoveAzimutHandler,this),t.un("pointermove",this.onPointerMoveAzimutHandler,this)},n.prototype.format=function(t){_.trace("call MeasureAzimuth::format()");var e=this.getMap(),o=e.getView().getProjection(),i=s.default.proj.transform(t.getFirstCoordinate(),o,"EPSG:4326"),n=s.default.proj.transform(t.getLastCoordinate(),o,"EPSG:4326");if(!this.options.geodesic){var r=new s.default.Sphere(6378137),a=r.haversineDistance(i,n);if(_.trace("measure between 2 points with geodesic method",a),a>500){var l=500/a;_.trace("%",l),n=s.default.proj.transform(t.getCoordinateAt(l),o,"EPSG:4326")}}var p=Math.PI/180,c=180/Math.PI,u=p*i[0],h=p*n[0],d=p*i[1],f=p*n[1],y=Math.sin(h-u)*Math.cos(f),g=Math.cos(d)*Math.sin(f)-Math.sin(d)*Math.cos(f)*Math.cos(h-u),m=Math.atan2(y,g),v=c*m;return _.trace("azimut",v),v<0&&(v+=360),Math.round(100*v)/100+" °"},n.prototype.onShowMeasureAzimuthClick=function(t){_.trace("call MeasureAzimuth::onShowMeasureAzimuthClick()",t),this.onShowMeasureClick(t,"LineString")},n.prototype.onPointerMoveAzimutHandler=function(t){if(this.onPointerMoveHandler(t),this.sketch){this.sketch.getGeometry().getCoordinates().length>2&&this.measureDraw.finishDrawing()}},e.default=n,e},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={_addUID:function(t){return this._uid?t+"-"+this._uid:t},_createMainContainerElement:function(){var t=document.createElement("div");return t.id=this._addUID("GPmeasureAzimuth"),t.className="GPwidget",t},_createShowMeasureAzimuthElement:function(){var t=document.createElement("input");return t.id=this._addUID("GPshowMeasureAzimuth"),t.type="checkbox",t},_createShowMeasureAzimuthPictoElement:function(){var t=this,e=document.createElement("label");e.id=this._addUID("GPshowMeasureAzimuthPicto"),e.className="GPshowAdvancedToolPicto",e.htmlFor=this._addUID("GPshowMeasureAzimuth"),e.title="Mesurer un azimut",e.addEventListener?e.addEventListener("click",function(e){t.onShowMeasureAzimuthClick(e)}):e.attachEvent&&e.attachEvent("onclick",function(e){t.onShowMeasureAzimuthClick(e)});var o=document.createElement("span");return o.id=this._addUID("GPshowMeasureAzimuthOpen"),o.className="GPshowAdvancedToolOpen",e.appendChild(o),e}};return e.default=i,e}]).default}),IMap=function(t){function e(t){if(!(this instanceof e))throw new TypeError("IMap constructor cannot be called as a function.");this._opts=t,this._layers=[],this._layersRemoved=[],this._controls=[],this._events={},this._opts.mapOptions&&(this.apiKey=this._opts.mapOptions.apiKey),this.div=this._opts.div,this.mapOptions=Object.create(e.DEFAULTOPTIONS);for(var o in this._opts.mapOptions)this._opts.mapOptions.hasOwnProperty(o)&&(this.mapOptions[o]=this._opts.mapOptions[o]);this._initMap()}return e.DEFAULTOPTIONS={projection:"EPSG:3857",center:{x:0,y:0,projection:"EPSG:4326",geolocate:!1,location:null,locationType:["StreetAddress","PositionOfInterest"]},azimuth:0,enableRotation:!0,tilt:0,zoom:10,minZoom:0,maxZoom:21,reloadConfig:!1,controlsOptions:{draggable:!0,keyboard:!0,selectable:!0},mapEventsOptions:{},noProxyDomains:["wxs.ign.fr"]},e.DEFAULT_AUTOPAN_OPTIONS={autoPan:!0,duration:250,margin:5},e.DEFAULT_MEAS_STYLES={pointer:{strokeColor:"#002A50",strokeWidth:2,radius:5,fillColor:"rgba(255, 155, 0, 0.7)"},start:{strokeColor:"#002A50",strokeWidth:2,strokeLineDash:"[10, 10]",fillColor:"rgba(0, 183, 152, 0.2)"},finish:{strokeColor:"#002A50",strokeWidth:3,fillColor:"rgba(0, 183, 152, 0.3)"}},e.DEFAULT_VECTORLAYERS_STYLES={
markerSrc:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARDSURBVFiF3ZndaxxVGMZ/Z/YjX00Nadpo1qrFBgu56D9QbAtiLoRC7ywSNK1NURRREBKRFlSwFBW0gnSrJXY1CmISgyjFiyYSFC9ajE3MmpjdjWlMUtNos9lN9mteLzbRuCbZmTMTBB+Yi51znvd5n3nPnjnnjBIR/i/wuh4xpCpI0ojiENAA1AE1wCzwKzCE0EM5l2iShJvSyrXKnFVb8dOK4hmg3AIjifAmaU7ztMy7kYI7Zs6rQwjvka+AXcyiOMZx6XGahuE0AEHVitCFnhGAGoQugqrVaSrOKpNP4FWnSaxCGy1yWpesbyY/tLpwo7p/w0RxWHfI6Zk5q7ZSwhj6Q2sjzJLiXp1JQe+p+mllc4wA1CzHtw37lQmpCha5gbXpVxdJythh9z1kvzJJGrFixPBmOXixl+Z4mONmguZ4mIMXezG8WQsq5cs6tmDfTP7NXiSqN0vTzBD1TQfwbdmDUhX4tuyhvukATTNDlgxZ0SmUtUsgv0TZGPsv9FNSvXfNtpLqvey/0O+KTgF0zNQV7XHP4dsdtVvVKYCOmeqiPbwVOx21W9UpgI6ZWNEe2cSEo3arOgWwb0YYLp5G17Sjdqs6BdCZzYqL9B3dR2puYM221NwAfUf3uaJTAB0zaye5GmbWS6i2gdFQL5mFMCIJMgthRkO9hGobMLPFN4VWdAoptlcAQeUDRoG77YrZwDhQT4tk7JDsV6ZFMggv2+bZwyt2jYDuQnOa94GIFrc4IkzRrkPUM3NKsijatLjF0copsbJ++xec7TTPqw6EI/oB/glT+PC+13Y/aSQNv/Is+tNer09lMn7DMHwAYppp8fvTIpISkVQsFrslqww4M9OuqkgzANzl1MhCyrjZGAycm573pK1yFCyi5FoWvo/FYlPOT2fOqftRXMbB9lkEs+3zbe2f/FD5i3YMj2p3vn8/IV8DZ5yE+Gqkot+JEQCPada5dRhxEriiQ5ya90w+272916F+KpnJDLhjpkUy5HgESNqhZU2Vfr5ne+dSFtOBeso06J6cnEy6d0z0hPwEPGeH8sGVykvfjpfe1NZUci2+mHg7Go2G8z/d/goQVJ9B8S1veMYffujduo/thl+ZwUzDuBqJRGZWt7n/FcDH46lFNVLilar1uiTTxsJTnTssH/QpJVlMNQa5wbGJiWERya3Vz30zzfLb3OveY3dU5j5dp4e80Xdbd3TOu/H/yyAtpjnqgeGS8crRQRks+v5xf5gtY/KM/6NAVebhwvv90bLvHu2o/XId2pJSMmIaxo/RaHRMxN6yZtPM0K5K/7hl/FxVZgZWbs0mPDceeKcuGE95/kpSKUmaImHDNIfHrl+PiIj2zOb+MFvBY7IUOVl2ZG9g6bJH4ckJuRe/2NYZT3myKIkrGM4pNRyLjY+LW09URDb1+uaF0pfm3zJ+7zhRGdq1c9eDuwOBOzdLa/OG2X+APwE8DU64Y/5gfAAAAABJRU5ErkJggg==",markerXAnchor:25.5,markerYAnchor:38,strokeColor:"#002A50",strokeWidth:4,strokeOpacity:.8,polyFillColor:"#00B798",polyFillOpacity:.5,textStrokeColor:"#000000",textColor:"#FFFFFF"},e.WMTSDEFAULTS={"EPSG:3857":{resolutions:[156543.033928041,78271.51696402048,39135.758482010235,19567.87924100512,9783.93962050256,4891.96981025128,2445.98490512564,1222.99245256282,611.49622628141,305.7481131407048,152.8740565703525,76.43702828517624,38.21851414258813,19.10925707129406,9.554628535647032,4.777314267823516,2.388657133911758,1.194328566955879,.5971642834779395,.2985821417389697,.1492910708694849,.0746455354347424],scales:{0:559082264,1:279541132,2:139770566,3:69885283,4:34942642,5:17471321,6:8735660,7:4367830,8:2183915,9:1091958,10:545979,11:272989,12:136495,13:68247,14:34124,15:17062,16:8531,17:4265,18:2133,19:1066,20:533,21:267},threshold:1e-7,topLeftCorner:{x:-20037508,y:20037508}},"EPSG:4326":{resolutions:[1.40625,.703125,.3515625,.17578125,.087890625,.0439453125,.02197265625,.010986328125,.0054931640625,.00274658203125,.001373291015625,.0006866455078125,.00034332275390625,.000171661376953126,858306884765628e-19,429153442382813e-19,214576721191407e-19,107288360595703e-19,536441802978517e-20,268220901489259e-20,13411045074463e-19,6.70552253723145e-7,3.3527612686157e-7],threshold:1e-10,topLeftCorner:{x:90,y:-180}},"EPSG:2154":{resolutions:[104579.22454989408,52277.53235379051,26135.487078595408,13066.891381800004,6533.228604113456,3266.5595244626675,1633.2660045974187,816.6295549860224,408.31391467683596,204.15674151090204,102.07831678324082,51.0391448966112,25.519569074269395,12.759783693647506,6.379891635966491,3.18994576530532,1.5949728694977277,.7974864315474559,.398743214900604,.19937160727567999,.099685803696052,.049842901818919996],threshold:1e-8,topLeftCorner:{x:0,y:12e6}}},e._hexToRgba=function(t,e){var o=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(o,function(t,e,o,i){return e+e+o+o+i+i});var i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return i=i?{r:parseInt(i[1],16),g:parseInt(i[2],16),b:parseInt(i[3],16)}:null,i?"rgba("+i.r+", "+i.g+", "+i.b+", "+e+")":null},e.CustomEvent=function(t,e){if("function"==typeof CustomEvent)return e.bubbles=!1,e.cancelable=!0,new CustomEvent(t,e);var o=document.createEvent("CustomEvent");return o.initCustomEvent(t,!1,!0,e.detail),o},e.prototype={constructor:e,_getDefaultControls:function(){return{draggable:!0,keyboard:!0,selectable:!1,zoom:{},attributions:{maximised:!1}}},_afterInitMap:function(){var t=this.mapOptions.mapEventsOptions;if(t)for(var e in t)this.listen(e,t[e],this);this.listen("layerChanged",this._onLayerChanged,this),this.setXYCenter(this.mapOptions.center);var o=!1;if(this.apiKey||this._opts.mapOptions.configUrl||this._opts.mapOptions.autoconfUrl?o=this._opts.reloadConfig||!Gp.Config||!Gp.Config.isConfLoaded(Array.isArray(this.apiKey)?this.apiKey[0]:this.apiKey):Gp.Config&&(this.apiKey=Object.keys(Gp.Config.generalOptions.apiKeys)),o){var i=this._opts.mapOptions.callbackSuffix;(this._opts.mapOptions.configUrl||this._opts.mapOptions.autoconfUrl)&&(i=i||"");var n=this;Gp.Services.getConfig({apiKey:this.apiKey,serverUrl:this._opts.mapOptions.configUrl||this._opts.mapOptions.autoconfUrl,callbackSuffix:i,onSuccess:function(t){n._afterGetConfig(t)},onFailure:function(t){console.log(t),n._afterGetConfig(null)}})}else this._afterGetConfig(Gp.Config)},_afterGetConfig:function(t){var o=e.CustomEvent("configured",{detail:{config:t}});if(this.div.dispatchEvent(o),t&&!this.mapOptions.hasOwnProperty("layersOptions")&&(this.mapOptions.layersOptions={"ORTHOIMAGERY.ORTHOPHOTOS":{}}),t&&(!this.mapOptions.center.hasOwnProperty("x")||0==this.mapOptions.center.x)&&(!this.mapOptions.center.hasOwnProperty("y")||0==this.mapOptions.center.y)){var i,n=t.getTerritories();for(var r in n)n[r].isDefault&&(i=n[r].geoCenter);this.mapOptions.center.x=i.lon,this.mapOptions.center.y=i.lat,this.mapOptions.center.projection="EPSG:4326"}this.setCenter(this.mapOptions.center),this.mapOptions.hasOwnProperty("markersOptions")&&this._addMarkers(this.mapOptions.markersOptions),this.addLayers(this.mapOptions.layersOptions),this.addControls(this._getDefaultControls()),this.addControls(this.mapOptions.controlsOptions);var s=e.CustomEvent("mapLoaded",{detail:{map:this}});this.div.dispatchEvent(s)},_initMap:function(){},_getZoomFromResolution:function(t,o){for(var i=this.getProjection(),n=e.WMTSDEFAULTS[o]||e.WMTSDEFAULTS[i]||e.WMTSDEFAULTS["EPSG:3857"],r=0,s=Math.abs(n.resolutions[0]-t),a=1;a<n.resolutions.length;a++){var l=Math.abs(n.resolutions[a]-t);if(l>=s)break;r=a,s=l}return r},_getResolutionFromZoomLevel:function(t,o){var i=this.getProjection(),n=e.WMTSDEFAULTS[o]||e.WMTSDEFAULTS[i]||e.WMTSDEFAULTS["EPSG:3857"],r=-1;return t>=0&&t<n.resolutions.length?r=n.resolutions[t]:console.log("unhandled zoom level : "+t),r},_getWMTSDefaultOpts:function(){for(var t={version:"1.0.0",outputFormat:"image/jpeg"},o=[],i=0;i<=20;i++)o.push(""+i);t.matrixIds=o;var n=null,r=null,s=this.getProjection();return"string"!=typeof s||["EPSG:3857"].indexOf(s.toUpperCase())>=0?(n=e.WMTSDEFAULTS["EPSG:3857"].resolutions,r=e.WMTSDEFAULTS["EPSG:3857"].topLeftCorner):["EPSG:4326","CRS:84"].indexOf(s.toUpperCase())>=0?(n=e.WMTSDEFAULTS["EPSG:4326"].resolution7s,r=e.WMTSDEFAULTS["EPSG:4326"].topLeftCorner):["EPSG:2154"].indexOf(s.toUpperCase())>=0&&(n=e.WMTSDEFAULTS["EPSG:2154"].resolution7s,r=e.WMTSDEFAULTS["EPSG:2154"].topLeftCorner),n&&(t.resolutions=n,t.topLeftCorner=r),t},centerGeocode:function(t){if(!Gp.Config||!this.apiKey)return void console.log("no rights for geocoding services");var o=Gp.Config.getLayersId(this.apiKey),i=t.locationType||["StreetAddress","PositionOfInterest"],n={};for(n.type=[];i.length>0;){var r=i.pop();o.indexOf(r+"$OGC:OPENLS;Geocode")>=0&&n.type.push(r)}if(0==n.type.length)return void console.log("no rights for geocoding services");var s=this;Gp.Services.geocode({apiKey:this.apiKey,location:t.location,filterOptions:n,onSuccess:function(t){var o={x:t.locations[0].position.y,y:t.locations[0].position.x,projection:"EPSG:4326"};s.setAutoCenter(o);var i=e.CustomEvent("located",{detail:{position:o}});s.div.dispatchEvent(i)},onFailure:function(t){console.log("Erreur du service de géocodage !!!")}})},centerGeolocate:function(){var t=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(o){var i={x:o.coords.longitude,y:o.coords.latitude,projection:"EPSG:4326"};t.setAutoCenter(i,17);var n=e.CustomEvent("geolocated",{detail:{position:i}});t.div.dispatchEvent(n)},function(t){var e="Erreur lors de la géolocalisation : ";switch(t.code){case t.TIMEOUT:e+="Timeout !";break;case t.PERMISSION_DENIED:e+="Vous n’avez pas donné la permission";break;case t.POSITION_UNAVAILABLE:e+="La position n’a pu être déterminée";break;case t.UNKNOWN_ERROR:e+="Erreur inconnue"}console.log(e)}):console.log("Geolocate impossible")},setProxy:function(t){return Gp.ProxyUtils.proxifyUrl(t,this.mapOptions)},getProjection:function(){return""},getCenter:function(){return{}},getViewExtent:function(){return{}},getTilt:function(){return 0},getAzimuth:function(){return 0},getZoom:function(){return 0},getResolution:function(){return 0},getLib:function(){return this.mapOptions.library},_getLayersObj:function(t){var e=[];return this._layers.forEach(function(o,i,n){t.indexOf(o.id)<0||e.push(o)},this),e},getLayersOptions:function(t){(!t||Array.isArray(t)&&0==t.length)&&(t=[],this._layers.forEach(function(e){t.push(e.id)},this));var e={};return this._layers.sort(function(t,e){return t.options.position-e.options.position}),Array.isArray(t)||(t=[t]),this._layers.forEach(function(o){t.indexOf(o.id)<0||(e[o.id]=o.options)},this),e},getControlsOptions:function(t){(!t||Array.isArray(t)&&0==t.length)&&(t=[],this._controls.forEach(function(e){t.push(e.id)},this));var e={};return Array.isArray(t)||(t=[t]),this._controls.forEach(function(o){t.indexOf(o.id)<0||(e[o.id]=o.options)},this),e},getLibMapControl:function(t){return null},getLibMap:function(){return{}},setProjection:function(t){},setCenter:function(t){t&&(t.hasOwnProperty("x")&&t.hasOwnProperty("y")&&this.setXYCenter(t),t.geolocate&&this.centerGeolocate(),t.location&&t.location.trim().length>0&&this.centerGeocode(t))},setXYCenter:function(t){},setAutoCenter:function(t){},setTilt:function(t){},setAzimuth:function(t){},setZoom:function(t){},setResolution:function(t){},zoomIn:function(){},zoomOut:function(){},switchToLibITOL3:function(t){var e={};e.projection=this.getProjection(),e.center=this.getCenter(),e.tilt=this.getTilt(),e.azimuth=this.getAzimuth(),e.zoom=this.getZoom(),e.layersOptions=this.getLayersOptions(),e.controlsOptions=this.getControlsOptions(),e.mapDiv=this.div.id,e.apiKey=this.apiKey,e.enginePath3d=this.mapOptions.enginePath3d||null;for(var o in e.controlsOptions)this.removeControls(o);if("itowns"===t){if(this._3Dlayers)for(var i=0;i<this._3Dlayers.length;i++)e.layersOptions[this._3Dlayers[i].id]=this._3Dlayers[i].options;e.center=[e.center.x,e.center.y];var n=ol.proj.transform(e.center,e.projection,"EPSG:4326");e.center={x:n[0],y:n[1]},e.azimuth=this.getAzimuth(),this.libMap.setTarget(null)}else{if("ol3"!==t)return void console.log("Unknown Library");e.center=[e.center.lon,e.center.lat];var r=ol.proj.transform(e.center,"EPSG:4326","EPSG:3857");e.center={x:r[0],y:r[1]};for(var s in this._events){for(var a=0,l=Object.keys(this._events)[a],p=0;p<this._events[s].length;p++)this.forget(l,this._events[s][p].action);a++}for(;this.div.firstChild;)this.div.removeChild(this.div.firstChild)}return Gp.Map.load(e.mapDiv,{apiKey:e.apiKey,enginePath3d:e.enginePath3d||null,projection:e.projection,center:e.center,azimuth:e.azimuth,tilt:e.tilt,zoom:e.zoom,library:t,layersOptions:e.layersOptions,controlsOptions:e.controlsOptions})},_addMarkers:function(t){},addLayers:function(t){if(t){this.listen("layerChanged",this._onLayerChanged,this);var e=null;for(e in t){if(this._getLayersObj([e]).length>0)return void console.log("Layer ["+e+"] already added to map.");var o=t[e],i={};if(i[e]=o,!o.hasOwnProperty("url")&&Gp.Config){var n=null;o&&o.format&&(n=o.format);var r=null;switch(null!=n&&"WMTS"!=n.toUpperCase()||(r=Gp.Config.getLayerConf(e+"$GEOPORTAIL:OGC:WMTS"))&&(n="WMTS"),null!=n&&"WMS"!=n.toUpperCase()||(r=Gp.Config.getLayerConf(e+"$GEOPORTAIL:OGC:WMS"),r?n="WMS":(r=Gp.Config.getLayerConf(e+"$INSPIRE:OGC:WMS"))&&(n="WMS")),r&&(i[e].format=n,i[e].originators=i[e].originators||r.originators,i[e]=this._layerOptions2layerConf(r,i[e])),n){case"WMTS":case"WMS":this._addGeoportalLayer(i,r);continue}}if(o.hasOwnProperty("format")&&"string"==typeof o.format)if(o.hasOwnProperty("url")&&"string"==typeof o.url)if(this._checkLayerParams(o))switch(o.format.toUpperCase()){case"georss":break;case"KML":case"GPX":case"GEOJSON":case"WFS":case"DRAWING":this._addVectorLayer(i);break;case"WMS":case"WMTS":case"OSM":this._addRasterLayer(i);break;default:console.log("Impossible to add layer ["+e+"] : unhandled format ["+o.format+"]")}else console.log("Impossible to add layer ["+e+"] : unsufficient or inadapted parameters given");else console.log("Impossible to add layer ["+e+"] : no url given");else console.log("Impossible to add layer ["+e+"] : no format given")}this._resetLayerChangedEvent()}},_checkLayerParams:function(t){var e=[];switch(t.format.toUpperCase()){case"WMS":t.hasOwnProperty("layers")&&t.layers instanceof Array||e.push("layers");break;case"WMTS":t.hasOwnProperty("layer")&&"string"==typeof t.layer||e.push("layer"),t.hasOwnProperty("tileMatrixSet")&&"string"==typeof t.tileMatrixSet||e.push("tileMatrixSet"),t.hasOwnProperty("styleName")&&"string"==typeof t.styleName||e.push("styleName");break;case"WFS":t.hasOwnProperty("typeNames")&&"string"==typeof t.typeNames||e.push("typeNames")}return!(e.length>0)||(console.log("Impossible to add "+t.format+" layer : missing mandatory parameter(s) : "+e.toString()),!1)},_addRasterLayer:function(t){},_addVectorLayer:function(t){},_addGeoportalLayer:function(t){},removeLayers:function(t){return!t||Array.isArray(t)&&0==t.length?(console.log("removeLayers : nothing to remove !"),!1):(Array.isArray(t)||(t=[t]),!0)},_applyCommonLayerParams:function(t){return{}},modifyLayers:function(t){if(!t)return console.log("modifyLayers : nothing to modify !"),!1;var e=Object.keys(t);return!(!e||!Array.isArray(e))||(console.log("modifyLayers : wrong format for layersOptions !"),!1)},_findRegisteredControl:function(t){if(!t||"string"!=typeof t)return-1;for(var e=0;e<this._controls.length;e++)if(this._controls[e].id.toLowerCase()==t.toLowerCase())return e;return-1},addControls:function(t){var e=null;for(e in t){var o=null,i=t[e],n=this.getLibMapControl(e);if(!(this._findRegisteredControl(e)>=0||n)||(this.removeControls([e]),null!==i&&void 0!==i)){switch(e.toLowerCase()){case"draggable":o=this.setDraggable(i);break;case"keyboard":o=this.setKeyboard(i);break;case"selectable":o=this.setSelectable(i);break;case"zoom":o=this.addZoomControl(i);break;case"zoombox":o=this._addZoomBoxControl(i);break;case"overview":o=this.addOverviewControl(i);break;case"orientation":o=this.addOrientationControl(i);break;case"graphicscale":o=this.addGraphicScaleControl(i);break;case"mouseposition":o=this.addMousePositionControl(i);break;case"route":o=this.addRouteControl(i);break;case"isocurve":o=this.addIsocurveControl(i);break;case"graticule":o=this.addGraticuleControl(i);break;case"layerswitcher":o=this.addLayerSwitcherControl(i);break;case"layerimport":o=this.addLayerImportControl(i);break;case"length":o=this.addLengthControl(i);break;case"area":o=this.addAreaControl(i);break;case"azimuth":o=this.addAzimuthControl(i);break;case"elevationpath":o=this.addElevationPathControl(i);break;case"search":o=this.addSearchControl(i);break;case"reversesearch":o=this.addReverseSearchControl(i);break;case"drawing":o=this.addDrawingControl(i);break;case"attributions":o=this.addAttributionsControl(i);break;case"camera":o=this.addCameraControl(i);break;case"getfeatureinfo":o=this.addGetFeatureInfoControl(i);break;default:console.log("Controle "+e+"inconnu.");continue}this._controls.push({obj:o||"2D-only-control",id:e.toLowerCase(),options:i})}}},setDraggable:function(t){},setKeyboard:function(t){},setSelectable:function(t){},addZoomControl:function(t){},addZoomBoxControl:function(t){},addOverviewControl:function(t){},addOrientationControl:function(t){},addGraphicScaleControl:function(t){},addMousePositionControl:function(t){},addRouteControl:function(t){},addIsocurveControl:function(t){},addGraticuleControl:function(t){},addLayerSwitcherControl:function(t){},addLayerImportControl:function(t){},addLengthControl:function(t){},addAreaControl:function(t){},addAzimuthControl:function(t){},addElevationPathControl:function(t){},addSearchControl:function(t){},addReverseSearchControl:function(t){},addDrawingControl:function(t){},addAttributionsControl:function(t){},addCameraControl:function(t){},addGetFeatureInfoControl:function(t){},removeControls:function(t){},modifyControls:function(t){var e=Object.keys(t);if(!e||0==e.length)return void console.log("No control to modify.");for(var o=null,i=0;i<e.length;i++){o=e[i];var n=this.getLibMapControl(o),r=this._findRegisteredControl(o);if(r>=0){if(!n){this.removeControls([o]),delete t[o];continue}var s=this._controls[r].options;for(var a in t[o])s[a]=t[o][a];t[o]=s}else if(!n){delete t[o];continue}}this.addControls(t)},_getLayerIndexByLayerOpts:function(t){if(!t)return-1;for(var e=0;e<this._layers.length;e++){var o=this._layers[e];if(t.hasOwnProperty(o.id))return e}return-1},_getLayerIndexByLayerId:function(t){for(var e=0;e<this._layers.length;e++){if(t===this._layers[e].id)return e}return-1},_addLayerConfToLayerSwitcher:function(t,e){},_onLayerChanged:function(t){var e=null,o=-1;if(t.hasOwnProperty("layerAdded"))e=t.layerAdded,(o=this._getLayerIndexByLayerOpts(e))>=0&&o<this._layers.length&&(this._layers[o].id,this._layers[o].options.position=t.position);else if(t.hasOwnProperty("layerRemoved")){if(e=t.layerRemoved,(o=this._getLayerIndexByLayerOpts(e))>=0&&o<this._layers.length){var i={};i.id=this._layers[o].id,i.options=this._layers[o].options,i.obj=this._layers[o].obj,this._layersRemoved.push(i),this._layers.splice(o,1)}}else if(t.hasOwnProperty("layerChanged")){e=t.layerChanged;var n=this._getLayerIndexByLayerOpts(e);n>=0&&n<this._layers.length&&(this._layers[n].id,this._layers[n].options[t.property]=t.newValue)}},_filterEmptyMetadata:function(t){if(!t||!Array.isArray(t))return t;for(var e=[],o=0;o<t.length;o++)t[o].url&&t[o].url.trim().length>0&&e.push(t[o]);return e},_layerOptions2layerConf:function(t,e){var o=e||{};return o.title=o.title||t.title,o.description=o.description||t.description,o.quicklookUrl=o.quicklookUrl||t.quicklookUrl,o.legends=o.legends||t.legends,o.metadata=o.metadata||t.metadata,o.metadata=this._filterEmptyMetadata(o.metadata),o},getLSLayerContainerDivId:function(t){return null},_registerEvent:function(t,e,o,i){return t&&(this._events.hasOwnProperty(e)||(this._events[e]=[]),this._events[e].push({action:o,key:t,context:i})),this._events[e][this._events[e].length-1]},listen:function(t,e,o){if("function"!=typeof e)return console.log("no action provided for event : "+t),!1;o=o||this;var i=this;switch(t){case"mapFailure":break;case"mapLoaded":case"geolocated":case"located":case"configured":var n=function(t){e.call(o,t.detail)},r=i._registerEvent(n,t,e,o);r.eventOrigin=this.div,r.eventType=t,r.eventOrigin.addEventListener(r.eventType,n,this);break;case"centerChanged":case"zoomChanged":case"azimuthChanged":case"tiltChanged":case"layerChanged":break;case"projectionChanged":case"controlChanged":break;default:return console.log("unhandled event : "+t),!1}return!0},forget:function(t,e){if("function"!=typeof e)return console.log("no action provided for event : "+t),!1;switch(t){case"mapLoaded":case"geolocated":case"located":case"configured":case"mapFailure":case"centerChanged":case"zoomChanged":case"azimuthChanged":case"tiltChanged":case"projectionChanged":case"layerChanged":case"controlChanged":case"pickFeature":var o=this._events[t];if(!o)return console.log("nothing to forget for  : "+t),!1;for(var i=null,n=o.length-1;n>=0;n--)if(o[n].action==e){if(!o[n].eventOrigin)continue;i=o[n].key;var r=o[n].eventOrigin,s=o[n].eventType;if(!i)return console.log("action to forget not found for  : "+t),!1;o.splice(n,1),r.removeEventListener(s,i)}if(!o)return console.log("action to forget not found for  : "+t),!1;break;default:return console.log("unhandled event : "+t),!1}return!0},_resetLayerChangedEvent:function(){if(this._events.hasOwnProperty("layerChanged")){var t=[],e=[];this._events.layerChanged.forEach(function(o){t.indexOf(o.action)<0&&(t.push(o.action),e.push(o.context))},this);for(var o=0;o<t.length;++o)this.forget("layerChanged",t[o]),this.listen("layerChanged",t[o],e[o])}},_changeLayerColor:function(t,e){}},e}(),it2IT=function(t,e,o,i,n){function r(t){if(!(this instanceof r))throw new TypeError("IT constructor cannot be called as a function.");this.CLASSNAME="IT",n.apply(this,arguments)}return r.LAYERPROPERTIES={visible:"visibility",opacity:"opacity",sequence:"position"},r.CONTROLSCLASSES={mouseposition:"itowns.control.MousePosition",layerswitcher:"itowns.control.LayerSwitcher",attributions:"itowns.control.Attributions",overview:"itowns.control.MiniGlobe",graphicscale:"itowns.control.Scale"},r.prototype=Object.create(n.prototype,{}),r.prototype.constructor=r,r.prototype._initMap=function(){var t=e.getEnginePath(this.mapOptions.enginePath3d);e.loadEngine(t,function(t){console.warn("Itowns engine, loaded...",t);for(var e in i)i.hasOwnProperty(e)&&(t[e]=i[e]);i=t;var o={longitude:this.mapOptions.center.x||2,latitude:this.mapOptions.center.y||48,altitude:25e6},n=this.div;this.libMap=new i.GlobeViewExtended(n,o,{maxSubdivisionLevel:18});var r=this;this.libMap.listen(i.GlobeViewExtended.EVENTS.GLOBE_INITIALIZED,function(){window.setTimeout(function(){r.div.style.visibility=""},1),r.setZoom(parseFloat(r.mapOptions.zoom)||10),r.setAzimuth(parseFloat(r.mapOptions.azimuth)||0),r.setTilt(parseFloat(r.mapOptions.tilt)||0);var t=!1,e=function(){t=!1},o=r._registerEvent(e,"pickFeature",e,r);o.eventOrigin=r.div,o.eventType="mousedown",o.eventOrigin.addEventListener(o.eventType,e,r);var i=function(){t=!0},o=r._registerEvent(i,"pickFeature",i,r);o.eventOrigin=r.div,o.eventType="mousemove",o.eventOrigin.addEventListener(o.eventType,i,r);var n=function(e){3===e.which||t?r._removeInfoDivs():r._onMapClick(e)},o=r._registerEvent(n,"pickFeature",n,r);o.eventOrigin=r.div,o.eventType="mouseup",o.eventOrigin.addEventListener(o.eventType,n,r),r._afterInitMap()})},function(t){console.warn("Itowns engine, failed...",t)},this)},r.prototype._onMapClick=function(t){this._removeInfoDivs();var e=this.libMap.getFeaturesAtMousePosition(t);if(0!=e.length){var o=this._features2html(e),i={x:t.layerX,y:t.layerY};this._displayInfo(i,o.innerHTML)}},r.prototype._removeInfoDivs=function(){var t=document.getElementsByClassName("gp-feature-info-div-it");if(t.length>0)for(var e=0;e<t.length;e++)t[e].parentNode.removeChild(t[e])},r.prototype._features2html=function(t){var e=document.createElement("div");return t.forEach(function(t){var o={};t.properties&&(o=t.properties);var i;if(i=document.createElement("div"),i.className="gp-att-name-div",o.hasOwnProperty("name")?(i.innerHTML=o.name,e.appendChild(i)):t.properties.description?(i.innerHTML=o.description,e.appendChild(i)):(i.innerHTML="UNKNOWN FEATURE NAME",e.appendChild(i)),o.hasOwnProperty("description")){var n=document.createElement("div");n.className="gp-att-description-div",n.innerHTML=o.description,e.appendChild(n)}var r=null,s=!1,a=null,l=null,p=null;for(r in o)if("name"!=r&&"description"!=r&&"styleUrl"!=r&&"styleHash"!=r&&"stroke"!=r&&"stroke-opacity"!=r&&"stroke-width"!=r&&"fill"!=r&&"fill-opacity"!=r&&"_idx"!=r&&"_meshIdx"!=r&&"coordTimes"!=r){s||(a=document.createElement("div"),a.className="gp-att-others-div",l=document.createElement("ul"),s=!0),p=document.createElement("li");var c=document.createElement("span");c.className="gp-attname-others-span",c.innerHTML=r+" : ",p.appendChild(c),p.appendChild(document.createTextNode(o[r])),l.appendChild(p)}l&&(a.appendChild(l),e.appendChild(a))},this),e},r.prototype._displayInfo=function(t,e){var o=document.createElement("div");o.className="gp-feature-info-div-it";var i=document.createElement("input");i.type="button",i.className="gp-styling-button closer",i.onclick=function(t){return o.parentNode.removeChild(o),!1},i.addEventListener("mouseup",function(t){t.stopPropagation()},!1);var n=document.createElement("div"),r=document.getElementById(this.div.id);n.className="gp-features-content-div-it",n.innerHTML=e,o.appendChild(n),o.appendChild(i),r.appendChild(o);var s=r.offsetWidth/2-parseInt(o.offsetWidth,10)/2,a=r.offsetHeight/2-parseInt(o.offsetHeight,10)/2;o.style.left=s+"px",o.style.top=a+"px"},r.prototype._addVectorLayer=function(t){var e,o=Object.keys(t)[0],i=t[o],r=i.styleOptions||{},s=this.mapOptions.defaultFeaturesStyle||{},a=n.DEFAULT_VECTORLAYERS_STYLES;switch(i.format=i.format.toLowerCase(),i.format.toUpperCase()){case"KML":case"GEOJSON":e={url:i.url,id:o,type:"color",protocol:"rasterizer",visible:void 0===i.visibility||i.visibility,opacity:void 0===i.opacity?1:i.opacity},!0===this.mapOptions.extractStyles?e.style={}:e.style={stroke:r.strokeColor||s.strokeColor||a.strokeColor,strokeWidth:r.strokeWidth||s.strokeWidth||a.strokeWidth,strokeOpacity:r.strokeOpacity||s.strokeOpacity||a.strokeOpacity,fill:r.polyFillColor||s.polyFillColor||a.polyFillColor,fillOpacity:r.polyFillOpacity||s.polyFillOpacity||a.polyFillOpacity};break;case"GPX":e={url:i.url,id:o,type:"color",protocol:"rasterizer",visible:void 0===i.visibility||i.visibility,opacity:void 0===i.opacity?1:i.opacity,style:{stroke:r.strokeColor||s.strokeColor||a.strokeColor,strokeWidth:r.strokeWidth||s.strokeWidth||a.strokeWidth,strokeOpacity:r.strokeOpacity||s.strokeOpacity||a.strokeOpacity}}}if(e){i.hasOwnProperty("originators")&&(e._originators=i.originators),i.hasOwnProperty("visibility")&&void 0!==i.visibility||(i.visibility=!0),this._layers.push({id:o,obj:e,options:i});var l=this.getLibMapControl("layerswitcher");l&&(l._addedLayerConf[o]=i),this.libMap.addLayer(e)}},r.prototype._addRasterLayer=function(t){var e,o,i,n,r=Object.keys(t)[0],s=t[r];switch(s.format=s.format.toLowerCase(),s.format.toUpperCase()){case"WMS":s.layers&&Array.isArray(s.layers)?e=s.layers.toString():s.layers?(e=s.layers,s.layers=[s.layers]):(e=r,s.layers=[r]),n=s.bbox?{west:s.bbox[0],east:s.bbox[2],south:s.bbox[1],north:s.bbox[3]}:s.bbox||"EPSG:3857"!==s.projection?{west:-180,east:180,south:-90,north:90}:{west:-20026376.39,east:20026376.39,south:-20048966.1,north:20048966.1},s.minZoom&&(o=this._getResolutionFromZoomLevel(s.minZoom)/28e-5),s.maxZoom&&(i=this._getResolutionFromZoomLevel(s.maxZoom)/28e-5);var a={type:s.type||"color",url:s.url,protocol:s.format,id:r,name:e,style:s.styleName||"",title:void 0===s.title?r:s.title,visible:void 0===s.visibility||s.visibility,opacity:void 0===s.opacity?1:s.opacity,projection:s.projection||"EPSG:4326",extent:n,transparent:!0,waterMask:!1,featureInfoMimeType:"",dateTime:"",heightMapWidth:256,options:{mimetype:s.outputFormat,zoom:{min:s.minZoom||1,max:s.maxZoom||21}},networkOptions:{crossOrigin:"omit"},updateStrategy:{type:0,options:{}},version:s.version||"1.3.0"};break;case"WMTS":var l=this._getWMTSDefaultOpts();for(var p in s)l[p]=s[p];s.minZoom&&(o=this._getResolutionFromZoomLevel(s.minZoom)/28e-5),s.maxZoom&&(i=this._getResolutionFromZoomLevel(s.maxZoom)/28e-5),s=l,s.tileMatrixSetLimits||(s.tileMatrixSetLimits=this._getTMSLimits(s.tileMatrixSet)),a={type:s.type||"color",url:s.url,protocol:s.format.toLowerCase(),id:r,title:void 0===s.title?r:s.title,visible:void 0===s.visibility||s.visibility,opacity:void 0===s.opacity?1:s.opacity,updateStrategy:{type:"0",options:{}},networkOptions:{crossOrigin:"omit"},options:{tileMatrixSet:s.tileMatrixSet,tileMatrixSetLimits:s.tileMatrixSetLimits,mimetype:s.outputFormat,name:s.layer,style:s.styleName},version:s.version,minScaleDenominator:i||null,maxScaleDenominator:o||null,processingOptions:s.processingOptions},s.minZoom&&s.maxZoom?a.options.zoom={min:s.minZoom,max:s.maxZoom}:s.minZoom&&!s.maxZoom?a.options.zoom={min:s.minZoom,max:Math.max.apply(null,Object.keys(s.tileMatrixSetLimits).map(Number))}:!s.minZoom&&s.maxZoom&&(a.options.zoom={min:Math.min.apply(null,Object.keys(s.tileMatrixSetLimits).map(Number)),max:s.maxZoom}),s.levelsToLoad&&(a.updateStrategy={type:1,options:{groups:s.levelsToLoad}})}if(a){if(s.hasOwnProperty("originators")&&(a.options.originators=s.originators),s.hasOwnProperty("opacity")&&void 0!==s.opacity||(s.opacity=1),s.hasOwnProperty("visibility")&&void 0!==s.visibility||(s.visibility=!0),this._layers.push({id:r,options:s,obj:a}),!0===s.isElevation)a.type="elevation",s.noDataValue&&(a.noDataValue=s.noDataValue);else{var c=this.getLibMapControl("layerswitcher");c&&(c._addedLayerConf[r]=s)}this.libMap.addLayer(a)}},r.prototype._addGeoportalLayer=function(t,e){var o=Object.keys(t)[0];e&&(t[o].url=e.getServerUrl(e.apiKeys[0]),t[o].outputFormat=t[o].outputFormat||e.getDefaultFormat(),"WMS"===t[o].format&&(t[o].version=t[o].version||e.serviceParams.version,t[o].stylesName=t[o].stylesName||e.styles),"WMTS"===t[o].format&&(t[o].tileMatrixSet=t[o].tileMatrixSet||e.getTMSID(),t[o].tileMatrixSetLimits=t[o].tileMatrixSetLimits||e.wmtsOptions.tileMatrixSetLimits,t[o].layer=o||e.getName(),t[o].styleName=t[o].styleName||e.getStyles()[0].name)),this._addRasterLayer(t)},r.prototype.setXYCenter=function(t,e){if(!t.hasOwnProperty("x")||!t.hasOwnProperty("y"))return void console.log("no valid coordinates for map center");if(t.location&&t.location.trim().length>0)return void console.log("point object has location property to center on...");if(t.hasOwnProperty("projection")&&"EPSG:4326"!==t.projection&&i.proj4.defs(t.projection)){var o=i.proj4(t.projection,"EPSG:4326",[t.x,t.y]);t={x:o[0],y:o[1]}}else if(t.hasOwnProperty("projection")&&void 0==i.proj4.defs(t.projection))return;var n={longitude:t.x,latitude:t.y};e&&(n.zoom=e),this.libMap.setCameraTargetGeoPosition(n)},r.prototype.setAutoCenter=function(t,e){if(!t.hasOwnProperty("x")||!t.hasOwnProperty("y"))return void console.log("no valid coordinates for map center");if(t.hasOwnProperty("projection")&&"EPSG:4326"!==t.projection&&i.proj4.defs(t.projection)){var o=i.proj4(t.projection,"EPSG:4326",[t.x,t.y]);t={x:o[0],y:o[1]}}else if(t.hasOwnProperty("projection")&&void 0==i.proj4.defs(t.projection))return;var n={tilt:45,heading:0,longitude:t.x,latitude:t.y};e&&(n.zoom=e),this.libMap.onCameraMoveStop(function(){this.libMap.setCameraTargetGeoPosition(n)}.bind(this))},r.prototype.getCenter=function(){return this.libMap.getCenter()},r.prototype.getZoom=function(){return this.libMap.getZoom()-1},r.prototype.setZoom=function(t){if(parseFloat(t)!==parseInt(t,10)||isNaN(t))return void console.log("no valid zoomLevel");t=parseInt(t,10),this.libMap.setZoom(t+1)},r.prototype.zoomIn=function(){var t=this.getZoom();20!==t&&this.setZoom(t+1)},r.prototype.zoomOut=function(){var t=this.getZoom();-1!==t&&this.setZoom(t-1)},r.prototype.getAzimuth=function(){return this.libMap.getAzimuth()},r.prototype.setAzimuth=function(t){if(isNaN(t))return void console.log("Not a valid azimuth  : must be a float");this.libMap.setAzimuth(t)},r.prototype.getTilt=function(){return this.libMap.getTilt()},r.prototype.setTilt=function(t){if(t=parseFloat(t),isNaN(t)||t<0||t>90)return void console.log("no valid tilt angle");this.libMap.setTilt(t)},r.prototype.addMousePositionControl=function(t){var e={};if(t.div&&(e.target=t.div),e.collapsed=!t.maximised,t.systems&&Array.isArray(t.systems)&&t.systems.length>0)for(var o=0;o<t.systems.length;o++)e.systems||(e.systems=[]),e.systems.push(t.systems[o]);if(t.units&&Array.isArray(t.units)&&t.units.length>0){e.units=[];for(var n=0;n<t.units.length;n++)"string"==typeof t.units[n]&&e.units.push(t.units[n])}e.displayAltitude=t.displayAltitude,e.displayCoordinates=t.displayCoordinates,t.altitude&&(e.altitude=t.altitude);var r=new i.control.MousePosition(e);return this.libMap.addWidget(r),r},r.prototype.addLayerSwitcherControl=function(t){var e={layers:t.layers||[],options:{collapsed:!(t&&t.maximised)}};t.div&&(e.options.target=t.div);for(var o=0;o<this._layers.length;o++){var n=this._layers[o]
;if("color"===n.obj.type){var r={id:n.id,layer:n.obj,config:{}};n.options.title&&(r.config.title=n.options.title),n.options.description&&(r.config.description=n.options.description),n.options.quicklookUrl&&(r.config.quicklookUrl=n.options.quicklookUrl),n.options.legends&&(r.config.legends=n.options.legends),n.options.metadata&&(r.config.metadata=n.options.metadata),e.layers.push(r)}}var s=new i.control.LayerSwitcher(e);return this.libMap.addWidget(s),s},r.prototype.addOverviewControl=function(t){var e={};t.position?e.position=t.position:e.position="absolute",t.div&&(e.target=t.div);var o=new i.control.MiniGlobe(e);if(this.libMap.addWidget(o),o.getElement()){0==t.maximised?o.getElement().style.display="none":o.getElement().style.display="inline",isNaN(t.width)||(o.getElement().style.width=t.width+"px",o.getElement().getElementsByTagName("canvas")[0].style.width=t.width+"px"),isNaN(t.height)||(o.getElement().style.height=t.height+"px",o.getElement().getElementsByTagName("canvas")[0].style.height=t.height+"px"),isNaN(t.x)||(o.getElement().style.left=Number(t.x)+"px"),isNaN(t.y)||(o.getElement().style.bottom=Number(t.y)+"px");var n={};n.width=parseFloat(o.getElement().style.width)||100,n.height=parseFloat(o.getElement().style.height)||100,o._globeObj.resize(n.width,n.height)}return o},r.prototype.addGraphicScaleControl=function(t){var e={};t.position?e.position=t.position:e.position="absolute",t.div&&(e.target=t.div);var o=new i.control.Scale(e);return this.libMap.addWidget(o),o.getElement()&&(0==t.maximised?o.getElement().style.display="none":o.getElement().style.display="inline",isNaN(t.x)||(o.getElement().style.left=Number(t.x)+"px"),isNaN(t.y)||(o.getElement().style.bottom=Number(t.y)+"px")),o},r.prototype.addAttributionsControl=function(t){var e={};e.options={},t.div&&(e.options.target=t.div),e.options.collapsed=!t.maximised;var o=new i.control.Attributions(e);return this.libMap.addWidget(o),o},r.prototype.removeControls=function(t){if(!t||Array.isArray(t)&&0==t.length)return void console.log("No control to remove.");Array.isArray(t)||(t=[t]);for(var e=null,o=0;o<t.length;o++){e=t[o];var i=this._findRegisteredControl(e);i>=0&&this._controls.splice(i,1);var n=this.getLibMapControl(e);n?this.libMap.removeWidget(n):console.log("Impossible to remove control ["+e+"]  : not found or unhandled")}},r.prototype.getLibMapControl=function(t){var e=null;if(!r.CONTROLSCLASSES.hasOwnProperty(t.toLowerCase())||!r.CONTROLSCLASSES[t.toLowerCase()])return e;var o=this.libMap.getWidgets();if(!o||0==o.length)return e;for(var i=0;i<o.length;i++)if(o[i].name&&o[i].name.toLowerCase()===t.toLowerCase()){e=o[i];break}return e},r.prototype.removeLayers=function(t){if(!n.prototype.removeLayers.apply(this,arguments))return!1;Array.isArray(t)||(t=[t]),t.forEach(function(t){this._getLayersObj(t)&&Array.isArray(this._getLayersObj(t))&&this._getLayersObj(t).length>0?this.libMap.removeLayer(t):console.log("[IT]  : Impossible to remove "+t+" - not Found")},this)},r.prototype.modifyLayers=function(t){if(!n.prototype.modifyLayers.apply(this,arguments))return!1;var e=Object.keys(t);this._getLayersObj(e).forEach(function(e){var o=this._applyCommonLayerParams(t[e.id]);o.hasOwnProperty("opacity")&&this.libMap.setLayerOpacity(e.id,o.opacity),o.hasOwnProperty("visible")&&this.libMap.setLayerVisibility(e.id,o.visible),o.hasOwnProperty("zIndex")&&this.libMap.moveLayerToIndex(e.id,o.zIndex)},this)},r.prototype._getCommonLayerParams=function(t){var e={};return t.hasOwnProperty("opacity")&&(e.opacity=t.opacity),t.hasOwnProperty("visible")&&(e.visibility=t.visible),t.hasOwnProperty("sequence")&&(e.position=t.sequence),e},r.prototype._applyCommonLayerParams=function(t){var e={};return t.hasOwnProperty("opacity")&&(e.opacity=t.opacity),t.hasOwnProperty("visibility")&&(e.visible=t.visibility),t.hasOwnProperty("position")&&(e.zIndex=t.position),e},r.prototype.listen=function(t,e,o){if(!n.prototype.listen.apply(this,arguments))return!1;o=o||this;var s=this,a=null;switch(t){case"mapFailure":break;case"mapLoaded":case"located":case"geolocated":case"configured":break;case"centerChanged":var l=function(t){var i={};if(t){if(t.previous){var n=t.previous.cameraTarget.as("EPSG:4326");i.oldCenter={x:n.longitude(),y:n.latitude()}}if(t.new){var r=t.new.cameraTarget.as("EPSG:4326");i.newCenter={x:r.longitude(),y:r.latitude()}}e.call(o,i)}};a=s.libMap.listen(i.GlobeViewExtended.EVENTS.CENTER_CHANGED,l);break;case"zoomChanged":var p=o.getZoom(),c=function(t){var i=o.getZoom();i!==p&&(e.call(o,{oldZoom:p,newZoom:i}),p=i)};a=s.libMap.listen(i.GlobeViewExtended.EVENTS.RANGE_CHANGED,c);break;case"azimuthChanged":var u=function(t){t.new.heading!==t.previous.heading&&e.call(o,{oldAzimuth:t.previous.heading,newAzimuth:t.new.heading})};a=s.libMap.listen(i.GlobeViewExtended.EVENTS.ORIENTATION_CHANGED,u);break;case"tiltChanged":var h=function(t){t.new.tilt!==t.previous.tilt&&e.call(o,{oldTilt:t.previous.tilt,newTilt:t.new.tilt})};a=s.libMap.listen(i.GlobeViewExtended.EVENTS.ORIENTATION_CHANGED,h);break;case"projectionChanged":break;case"layerChanged":var d=function(t){var i,n=t,r=s._getLayerOpts(n.layerId),a=s.libMap.getColorLayerById(Object.keys(r)[0]);i=a&&a.sequence>=0?a.sequence:-1,e.call(o,{layerAdded:r,position:i})};a=s.libMap.listen(i.GlobeViewExtended.EVENTS.LAYER_ADDED,d),s._registerEvent(a,t,e,o);var f=function(t){var i=t,n=s._getLayerOpts(i.layerId)||s._getLayerOpts(i.layerId,s._layersRemoved);e.call(o,{layerRemoved:n})};a=s.libMap.listen(i.GlobeViewExtended.EVENTS.LAYER_REMOVED,f),s._registerEvent(a,t,e,o);for(var y in r.LAYERPROPERTIES)s.libMap.getColorLayers().forEach(function(n){var l=s._getLayerOpts(n.id),p=function(t){var i=s.libMap.getLayerEventInfos(t),n=i.propertyName,a={};a[n]=i.previousValue;var p=s._getCommonLayerParams(a),c={};c[n]=i.newValue;var u=s._getCommonLayerParams(c);e.call(o,{property:r.LAYERPROPERTIES[n],oldValue:p[r.LAYERPROPERTIES[n]],newValue:u[r.LAYERPROPERTIES[n]],layerChanged:l})},c="visible"===y?i.GlobeViewExtended.EVENTS.VISIBLE_PROPERTY_CHANGED:"opacity"===y?i.GlobeViewExtended.EVENTS.OPACITY_PROPERTY_CHANGED:i.GlobeViewExtended.EVENTS.SEQUENCE_PROPERTY_CHANGED;a=s.libMap.addLayerListener(n,c,p),s._registerEvent(a,t,e,o),a=null});break;case"controlChanged":break;default:console.log("unhandled event  : "+t)}return a&&this._registerEvent(a,t,e,o),!0},r.prototype.forget=function(t,e){if(!n.prototype.forget.apply(this,arguments))return!1;var o=this._events[t];if(!o)return console.log("nothing to forget for : "+t),!1;for(var i=null,r=o.length-1;r>=0;r--)o[r].action==e&&(i=o[r].key,o.splice(r,1),this.libMap.forgetByKey(i))},r.prototype.getLibMap=function(){return this.libMap},r.prototype._getLayerOpts=function(t,e){var o=null;e=e||this._layers;for(var i=0;i<e.length;i++){var n=e[i];if(n.id===t){o={},o[n.id]=n.options;break}}return o},r.prototype.getLSLayerContainerDivId=function(t){var e=this._findRegisteredControl("layerswitcher");if(e<0)return null;if(this._getLayersObj([t]).length>0){var o=this._controls[e].obj._layerListContainer,i=o.id,n=i.substring(i.indexOf("-"));if(o&&o.childNodes)for(var r=0;r<o.childNodes.length;r++)if(o.childNodes[r].id==="GPlayerSwitcher_ID_"+t+n){var s="GPlayerSwitcher_ID_"+t+n;return s}}return null},r.prototype._registerUnknownLayer=function(t){return{}},r.prototype._getTMSLimits=function(t){return"PM"===t?{0:{minTileRow:"0",maxTileRow:"1",minTileCol:"0",maxTileCol:"1"},1:{minTileRow:"0",maxTileRow:"2",minTileCol:"0",maxTileCol:"2"},2:{minTileRow:"0",maxTileRow:"4",minTileCol:"0",maxTileCol:"4"},3:{minTileRow:"0",maxTileRow:"8",minTileCol:"0",maxTileCol:"8"},4:{minTileRow:"0",maxTileRow:"16",minTileCol:"0",maxTileCol:"16"},5:{minTileRow:"0",maxTileRow:"32",minTileCol:"0",maxTileCol:"32"},6:{minTileRow:"0",maxTileRow:"64",minTileCol:"0",maxTileCol:"64"},7:{minTileRow:"0",maxTileRow:"128",minTileCol:"0",maxTileCol:"128"},8:{minTileRow:"0",maxTileRow:"256",minTileCol:"0",maxTileCol:"256"},9:{minTileRow:"0",maxTileRow:"512",minTileCol:"0",maxTileCol:"512"},10:{minTileRow:"0",maxTileRow:"1024",minTileCol:"0",maxTileCol:"1024"},11:{minTileRow:"0",maxTileRow:"2048",minTileCol:"0",maxTileCol:"2048"},12:{minTileRow:"0",maxTileRow:"4096",minTileCol:"0",maxTileCol:"4096"},13:{minTileRow:"0",maxTileRow:"8192",minTileCol:"0",maxTileCol:"8192"},14:{minTileRow:"0",maxTileRow:"16384",minTileCol:"0",maxTileCol:"16384"},15:{minTileRow:"0",maxTileRow:"32768",minTileCol:"0",maxTileCol:"32768"},16:{minTileRow:"0",maxTileRow:"65536",minTileCol:"0",maxTileCol:"65536"},17:{minTileRow:"0",maxTileRow:"131072",minTileCol:"0",maxTileCol:"131072"},18:{minTileRow:"0",maxTileRow:"262144",minTileCol:"0",maxTileCol:"262144"},19:{minTileRow:"0",maxTileRow:"524288",minTileCol:"0",maxTileCol:"524288"},20:{minTileRow:"0",maxTileRow:"1048576",minTileCol:"0",maxTileCol:"1048576"},21:{minTileRow:"0",maxTileRow:"2097152",minTileCol:"0",maxTileCol:"2097152"}}:"WGS84G"===t?{0:{minTileRow:0,maxTileRow:1,minTileCol:0,maxTileCol:2},1:{minTileRow:0,maxTileRow:2,minTileCol:0,maxTileCol:4},2:{minTileRow:0,maxTileRow:4,minTileCol:0,maxTileCol:8},3:{minTileRow:0,maxTileRow:8,minTileCol:0,maxTileCol:16},4:{minTileRow:0,maxTileRow:16,minTileCol:0,maxTileCol:32},5:{minTileRow:0,maxTileRow:32,minTileCol:0,maxTileCol:64},6:{minTileRow:0,maxTileRow:64,minTileCol:0,maxTileCol:128},7:{minTileRow:0,maxTileRow:128,minTileCol:0,maxTileCol:256},8:{minTileRow:0,maxTileRow:256,minTileCol:0,maxTileCol:512},9:{minTileRow:0,maxTileRow:512,minTileCol:0,maxTileCol:1024},10:{minTileRow:0,maxTileRow:1024,minTileCol:0,maxTileCol:2048},11:{minTileRow:0,maxTileRow:2048,minTileCol:0,maxTileCol:4096},12:{minTileRow:0,maxTileRow:4096,minTileCol:0,maxTileCol:8192},13:{minTileRow:0,maxTileRow:8192,minTileCol:0,maxTileCol:16384},14:{minTileRow:0,maxTileRow:16384,minTileCol:0,maxTileCol:32768},15:{minTileRow:0,maxTileRow:32768,minTileCol:0,maxTileCol:65536},16:{minTileRow:0,maxTileRow:65536,minTileCol:0,maxTileCol:131072},17:{minTileRow:0,maxTileRow:131072,minTileCol:0,maxTileCol:262144}}:void 0},r}(0,UtilsLoader,Gp,itowns,IMap),ol3OL3=function(t,e,o,i){function n(t){if(!(this instanceof n))throw new TypeError("OL3 constructor cannot be called as a function.");this.CLASSNAME="OL3",i.apply(this,arguments)}return n.LAYERPROPERTIES={visible:"visibility",opacity:"opacity",zIndex:"position",grayScaled:"grayScaled",minResolution:"maxZoom",maxResolution:"minZoom"},n.CONTROLPROPERTIES={maximised:"collapsed"},n.CONTROLSCLASSES={draggable:[e.interaction.Pointer,e.interaction.MouseWheelZoom,e.interaction.DoubleClickZoom],keyboard:[e.interaction.KeyboardPan,e.interaction.KeyboardZoom],scrollwheel:null,selectable:[e.interaction.Select],zoom:e.control.Zoom,zoombox:null,overview:e.control.OverviewMap,orientation:e.control.Rotate,graphicscale:e.control.ScaleLine,getfeatureinfo:e.control.GetFeatureInfo,mouseposition:e.control.GeoportalMousePosition,route:e.control.Route,layerswitcher:e.control.LayerSwitcher,layerimport:e.control.LayerImport,isocurve:e.control.Isocurve,length:e.control.MeasureLength,area:e.control.MeasureArea,azimuth:e.control.MeasureAzimuth,elevationpath:e.control.ElevationPath,graticule:e.Graticule,search:e.control.SearchEngine,reversesearch:e.control.ReverseGeocode,drawing:e.control.Drawing,attributions:e.control.GeoportalAttribution,camera:null},n.prototype=Object.create(i.prototype,{}),n.prototype.constructor=n,n.prototype._initMap=function(){var t=new e.View({enableRotation:this.mapOptions.enableRotation,zoom:this.mapOptions.zoom,minZoom:this.mapOptions.minZoom,maxZoom:this.mapOptions.maxZoom,projection:this.mapOptions.projection,rotation:this.mapOptions.azimuth*Math.PI/180});this.libMap=new e.Map({target:this.div,view:t}),this._afterInitMap()},n.prototype._toggleInteractions=function(t,e){var o=this.getLibMapControl(t);if(null==o){o=[];for(var i=0;i<n.CONTROLSCLASSES[t].length;i++){var r=new n.CONTROLSCLASSES[t][i];this.libMap.addInteraction(r),o.push(r)}}for(var s=0;s<o.length;s++){o[s].setActive(e)}return o},n.prototype.setDraggable=function(t){return this._toggleInteractions("draggable",t)},n.prototype.setKeyboard=function(t){return this._toggleInteractions("keyboard",t)},n.prototype.setSelectable=function(t){return this._toggleInteractions("selectable",t)},n.prototype.addZoomControl=function(t){var o=new e.control.Zoom({target:t.div});return this.libMap.addControl(o),o},n.prototype.addZoomBoxControl=function(t){return null},n.prototype.addOverviewControl=function(t){var o={};if(t.div&&(o.target=t.div),o.collapsed=!t.maximised,t.layers&&Array.isArray(t.layers)){var i=this._getLayersObj(t.layers),n=[];if(i.forEach(function(t){n.push(t.obj)},this),0==n.length&&t.layers.length>0)for(var r=0;r<t.layers.length;r++){var s=new e.layer.GeoportalWMTS({layer:t.layers[r]});s&&n.push(s)}n.length>0&&(o.layers=n)}var a={},l=!1;t.hasOwnProperty("minZoom")&&(a.minZoom=t.minZoom,l=!0),t.hasOwnProperty("maxZoom")&&(a.maxZoom=t.maxZoom,l=!0),t.hasOwnProperty("projection")&&(a.projection=t.projection,l=!0),l&&(o.view=new e.View(a));var p=new e.control.OverviewMap(o);return this.libMap.addControl(p),p},n.prototype.addOrientationControl=function(t){var o=new e.control.Rotate({target:t.div,autoHide:t.autoHide||!1});return this.libMap.addControl(o),o},n.prototype.addGraphicScaleControl=function(t){var o=t.units;o&&"deg"==t.units.toLowerCase()?o="degrees":o&&"m"==t.units.toLowerCase()&&(o="metric");var i=new e.control.ScaleLine({target:t.div,units:o,minWidth:t.minWidth});return this.libMap.addControl(i),i},n.prototype.addGraticuleControl=function(t){var o=t||{};o.strokeColor=o.strokeColor||"#000000",o.strokeOpacity=o.strokeOpacity||.2,o.strokeWidth=o.strokeWidth||1;var n=i._hexToRgba(o.strokeColor,o.strokeOpacity),r=new e.Graticule({strokeStyle:new e.style.Stroke({color:n,width:o.strokeWidth})});return r.setMap(this.libMap),this.libMap.graticule=r,r},n.prototype.addMousePositionControl=function(t){var o={};if(t.div&&(o.target=t.div),o.collapsed=!t.maximised,t.systems&&Array.isArray(t.systems)&&t.systems.length>0)for(var i=0;i<t.systems.length;i++)e.proj.get(t.systems[i].crs)&&(o.systems||(o.systems=[]),o.systems.push(t.systems[i]));if(t.units&&Array.isArray(t.units)&&t.units.length>0){o.units=[];for(var n=0;n<t.units.length;n++)"string"==typeof t.units[n]&&o.units.push(t.units[n])}o.displayAltitude=t.displayAltitude,o.displayCoordinates=t.displayCoordinates,t.altitude&&(o.altitude=t.altitude),o.editCoordinates=t.editCoordinates,o.positionMarker=t.positionMarker;var r=new e.control.GeoportalMousePosition(o);return this.libMap.addControl(r),r},n.prototype.addRouteControl=function(t){var o={};t.div&&(o.target=t.div),o.collapsed=!t.maximised,t.graphs&&(o.graphs=t.graphs),t.exclusions&&(o.exclusions=t.exclusions),t.markersOpts&&(o.markersOpts={},t.markersOpts.departure&&(o.markersOpts.departure=t.markersOpts.departure),t.markersOpts.stages&&(o.markersOpts.stages=t.markersOpts.stages),t.markersOpts.arrival&&(o.markersOpts.arrival=t.markersOpts.arrival)),t.routeOptions&&(o.routeOptions=t.routeOptions),t.autocompleteOptions&&(o.autocompleteOptions=t.autocompleteOptions);var i=new e.control.Route(o);return this.libMap.addControl(i),i},n.prototype.addIsocurveControl=function(t){var o={};t.div&&(o.target=t.div),o.collapsed=!t.maximised,t.graphs&&(o.graphs=t.graphs),t.exclusions&&(o.exclusions=t.exclusions),t.methods&&(o.methods=t.methods),t.directions&&(o.directions=t.directions),t.markerOpts&&(o.markerOpts=t.markerOpts),t.isocurveOptions&&(o.isocurveOptions=t.isocurveOptions),t.autocompleteOptions&&(o.autocompleteOptions=t.autocompleteOptions);var i=new e.control.Isocurve(o);return this.libMap.addControl(i),i},n.prototype.addLayerImportControl=function(t){var o={};if(t.div&&(o.target=t.div),o.collapsed=!t.maximised,t.layerTypes&&(o.layerTypes=t.layerTypes),o.webServicesOptions={},t.webServicesOptions?o.webServicesOptions=t.webServicesOptions:(this.mapOptions&&this.mapOptions.proxyUrl&&(o.webServicesOptions.proxyUrl=this.mapOptions.proxyUrl),this.mapOptions&&this.mapOptions.noProxyDomains&&(o.webServicesOptions.noProxyDomains=this.mapOptions.noProxyDomains)),t.defaultStyles){o.vectorStyleOptions={};var n,r,s,a,l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAmCAYAAABpuqMCAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAN1wAADdcBQiibeAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAARDSURBVFiF3ZndaxxVGMZ/Z/YjX00Nadpo1qrFBgu56D9QbAtiLoRC7ywSNK1NURRREBKRFlSwFBW0gnSrJXY1CmISgyjFiyYSFC9ajE3MmpjdjWlMUtNos9lN9mteLzbRuCbZmTMTBB+Yi51znvd5n3nPnjnnjBIR/i/wuh4xpCpI0ojiENAA1AE1wCzwKzCE0EM5l2iShJvSyrXKnFVb8dOK4hmg3AIjifAmaU7ztMy7kYI7Zs6rQwjvka+AXcyiOMZx6XGahuE0AEHVitCFnhGAGoQugqrVaSrOKpNP4FWnSaxCGy1yWpesbyY/tLpwo7p/w0RxWHfI6Zk5q7ZSwhj6Q2sjzJLiXp1JQe+p+mllc4wA1CzHtw37lQmpCha5gbXpVxdJythh9z1kvzJJGrFixPBmOXixl+Z4mONmguZ4mIMXezG8WQsq5cs6tmDfTP7NXiSqN0vTzBD1TQfwbdmDUhX4tuyhvukATTNDlgxZ0SmUtUsgv0TZGPsv9FNSvXfNtpLqvey/0O+KTgF0zNQV7XHP4dsdtVvVKYCOmeqiPbwVOx21W9UpgI6ZWNEe2cSEo3arOgWwb0YYLp5G17Sjdqs6BdCZzYqL9B3dR2puYM221NwAfUf3uaJTAB0zaye5GmbWS6i2gdFQL5mFMCIJMgthRkO9hGobMLPFN4VWdAoptlcAQeUDRoG77YrZwDhQT4tk7JDsV6ZFMggv2+bZwyt2jYDuQnOa94GIFrc4IkzRrkPUM3NKsijatLjF0copsbJ++xec7TTPqw6EI/oB/glT+PC+13Y/aSQNv/Is+tNer09lMn7DMHwAYppp8fvTIpISkVQsFrslqww4M9OuqkgzANzl1MhCyrjZGAycm573pK1yFCyi5FoWvo/FYlPOT2fOqftRXMbB9lkEs+3zbe2f/FD5i3YMj2p3vn8/IV8DZ5yE+Gqkot+JEQCPada5dRhxEriiQ5ya90w+272916F+KpnJDLhjpkUy5HgESNqhZU2Vfr5ne+dSFtOBeso06J6cnEy6d0z0hPwEPGeH8sGVykvfjpfe1NZUci2+mHg7Go2G8z/d/goQVJ9B8S1veMYffujduo/thl+ZwUzDuBqJRGZWt7n/FcDH46lFNVLilar1uiTTxsJTnTssH/QpJVlMNQa5wbGJiWERya3Vz30zzfLb3OveY3dU5j5dp4e80Xdbd3TOu/H/yyAtpjnqgeGS8crRQRks+v5xf5gtY/KM/6NAVebhwvv90bLvHu2o/XId2pJSMmIaxo/RaHRMxN6yZtPM0K5K/7hl/FxVZgZWbs0mPDceeKcuGE95/kpSKUmaImHDNIfHrl+PiIj2zOb+MFvBY7IUOVl2ZG9g6bJH4ckJuRe/2NYZT3myKIkrGM4pNRyLjY+LW09URDb1+uaF0pfm3zJ+7zhRGdq1c9eDuwOBOzdLa/OG2X+APwE8DU64Y/5gfAAAAABJRU5ErkJggg==";if(t.defaultStyles.KML){var p=t.defaultStyles.KML,c={};c.image=new e.style.Icon({src:p.markerSrc||l,anchor:[p.markerXAnchor||25.5,p.markerYAnchor||38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),n=p.strokeOpacity||.8,r=p.strokeColor||"#002A50",c.stroke=new e.style.Stroke({color:i._hexToRgba(r,n),width:p.strokeWidth||4}),s=p.polyFillOpacity||.5,a=p.polyFillColor||"#00B798",c.fill=new e.style.Fill({color:i._hexToRgba(a,s)});var u=new e.style.Style(c);o.vectorStyleOptions.KML={defaultStyle:u}}if(t.defaultStyles.GPX){var h=t.defaultStyles.GPX,d={};d.image=new e.style.Icon({src:h.markerSrc||l,anchor:[h.markerXAnchor||25.5,h.markerYAnchor||38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),n=h.strokeOpacity||.8,r=h.strokeColor||"#002A50",d.stroke=new e.style.Stroke({color:i._hexToRgba(r,n),width:h.strokeWidth||4});var f=new e.style.Style(d);o.vectorStyleOptions.GPX={defaultStyle:f}}if(t.defaultStyles.GeoJSON){var y=t.defaultStyles.GeoJSON,g={};g.image=new e.style.Icon({src:y.markerSrc||l,anchor:[y.markerXAnchor||25.5,y.markerYAnchor||38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),n=y.strokeOpacity||.8,r=y.strokeColor||"#002A50",g.stroke=new e.style.Stroke({color:i._hexToRgba(r,n),width:y.strokeWidth||4}),s=y.polyFillOpacity||.5,a=y.polyFillColor||"#00B798",g.fill=new e.style.Fill({color:i._hexToRgba(r,n)});var m=new e.style.Style(g);o.vectorStyleOptions.GeoJSON={defaultStyle:m}}}var v=new e.control.LayerImport(o);return this.libMap.addControl(v),v},n.prototype._addLayerConfToLayerSwitcher=function(t,e){var o=this.getLibMapControl("layerswitcher");o&&o.addLayer(t,this._layerOptions2layerConf(e))},n.prototype.addLayerSwitcherControl=function(t){var o={layers:[],options:{collapsed:!(t&&t.maximised)}};t.div&&(o.options.target=t.div);for(var i=0;i<this._layers.length;i++){var n=this._layers[i],r={layer:n.obj,config:{}};n.options.title&&(r.config.title=n.options.title),n.options.description&&(r.config.description=n.options.description),n.options.quicklookUrl&&(r.config.quicklookUrl=n.options.quicklookUrl),n.options.legends&&(r.config.legends=n.options.legends),n.options.metadata&&(r.config.metadata=this._filterEmptyMetadata(n.options.metadata)),o.layers.push(r)}var s=new e.control.LayerSwitcher(o);return this.libMap.addControl(s),s},n.prototype._fillStrokeStyles=function(t){var o={},i=null;return t.hasOwnProperty("strokeLineDash")&&(o.lineDash=t.strokeLineDash),t.hasOwnProperty("strokeColor")&&(o.color=t.strokeColor),t.hasOwnProperty("strokeWidth")&&(o.width=t.strokeWidth),Object.keys(o).length>0&&(i=new e.style.Stroke(o)),i},n.prototype._fillPointerStyles=function(t){var o={};return t.hasOwnProperty("radius")&&(o.radius=t.radius),o.stroke=this._fillStrokeStyles(t),t.hasOwnProperty("fillColor")&&(o.fill=new e.style.Fill({color:t.fillColor})),new e.style.Circle(o)},n.prototype.addLengthControl=function(t){var o={};if(t.div&&(o.target=t.div),t.hasOwnProperty("styles")){if(o.styles={},t.styles.hasOwnProperty("pointer")&&(o.styles.pointer=this._fillPointerStyles(t.styles.pointer)),t.styles.hasOwnProperty("start")){var i={};i.stroke=this._fillStrokeStyles(t.styles.start),t.styles.start.hasOwnProperty("fillColor")&&(i.fill=new e.style.Fill({color:t.styles.start.fillColor})),o.styles.start=new e.style.Style(i)}if(t.styles.hasOwnProperty("finish")){var n={};n.stroke=this._fillStrokeStyles(t.styles.finish),t.styles.finish.hasOwnProperty("fillColor")&&(n.fill=new e.style.Fill({color:t.styles.finish.fillColor})),o.styles.finish=new e.style.Style(n)}}t.hasOwnProperty("geodesic")&&(o.geodesic=t.geodesic);var r=new e.control.MeasureLength(o);return this.libMap.addControl(r),r},n.prototype.addAreaControl=function(t){var o={};if(t.div&&(o.target=t.div),t.hasOwnProperty("styles")){if(o.styles={},t.styles.hasOwnProperty("pointer")&&(o.styles.pointer=this._fillPointerStyles(t.styles.pointer)),t.styles.hasOwnProperty("start")){var i={};i.stroke=this._fillStrokeStyles(t.styles.start),t.styles.start.hasOwnProperty("fillColor")&&(i.fill=new e.style.Fill({color:t.styles.start.fillColor})),o.styles.start=new e.style.Style(i)}if(t.styles.hasOwnProperty("finish")){var n={};n.stroke=this._fillStrokeStyles(t.styles.finish),t.styles.finish.hasOwnProperty("fillColor")&&(n.fill=new e.style.Fill({color:t.styles.finish.fillColor})),o.styles.finish=new e.style.Style(n)}}t.hasOwnProperty("geodesic")&&(o.geodesic=t.geodesic);var r=new e.control.MeasureArea(o);return this.libMap.addControl(r),r},n.prototype.addAzimuthControl=function(t){var o={};if(t.div&&(o.target=t.div),t.hasOwnProperty("styles")){if(o.styles={},t.styles.hasOwnProperty("pointer")&&(o.styles.pointer=this._fillPointerStyles(t.styles.pointer)),t.styles.hasOwnProperty("start")){var i={};i.stroke=this._fillStrokeStyles(t.styles.start),t.styles.start.hasOwnProperty("fillColor")&&(i.fill=new e.style.Fill({color:t.styles.start.fillColor})),o.styles.start=new e.style.Style(i)}if(t.styles.hasOwnProperty("finish")){var n={};n.stroke=this._fillStrokeStyles(t.styles.finish),t.styles.finish.hasOwnProperty("fillColor")&&(n.fill=new e.style.Fill({color:t.styles.finish.fillColor})),o.styles.finish=new e.style.Style(n)}}t.hasOwnProperty("geodesic")&&(o.geodesic=t.geodesic);var r=new e.control.MeasureAzimuth(o);return this.libMap.addControl(r),r},n.prototype.addElevationPathControl=function(t){var o={};if(t.div&&(o.target=t.div),t.styles&&(o.stylesOptions={},t.styles.hasOwnProperty("pointer")&&(o.stylesOptions.draw={},o.stylesOptions.draw.pointer=this._fillPointerStyles(t.styles.pointer)),t.styles.hasOwnProperty("start")&&(o.stylesOptions.draw||(o.stylesOptions.draw={}),o.stylesOptions.draw.start=this._fillStrokeStyles(t.styles.start)),t.styles.hasOwnProperty("finish")&&(o.stylesOptions.draw||(o.stylesOptions.draw={}),o.stylesOptions.draw.finish=this._fillStrokeStyles(t.styles.finish)),t.styles.hasOwnProperty("marker"))){var i={};t.styles.marker.src&&(i.src=t.styles.marker.src,i.anchor=[t.styles.marker.xAnchor?t.styles.marker.xAnchor:0,t.styles.marker.yAnchor?t.styles.marker.yAnchor:0]),Object.keys(i).length>0&&(o.stylesOptions.marker=new e.style.Icon(i))}t.elevationPathOptions&&(o.elevationPathOptions=t.elevationPathOptions),t.displayProfileOptions&&(o.displayProfileOptions=t.displayProfileOptions);var n=new e.control.ElevationPath(o);return this.libMap.addControl(n),n},n.prototype.addSearchControl=function(t){var o={};o.div&&(o.target=t.div),o.collapsed=!t.maximised,o.zoomTo=t.zoomTo||null,t.hasOwnProperty("resources")&&(o.resources={},t.resources.hasOwnProperty("geocode")&&(o.resources.geocode=t.resources.geocode),t.resources.hasOwnProperty("autocomplete")&&(o.resources.autocomplete=t.resources.autocomplete)),o.displayAdvancedSearch=!(!t.hasOwnProperty("displayAdvancedSearch")||!0!==t.displayAdvancedSearch),t.hasOwnProperty("advancedSearch")&&(o.advancedSearch=t.advancedSearch),t.hasOwnProperty("geocodeOptions")&&(o.geocodeOptions=t.geocodeOptions),t.hasOwnProperty("autocompleteOptions")&&(o.autocompleteOptions=t.autocompleteOptions);var i=new e.control.SearchEngine(o);return this.libMap.addControl(i),i},n.prototype.addReverseSearchControl=function(t){var o={};o.div&&(o.target=t.div),o.collapsed=!t.maximised,t.hasOwnProperty("resources")&&(o.resources=t.resources),t.hasOwnProperty("reverseGeocodeOptions")&&(o.reverseGeocodeOptions=t.reverseGeocodeOptions),t.hasOwnProperty("delimitations")&&(o.delimitations=t.delimitations);var i=new e.control.ReverseGeocode(o);return this.libMap.addControl(i),i},n.prototype.addDrawingControl=function(t){var o={};if(t.div&&(o.target=t.div),o.collapsed=!t.maximised,t.hasOwnProperty("tools")&&(o.tools=t.tools),t.hasOwnProperty("labels")&&(o.labels=t.labels),t.hasOwnProperty("defaultStyles")&&(o.defaultStyles=t.defaultStyles),t.hasOwnProperty("cursorStyle")&&(o.cursorStyle=t.cursorStyle),t.hasOwnProperty("markersList")&&Array.isArray(t.markersList)&&t.markersList.length>0){o.markersList=[];for(var i=0;i<t.markersList.length;i++){var n=t.markersList[i];if(n.src){var r={src:n.src};n.xAnchor&&n.yAnchor&&(r.anchor=[n.xAnchor,n.yAnchor]),o.markersList.push(r)}}}if(t.layer){var s=this._getLayersObj([t.layer]);s&&s.length>0&&(o.layer=s[0])}var a=new e.control.Drawing(o);return this.libMap.addControl(a),a},n.prototype.addAttributionsControl=function(t){var o={};t.div&&(o.target=t.div),o.collapsed=!t.maximised;var i=new e.control.GeoportalAttribution(o);return this.libMap.addControl(i),i},n.prototype.addCameraControl=function(t){return null},n.prototype.addGetFeatureInfoControl=function(t){var o={};o.options={},t.hasOwnProperty("options")&&(t.options.hasOwnProperty("auto")&&(o.options.auto=t.options.auto),t.options.hasOwnProperty("active")&&(o.options.active=t.options.active),t.options.hasOwnProperty("hidden")&&(o.options.hidden=t.options.hidden),t.options.hasOwnProperty("defaultEvent")&&(o.options.defaultEvent=t.options.defaultEvent),t.options.hasOwnProperty("defaultInfoFormat")&&(o.options.defaultInfoFormat=t.options.defaultInfoFormat),t.options.hasOwnProperty("cursorStyle")&&(o.options.cursorStyle=t.options.cursorStyle),t.options.hasOwnProperty("autoPanOptions")||(t.options.autoPanOptions=i.DEFAULT_AUTOPAN_OPTIONS),o.options.autoPan=t.options.autoPanOptions.autoPan,o.options.autoPanAnimation={duration:t.options.autoPanOptions.duration},o.options.autoPanMargin=t.options.autoPanOptions.margin),this.mapOptions&&this.mapOptions.proxyUrl&&(o.options.proxyUrl=this.mapOptions.proxyUrl),this.mapOptions&&this.mapOptions.noProxyDomains&&(o.options.noProxyDomains=this.mapOptions.noProxyDomains),o.layers=[];for(var n in t.layers)for(var r=t.layers[n],s=0;s<this._layers.length;++s){var a=this._layers[s];if(n===a.id){if(a.options.queryable){var l={obj:a.obj};r.event&&(l.event=r.event),a.options.gfiFormat&&(l.infoFormat=a.options.gfiFormat),o.layers.push(l);break}console.log("GetFeatureInfo layer '"+n+"' has not been added to control because this layer is not queryable.")}}var p=new e.control.GetFeatureInfo(o);return this.libMap.addControl(p),p},n.prototype.removeControls=function(t){if(!t||Array.isArray(t)&&0==t.length)return void console.log("No control to remove.");Array.isArray(t)||(t=[t]);for(var e=null,o=0;o<t.length;o++){e=t[o];var i=this._findRegisteredControl(e);i>=0&&this._controls.splice(i,1);var n=this.getLibMapControl(e);if(n)if("graticule"!=e.toLowerCase()){if(Array.isArray(n))return;this.libMap.removeControl(n)}else n.setMap(null),delete this.getLibMap().graticule;else console.log("Impossible to remove control ["+e+"] : not found or unhandled")}},n.prototype.getLibMapControl=function(t){var e=null;if(!n.CONTROLSCLASSES.hasOwnProperty(t.toLowerCase())||!n.CONTROLSCLASSES[t.toLowerCase()])return e;var o=n.CONTROLSCLASSES[t.toLowerCase()];if(Array.isArray(o)){var i=[];return this.getLibMap().getInteractions().forEach(function(t){for(var e=0;e<o.length;e++)if(t instanceof o[e]){i.push(t);break}},this),i.length>0?i:null}if("graticule"==t.toLowerCase())return this.getLibMap().hasOwnProperty("graticule")?this.getLibMap().graticule:null;var r=this.getLibMap().getControls().getArray();if(0==r.length)return e;for(var s=0;s<r.length;s++){var a=r[s];if(a instanceof o){e=a;break}}return e},n.prototype._addMarkers=function(t){if(!Array.isArray(t))return void console.log("Can not process markersOptions. It is not an Array.");var o=null,n=this,r=0,s=function(t){var o=n.getLibMap().getEventPixel(t);e.gp.GfiUtils.displayInfo(n.getLibMap(),n.getLibMap().getCoordinateFromPixel([o[0]+this.mo.ppoffset[0],o[1]+this.mo.ppoffset[1]]),this.mo.content,this.mo.contentType,this.mo.autoPanOptions)};for(r=0;r<t.length;r++){o=t[r],o.hasOwnProperty("content")||(o.content=""),o.hasOwnProperty("url")||(o.url=e.control.DefaultMarkers.lightOrange),o.hasOwnProperty("offset")||(o.offset=e.control.DefaultMarkers.defaultOffset),o.hasOwnProperty("ppoffset")||(o.ppoffset=[0,-15]);var a=!1;o.hasOwnProperty("position")||(o.position={x:this.libMap.getView().getCenter()[0],y:this.libMap.getView().getCenter()[1]},a=!0),o.hasOwnProperty("contentType")||(o.contentType="text/html"),o.hasOwnProperty("autoPanOptions")||(o.autoPanOptions={autoPan:i.DEFAULT_AUTOPAN_OPTIONS.autoPan,autoPanAnimation:{duration:i.DEFAULT_AUTOPAN_OPTIONS.duration},autoPanMargin:i.DEFAULT_AUTOPAN_OPTIONS.margin});var l=[o.position.x,o.position.y];o.position.hasOwnProperty("projection")&&(l=e.proj.transform(l,o.position.projection,this.getProjection()));var p=document.createElement("img");p.src=o.url,p.mo=o;var c=new e.Overlay({position:l,offset:o.offset,element:p});if(this.libMap.addOverlay(c),!0===a){var u=this,h=function(t){var o=[t.position.x,t.position.y];t.position.hasOwnProperty("projection")&&(o=e.proj.transform(o,t.position.projection,u.getProjection())),this.setPosition(o)};this.listen("located",h,c),this.listen("geolocated",h,c)}p.addEventListener("click",s,!0),p.addEventListener("touchend",s,!0)}},n.prototype._getCommonLayerParams=function(t){var e={};if(t.hasOwnProperty("opacity")&&(e.opacity=t.opacity),t.hasOwnProperty("visible")&&(e.visibility=t.visible),t.hasOwnProperty("zIndex")&&(e.position=t.zIndex),t.hasOwnProperty("maxResolution")){var o=this._getZoomFromResolution(t.maxResolution);e.minZoom=o}if(t.hasOwnProperty("minResolution")){var i=this._getZoomFromResolution(t.minResolution);e.maxZoom=i}return e},n.prototype._applyCommonLayerParams=function(t){var e={};if(t.hasOwnProperty("opacity")&&(e.opacity=t.opacity),t.hasOwnProperty("visibility")&&(e.visible=t.visibility),t.hasOwnProperty("position")&&(e.zIndex=t.position),t.hasOwnProperty("maxZoom")&&t.maxZoom>=0&&t.maxZoom<=20){var o=this._getResolutionFromZoomLevel(t.maxZoom);e.minResolution=o}if(t.hasOwnProperty("minZoom")&&t.minZoom>=0&&t.minZoom<=20){var i=this._getResolutionFromZoomLevel(t.minZoom);e.maxResolution=i}return t.hasOwnProperty("grayScaled")&&(e.grayScaled=t.grayScaled),e},n.prototype._checkLayerParams=function(t){return!!i.prototype._checkLayerParams.apply(this,arguments)},n.prototype._addRasterLayer=function(t){var o=Object.keys(t)[0],i=t[o];if(!0!==i.isElevation){var n=this._applyCommonLayerParams(i);switch(i.format.toUpperCase()){case"WMS":var r={};r.LAYERS=i.layers.join(","),i.version&&(r.VERSION=i.version),
i.stylesNames=i.stylesNames||i.stylesName,i.stylesNames&&(Array.isArray(i.stylesNames)?r.STYLES=i.stylesNames.join():console.log("'stylesNames' parameter should be an array of style names (string)")),i.outputFormat&&(r.FORMAT=i.outputFormat),i.backgroundColor?(r.BGCOLOR=i.backgroundColor,r.TRANSPARENT="FALSE"):r.TRANSPARENT="TRUE";var s={url:i.url,params:r};i.hasOwnProperty("projection")&&(s.projection=i.projection),i.hasOwnProperty("tiled")&&!0===i.tiled?n.source=new e.source.TileWMS(s):n.source=new e.source.ImageWMS(s);break;case"WMTS":var a=this._getWMTSDefaultOpts();for(var l in i)a[l]=i[l];i=a;var s={url:i.url,layer:i.layer,matrixSet:i.tileMatrixSet,format:i.outputFormat,version:i.version,style:i.styleName,tileGrid:new e.tilegrid.WMTS({origin:[i.topLeftCorner.x,i.topLeftCorner.y],resolutions:i.resolutions,matrixIds:i.matrixIds})};i.url.indexOf("{TileMatrixSet}")>0||i.url.indexOf("{TileRow}")>0||i.url.indexOf("{TileCol}")>0?s.requestEncoding="REST":s.requestEncoding="KVP",n.source=new e.source.WMTSExtended(s);break;case"OSM":n.source=new e.source.OSM({url:i.url})}if(n.hasOwnProperty("source")){i.hasOwnProperty("originators")&&(n.source._originators=i.originators);var p=null;p="WMS"!=i.format.toUpperCase()||i.hasOwnProperty("tiled")&&!0===i.tiled?new e.layer.Tile(n):new e.layer.Image(n),n.hasOwnProperty("zIndex")&&0===n.zIndex&&(p._forceNullzIndex=!0);var c={id:o,obj:p,options:i};i.hasOwnProperty("grayScaled")&&i.grayScaled&&this._colorGrayscaleLayerSwitch(c,!0),this._layers.push(c),this.libMap.addLayer(c.obj),this._addLayerConfToLayerSwitcher(c.obj,i)}}else{var u={id:o,obj:"3D-only-layer",options:i};this._3Dlayers||(this._3Dlayers=[]),this._3Dlayers.push(u)}},n.prototype._addVectorLayer=function(t){var o=Object.keys(t)[0],n=t[o],r=this._applyCommonLayerParams(n),s=n.styleOptions||{},a=this.mapOptions.defaultFeaturesStyle||{},l=i.DEFAULT_VECTORLAYERS_STYLES,p={};p.image=new e.style.Icon({src:s.markerSrc||a.markerSrc||l.markerSrc,anchor:[s.markerXAnchor||a.markerXAnchor||l.markerXAnchor,s.markerYAnchor||a.markerYAnchor||l.markerYAnchor],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),p.stroke=new e.style.Stroke({color:i._hexToRgba(s.strokeColor||a.strokeColor||l.strokeColor,s.strokeOpacity||a.strokeOpacity||l.strokeOpacity),width:s.strokeWidth||a.strokeWidth||l.strokeWidth}),p.fill=new e.style.Fill({color:i._hexToRgba(s.polyFillColor||a.polyFillColor||l.polyFillColor,s.polyFillOpacity||a.polyFillOpacity||l.polyFillOpacity)}),p.text=new e.style.Text({font:"16px Sans",textAlign:"left",fill:new e.style.Fill({color:i._hexToRgba(s.textColor||a.textColor||l.textColor,1)})}),s.textStrokeColor&&(p.text.stroke=new e.style.Stroke({color:i._hexToRgba(s.textStrokeColor||a.textStrokeColor||l.textStrokeColor,1),width:1}));var c=new e.style.Style(p);switch(n.format.toUpperCase()){case"KML":var u=this.setProxy(n.url),h=new e.format.KMLExtended({extractStyles:n.extractStyles,showPointNames:n.showPointNames,defaultStyle:[c]});r.source=new e.source.Vector({features:new e.Collection,loader:function(t,e,o){Gp.Protocols.XHR.call({url:u,method:"GET",timeOut:15e3,onResponse:function(t){var e=h.readProjection(t),i=h.readFeatures(t,{dataProjection:e,featureProjection:o});i.length>0&&r.source.addFeatures(i)},onFailure:function(t){console.log("[ol.control.LayerImport] Kml/Gpx request failed : ",t)}})}});break;case"GPX":r.source=new e.source.Vector({url:this.setProxy(n.url),format:new e.format.GPX}),r.style=c;break;case"GEORSS":break;case"GEOJSON":r.source=new e.source.Vector({url:this.setProxy(n.url),format:new e.format.GeoJSON}),r.style=c;break;case"WFS":var d="",f="";n.version||(n.version="2.0.0"),n.outputFormat||(n.outputFormat="application/json"),n.maxFeatures&&(d=parseInt(n.version.charAt(0))<2?"&maxFeatures="+n.maxFeatures:"&count="+n.maxFeatures),n.sld&&(f="&sld="+n.sld);var y=this.setProxy(n.url),g=n.outputFormat.toLowerCase(),m=null,v={};n.projection&&(v.defaultDataProjection=n.projection,v.srsName=n.projection),m=g.indexOf("gml")>0||g.indexOf("xml")>0?g.indexOf("2.1")>0||g.indexOf("gml2")>0?new e.format.GML2(v):new e.format.GML3(v):new e.format.GeoJSON(v),r.source=new e.source.Vector({format:m,url:function(t,e,o){return y+"?service=WFS&request=GetFeature&version="+n.version+"&typename="+n.typeNames+"&outputFormat="+n.outputFormat+"&srsname="+o.getCode()+"&bbox="+t.join(",")+","+o.getCode()+d+f},strategy:e.loadingstrategy.bbox});break;case"drawing":r.source=new e.source.Vector({})}if(r.hasOwnProperty("source")){n.hasOwnProperty("originators")&&(r.source._originators=n.originators);var _=new e.layer.Vector(r);this._layers.push({id:o,obj:_,options:n}),this.libMap.addLayer(_),this._addLayerConfToLayerSwitcher(_,n);var b=this.libMap,E=r.source;if(b.getView()&&b.getSize()&&E.getExtent){if(n.zoomToExtent||!1){var S=E.on("change",function(){var t=E.getExtent();"ready"===E.getState()&&t[0]!==1/0&&(e.Observable.unByKey(S),b.getView().fit(t,{maxZoom:18}))});setTimeout(function(){E.dispatchEvent("change")},100)}}}},n.prototype._addGeoportalLayer=function(t){var o=Object.keys(t)[0],i=t[o],n={};i.hasOwnProperty("opacity")&&(n.opacity=i.opacity),i.hasOwnProperty("visibility")&&(n.visible=i.visibility),i.hasOwnProperty("position")&&(n.zIndex=i.position),i.hasOwnProperty("minZoom")&&i.minZoom>=0&&i.minZoom<=28&&(n.maxResolution=this._getResolutionFromZoomLevel(i.minZoom)),i.hasOwnProperty("maxZoom")&&i.maxZoom>=0&&i.maxZoom<=28&&(n.minResolution=this._getResolutionFromZoomLevel(i.maxZoom));var r=null;switch(i.format.toUpperCase()){case"WMTS":r=e.layer.GeoportalWMTS;break;case"WMS":r=e.layer.GeoportalWMS;break;default:console.log("addGeoportalLayer : no class found for "+i.format)}var s=new r({layer:o,olParams:n});i.hasOwnProperty("originators")&&(s.getSource()._originators=i.originators),n.hasOwnProperty("zIndex")&&0===n.zIndex&&(s._forceNullzIndex=!0),this._layers.push({id:o,obj:s,options:i}),this.libMap.addLayer(s),this._addLayerConfToLayerSwitcher(s,i)},n.prototype.removeLayers=function(t){if(!i.prototype.removeLayers.apply(this,arguments))return!1;this._getLayersObj(t).forEach(function(t,e,o){this.libMap.removeLayer(t.obj)},this)},n.prototype.modifyLayers=function(t){if(!i.prototype.modifyLayers.apply(this,arguments))return!1;var e=Object.keys(t);this._getLayersObj(e).forEach(function(e){var o=this._applyCommonLayerParams(t[e.id]);o.hasOwnProperty("opacity")&&e.obj.setOpacity(o.opacity),o.hasOwnProperty("visible")&&e.obj.setVisible(o.visible),o.hasOwnProperty("zIndex")&&(e.obj.setZIndex(o.zIndex),0===o.zIndex&&(e.obj._forceNullzIndex=!0),0!==o.zIndex&&e.obj._forceNullzIndex&&(e.obj._forceNullzIndex=!1)),o.hasOwnProperty("minResolution")&&e.obj.setMinResolution(o.minResolution),o.hasOwnProperty("maxResolution")&&e.obj.setMaxResolution(o.maxResolution),o.hasOwnProperty("grayScaled")&&this._changeLayerColor(e.id,o.grayScaled)},this)},n.prototype.getProjection=function(){return this.libMap.getView().getProjection().getCode()},n.prototype.getCenter=function(){return{x:this.libMap.getView().getCenter()[0],y:this.libMap.getView().getCenter()[1]}},n.prototype.getViewExtent=function(t){var o={};if(this.libMap&&this.libMap.getView()){var i=this.libMap.getView().calculateExtent(this.libMap.getSize()),n=this.libMap.getView().getProjection().getCode();t&&t!=n&&(i=e.proj.transformExtent(i,n,t)),o.left=i[0],o.right=i[2],o.bottom=i[1],o.top=i[3]}return o},n.prototype.getAzimuth=function(){return 180*this.libMap.getView().getRotation()/Math.PI},n.prototype.getZoom=function(){return this._getZoomFromResolution(this.getResolution())},n.prototype.getResolution=function(){return this.libMap.getView().getResolution()},n.prototype.getLibMap=function(){return this.libMap},n.prototype.setProjection=function(t){var o=new e.View({center:this.libMap.getView().getCenter(),projection:t,rotation:this.libMap.getView().getRotation(),zoom:this.getZoom()});this.libMap.setView(o)},n.prototype.setXYCenter=function(t){if(!t.hasOwnProperty("x")||!t.hasOwnProperty("y"))return void console.log("no valid coordinates for map center");var o=[t.x,t.y],i=this.libMap.getView().getProjection().getCode();t.projection&&t.projection!=i&&(o=e.proj.transform(o,t.projection,i)),this.libMap.getView().setCenter(o)},n.prototype.setAutoCenter=function(t,e){this.setXYCenter(t,e)},n.prototype.setAzimuth=function(t){this.libMap.getView().setRotation(t*Math.PI/180)},n.prototype.setZoom=function(t){this.libMap.getView().setZoom(t)},n.prototype.setResolution=function(t){this.libMap.getView().setResolution(t)},n.prototype.zoomIn=function(){this.libMap.getView().setZoom(this.getZoom()+1)},n.prototype.zoomOut=function(){this.libMap.getView().setZoom(this.getZoom()-1)},n.prototype._getLayerOpts=function(t,e){var o=null;e=e||this._layers;for(var i=0;i<e.length;i++){var n=e[i];if(n.obj===t){o={},o[n.id]=n.options;break}}return o},n.prototype._registerUnknownLayer=function(t){var e="unknownLayer";t.hasOwnProperty("gpResultLayerId")&&(e=t.gpResultLayerId),e+="-"+Date.now();var o={};if(0===e.indexOf("drawing-"))o.format="drawing";else if(0===e.indexOf("layerimport:KML"))o.format="KML";else if(0===e.indexOf("layerimport:GPX"))o.format="GPX";else if(0===e.indexOf("layerimport:GeoJSON"))o.format="GeoJSON";else if(0===e.indexOf("layerimport:WMS")){if(o.format="WMS",t.gpGFIparams&&(t.gpGFIparams.queryable&&(o.queryable=!0),Array.isArray(t.gpGFIparams.formats))){o.gfiFormat=t.gpGFIparams.formats[0];for(var i=0;i<t.gpGFIparams.formats.length;i++)if("text/html"===t.gpGFIparams.formats[i]){o.gfiFormat="text/html";break}}}else 0===e.indexOf("layerimport:WMTS")&&(o.format="WMTS");this._layers.push({id:e,obj:t,options:o});var n={};return n[e]={},n},n.prototype.getLSLayerContainerDivId=function(t){var e=this._findRegisteredControl("layerswitcher");if(e<0)return null;var o=this._getLayersObj([t]);if(o.length>0){return this._controls[e].obj.getLayerDOMId(o[0].obj)}return null},n.prototype.listen=function(t,e,o){if(!i.prototype.listen.apply(this,arguments))return!1;o=o||this;var r=this,s=null;switch(t){case"mapLoaded":case"mapFailure":case"located":case"geolocated":case"configured":break;case"centerChanged":s=this.libMap.getView().on("change:center",function(t){var i={};t.oldValue&&(i.oldCenter={x:t.oldValue[0],y:t.oldValue[1]}),i.newCenter={x:this.libMap.getView().getCenter()[0],y:this.libMap.getView().getCenter()[1]},e.call(o,i)},this);break;case"zoomChanged":s=this.libMap.getView().on("change:resolution",function(t){e.call(o,{oldZoom:this._getZoomFromResolution(t.oldValue),newZoom:this._getZoomFromResolution(this.libMap.getView().getResolution())})},this);break;case"azimuthChanged":s=this.libMap.getView().on("change:rotation",function(t){e.call(o,{oldAzimuth:180*t.oldValue/Math.PI,newAzimuth:180*this.libMap.getView().getRotation()/Math.PI})},this);break;case"tiltChanged":case"projectionChanged":break;case"layerChanged":s=this.libMap.getLayers().on("add",function(t){var i=t.element,n=this._getLayerOpts(i);n||(n=this._registerUnknownLayer(i)),e.call(o,{layerAdded:n,position:i.getZIndex()})},this),this._registerEvent(s,t,e,o),s=this.libMap.getLayers().on("remove",function(t){var i=t.element,n=this._getLayerOpts(i)||this._getLayerOpts(i,this._layersRemoved),r=o.getLibMap();r.featuresOverlay&&n[r.featuresOverlay.getId()]&&(r.removeOverlay(r.featuresOverlay),r.featuresOverlay=null),e.call(o,{layerRemoved:n})},this),this._registerEvent(s,t,e,o),s=null;for(var a in n.LAYERPROPERTIES)this.libMap.getLayers().forEach(function(i,l,p){var c=this._getLayerOpts(i);if("grayScaled"===a){var u=function(t){e.call(o,{property:"grayScaled",oldValue:t.detail.oldValue,newValue:t.detail.newValue,layerChanged:c})},h=r._registerEvent(u,t,e,o);h.eventOrigin=i,h.eventType="change:"+a,h.eventOrigin.addEventListener(h.eventType,u,this)}else s=i.on("change:"+a,function(t){var i={};i[t.key]=t.oldValue;var s=r._getCommonLayerParams(i),a={};a[t.key]=this.get(t.key);var l=r._getCommonLayerParams(a);e.call(o,{property:n.LAYERPROPERTIES[t.key],oldValue:s[n.LAYERPROPERTIES[t.key]],newValue:l[n.LAYERPROPERTIES[t.key]],layerChanged:c})},i),this._registerEvent(s,t,e,o),s=null},r);break;case"controlChanged":break;default:console.log("unhandled event : "+t)}return s&&this._registerEvent(s,t,e,o),!0},n.prototype.forget=function(t,o){if(!i.prototype.forget.apply(this,arguments))return!1;var n=this._events[t];if(!n)return console.log("nothing to forget for : "+t),!1;for(var r=null,s=n.length-1;s>=0;s--)n[s].action==o&&(r=n[s].key,n.splice(s,1),e.Observable.unByKey(r))},n.prototype._changeLayerColor=function(t,e){var o=this._getLayerIndexByLayerId(t),n=this._layers[o];switch(n.options.format.toUpperCase()){case"KML":case"GPX":case"WFS":case"drawing":return void console.log("[OL3.prototype._changeLayerColor] warning : _changeLayerColor not allowed on vector layers (layer id: "+t+")")}this._colorGrayscaleLayerSwitch(n,e);var r=i.CustomEvent("change:grayScaled",{detail:{oldValue:!e,newValue:e}});n.obj.dispatchEvent(r)},n.prototype._colorGrayscaleLayerSwitch=function(t,o){function i(t){t.crossOrigin=null;var e=document.createElement("canvas"),o=e.getContext("2d");e.width=t.width,e.height=t.height,o.drawImage(t,0,0);for(var i=o.getImageData(0,0,t.width,t.height),n=i.data,r=0;r<n.length;r+=4){var s=(n[r]+n[r+1]+n[r+2])/3;n[r]=s,n[r+1]=s,n[r+2]=s}return o.putImageData(i,0,0),e.toDataURL()}function n(t,e){var o=i(t);t.src="",t.onload=function(){e.changed()},t.src=o}function r(t){t.image.getImage().crossOrigin="Anonymous"}function s(t){t.tile.getImage().crossOrigin="Anonymous"}function a(t){n(t.image.getImage(),t.target)}function l(t){n(t.tile.getImage(),t.target)}var p=t.obj.getSource();o?p instanceof e.source.ImageWMS?(p.loadstartListenerKey=p.on("imageloadstart",r),p.loadendListenerKey=p.on("imageloadend",a)):(p.loadstartListenerKey=p.on("tileloadstart",s),p.loadendListenerKey=p.on("tileloadend",l)):(e.Observable.unByKey(p.loadstartListenerKey),e.Observable.unByKey(p.loadendListenerKey),p.loadstartListenerKey=null,p.loadendListenerKey=null),p.refresh()},n}(0,ol,Gp,IMap),Map=function(t,e){var o={load:function(t,e){if(!t)throw new Error("missing parameter div !");if("string"==typeof t&&(t=document.getElementById(t)),!t)throw new Error("HTML element with id ["+t+"] not found.");e||(e={}),e.hasOwnProperty("library")||(e.library="ol3");var o=null,i=null;null!==this.__classOl&&"function"==typeof this.__classOl&&(o=this.__classOl),null!==this.__classItowns&&"function"==typeof this.__classItowns&&(i=this.__classItowns);var n=null;switch(e.library){case"ol3":if(null===o||"function"!=typeof o)throw new Error("library ol is not loaded !");n=new o({div:t,mapOptions:e});break;case"itowns":if(null===i||"function"!=typeof i)throw new Error("library itowns is not loaded !");n=new i({div:t,mapOptions:e});break;default:throw new Error("not supported library")}return this._prototype=Object.getPrototypeOf(n),n}};return o}(),AHN=function(t,e){var o="undefined"!=typeof window?window:{},i=o.Gp||{};return i.Map=t,void 0!==ol3OL3&&void 0!==it2IT?(console.log("Lib. ol3 et itowns détectées !"),i.Map.__classOl=ol3OL3,i.Map.__classItowns=it2IT,i.Map._class=i.Map.__classOl.prototype):void 0!==ol3OL3?(console.log("Lib. ol3 détectée !"),i.Map.__classOl=ol3OL3,i.Map._class=i.Map.__classOl.prototype):void 0!==it2IT?(console.log("Lib. itowns détectée !"),i.Map.__classItowns=it2IT,i.Map._class=i.Map.__classItowns.prototype):console.log("Aucune lib. détectée !?"),i.sdkVersion="1.3.0",i.sdkDate="2018-06-25",o.Gp=i,o.Gp}(Map),window.ol=ol;
return Gp;
}));
